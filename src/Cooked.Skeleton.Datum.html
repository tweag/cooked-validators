<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- | This module exposes the notion of datums as they are handled within a</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- 'Cooked.Skeleton.TxSkel'</span><span>
</span><span id="line-3"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cooked.Skeleton.Datum</span><span>
</span><span id="line-4"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#DatumConstrs"><span class="hs-identifier">DatumConstrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-5"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#DatumResolved"><span class="hs-identifier">DatumResolved</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#DatumKind"><span class="hs-identifier">DatumKind</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier">TxSkelOutDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#datumKindResolvedP"><span class="hs-identifier">datumKindResolvedP</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumKindAT"><span class="hs-identifier">txSkelOutDatumKindAT</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumResolvedAT"><span class="hs-identifier">txSkelOutDatumResolvedAT</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumTypedAT"><span class="hs-identifier">txSkelOutDatumTypedAT</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumDatumAF"><span class="hs-identifier">txSkelOutDatumDatumAF</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumDatumHashAF"><span class="hs-identifier">txSkelOutDatumDatumHashAF</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumOutputDatumG"><span class="hs-identifier">txSkelOutDatumOutputDatumG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">where</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Pretty.Class.html"><span class="hs-identifier">Cooked.Pretty.Class</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Pretty.Plutus.html"><span class="hs-identifier">Cooked.Pretty.Plutus</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">cast</span></span><span class="hs-special">)</span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Optics.Core</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.Script.Utils.Data</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Script</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusLedgerApi.V3</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Api</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Type.Reflection</span></span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="annot"><span class="hs-comment">-- * Type constraints on datums used in cooked-validators</span></span><span>
</span><span id="line-27"></span><span>
</span><span id="line-28"></span><span class="annot"><span class="hs-comment">-- | Type constraints that must be satisfied by the datum content</span></span><span>
</span><span id="line-29"></span><span class="hs-keyword">type</span><span> </span><span id="DatumConstrs"><span class="annot"><a href="Cooked.Skeleton.Datum.html#DatumConstrs"><span class="hs-identifier hs-var">DatumConstrs</span></a></span></span><span> </span><span id="local-6989586621679803952"><span class="annot"><a href="#local-6989586621679803952"><span class="hs-identifier hs-type">datum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-30"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679803952"><span class="hs-identifier hs-type">datum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803952"><span class="hs-identifier hs-type">datum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="annot"><a href="#local-6989586621679803952"><span class="hs-identifier hs-type">datum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Api.FromData</span></span><span> </span><span class="annot"><a href="#local-6989586621679803952"><span class="hs-identifier hs-type">datum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679803952"><span class="hs-identifier hs-type">datum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679803952"><span class="hs-identifier hs-type">datum</span></a></span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="annot"><span class="hs-comment">-- * Datum kind within a transaction and output</span></span><span>
</span><span id="line-39"></span><span>
</span><span id="line-40"></span><span class="annot"><span class="hs-comment">-- | Whether the datum should be resolved in the transaction</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">data</span><span> </span><span id="DatumResolved"><span class="annot"><a href="Cooked.Skeleton.Datum.html#DatumResolved"><span class="hs-identifier hs-var">DatumResolved</span></a></span></span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-comment">-- | Do not resolve the datum (absent from 'Api.txInfoData')</span></span><span>
</span><span id="line-43"></span><span>    </span><span id="NotResolved"><span class="annot"><a href="Cooked.Skeleton.Datum.html#NotResolved"><span class="hs-identifier hs-var">NotResolved</span></a></span></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | Resolve the datum (present from 'Api.txInfoData')</span></span><span>
</span><span id="line-45"></span><span>    </span><span id="Resolved"><span class="annot"><a href="Cooked.Skeleton.Datum.html#Resolved"><span class="hs-identifier hs-var">Resolved</span></a></span></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679803957"><span id="local-6989586621679803959"><span id="local-6989586621679803963"><span class="annot"><span class="annottext">Int -&gt; DatumResolved -&gt; ShowS
[DatumResolved] -&gt; ShowS
DatumResolved -&gt; String
(Int -&gt; DatumResolved -&gt; ShowS)
-&gt; (DatumResolved -&gt; String)
-&gt; ([DatumResolved] -&gt; ShowS)
-&gt; Show DatumResolved
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; DatumResolved -&gt; ShowS
showsPrec :: Int -&gt; DatumResolved -&gt; ShowS
$cshow :: DatumResolved -&gt; String
show :: DatumResolved -&gt; String
$cshowList :: [DatumResolved] -&gt; ShowS
showList :: [DatumResolved] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679803967"><span id="local-6989586621679803969"><span class="annot"><span class="annottext">DatumResolved -&gt; DatumResolved -&gt; Bool
(DatumResolved -&gt; DatumResolved -&gt; Bool)
-&gt; (DatumResolved -&gt; DatumResolved -&gt; Bool) -&gt; Eq DatumResolved
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: DatumResolved -&gt; DatumResolved -&gt; Bool
== :: DatumResolved -&gt; DatumResolved -&gt; Bool
$c/= :: DatumResolved -&gt; DatumResolved -&gt; Bool
/= :: DatumResolved -&gt; DatumResolved -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679803976"><span id="local-6989586621679803978"><span id="local-6989586621679803980"><span id="local-6989586621679803984"><span id="local-6989586621679803987"><span id="local-6989586621679803990"><span id="local-6989586621679803993"><span class="annot"><span class="annottext">Eq DatumResolved
Eq DatumResolved =&gt;
(DatumResolved -&gt; DatumResolved -&gt; Ordering)
-&gt; (DatumResolved -&gt; DatumResolved -&gt; Bool)
-&gt; (DatumResolved -&gt; DatumResolved -&gt; Bool)
-&gt; (DatumResolved -&gt; DatumResolved -&gt; Bool)
-&gt; (DatumResolved -&gt; DatumResolved -&gt; Bool)
-&gt; (DatumResolved -&gt; DatumResolved -&gt; DatumResolved)
-&gt; (DatumResolved -&gt; DatumResolved -&gt; DatumResolved)
-&gt; Ord DatumResolved
DatumResolved -&gt; DatumResolved -&gt; Bool
DatumResolved -&gt; DatumResolved -&gt; Ordering
DatumResolved -&gt; DatumResolved -&gt; DatumResolved
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: DatumResolved -&gt; DatumResolved -&gt; Ordering
compare :: DatumResolved -&gt; DatumResolved -&gt; Ordering
$c&lt; :: DatumResolved -&gt; DatumResolved -&gt; Bool
&lt; :: DatumResolved -&gt; DatumResolved -&gt; Bool
$c&lt;= :: DatumResolved -&gt; DatumResolved -&gt; Bool
&lt;= :: DatumResolved -&gt; DatumResolved -&gt; Bool
$c&gt; :: DatumResolved -&gt; DatumResolved -&gt; Bool
&gt; :: DatumResolved -&gt; DatumResolved -&gt; Bool
$c&gt;= :: DatumResolved -&gt; DatumResolved -&gt; Bool
&gt;= :: DatumResolved -&gt; DatumResolved -&gt; Bool
$cmax :: DatumResolved -&gt; DatumResolved -&gt; DatumResolved
max :: DatumResolved -&gt; DatumResolved -&gt; DatumResolved
$cmin :: DatumResolved -&gt; DatumResolved -&gt; DatumResolved
min :: DatumResolved -&gt; DatumResolved -&gt; DatumResolved
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="annot"><span class="hs-comment">-- | Options on how to include the datum in the transaction</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">data</span><span> </span><span id="DatumKind"><span class="annot"><a href="Cooked.Skeleton.Datum.html#DatumKind"><span class="hs-identifier hs-var">DatumKind</span></a></span></span><span>
</span><span id="line-50"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-comment">-- | Include the full datum in the UTxO</span></span><span>
</span><span id="line-51"></span><span>    </span><span id="Inline"><span class="annot"><a href="Cooked.Skeleton.Datum.html#Inline"><span class="hs-identifier hs-var">Inline</span></a></span></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Only include the datum hash in the UTxO. Resolve, or do not resolve,</span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-comment">-- the full datum in the transaction body.</span><span>
</span><span id="line-54"></span><span>    </span><span id="Hashed"><span class="annot"><a href="Cooked.Skeleton.Datum.html#Hashed"><span class="hs-identifier hs-var">Hashed</span></a></span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#DatumResolved"><span class="hs-identifier hs-type">DatumResolved</span></a></span><span>
</span><span id="line-55"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679803999"><span id="local-6989586621679804003"><span id="local-6989586621679804006"><span class="annot"><span class="annottext">Int -&gt; DatumKind -&gt; ShowS
[DatumKind] -&gt; ShowS
DatumKind -&gt; String
(Int -&gt; DatumKind -&gt; ShowS)
-&gt; (DatumKind -&gt; String)
-&gt; ([DatumKind] -&gt; ShowS)
-&gt; Show DatumKind
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; DatumKind -&gt; ShowS
showsPrec :: Int -&gt; DatumKind -&gt; ShowS
$cshow :: DatumKind -&gt; String
show :: DatumKind -&gt; String
$cshowList :: [DatumKind] -&gt; ShowS
showList :: [DatumKind] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679804009"><span id="local-6989586621679804012"><span class="annot"><span class="annottext">DatumKind -&gt; DatumKind -&gt; Bool
(DatumKind -&gt; DatumKind -&gt; Bool)
-&gt; (DatumKind -&gt; DatumKind -&gt; Bool) -&gt; Eq DatumKind
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: DatumKind -&gt; DatumKind -&gt; Bool
== :: DatumKind -&gt; DatumKind -&gt; Bool
$c/= :: DatumKind -&gt; DatumKind -&gt; Bool
/= :: DatumKind -&gt; DatumKind -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679804018"><span id="local-6989586621679804021"><span id="local-6989586621679804024"><span id="local-6989586621679804028"><span id="local-6989586621679804031"><span id="local-6989586621679804034"><span id="local-6989586621679804037"><span class="annot"><span class="annottext">Eq DatumKind
Eq DatumKind =&gt;
(DatumKind -&gt; DatumKind -&gt; Ordering)
-&gt; (DatumKind -&gt; DatumKind -&gt; Bool)
-&gt; (DatumKind -&gt; DatumKind -&gt; Bool)
-&gt; (DatumKind -&gt; DatumKind -&gt; Bool)
-&gt; (DatumKind -&gt; DatumKind -&gt; Bool)
-&gt; (DatumKind -&gt; DatumKind -&gt; DatumKind)
-&gt; (DatumKind -&gt; DatumKind -&gt; DatumKind)
-&gt; Ord DatumKind
DatumKind -&gt; DatumKind -&gt; Bool
DatumKind -&gt; DatumKind -&gt; Ordering
DatumKind -&gt; DatumKind -&gt; DatumKind
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: DatumKind -&gt; DatumKind -&gt; Ordering
compare :: DatumKind -&gt; DatumKind -&gt; Ordering
$c&lt; :: DatumKind -&gt; DatumKind -&gt; Bool
&lt; :: DatumKind -&gt; DatumKind -&gt; Bool
$c&lt;= :: DatumKind -&gt; DatumKind -&gt; Bool
&lt;= :: DatumKind -&gt; DatumKind -&gt; Bool
$c&gt; :: DatumKind -&gt; DatumKind -&gt; Bool
&gt; :: DatumKind -&gt; DatumKind -&gt; Bool
$c&gt;= :: DatumKind -&gt; DatumKind -&gt; Bool
&gt;= :: DatumKind -&gt; DatumKind -&gt; Bool
$cmax :: DatumKind -&gt; DatumKind -&gt; DatumKind
max :: DatumKind -&gt; DatumKind -&gt; DatumKind
$cmin :: DatumKind -&gt; DatumKind -&gt; DatumKind
min :: DatumKind -&gt; DatumKind -&gt; DatumKind
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-56"></span><span>
</span><span id="line-57"></span><span class="annot"><span class="hs-comment">-- | Builds a 'DatumKind' from a 'DatumResolved' or optionally retrieves it</span></span><span>
</span><span id="line-58"></span><span class="annot"><a href="Cooked.Skeleton.Datum.html#datumKindResolvedP"><span class="hs-identifier hs-type">datumKindResolvedP</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Prism'</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#DatumKind"><span class="hs-identifier hs-type">DatumKind</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#DatumResolved"><span class="hs-identifier hs-type">DatumResolved</span></a></span><span>
</span><span id="line-59"></span><span id="datumKindResolvedP"><span class="annot"><span class="annottext">datumKindResolvedP :: Prism' DatumKind DatumResolved
</span><a href="Cooked.Skeleton.Datum.html#datumKindResolvedP"><span class="hs-identifier hs-var hs-var">datumKindResolvedP</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-60"></span><span>  </span><span class="annot"><span class="annottext">(DatumResolved -&gt; DatumKind)
-&gt; (DatumKind -&gt; Either DatumKind DatumResolved)
-&gt; Prism' DatumKind DatumResolved
forall b t s a. (b -&gt; t) -&gt; (s -&gt; Either t a) -&gt; Prism s t a b
</span><span class="hs-identifier hs-var">prism</span></span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><span class="annottext">DatumResolved -&gt; DatumKind
</span><a href="Cooked.Skeleton.Datum.html#Hashed"><span class="hs-identifier hs-var">Hashed</span></a></span><span>
</span><span id="line-62"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-63"></span><span>        </span><span class="annot"><span class="annottext">DatumKind
</span><a href="Cooked.Skeleton.Datum.html#Inline"><span class="hs-identifier hs-var">Inline</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DatumKind -&gt; Either DatumKind DatumResolved
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">DatumKind
</span><a href="Cooked.Skeleton.Datum.html#Inline"><span class="hs-identifier hs-var">Inline</span></a></span><span>
</span><span id="line-64"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#Hashed"><span class="hs-identifier hs-type">Hashed</span></a></span><span> </span><span id="local-6989586621679804040"><span class="annot"><span class="annottext">DatumResolved
</span><a href="#local-6989586621679804040"><span class="hs-identifier hs-var">resolved</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DatumResolved -&gt; Either DatumKind DatumResolved
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">DatumResolved
</span><a href="#local-6989586621679804040"><span class="hs-identifier hs-var">resolved</span></a></span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-66"></span><span>
</span><span id="line-67"></span><span class="annot"><span class="hs-comment">-- * 'Cooked.Skeleton.TxSkel' datums</span></span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-comment">-- | Datums to be placed in 'Cooked.Skeleton.TxSkel' outputs, which are either</span><span>
</span><span id="line-70"></span><span class="hs-comment">-- empty, or composed of a datum content and its placement</span><span>
</span><span id="line-71"></span><span class="hs-keyword">data</span><span> </span><span id="TxSkelOutDatum"><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier hs-var">TxSkelOutDatum</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-72"></span><span>  </span><span class="annot"><span class="hs-comment">-- | use no datum</span></span><span>
</span><span id="line-73"></span><span>  </span><span id="NoTxSkelOutDatum"><span class="annot"><a href="Cooked.Skeleton.Datum.html#NoTxSkelOutDatum"><span class="hs-identifier hs-var">NoTxSkelOutDatum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span>
</span><span id="line-74"></span><span>  </span><span class="annot"><span class="hs-comment">-- | use some datum content and associated placement</span></span><span>
</span><span id="line-75"></span><span>  </span><span id="local-6989586621679804042"><span id="SomeTxSkelOutDatum"><span class="annot"><a href="Cooked.Skeleton.Datum.html#SomeTxSkelOutDatum"><span class="hs-identifier hs-var">SomeTxSkelOutDatum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.Datum.html#DatumConstrs"><span class="hs-identifier hs-type">DatumConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679804042"><span class="hs-identifier hs-type">dat</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679804042"><span class="hs-identifier hs-type">dat</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#DatumKind"><span class="hs-identifier hs-type">DatumKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span><span>
</span><span id="line-76"></span><span>
</span><span id="line-77"></span><span id="local-6989586621679804045"><span id="local-6989586621679804047"><span id="local-6989586621679804051"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span></span></span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679804058"><span id="local-6989586621679804062"><span id="local-6989586621679804065"><span id="local-6989586621679804068"><span id="local-6989586621679804071"><span id="local-6989586621679804074"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-80"></span><span>  </span><span id="local-6989586621679804076"><span class="annot"><span class="annottext">compare :: TxSkelOutDatum -&gt; TxSkelOutDatum -&gt; Ordering
</span><a href="#local-6989586621679804076"><span class="hs-identifier hs-var hs-var hs-var hs-var">compare</span></a></span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.Datum.html#NoTxSkelOutDatum"><span class="hs-identifier hs-var">NoTxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.Datum.html#NoTxSkelOutDatum"><span class="hs-identifier hs-var">NoTxSkelOutDatum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-81"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.Datum.html#NoTxSkelOutDatum"><span class="hs-identifier hs-var">NoTxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-82"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.Datum.html#NoTxSkelOutDatum"><span class="hs-identifier hs-var">NoTxSkelOutDatum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-83"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span>
</span><span id="line-84"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.Datum.html#SomeTxSkelOutDatum"><span class="hs-identifier hs-type">SomeTxSkelOutDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">dat -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679804082"><span class="annot"><span class="annottext">BuiltinData
</span><a href="#local-6989586621679804082"><span class="hs-identifier hs-var">dat</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679804083"><span class="annot"><span class="annottext">DatumKind
</span><a href="#local-6989586621679804083"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span>
</span><span id="line-85"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.Datum.html#SomeTxSkelOutDatum"><span class="hs-identifier hs-type">SomeTxSkelOutDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">dat -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679804092"><span class="annot"><span class="annottext">BuiltinData
</span><a href="#local-6989586621679804092"><span class="hs-identifier hs-var">dat'</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679804093"><span class="annot"><span class="annottext">DatumKind
</span><a href="#local-6989586621679804093"><span class="hs-identifier hs-var">b'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-86"></span><span>      </span><span class="annot"><span class="annottext">(BuiltinData, DatumKind) -&gt; (BuiltinData, DatumKind) -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinData
</span><a href="#local-6989586621679804082"><span class="hs-identifier hs-var">dat</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DatumKind
</span><a href="#local-6989586621679804083"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinData
</span><a href="#local-6989586621679804092"><span class="hs-identifier hs-var">dat'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">DatumKind
</span><a href="#local-6989586621679804093"><span class="hs-identifier hs-var">b'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679804096"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-89"></span><span>  </span><span id="local-6989586621679804101"><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679804101"><span class="hs-identifier hs-var">dat</span></a></span></span><span> </span><span id="local-6989586621679804102"><span class="annot"><span class="annottext">== :: TxSkelOutDatum -&gt; TxSkelOutDatum -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span id="local-6989586621679804103"><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679804103"><span class="hs-identifier hs-var">dat'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; TxSkelOutDatum -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679804101"><span class="hs-identifier hs-var">dat</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679804103"><span class="hs-identifier hs-var">dat'</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Ordering -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="annot"><span class="hs-comment">-- * Optics working on 'TxSkelOutDatum'</span></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span class="annot"><span class="hs-comment">-- | Extracts or changes the 'DatumKind' of a 'TxSkelOutDatum'</span></span><span>
</span><span id="line-94"></span><span class="annot"><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumKindAT"><span class="hs-identifier hs-type">txSkelOutDatumKindAT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AffineTraversal'</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#DatumKind"><span class="hs-identifier hs-type">DatumKind</span></a></span><span>
</span><span id="line-95"></span><span id="txSkelOutDatumKindAT"><span class="annot"><span class="annottext">txSkelOutDatumKindAT :: AffineTraversal' TxSkelOutDatum DatumKind
</span><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumKindAT"><span class="hs-identifier hs-var hs-var">txSkelOutDatumKindAT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-96"></span><span>  </span><span class="annot"><span class="annottext">(TxSkelOutDatum -&gt; Either TxSkelOutDatum DatumKind)
-&gt; (TxSkelOutDatum -&gt; DatumKind -&gt; TxSkelOutDatum)
-&gt; AffineTraversal' TxSkelOutDatum DatumKind
forall s t a b.
(s -&gt; Either t a) -&gt; (s -&gt; b -&gt; t) -&gt; AffineTraversal s t a b
</span><span class="hs-identifier hs-var">atraversal</span></span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-98"></span><span>        </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.Datum.html#NoTxSkelOutDatum"><span class="hs-identifier hs-var">NoTxSkelOutDatum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; Either TxSkelOutDatum DatumKind
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.Datum.html#NoTxSkelOutDatum"><span class="hs-identifier hs-var">NoTxSkelOutDatum</span></a></span><span>
</span><span id="line-99"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#SomeTxSkelOutDatum"><span class="hs-identifier hs-type">SomeTxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="annottext">dat
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679804106"><span class="annot"><span class="annottext">DatumKind
</span><a href="#local-6989586621679804106"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DatumKind -&gt; Either TxSkelOutDatum DatumKind
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">DatumKind
</span><a href="#local-6989586621679804106"><span class="hs-identifier hs-var">kind</span></a></span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-101"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(DatumKind -&gt; TxSkelOutDatum -&gt; TxSkelOutDatum)
-&gt; TxSkelOutDatum -&gt; DatumKind -&gt; TxSkelOutDatum
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span>
</span><span id="line-102"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679804108"><span class="annot"><span class="annottext">DatumKind
</span><a href="#local-6989586621679804108"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-103"></span><span>            </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.Datum.html#NoTxSkelOutDatum"><span class="hs-identifier hs-var">NoTxSkelOutDatum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.Datum.html#NoTxSkelOutDatum"><span class="hs-identifier hs-var">NoTxSkelOutDatum</span></a></span><span>
</span><span id="line-104"></span><span>            </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#SomeTxSkelOutDatum"><span class="hs-identifier hs-type">SomeTxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679804111"><span class="annot"><span class="annottext">dat
</span><a href="#local-6989586621679804111"><span class="hs-identifier hs-var">content</span></a></span></span><span> </span><span class="annot"><span class="annottext">DatumKind
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">dat -&gt; DatumKind -&gt; TxSkelOutDatum
forall dat. DatumConstrs dat =&gt; dat -&gt; DatumKind -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.Datum.html#SomeTxSkelOutDatum"><span class="hs-identifier hs-var">SomeTxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="annottext">dat
</span><a href="#local-6989586621679804111"><span class="hs-identifier hs-var">content</span></a></span><span> </span><span class="annot"><span class="annottext">DatumKind
</span><a href="#local-6989586621679804108"><span class="hs-identifier hs-var">kind</span></a></span><span>
</span><span id="line-105"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="annot"><span class="hs-comment">-- | Extracts or changes the 'DatumResolved' of a 'TxSkelOutDatum'</span></span><span>
</span><span id="line-109"></span><span class="annot"><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumResolvedAT"><span class="hs-identifier hs-type">txSkelOutDatumResolvedAT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AffineTraversal'</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#DatumResolved"><span class="hs-identifier hs-type">DatumResolved</span></a></span><span>
</span><span id="line-110"></span><span id="txSkelOutDatumResolvedAT"><span class="annot"><span class="annottext">txSkelOutDatumResolvedAT :: AffineTraversal' TxSkelOutDatum DatumResolved
</span><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumResolvedAT"><span class="hs-identifier hs-var hs-var">txSkelOutDatumResolvedAT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AffineTraversal' TxSkelOutDatum DatumKind
</span><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumKindAT"><span class="hs-identifier hs-var">txSkelOutDatumKindAT</span></a></span><span> </span><span class="annot"><span class="annottext">AffineTraversal' TxSkelOutDatum DatumKind
-&gt; Prism' DatumKind DatumResolved
-&gt; AffineTraversal' TxSkelOutDatum DatumResolved
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Prism' DatumKind DatumResolved
</span><a href="Cooked.Skeleton.Datum.html#datumKindResolvedP"><span class="hs-identifier hs-var">datumKindResolvedP</span></a></span><span>
</span><span id="line-111"></span><span>
</span><span id="line-112"></span><span class="hs-comment">-- | Extracts, or sets, the typed datum of a 'TxSkelOutDatum'. This is attempted</span><span>
</span><span id="line-113"></span><span class="hs-comment">-- in two ways: first, we try to simply cast the content, and then, if it fails,</span><span>
</span><span id="line-114"></span><span class="hs-comment">-- we serialise the content and then attempt to deserialise it to the right</span><span>
</span><span id="line-115"></span><span class="hs-comment">-- type. This second case is specifically useful when the current content is an</span><span>
</span><span id="line-116"></span><span class="hs-comment">-- 'Api.BuiltinData' itself directly, but it can also be used in the cornercase</span><span>
</span><span id="line-117"></span><span class="hs-comment">-- when both types have compatible serialized representation.</span><span>
</span><span id="line-118"></span><span id="local-6989586621679803885"><span id="local-6989586621679803886"><span class="annot"><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumTypedAT"><span class="hs-identifier hs-type">txSkelOutDatumTypedAT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.Datum.html#DatumConstrs"><span class="hs-identifier hs-type">DatumConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803885"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#DatumConstrs"><span class="hs-identifier hs-type">DatumConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803886"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AffineTraversal</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803885"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679803886"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-119"></span><span id="txSkelOutDatumTypedAT"><span class="annot"><span class="annottext">txSkelOutDatumTypedAT :: forall a b.
(DatumConstrs a, DatumConstrs b) =&gt;
AffineTraversal TxSkelOutDatum TxSkelOutDatum a b
</span><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumTypedAT"><span class="hs-identifier hs-var hs-var">txSkelOutDatumTypedAT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-120"></span><span>  </span><span class="annot"><span class="annottext">(TxSkelOutDatum -&gt; Either TxSkelOutDatum a)
-&gt; (TxSkelOutDatum -&gt; b -&gt; TxSkelOutDatum)
-&gt; AffineTraversal TxSkelOutDatum TxSkelOutDatum a b
forall s t a b.
(s -&gt; Either t a) -&gt; (s -&gt; b -&gt; t) -&gt; AffineTraversal s t a b
</span><span class="hs-identifier hs-var">atraversal</span></span><span>
</span><span id="line-121"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-122"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.Datum.html#SomeTxSkelOutDatum"><span class="hs-identifier hs-type">SomeTxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679804122"><span class="annot"><span class="annottext">dat
</span><a href="#local-6989586621679804122"><span class="hs-identifier hs-var">content</span></a></span></span><span> </span><span class="annot"><span class="annottext">DatumKind
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679804123"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679804123"><span class="hs-identifier hs-var">content'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">dat -&gt; Maybe a
forall a b. (Typeable a, Typeable b) =&gt; a -&gt; Maybe b
</span><span class="hs-identifier hs-var">cast</span></span><span> </span><span class="annot"><span class="annottext">dat
</span><a href="#local-6989586621679804122"><span class="hs-identifier hs-var">content</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; Either TxSkelOutDatum a
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679804123"><span class="hs-identifier hs-var">content'</span></a></span><span>
</span><span id="line-123"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.Datum.html#SomeTxSkelOutDatum"><span class="hs-identifier hs-type">SomeTxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679804128"><span class="annot"><span class="annottext">dat
</span><a href="#local-6989586621679804128"><span class="hs-identifier hs-var">content</span></a></span></span><span> </span><span class="annot"><span class="annottext">DatumKind
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679804129"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679804129"><span class="hs-identifier hs-var">content'</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Maybe a
forall a. FromData a =&gt; BuiltinData -&gt; Maybe a
</span><span class="hs-identifier hs-var">Api.fromBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Maybe a) -&gt; BuiltinData -&gt; Maybe a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">dat -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">dat
</span><a href="#local-6989586621679804128"><span class="hs-identifier hs-var">content</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; Either TxSkelOutDatum a
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679804129"><span class="hs-identifier hs-var">content'</span></a></span><span>
</span><span id="line-124"></span><span>        </span><span id="local-6989586621679804131"><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679804131"><span class="hs-identifier hs-var">dc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; Either TxSkelOutDatum a
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679804131"><span class="hs-identifier hs-var">dc</span></a></span><span>
</span><span id="line-125"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-126"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(b -&gt; TxSkelOutDatum -&gt; TxSkelOutDatum)
-&gt; TxSkelOutDatum -&gt; b -&gt; TxSkelOutDatum
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span>
</span><span id="line-127"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679804132"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679804132"><span class="hs-identifier hs-var">content</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-128"></span><span>            </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.Datum.html#NoTxSkelOutDatum"><span class="hs-identifier hs-var">NoTxSkelOutDatum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.Datum.html#NoTxSkelOutDatum"><span class="hs-identifier hs-var">NoTxSkelOutDatum</span></a></span><span>
</span><span id="line-129"></span><span>            </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#SomeTxSkelOutDatum"><span class="hs-identifier hs-type">SomeTxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="annottext">dat
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679804135"><span class="annot"><span class="annottext">DatumKind
</span><a href="#local-6989586621679804135"><span class="hs-identifier hs-var">kind</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b -&gt; DatumKind -&gt; TxSkelOutDatum
forall dat. DatumConstrs dat =&gt; dat -&gt; DatumKind -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.Datum.html#SomeTxSkelOutDatum"><span class="hs-identifier hs-var">SomeTxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679804132"><span class="hs-identifier hs-var">content</span></a></span><span> </span><span class="annot"><span class="annottext">DatumKind
</span><a href="#local-6989586621679804135"><span class="hs-identifier hs-var">kind</span></a></span><span>
</span><span id="line-130"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span>
</span><span id="line-133"></span><span class="annot"><span class="hs-comment">-- | Converts a 'TxSkelOutDatum' into a possible 'Api.Datum'</span></span><span>
</span><span id="line-134"></span><span class="annot"><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumDatumAF"><span class="hs-identifier hs-type">txSkelOutDatumDatumAF</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AffineFold</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Datum</span></span><span>
</span><span id="line-135"></span><span id="txSkelOutDatumDatumAF"><span class="annot"><span class="annottext">txSkelOutDatumDatumAF :: AffineFold TxSkelOutDatum Datum
</span><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumDatumAF"><span class="hs-identifier hs-var hs-var">txSkelOutDatumDatumAF</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AffineTraversal
  TxSkelOutDatum TxSkelOutDatum BuiltinData BuiltinData
forall a b.
(DatumConstrs a, DatumConstrs b) =&gt;
AffineTraversal TxSkelOutDatum TxSkelOutDatum a b
</span><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumTypedAT"><span class="hs-identifier hs-var">txSkelOutDatumTypedAT</span></a></span><span> </span><span class="annot"><span class="annottext">AffineTraversal
  TxSkelOutDatum TxSkelOutDatum BuiltinData BuiltinData
-&gt; Optic A_Getter NoIx BuiltinData BuiltinData Datum Datum
-&gt; AffineFold TxSkelOutDatum Datum
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum)
-&gt; Optic A_Getter NoIx BuiltinData BuiltinData Datum Datum
forall s a. (s -&gt; a) -&gt; Getter s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><span class="hs-identifier hs-var">Api.Datum</span></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="annot"><span class="hs-comment">-- | Converts a 'TxSkelOutDatum' into a possible 'Api.DatumHash'</span></span><span>
</span><span id="line-138"></span><span class="annot"><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumDatumHashAF"><span class="hs-identifier hs-type">txSkelOutDatumDatumHashAF</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AffineFold</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.DatumHash</span></span><span>
</span><span id="line-139"></span><span id="txSkelOutDatumDatumHashAF"><span class="annot"><span class="annottext">txSkelOutDatumDatumHashAF :: AffineFold TxSkelOutDatum DatumHash
</span><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumDatumHashAF"><span class="hs-identifier hs-var hs-var">txSkelOutDatumDatumHashAF</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AffineFold TxSkelOutDatum Datum
</span><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumDatumAF"><span class="hs-identifier hs-var">txSkelOutDatumDatumAF</span></a></span><span> </span><span class="annot"><span class="annottext">AffineFold TxSkelOutDatum Datum
-&gt; Optic A_Getter NoIx Datum Datum DatumHash DatumHash
-&gt; AffineFold TxSkelOutDatum DatumHash
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; DatumHash)
-&gt; Optic A_Getter NoIx Datum Datum DatumHash DatumHash
forall s a. (s -&gt; a) -&gt; Getter s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">Datum -&gt; DatumHash
</span><span class="hs-identifier hs-var">Script.datumHash</span></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="annot"><span class="hs-comment">-- | Converts a 'TxSkelOutDatum' into an 'Api.OutputDatum'</span></span><span>
</span><span id="line-142"></span><span class="annot"><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumOutputDatumG"><span class="hs-identifier hs-type">txSkelOutDatumOutputDatumG</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Getter</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.OutputDatum</span></span><span>
</span><span id="line-143"></span><span id="txSkelOutDatumOutputDatumG"><span class="annot"><span class="annottext">txSkelOutDatumOutputDatumG :: Getter TxSkelOutDatum OutputDatum
</span><a href="Cooked.Skeleton.Datum.html#txSkelOutDatumOutputDatumG"><span class="hs-identifier hs-var hs-var">txSkelOutDatumOutputDatumG</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TxSkelOutDatum -&gt; OutputDatum)
-&gt; Getter TxSkelOutDatum OutputDatum
forall s a. (s -&gt; a) -&gt; Getter s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; OutputDatum
forall a. ToOutputDatum a =&gt; a -&gt; OutputDatum
</span><span class="hs-identifier hs-var">Script.toOutputDatum</span></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.ToOutputDatum</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-146"></span><span>  </span><span id="local-6989586621679804144"><span class="annot"><span class="annottext">toOutputDatum :: TxSkelOutDatum -&gt; OutputDatum
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toOutputDatum</span></span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.Datum.html#NoTxSkelOutDatum"><span class="hs-identifier hs-var">NoTxSkelOutDatum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OutputDatum
</span><span class="hs-identifier hs-var">Api.NoOutputDatum</span></span><span>
</span><span id="line-147"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toOutputDatum</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.Datum.html#SomeTxSkelOutDatum"><span class="hs-identifier hs-type">SomeTxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679804149"><span class="annot"><span class="annottext">dat
</span><a href="#local-6989586621679804149"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="annot"><span class="annottext">DatumKind
</span><a href="Cooked.Skeleton.Datum.html#Inline"><span class="hs-identifier hs-var">Inline</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Datum -&gt; OutputDatum
</span><span class="hs-identifier hs-var">Api.OutputDatum</span></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; OutputDatum) -&gt; Datum -&gt; OutputDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><span class="hs-identifier hs-var">Api.Datum</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; BuiltinData -&gt; Datum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">dat -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">dat
</span><a href="#local-6989586621679804149"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-148"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toOutputDatum</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.Datum.html#SomeTxSkelOutDatum"><span class="hs-identifier hs-type">SomeTxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679804153"><span class="annot"><span class="annottext">dat
</span><a href="#local-6989586621679804153"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="annot"><span class="annottext">DatumKind
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DatumHash -&gt; OutputDatum
</span><span class="hs-identifier hs-var">Api.OutputDatumHash</span></span><span> </span><span class="annot"><span class="annottext">(DatumHash -&gt; OutputDatum) -&gt; DatumHash -&gt; OutputDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Datum -&gt; DatumHash
</span><span class="hs-identifier hs-var">Script.datumHash</span></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; DatumHash) -&gt; Datum -&gt; DatumHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><span class="hs-identifier hs-var">Api.Datum</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; BuiltinData -&gt; Datum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">dat -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">dat
</span><a href="#local-6989586621679804153"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-149"></span></pre></body></html>