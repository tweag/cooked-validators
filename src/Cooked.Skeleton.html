<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- | This module provides the description of a transaction skeleton. We have our</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- own representation of a transaction for three main reasons:</span><span>
</span><span id="line-3"></span><span class="hs-comment">--</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- - our transaction skeletons are typed (datums, validators, outputs...)</span><span>
</span><span id="line-5"></span><span class="hs-comment">--</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- - with our own wrapper, we are less affected by plutus updates</span><span>
</span><span id="line-7"></span><span class="hs-comment">--</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- - we can have default or automated behavior for the parts of the transactions</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- that are less relevant to testing, such as collaterals or fees</span><span>
</span><span id="line-10"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cooked.Skeleton</span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">module</span><span> </span><span class="annot"><span class="hs-identifier">X</span></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier">TxSkel</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelLabelL"><span class="hs-identifier">txSkelLabelL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOptsL"><span class="hs-identifier">txSkelOptsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsL"><span class="hs-identifier">txSkelMintsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelValidityRangeL"><span class="hs-identifier">txSkelValidityRangeL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelProposalsL"><span class="hs-identifier">txSkelProposalsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelSignersL"><span class="hs-identifier">txSkelSignersL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelInsL"><span class="hs-identifier">txSkelInsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelInsReferenceL"><span class="hs-identifier">txSkelInsReferenceL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutsL"><span class="hs-identifier">txSkelOutsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelWithdrawalsL"><span class="hs-identifier">txSkelWithdrawalsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelTemplate"><span class="hs-identifier">txSkelTemplate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelDataInOutputs"><span class="hs-identifier">txSkelDataInOutputs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelValidatorsInOutputs"><span class="hs-identifier">txSkelValidatorsInOutputs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelKnownTxOutRefs"><span class="hs-identifier">txSkelKnownTxOutRefs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelWithdrawnValue"><span class="hs-identifier">txSkelWithdrawnValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelWithdrawalsScripts"><span class="hs-identifier">txSkelWithdrawalsScripts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelValueInOutputs"><span class="hs-identifier">txSkelValueInOutputs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelReferenceScripts"><span class="hs-identifier">txSkelReferenceScripts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelReferenceTxOutRefs"><span class="hs-identifier">txSkelReferenceTxOutRefs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">where</span><span>
</span><span id="line-34"></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Conversion.html"><span class="hs-identifier">Cooked.Conversion</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Output.html"><span class="hs-identifier">Cooked.Output</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html"><span class="hs-identifier">Cooked.Skeleton.Datum</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">X</span></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Label.html"><span class="hs-identifier">Cooked.Skeleton.Label</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">X</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Mint.html"><span class="hs-identifier">Cooked.Skeleton.Mint</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">X</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Option.html"><span class="hs-identifier">Cooked.Skeleton.Option</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">X</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Output.html"><span class="hs-identifier">Cooked.Skeleton.Output</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">X</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Payable.html"><span class="hs-identifier">Cooked.Skeleton.Payable</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">X</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Proposal.html"><span class="hs-identifier">Cooked.Skeleton.Proposal</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">X</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Redeemer.html"><span class="hs-identifier">Cooked.Skeleton.Redeemer</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">X</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Withdrawal.html"><span class="hs-identifier">Cooked.Skeleton.Withdrawal</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">X</span></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Wallet.html"><span class="hs-identifier">Cooked.Wallet</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Default</span></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Either</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Set</span></span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Ledger.Slot</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ledger</span></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Optics.Core</span></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Optics.TH</span></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.Script.Utils.Scripts</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Script</span></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusLedgerApi.V3</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Api</span></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="annot"><span class="hs-comment">-- * Transaction skeletons</span></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-keyword">data</span><span> </span><span id="TxSkel"><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-var">TxSkel</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-63"></span><span>  </span><span id="TxSkel"><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-var">TxSkel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | Labels do not influence the transaction generation at all; they are</span><span>
</span><span id="line-65"></span><span>      </span><span class="hs-comment">-- pretty-printed whenever cooked-validators prints a transaction, and can</span><span>
</span><span id="line-66"></span><span>      </span><span class="hs-comment">-- therefore make the output more informative (and greppable).</span><span>
</span><span id="line-67"></span><span>      </span><span id="txSkelLabel"><span class="annot"><span class="annottext">TxSkel -&gt; Set TxLabel
</span><a href="Cooked.Skeleton.html#txSkelLabel"><span class="hs-identifier hs-var hs-var">txSkelLabel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Label.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>      </span><span class="annot"><span class="hs-comment">-- | Some options that control transaction generation.</span></span><span>
</span><span id="line-69"></span><span>      </span><span id="txSkelOpts"><span class="annot"><span class="annottext">TxSkel -&gt; TxOpts
</span><a href="Cooked.Skeleton.html#txSkelOpts"><span class="hs-identifier hs-var hs-var">txSkelOpts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Option.html#TxOpts"><span class="hs-identifier hs-type">TxOpts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>      </span><span class="hs-comment">-- | Any value minted or burned by the transaction. You'll probably want</span><span>
</span><span id="line-71"></span><span>      </span><span class="hs-comment">-- to use 'txSkelMintsFromList' to construct this.</span><span>
</span><span id="line-72"></span><span>      </span><span id="txSkelMints"><span class="annot"><span class="annottext">TxSkel -&gt; TxSkelMints
</span><a href="Cooked.Skeleton.html#txSkelMints"><span class="hs-identifier hs-var hs-var">txSkelMints</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Mint.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>      </span><span class="hs-comment">-- | The wallets signing the transaction. This list must contain at least</span><span>
</span><span id="line-74"></span><span>      </span><span class="hs-comment">-- one element. By default, the first signer will pay for fees and</span><span>
</span><span id="line-75"></span><span>      </span><span class="hs-comment">-- balancing. You can change that with 'txOptBalanceWallet'.</span><span>
</span><span id="line-76"></span><span>      </span><span id="txSkelSigners"><span class="annot"><span class="annottext">TxSkel -&gt; [Wallet]
</span><a href="Cooked.Skeleton.html#txSkelSigners"><span class="hs-identifier hs-var hs-var">txSkelSigners</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>      </span><span id="txSkelValidityRange"><span class="annot"><span class="annottext">TxSkel -&gt; SlotRange
</span><a href="Cooked.Skeleton.html#txSkelValidityRange"><span class="hs-identifier hs-var hs-var">txSkelValidityRange</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ledger.SlotRange</span></span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>      </span><span class="hs-comment">-- | To each 'TxOutRef' the transaction should consume, add a redeemer</span><span>
</span><span id="line-79"></span><span>      </span><span class="hs-comment">-- specifying how to spend it. You must make sure that</span><span>
</span><span id="line-80"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-81"></span><span>      </span><span class="hs-comment">-- - On 'TxOutRef's referencing UTxOs belonging to public keys, you use</span><span>
</span><span id="line-82"></span><span>      </span><span class="hs-comment">--   the 'emptyTxSkelRedeemer' smart constructor.</span><span>
</span><span id="line-83"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-84"></span><span>      </span><span class="hs-comment">-- - On 'TxOutRef's referencing UTxOs belonging to scripts, you must make</span><span>
</span><span id="line-85"></span><span>      </span><span class="hs-comment">--   sure that the type of the redeemer is appropriate for the script.</span><span>
</span><span id="line-86"></span><span>      </span><span id="txSkelIns"><span class="annot"><span class="annottext">TxSkel -&gt; Map TxOutRef TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#txSkelIns"><span class="hs-identifier hs-var hs-var">txSkelIns</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Redeemer.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>      </span><span class="annot"><span class="hs-comment">-- | All outputs referenced by the transaction.</span></span><span>
</span><span id="line-88"></span><span>      </span><span id="txSkelInsReference"><span class="annot"><span class="annottext">TxSkel -&gt; Set TxOutRef
</span><a href="Cooked.Skeleton.html#txSkelInsReference"><span class="hs-identifier hs-var hs-var">txSkelInsReference</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>      </span><span class="hs-comment">-- | The outputs of the transaction. These will occur in exactly this</span><span>
</span><span id="line-90"></span><span>      </span><span class="hs-comment">-- order on the transaction.</span><span>
</span><span id="line-91"></span><span>      </span><span id="txSkelOuts"><span class="annot"><span class="annottext">TxSkel -&gt; [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOuts"><span class="hs-identifier hs-var hs-var">txSkelOuts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Skeleton.Output.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>      </span><span class="hs-comment">-- | Possible proposals issued in this transaction to be voted on and</span><span>
</span><span id="line-93"></span><span>      </span><span class="hs-comment">-- possible enacted later on.</span><span>
</span><span id="line-94"></span><span>      </span><span id="txSkelProposals"><span class="annot"><span class="annottext">TxSkel -&gt; [TxSkelProposal]
</span><a href="Cooked.Skeleton.html#txSkelProposals"><span class="hs-identifier hs-var hs-var">txSkelProposals</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Skeleton.Proposal.html#TxSkelProposal"><span class="hs-identifier hs-type">TxSkelProposal</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>      </span><span class="annot"><span class="hs-comment">-- | Withdrawals performed by the transaction</span></span><span>
</span><span id="line-96"></span><span>      </span><span id="txSkelWithdrawals"><span class="annot"><span class="annottext">TxSkel -&gt; TxSkelWithdrawals
</span><a href="Cooked.Skeleton.html#txSkelWithdrawals"><span class="hs-identifier hs-var hs-var">txSkelWithdrawals</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Withdrawal.html#TxSkelWithdrawals"><span class="hs-identifier hs-type">TxSkelWithdrawals</span></a></span><span>
</span><span id="line-97"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span>
</span><span id="line-99"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679822326"><span id="local-6989586621679822356"><span id="local-6989586621679822360"><span class="annot"><span class="annottext">Int -&gt; TxSkel -&gt; ShowS
[TxSkel] -&gt; ShowS
TxSkel -&gt; String
(Int -&gt; TxSkel -&gt; ShowS)
-&gt; (TxSkel -&gt; String) -&gt; ([TxSkel] -&gt; ShowS) -&gt; Show TxSkel
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; TxSkel -&gt; ShowS
showsPrec :: Int -&gt; TxSkel -&gt; ShowS
$cshow :: TxSkel -&gt; String
show :: TxSkel -&gt; String
$cshowList :: [TxSkel] -&gt; ShowS
showList :: [TxSkel] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679822391"><span id="local-6989586621679822420"><span class="annot"><span class="annottext">TxSkel -&gt; TxSkel -&gt; Bool
(TxSkel -&gt; TxSkel -&gt; Bool)
-&gt; (TxSkel -&gt; TxSkel -&gt; Bool) -&gt; Eq TxSkel
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TxSkel -&gt; TxSkel -&gt; Bool
== :: TxSkel -&gt; TxSkel -&gt; Bool
$c/= :: TxSkel -&gt; TxSkel -&gt; Bool
/= :: TxSkel -&gt; TxSkel -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>
</span><span id="line-101"></span><span id="txSkelLabelL"><span id="txSkelOptsL"><span id="txSkelMintsL"><span id="txSkelValidityRangeL"><span id="txSkelProposalsL"><span id="txSkelSignersL"><span id="txSkelInsL"><span id="txSkelInsReferenceL"><span id="txSkelOutsL"><span id="txSkelWithdrawalsL"><span class="hs-identifier">makeLensesFor</span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelLabel&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelLabelL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-103"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelOpts&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelOptsL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelMints&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelMintsL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-105"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelValidityRange&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelValidityRangeL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-106"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelSigners&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelSignersL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelIns&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelInsL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelInsReference&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelInsReferenceL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-109"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelOuts&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelOutsL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-110"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelProposals&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelProposalsL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-111"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelWithdrawals&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelWithdrawalsL&quot;</span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-113"></span><span>  </span><span class="hs-special">''</span><span class="hs-identifier">TxSkel</span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="annot"><span class="hs-comment">-- | A convenience template of an empty transaction skeleton.</span></span><span>
</span><span id="line-116"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelTemplate"><span class="hs-identifier hs-type">txSkelTemplate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span>
</span><span id="line-117"></span><span id="txSkelTemplate"><span class="annot"><span class="annottext">txSkelTemplate :: TxSkel
</span><a href="Cooked.Skeleton.html#txSkelTemplate"><span class="hs-identifier hs-var hs-var">txSkelTemplate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-118"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">txSkelLabel :: Set TxLabel
</span><a href="Cooked.Skeleton.html#txSkelLabel"><span class="hs-identifier hs-var">txSkelLabel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set TxLabel
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">,</span><span>
</span><span id="line-120"></span><span>      </span><span class="annot"><span class="annottext">txSkelOpts :: TxOpts
</span><a href="Cooked.Skeleton.html#txSkelOpts"><span class="hs-identifier hs-var">txSkelOpts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxOpts
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span class="hs-special">,</span><span>
</span><span id="line-121"></span><span>      </span><span class="annot"><span class="annottext">txSkelMints :: TxSkelMints
</span><a href="Cooked.Skeleton.html#txSkelMints"><span class="hs-identifier hs-var">txSkelMints</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span class="hs-special">,</span><span>
</span><span id="line-122"></span><span>      </span><span class="annot"><span class="annottext">txSkelValidityRange :: SlotRange
</span><a href="Cooked.Skeleton.html#txSkelValidityRange"><span class="hs-identifier hs-var">txSkelValidityRange</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotRange
forall a. Interval a
</span><span class="hs-identifier hs-var">Api.always</span></span><span class="hs-special">,</span><span>
</span><span id="line-123"></span><span>      </span><span class="annot"><span class="annottext">txSkelSigners :: [Wallet]
</span><a href="Cooked.Skeleton.html#txSkelSigners"><span class="hs-identifier hs-var">txSkelSigners</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-124"></span><span>      </span><span class="annot"><span class="annottext">txSkelIns :: Map TxOutRef TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#txSkelIns"><span class="hs-identifier hs-var">txSkelIns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxSkelRedeemer
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span class="hs-special">,</span><span>
</span><span id="line-125"></span><span>      </span><span class="annot"><span class="annottext">txSkelInsReference :: Set TxOutRef
</span><a href="Cooked.Skeleton.html#txSkelInsReference"><span class="hs-identifier hs-var">txSkelInsReference</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set TxOutRef
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">,</span><span>
</span><span id="line-126"></span><span>      </span><span class="annot"><span class="annottext">txSkelOuts :: [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOuts"><span class="hs-identifier hs-var">txSkelOuts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-127"></span><span>      </span><span class="annot"><span class="annottext">txSkelProposals :: [TxSkelProposal]
</span><a href="Cooked.Skeleton.html#txSkelProposals"><span class="hs-identifier hs-var">txSkelProposals</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-128"></span><span>      </span><span class="annot"><span class="annottext">txSkelWithdrawals :: TxSkelWithdrawals
</span><a href="Cooked.Skeleton.html#txSkelWithdrawals"><span class="hs-identifier hs-var">txSkelWithdrawals</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelWithdrawals
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-130"></span><span>
</span><span id="line-131"></span><span class="annot"><span class="hs-comment">-- | Returns the full value contained in the skeleton outputs</span></span><span>
</span><span id="line-132"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelValueInOutputs"><span class="hs-identifier hs-type">txSkelValueInOutputs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span>
</span><span id="line-133"></span><span id="txSkelValueInOutputs"><span class="annot"><span class="annottext">txSkelValueInOutputs :: TxSkel -&gt; Value
</span><a href="Cooked.Skeleton.html#txSkelValueInOutputs"><span class="hs-identifier hs-var hs-var">txSkelValueInOutputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Optic' A_Fold '[] TxSkel Value -&gt; TxSkel -&gt; Value
forall k a (is :: IxList) s.
(Is k A_Fold, Monoid a) =&gt;
Optic' k is s a -&gt; s -&gt; a
</span><span class="hs-identifier hs-var">foldOf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' TxSkel [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOutsL"><span class="hs-identifier hs-var">txSkelOutsL</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' TxSkel [TxSkelOut]
-&gt; Optic A_Fold '[] [TxSkelOut] [TxSkelOut] TxSkelOut TxSkelOut
-&gt; Optic A_Fold '[] TxSkel TxSkel TxSkelOut TxSkelOut
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic A_Fold '[] [TxSkelOut] [TxSkelOut] TxSkelOut TxSkelOut
forall (f :: * -&gt; *) a. Foldable f =&gt; Fold (f a) a
</span><span class="hs-identifier hs-var">folded</span></span><span> </span><span class="annot"><span class="annottext">Optic A_Fold '[] TxSkel TxSkel TxSkelOut TxSkelOut
-&gt; Optic A_Lens '[] TxSkelOut TxSkelOut Value Value
-&gt; Optic' A_Fold '[] TxSkel Value
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic A_Lens '[] TxSkelOut TxSkelOut Value Value
</span><a href="Cooked.Skeleton.Output.html#txSkelOutValueL"><span class="hs-identifier hs-var">txSkelOutValueL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-134"></span><span>
</span><span id="line-135"></span><span class="hs-comment">-- | Return all data on transaction outputs. This can contain duplicates, which</span><span>
</span><span id="line-136"></span><span class="hs-comment">-- is intended.</span><span>
</span><span id="line-137"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelDataInOutputs"><span class="hs-identifier hs-type">txSkelDataInOutputs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Api.DatumHash</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Datum.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-138"></span><span id="txSkelDataInOutputs"><span class="annot"><span class="annottext">txSkelDataInOutputs :: TxSkel -&gt; [(DatumHash, TxSkelOutDatum)]
</span><a href="Cooked.Skeleton.html#txSkelDataInOutputs"><span class="hs-identifier hs-var hs-var">txSkelDataInOutputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-139"></span><span>  </span><span class="annot"><span class="annottext">Optic' A_Fold '[] TxSkel TxSkelOutDatum
-&gt; (TxSkelOutDatum -&gt; [(DatumHash, TxSkelOutDatum)])
-&gt; TxSkel
-&gt; [(DatumHash, TxSkelOutDatum)]
forall k m (is :: IxList) s a.
(Is k A_Fold, Monoid m) =&gt;
Optic' k is s a -&gt; (a -&gt; m) -&gt; s -&gt; m
</span><span class="hs-identifier hs-var">foldMapOf</span></span><span>
</span><span id="line-140"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Lens' TxSkel [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOutsL"><span class="hs-identifier hs-var">txSkelOutsL</span></a></span><span>
</span><span id="line-141"></span><span>        </span><span class="annot"><span class="annottext">Lens' TxSkel [TxSkelOut]
-&gt; Optic A_Fold '[] [TxSkelOut] [TxSkelOut] TxSkelOut TxSkelOut
-&gt; Optic A_Fold '[] TxSkel TxSkel TxSkelOut TxSkelOut
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic A_Fold '[] [TxSkelOut] [TxSkelOut] TxSkelOut TxSkelOut
forall (f :: * -&gt; *) a. Foldable f =&gt; Fold (f a) a
</span><span class="hs-identifier hs-var">folded</span></span><span>
</span><span id="line-142"></span><span>        </span><span class="annot"><span class="annottext">Optic A_Fold '[] TxSkel TxSkel TxSkelOut TxSkelOut
-&gt; Optic
     A_Lens '[] TxSkelOut TxSkelOut TxSkelOutDatum TxSkelOutDatum
-&gt; Optic' A_Fold '[] TxSkel TxSkelOutDatum
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic A_Lens '[] TxSkelOut TxSkelOut TxSkelOutDatum TxSkelOutDatum
</span><a href="Cooked.Skeleton.Output.html#txSkelOutDatumL"><span class="hs-identifier hs-var">txSkelOutDatumL</span></a></span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679822613"><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679822613"><span class="hs-identifier hs-var">txSkelOutDatum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-145"></span><span>        </span><span class="annot"><span class="annottext">[(DatumHash, TxSkelOutDatum)]
-&gt; (Datum -&gt; [(DatumHash, TxSkelOutDatum)])
-&gt; Maybe Datum
-&gt; [(DatumHash, TxSkelOutDatum)]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span>
</span><span id="line-146"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-147"></span><span>          </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679822615"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679822615"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Datum -&gt; DatumHash
</span><span class="hs-identifier hs-var">Script.datumHash</span></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679822615"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679822613"><span class="hs-identifier hs-var">txSkelOutDatum</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-148"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; Maybe Datum
</span><a href="Cooked.Skeleton.Datum.html#txSkelOutUntypedDatum"><span class="hs-identifier hs-var">txSkelOutUntypedDatum</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679822613"><span class="hs-identifier hs-var">txSkelOutDatum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span class="annot"><span class="hs-comment">-- | All validators which will receive transaction outputs</span></span><span>
</span><span id="line-152"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelValidatorsInOutputs"><span class="hs-identifier hs-type">txSkelValidatorsInOutputs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.ValidatorHash</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Validator</span></span><span class="hs-special">)</span><span>
</span><span id="line-153"></span><span id="txSkelValidatorsInOutputs"><span class="annot"><span class="annottext">txSkelValidatorsInOutputs :: TxSkel -&gt; Map ValidatorHash (Versioned Validator)
</span><a href="Cooked.Skeleton.html#txSkelValidatorsInOutputs"><span class="hs-identifier hs-var hs-var">txSkelValidatorsInOutputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-154"></span><span>  </span><span class="annot"><span class="annottext">[(ValidatorHash, Versioned Validator)]
-&gt; Map ValidatorHash (Versioned Validator)
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span>
</span><span id="line-155"></span><span>    </span><span class="annot"><span class="annottext">([(ValidatorHash, Versioned Validator)]
 -&gt; Map ValidatorHash (Versioned Validator))
-&gt; (TxSkel -&gt; [(ValidatorHash, Versioned Validator)])
-&gt; TxSkel
-&gt; Map ValidatorHash (Versioned Validator)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TxSkelOut -&gt; Maybe (ValidatorHash, Versioned Validator))
-&gt; [TxSkelOut] -&gt; [(ValidatorHash, Versioned Validator)]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Versioned Validator -&gt; (ValidatorHash, Versioned Validator))
-&gt; Maybe (Versioned Validator)
-&gt; Maybe (ValidatorHash, Versioned Validator)
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679822621"><span class="annot"><span class="annottext">Versioned Validator
</span><a href="#local-6989586621679822621"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Versioned Validator -&gt; ValidatorHash
</span><span class="hs-identifier hs-var">Script.validatorHash</span></span><span> </span><span class="annot"><span class="annottext">Versioned Validator
</span><a href="#local-6989586621679822621"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Versioned Validator
</span><a href="#local-6989586621679822621"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (Versioned Validator)
 -&gt; Maybe (ValidatorHash, Versioned Validator))
-&gt; (TxSkelOut -&gt; Maybe (Versioned Validator))
-&gt; TxSkelOut
-&gt; Maybe (ValidatorHash, Versioned Validator)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOut -&gt; Maybe (Versioned Validator)
</span><a href="Cooked.Skeleton.Output.html#txSkelOutValidator"><span class="hs-identifier hs-var">txSkelOutValidator</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-156"></span><span>    </span><span class="annot"><span class="annottext">([TxSkelOut] -&gt; [(ValidatorHash, Versioned Validator)])
-&gt; (TxSkel -&gt; [TxSkelOut])
-&gt; TxSkel
-&gt; [(ValidatorHash, Versioned Validator)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOuts"><span class="hs-identifier hs-var">txSkelOuts</span></a></span><span>
</span><span id="line-157"></span><span>
</span><span id="line-158"></span><span class="annot"><span class="hs-comment">-- | All validators in the reference script field of transaction outputs</span></span><span>
</span><span id="line-159"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelReferenceScripts"><span class="hs-identifier hs-type">txSkelReferenceScripts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.ValidatorHash</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Validator</span></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span id="txSkelReferenceScripts"><span class="annot"><span class="annottext">txSkelReferenceScripts :: TxSkel -&gt; Map ValidatorHash (Versioned Validator)
</span><a href="Cooked.Skeleton.html#txSkelReferenceScripts"><span class="hs-identifier hs-var hs-var">txSkelReferenceScripts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-161"></span><span>  </span><span class="annot"><span class="annottext">[Map ValidatorHash (Versioned Validator)]
-&gt; Map ValidatorHash (Versioned Validator)
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span>
</span><span id="line-162"></span><span>    </span><span class="annot"><span class="annottext">([Map ValidatorHash (Versioned Validator)]
 -&gt; Map ValidatorHash (Versioned Validator))
-&gt; (TxSkel -&gt; [Map ValidatorHash (Versioned Validator)])
-&gt; TxSkel
-&gt; Map ValidatorHash (Versioned Validator)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TxSkelOut -&gt; Map ValidatorHash (Versioned Validator))
-&gt; [TxSkelOut] -&gt; [Map ValidatorHash (Versioned Validator)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span>
</span><span id="line-163"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.Output.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679822644"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679822644"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-164"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679822644"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o
-&gt; Optic' A_Lens '[] o (Maybe (ReferenceScriptType o))
-&gt; Maybe (ReferenceScriptType o)
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens '[] o (Maybe (ReferenceScriptType o))
forall o.
IsAbstractOutput o =&gt;
Lens' o (Maybe (ReferenceScriptType o))
</span><a href="Cooked.Output.html#outputReferenceScriptL"><span class="hs-identifier hs-var">outputReferenceScriptL</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-165"></span><span>            </span><span class="annot"><span class="annottext">Maybe (ReferenceScriptType o)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map ValidatorHash (Versioned Validator)
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-166"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679822647"><span class="annot"><span class="annottext">ReferenceScriptType o
</span><a href="#local-6989586621679822647"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-167"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679822648"><span class="annot"><span class="annottext">vScript :: Versioned Script
</span><a href="#local-6989586621679822648"><span class="hs-identifier hs-var">vScript</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span id="local-6989586621679822650"><span class="annot"><span class="annottext">Script
</span><a href="#local-6989586621679822650"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span id="local-6989586621679822651"><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621679822651"><span class="hs-identifier hs-var">version</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReferenceScriptType o -&gt; Versioned Script
forall a. ToVersionedScript a =&gt; a -&gt; Versioned Script
</span><a href="Cooked.Conversion.ToVersionedScript.html#toVersionedScript"><span class="hs-identifier hs-var">toVersionedScript</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceScriptType o
</span><a href="#local-6989586621679822647"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-168"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">Script.ScriptHash</span></span><span> </span><span id="local-6989586621679822654"><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621679822654"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Versioned Script -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><a href="Cooked.Conversion.ToScriptHash.html#toScriptHash"><span class="hs-identifier hs-var">toScriptHash</span></a></span><span> </span><span class="annot"><span class="annottext">Versioned Script
</span><a href="#local-6989586621679822648"><span class="hs-identifier hs-var">vScript</span></a></span><span>
</span><span id="line-169"></span><span>               </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">ValidatorHash
-&gt; Versioned Validator -&gt; Map ValidatorHash (Versioned Validator)
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinByteString -&gt; ValidatorHash
</span><span class="hs-identifier hs-var">Script.ValidatorHash</span></span><span> </span><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621679822654"><span class="hs-identifier hs-var">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Versioned Validator -&gt; Map ValidatorHash (Versioned Validator))
-&gt; Versioned Validator -&gt; Map ValidatorHash (Versioned Validator)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Validator -&gt; Language -&gt; Versioned Validator
forall script. script -&gt; Language -&gt; Versioned script
</span><span class="hs-identifier hs-var">Script.Versioned</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Script -&gt; Validator
</span><span class="hs-identifier hs-var">Script.Validator</span></span><span> </span><span class="annot"><span class="annottext">Script
</span><a href="#local-6989586621679822650"><span class="hs-identifier hs-var">script</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621679822651"><span class="hs-identifier hs-var">version</span></a></span><span>
</span><span id="line-170"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>    </span><span class="annot"><span class="annottext">([TxSkelOut] -&gt; [Map ValidatorHash (Versioned Validator)])
-&gt; (TxSkel -&gt; [TxSkelOut])
-&gt; TxSkel
-&gt; [Map ValidatorHash (Versioned Validator)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOuts"><span class="hs-identifier hs-var">txSkelOuts</span></a></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="annot"><span class="hs-comment">-- | All `TxOutRefs` in reference inputs</span></span><span>
</span><span id="line-174"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelReferenceTxOutRefs"><span class="hs-identifier hs-type">txSkelReferenceTxOutRefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span class="hs-special">]</span><span>
</span><span id="line-175"></span><span id="txSkelReferenceTxOutRefs"><span class="annot"><span class="annottext">txSkelReferenceTxOutRefs :: TxSkel -&gt; [TxOutRef]
</span><a href="Cooked.Skeleton.html#txSkelReferenceTxOutRefs"><span class="hs-identifier hs-var hs-var">txSkelReferenceTxOutRefs</span></a></span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679822659"><span id="local-6989586621679822660"><span id="local-6989586621679822661"><span id="local-6989586621679822662"><span id="local-6989586621679822663"><span id="local-6989586621679822664"><span id="local-6989586621679822665"><span id="local-6989586621679822666"><span id="local-6989586621679822667"><span id="local-6989586621679822668"><span class="annot"><span class="annottext">[Wallet]
[TxSkelProposal]
[TxSkelOut]
Set TxOutRef
Set TxLabel
TxSkelWithdrawals
Map TxOutRef TxSkelRedeemer
TxSkelMints
SlotRange
TxOpts
txSkelLabel :: TxSkel -&gt; Set TxLabel
txSkelOpts :: TxSkel -&gt; TxOpts
txSkelMints :: TxSkel -&gt; TxSkelMints
txSkelSigners :: TxSkel -&gt; [Wallet]
txSkelValidityRange :: TxSkel -&gt; SlotRange
txSkelIns :: TxSkel -&gt; Map TxOutRef TxSkelRedeemer
txSkelInsReference :: TxSkel -&gt; Set TxOutRef
txSkelOuts :: TxSkel -&gt; [TxSkelOut]
txSkelProposals :: TxSkel -&gt; [TxSkelProposal]
txSkelWithdrawals :: TxSkel -&gt; TxSkelWithdrawals
txSkelLabel :: Set TxLabel
txSkelOpts :: TxOpts
txSkelMints :: TxSkelMints
txSkelSigners :: [Wallet]
txSkelValidityRange :: SlotRange
txSkelIns :: Map TxOutRef TxSkelRedeemer
txSkelInsReference :: Set TxOutRef
txSkelOuts :: [TxSkelOut]
txSkelProposals :: [TxSkelProposal]
txSkelWithdrawals :: TxSkelWithdrawals
</span><a href="Cooked.Skeleton.html#txSkelLabel"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-176"></span><span>  </span><span class="hs-comment">-- direct reference inputs</span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><span class="annottext">Set TxOutRef -&gt; [TxOutRef]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">Set TxOutRef
</span><a href="#local-6989586621679822665"><span class="hs-identifier hs-var">txSkelInsReference</span></a></span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-comment">-- reference inputs in inputs redeemers</span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><span class="annottext">[TxOutRef] -&gt; [TxOutRef] -&gt; [TxOutRef]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(TxSkelRedeemer -&gt; Maybe TxOutRef)
-&gt; [TxSkelRedeemer] -&gt; [TxOutRef]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer -&gt; Maybe TxOutRef
</span><a href="Cooked.Skeleton.Redeemer.html#txSkelReferenceInput"><span class="hs-identifier hs-var">txSkelReferenceInput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map TxOutRef TxSkelRedeemer -&gt; [TxSkelRedeemer]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxSkelRedeemer
</span><a href="#local-6989586621679822664"><span class="hs-identifier hs-var">txSkelIns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>    </span><span class="hs-comment">-- reference inputs in proposals redeemers</span><span>
</span><span id="line-181"></span><span>    </span><span class="annot"><span class="annottext">[TxOutRef] -&gt; [TxOutRef] -&gt; [TxOutRef]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">((Versioned Script, TxSkelRedeemer) -&gt; Maybe TxOutRef)
-&gt; [(Versioned Script, TxSkelRedeemer)] -&gt; [TxOutRef]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelRedeemer -&gt; Maybe TxOutRef
</span><a href="Cooked.Skeleton.Redeemer.html#txSkelReferenceInput"><span class="hs-identifier hs-var">txSkelReferenceInput</span></a></span><span> </span><span class="annot"><span class="annottext">(TxSkelRedeemer -&gt; Maybe TxOutRef)
-&gt; ((Versioned Script, TxSkelRedeemer) -&gt; TxSkelRedeemer)
-&gt; (Versioned Script, TxSkelRedeemer)
-&gt; Maybe TxOutRef
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Versioned Script, TxSkelRedeemer) -&gt; TxSkelRedeemer
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TxSkelProposal -&gt; Maybe (Versioned Script, TxSkelRedeemer))
-&gt; [TxSkelProposal] -&gt; [(Versioned Script, TxSkelRedeemer)]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">TxSkelProposal -&gt; Maybe (Versioned Script, TxSkelRedeemer)
</span><a href="Cooked.Skeleton.Proposal.html#txSkelProposalWitness"><span class="hs-identifier hs-var">txSkelProposalWitness</span></a></span><span> </span><span class="annot"><span class="annottext">[TxSkelProposal]
</span><a href="#local-6989586621679822667"><span class="hs-identifier hs-var">txSkelProposals</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-comment">-- reference inputs in mints redeemers</span><span>
</span><span id="line-183"></span><span>    </span><span class="annot"><span class="annottext">[TxOutRef] -&gt; [TxOutRef] -&gt; [TxOutRef]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">((Versioned MintingPolicy,
  (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))
 -&gt; Maybe TxOutRef)
-&gt; [(Versioned MintingPolicy,
     (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))]
-&gt; [TxOutRef]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelRedeemer -&gt; Maybe TxOutRef
</span><a href="Cooked.Skeleton.Redeemer.html#txSkelReferenceInput"><span class="hs-identifier hs-var">txSkelReferenceInput</span></a></span><span> </span><span class="annot"><span class="annottext">(TxSkelRedeemer -&gt; Maybe TxOutRef)
-&gt; ((Versioned MintingPolicy,
     (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))
    -&gt; TxSkelRedeemer)
-&gt; (Versioned MintingPolicy,
    (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))
-&gt; Maybe TxOutRef
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TxSkelRedeemer, NEMap TokenName (NonZero Integer))
-&gt; TxSkelRedeemer
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((TxSkelRedeemer, NEMap TokenName (NonZero Integer))
 -&gt; TxSkelRedeemer)
-&gt; ((Versioned MintingPolicy,
     (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))
    -&gt; (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))
-&gt; (Versioned MintingPolicy,
    (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))
-&gt; TxSkelRedeemer
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Versioned MintingPolicy,
 (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))
-&gt; (TxSkelRedeemer, NEMap TokenName (NonZero Integer))
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelMints
-&gt; [(Versioned MintingPolicy,
     (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679822661"><span class="hs-identifier hs-var">txSkelMints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-comment">-- | All `TxOutRefs` known by a given transaction skeleton. This includes</span><span>
</span><span id="line-186"></span><span class="hs-comment">-- TxOutRef`s used as inputs of the skeleton and `TxOutRef`s used as reference</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- inputs of the skeleton.  This does not include additional possible</span><span>
</span><span id="line-188"></span><span class="hs-comment">-- `TxOutRef`s used for balancing and additional `TxOutRef`s used as collateral</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- inputs, as they are not part of the skeleton.</span><span>
</span><span id="line-190"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelKnownTxOutRefs"><span class="hs-identifier hs-type">txSkelKnownTxOutRefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span class="hs-special">]</span><span>
</span><span id="line-191"></span><span id="txSkelKnownTxOutRefs"><span class="annot"><span class="annottext">txSkelKnownTxOutRefs :: TxSkel -&gt; [TxOutRef]
</span><a href="Cooked.Skeleton.html#txSkelKnownTxOutRefs"><span class="hs-identifier hs-var hs-var">txSkelKnownTxOutRefs</span></a></span></span><span> </span><span id="local-6989586621679822676"><span class="annot"><span class="annottext">skel :: TxSkel
</span><a href="#local-6989586621679822676"><span class="hs-identifier hs-var">skel</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679822677"><span id="local-6989586621679822678"><span id="local-6989586621679822679"><span id="local-6989586621679822680"><span id="local-6989586621679822681"><span id="local-6989586621679822682"><span id="local-6989586621679822683"><span id="local-6989586621679822684"><span id="local-6989586621679822685"><span id="local-6989586621679822686"><span class="annot"><span class="annottext">[Wallet]
[TxSkelProposal]
[TxSkelOut]
Set TxOutRef
Set TxLabel
TxSkelWithdrawals
Map TxOutRef TxSkelRedeemer
TxSkelMints
SlotRange
TxOpts
txSkelLabel :: TxSkel -&gt; Set TxLabel
txSkelOpts :: TxSkel -&gt; TxOpts
txSkelMints :: TxSkel -&gt; TxSkelMints
txSkelSigners :: TxSkel -&gt; [Wallet]
txSkelValidityRange :: TxSkel -&gt; SlotRange
txSkelIns :: TxSkel -&gt; Map TxOutRef TxSkelRedeemer
txSkelInsReference :: TxSkel -&gt; Set TxOutRef
txSkelOuts :: TxSkel -&gt; [TxSkelOut]
txSkelProposals :: TxSkel -&gt; [TxSkelProposal]
txSkelWithdrawals :: TxSkel -&gt; TxSkelWithdrawals
txSkelLabel :: Set TxLabel
txSkelOpts :: TxOpts
txSkelMints :: TxSkelMints
txSkelSigners :: [Wallet]
txSkelValidityRange :: SlotRange
txSkelIns :: Map TxOutRef TxSkelRedeemer
txSkelInsReference :: Set TxOutRef
txSkelOuts :: [TxSkelOut]
txSkelProposals :: [TxSkelProposal]
txSkelWithdrawals :: TxSkelWithdrawals
</span><a href="Cooked.Skeleton.html#txSkelLabel"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; [TxOutRef]
</span><a href="Cooked.Skeleton.html#txSkelReferenceTxOutRefs"><span class="hs-identifier hs-var">txSkelReferenceTxOutRefs</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel
</span><a href="#local-6989586621679822676"><span class="hs-identifier hs-var">skel</span></a></span><span> </span><span class="annot"><span class="annottext">[TxOutRef] -&gt; [TxOutRef] -&gt; [TxOutRef]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxSkelRedeemer -&gt; [TxOutRef]
forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">Map.keys</span></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxSkelRedeemer
</span><a href="#local-6989586621679822682"><span class="hs-identifier hs-var">txSkelIns</span></a></span><span>
</span><span id="line-192"></span><span>
</span><span id="line-193"></span><span class="annot"><span class="hs-comment">-- * Various Optics on 'TxSkels' and all the other types defined here</span></span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelWithdrawnValue"><span class="hs-identifier hs-type">txSkelWithdrawnValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span>
</span><span id="line-196"></span><span id="txSkelWithdrawnValue"><span class="annot"><span class="annottext">txSkelWithdrawnValue :: TxSkel -&gt; Value
</span><a href="Cooked.Skeleton.html#txSkelWithdrawnValue"><span class="hs-identifier hs-var hs-var">txSkelWithdrawnValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Value] -&gt; Value
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; Value) -&gt; (TxSkel -&gt; [Value]) -&gt; TxSkel -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ada -&gt; Value
forall a. ToValue a =&gt; a -&gt; Value
</span><a href="Cooked.Conversion.ToValue.html#toValue"><span class="hs-identifier hs-var">toValue</span></a></span><span> </span><span class="annot"><span class="annottext">(Ada -&gt; Value)
-&gt; ((Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
    -&gt; Ada)
-&gt; (Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
-&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TxSkelRedeemer, Ada) -&gt; Ada
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((TxSkelRedeemer, Ada) -&gt; Ada)
-&gt; ((Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
    -&gt; (TxSkelRedeemer, Ada))
-&gt; (Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
-&gt; Ada
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
-&gt; (TxSkelRedeemer, Ada)
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
 -&gt; Value)
-&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
-&gt; [Value]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
 -&gt; [Value])
-&gt; (TxSkel
    -&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))])
-&gt; TxSkel
-&gt; [Value]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkelWithdrawals
-&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">(TxSkelWithdrawals
 -&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))])
-&gt; (TxSkel -&gt; TxSkelWithdrawals)
-&gt; TxSkel
-&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; TxSkelWithdrawals
</span><a href="Cooked.Skeleton.html#txSkelWithdrawals"><span class="hs-identifier hs-var">txSkelWithdrawals</span></a></span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelWithdrawalsScripts"><span class="hs-identifier hs-type">txSkelWithdrawalsScripts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">]</span><span>
</span><span id="line-199"></span><span id="txSkelWithdrawalsScripts"><span class="annot"><span class="annottext">txSkelWithdrawalsScripts :: TxSkel -&gt; [Versioned Script]
</span><a href="Cooked.Skeleton.html#txSkelWithdrawalsScripts"><span class="hs-identifier hs-var hs-var">txSkelWithdrawalsScripts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Versioned Script], [PubKeyHash]) -&gt; [Versioned Script]
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(([Versioned Script], [PubKeyHash]) -&gt; [Versioned Script])
-&gt; (TxSkel -&gt; ([Versioned Script], [PubKeyHash]))
-&gt; TxSkel
-&gt; [Versioned Script]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Either (Versioned Script) PubKeyHash]
-&gt; ([Versioned Script], [PubKeyHash])
forall a b. [Either a b] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">partitionEithers</span></span><span> </span><span class="annot"><span class="annottext">([Either (Versioned Script) PubKeyHash]
 -&gt; ([Versioned Script], [PubKeyHash]))
-&gt; (TxSkel -&gt; [Either (Versioned Script) PubKeyHash])
-&gt; TxSkel
-&gt; ([Versioned Script], [PubKeyHash])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
-&gt; Either (Versioned Script) PubKeyHash
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
 -&gt; Either (Versioned Script) PubKeyHash)
-&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
-&gt; [Either (Versioned Script) PubKeyHash]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
 -&gt; [Either (Versioned Script) PubKeyHash])
-&gt; (TxSkel
    -&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))])
-&gt; TxSkel
-&gt; [Either (Versioned Script) PubKeyHash]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkelWithdrawals
-&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">(TxSkelWithdrawals
 -&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))])
-&gt; (TxSkel -&gt; TxSkelWithdrawals)
-&gt; TxSkel
-&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; TxSkelWithdrawals
</span><a href="Cooked.Skeleton.html#txSkelWithdrawals"><span class="hs-identifier hs-var">txSkelWithdrawals</span></a></span><span>
</span><span id="line-200"></span></pre></body></html>