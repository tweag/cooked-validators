<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- | This module provides the description of a transaction skeleton. We have our</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- own representation of a transaction for three main reasons:</span><span>
</span><span id="line-3"></span><span class="hs-comment">--</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- - our transaction skeletons are typed (datums, validators, outputs...)</span><span>
</span><span id="line-5"></span><span class="hs-comment">--</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- - with our own wrapper, we are less affected by plutus updates</span><span>
</span><span id="line-7"></span><span class="hs-comment">--</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- - we can have default or automated behavior for the parts of the transactions</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- that are less relevant to testing, such as collaterals or fees</span><span>
</span><span id="line-10"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cooked.Skeleton</span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#LabelConstrs"><span class="hs-identifier">LabelConstrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier">TxLabel</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#BalanceOutputPolicy"><span class="hs-identifier">BalanceOutputPolicy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#BalancingWallet"><span class="hs-identifier">BalancingWallet</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#RawModTx"><span class="hs-identifier">RawModTx</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier">EmulatorParamsModification</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#CollateralUtxos"><span class="hs-identifier">CollateralUtxos</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#applyEmulatorParamsModification"><span class="hs-identifier">applyEmulatorParamsModification</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#applyRawModOnBalancedTx"><span class="hs-identifier">applyRawModOnBalancedTx</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxOpts"><span class="hs-identifier">TxOpts</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptEnsureMinAdaL"><span class="hs-identifier">txOptEnsureMinAdaL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptUnsafeModTxL"><span class="hs-identifier">txOptUnsafeModTxL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptAutoSlotIncreaseL"><span class="hs-identifier">txOptAutoSlotIncreaseL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptBalanceL"><span class="hs-identifier">txOptBalanceL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptBalanceOutputPolicyL"><span class="hs-identifier">txOptBalanceOutputPolicyL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptBalanceWalletL"><span class="hs-identifier">txOptBalanceWalletL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptEmulatorParamsModificationL"><span class="hs-identifier">txOptEmulatorParamsModificationL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptCollateralUtxosL"><span class="hs-identifier">txOptCollateralUtxosL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#MintsConstrs"><span class="hs-identifier">MintsConstrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#MintsRedeemer"><span class="hs-identifier">MintsRedeemer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier">TxSkelMints</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#addToTxSkelMints"><span class="hs-identifier">addToTxSkelMints</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsToList"><span class="hs-identifier">txSkelMintsToList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsFromList"><span class="hs-identifier">txSkelMintsFromList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsValue"><span class="hs-identifier">txSkelMintsValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutValueL"><span class="hs-identifier">txSkelOutValueL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutDatumL"><span class="hs-identifier">txSkelOutDatumL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutValue"><span class="hs-identifier">txSkelOutValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutValidator"><span class="hs-identifier">txSkelOutValidator</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumConstrs"><span class="hs-identifier">TxSkelOutDatumConstrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier">TxSkelOutDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier">TxSkelOut</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutTypedDatum"><span class="hs-identifier">txSkelOutTypedDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutUntypedDatum"><span class="hs-identifier">txSkelOutUntypedDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#paysPK"><span class="hs-identifier">paysPK</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#paysScript"><span class="hs-identifier">paysScript</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#paysScriptInlineDatum"><span class="hs-identifier">paysScriptInlineDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#paysScriptDatumHash"><span class="hs-identifier">paysScriptDatumHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#paysScriptNoDatum"><span class="hs-identifier">paysScriptNoDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#withDatum"><span class="hs-identifier">withDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#withInlineDatum"><span class="hs-identifier">withInlineDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#withDatumHash"><span class="hs-identifier">withDatumHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#withReferenceScript"><span class="hs-identifier">withReferenceScript</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#withStakingCredential"><span class="hs-identifier">withStakingCredential</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier">TxSkelRedeemer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelTypedRedeemer"><span class="hs-identifier">txSkelTypedRedeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier">TxSkel</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelLabelL"><span class="hs-identifier">txSkelLabelL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOptsL"><span class="hs-identifier">txSkelOptsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsL"><span class="hs-identifier">txSkelMintsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelValidityRangeL"><span class="hs-identifier">txSkelValidityRangeL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelSignersL"><span class="hs-identifier">txSkelSignersL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelInsL"><span class="hs-identifier">txSkelInsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelInsReferenceL"><span class="hs-identifier">txSkelInsReferenceL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutsL"><span class="hs-identifier">txSkelOutsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelTemplate"><span class="hs-identifier">txSkelTemplate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutputData"><span class="hs-identifier">txSkelOutputData</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#Fee"><span class="hs-identifier">Fee</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutputValue"><span class="hs-identifier">txSkelOutputValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutValidators"><span class="hs-identifier">txSkelOutValidators</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutOwnerTypeP"><span class="hs-identifier">txSkelOutOwnerTypeP</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutputDatumTypeAT"><span class="hs-identifier">txSkelOutputDatumTypeAT</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#SkelContext"><span class="hs-identifier">SkelContext</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutReferenceScripts"><span class="hs-identifier">txSkelOutReferenceScripts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelReferenceScript"><span class="hs-identifier">txSkelReferenceScript</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span class="hs-keyword">where</span><span>
</span><span id="line-78"></span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Api</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cardano</span></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Node.Emulator</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Emulator</span></span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Classes.html"><span class="hs-identifier">Cooked.Classes</span></a></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Output.html"><span class="hs-identifier">Cooked.Output</span></a></span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Pretty.Class.html"><span class="hs-identifier">Cooked.Pretty.Class</span></a></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.ValueUtils.html"><span class="hs-identifier">Cooked.ValueUtils</span></a></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Wallet.html"><span class="hs-identifier">Cooked.Wallet</span></a></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Default</span></span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Either.Combinators</span></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Function</span></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">foldl'</span></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NEList</span></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NEMap</span></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.NonEmpty</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NEMap</span></span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Set</span></span><span class="hs-special">)</span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Ledger.Slot</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ledger</span></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Optics.Core</span></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Optics.TH</span></span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.Script.Utils.Ada</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Script</span></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.Script.Utils.Scripts</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Script</span></span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.Script.Utils.Typed</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Script</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">validatorHash</span></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.Script.Utils.Value</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Script</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">adaSymbol</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">adaToken</span></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusLedgerApi.V3</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Api</span></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusTx.Prelude</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PlutusTx</span></span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Test.QuickCheck</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonZero</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Type.Reflection</span></span><span>
</span><span id="line-110"></span><span>
</span><span id="line-111"></span><span class="annot"><span class="hs-comment">-- * Transaction labels</span></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-keyword">type</span><span> </span><span id="LabelConstrs"><span class="annot"><a href="Cooked.Skeleton.html#LabelConstrs"><span class="hs-identifier hs-var">LabelConstrs</span></a></span></span><span> </span><span id="local-6989586621679692512"><span class="annot"><a href="#local-6989586621679692512"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679692512"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679692512"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679692512"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679692512"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679692512"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="hs-keyword">data</span><span> </span><span id="TxLabel"><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-var">TxLabel</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-116"></span><span>  </span><span id="local-6989586621679692513"><span id="TxLabel"><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-var">TxLabel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#LabelConstrs"><span class="hs-identifier hs-type">LabelConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679692513"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679692513"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679692517"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-119"></span><span>  </span><span id="local-6989586621679692525"><span class="annot"><span class="annottext">TxLabel
</span><a href="#local-6989586621679692525"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679692526"><span class="annot"><span class="annottext">== :: TxLabel -&gt; TxLabel -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span id="local-6989586621679692527"><span class="annot"><span class="annottext">TxLabel
</span><a href="#local-6989586621679692527"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxLabel -&gt; TxLabel -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">TxLabel
</span><a href="#local-6989586621679692525"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">TxLabel
</span><a href="#local-6989586621679692527"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Ordering -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-120"></span><span>
</span><span id="line-121"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679692530"><span id="local-6989586621679692535"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-122"></span><span>  </span><span id="local-6989586621679692538"><span class="annot"><span class="annottext">show :: TxLabel -&gt; String
</span><a href="#local-6989586621679692538"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span><span> </span><span id="local-6989586621679692543"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679692543"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679692543"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679692545"><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-125"></span><span>  </span><span id="local-6989586621679692550"><span class="annot"><span class="annottext">prettyCookedOpt :: PrettyCookedOpts -&gt; TxLabel -&gt; DocCooked
</span><a href="#local-6989586621679692550"><span class="hs-identifier hs-var hs-var hs-var hs-var">prettyCookedOpt</span></a></span></span><span> </span><span id="local-6989586621679692552"><span class="annot"><span class="annottext">PrettyCookedOpts
</span><a href="#local-6989586621679692552"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span><span> </span><span id="local-6989586621679692556"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679692556"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyCookedOpts -&gt; x -&gt; DocCooked
forall a. PrettyCooked a =&gt; PrettyCookedOpts -&gt; a -&gt; DocCooked
</span><a href="Cooked.Pretty.Class.html#prettyCookedOpt"><span class="hs-identifier hs-var">prettyCookedOpt</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyCookedOpts
</span><a href="#local-6989586621679692552"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679692556"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679692561"><span id="local-6989586621679692564"><span id="local-6989586621679692567"><span id="local-6989586621679692570"><span id="local-6989586621679692573"><span id="local-6989586621679692576"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-128"></span><span>  </span><span id="local-6989586621679692579"><span class="annot"><span class="annottext">compare :: TxLabel -&gt; TxLabel -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">compare</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span><span> </span><span id="local-6989586621679692583"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679692583"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span><span> </span><span id="local-6989586621679692594"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679692594"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SomeTypeRep -&gt; SomeTypeRep -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeRep x -&gt; SomeTypeRep
forall k (a :: k). TypeRep a -&gt; SomeTypeRep
</span><span class="hs-identifier hs-var">SomeTypeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; TypeRep x
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679692583"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeRep x -&gt; SomeTypeRep
forall k (a :: k). TypeRep a -&gt; SomeTypeRep
</span><span class="hs-identifier hs-var">SomeTypeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; TypeRep x
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679692594"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-130"></span><span>      </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-131"></span><span>      </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-132"></span><span>      </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">x -&gt; TypeRep x
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679692583"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep x -&gt; TypeRep x -&gt; Maybe (x :~~: x)
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-operator hs-var">`eqTypeRep`</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; TypeRep x
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679692594"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-133"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">x :~~: x
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">x -&gt; x -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679692583"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">x
x
</span><a href="#local-6989586621679692594"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-134"></span><span>        </span><span class="hs-comment">-- This can never happen, since 'eqTypeRep' is implemented in terms of</span><span>
</span><span id="line-135"></span><span>        </span><span class="hs-comment">-- '==' on the type representation:</span><span>
</span><span id="line-136"></span><span>        </span><span class="annot"><span class="annottext">Maybe (x :~~: x)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Ordering
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type representations compare as EQ, but are not eqTypeRep&quot;</span></span><span>
</span><span id="line-137"></span><span>
</span><span id="line-138"></span><span class="annot"><span class="hs-comment">-- * Transaction options</span></span><span>
</span><span id="line-139"></span><span>
</span><span id="line-140"></span><span class="hs-comment">-- | Whether to adjust a potentially existing output to the balancing wallet</span><span>
</span><span id="line-141"></span><span class="hs-comment">-- with the change during transaction balancing.</span><span>
</span><span id="line-142"></span><span class="hs-keyword">data</span><span> </span><span id="BalanceOutputPolicy"><span class="annot"><a href="Cooked.Skeleton.html#BalanceOutputPolicy"><span class="hs-identifier hs-var">BalanceOutputPolicy</span></a></span></span><span>
</span><span id="line-143"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | Try to adjust an existing public key output with the change. If no</span><span>
</span><span id="line-144"></span><span>    </span><span class="hs-comment">-- suitable output can be found, create a new change output.</span><span>
</span><span id="line-145"></span><span>    </span><span id="AdjustExistingOutput"><span class="annot"><a href="Cooked.Skeleton.html#AdjustExistingOutput"><span class="hs-identifier hs-var">AdjustExistingOutput</span></a></span></span><span>
</span><span id="line-146"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | Do not change the existing outputs, always create a new change output.</span></span><span>
</span><span id="line-147"></span><span>    </span><span id="DontAdjustExistingOutput"><span class="annot"><a href="Cooked.Skeleton.html#DontAdjustExistingOutput"><span class="hs-identifier hs-var">DontAdjustExistingOutput</span></a></span></span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679692605"><span id="local-6989586621679692607"><span class="annot"><span class="annottext">BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
(BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool)
-&gt; (BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool)
-&gt; Eq BalanceOutputPolicy
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
== :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
$c/= :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
/= :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679692613"><span id="local-6989586621679692615"><span id="local-6989586621679692617"><span id="local-6989586621679692621"><span id="local-6989586621679692624"><span id="local-6989586621679692627"><span id="local-6989586621679692630"><span class="annot"><span class="annottext">Eq BalanceOutputPolicy
Eq BalanceOutputPolicy =&gt;
(BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Ordering)
-&gt; (BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool)
-&gt; (BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool)
-&gt; (BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool)
-&gt; (BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool)
-&gt; (BalanceOutputPolicy
    -&gt; BalanceOutputPolicy -&gt; BalanceOutputPolicy)
-&gt; (BalanceOutputPolicy
    -&gt; BalanceOutputPolicy -&gt; BalanceOutputPolicy)
-&gt; Ord BalanceOutputPolicy
BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Ordering
BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; BalanceOutputPolicy
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Ordering
compare :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Ordering
$c&lt; :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
&lt; :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
$c&lt;= :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
&lt;= :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
$c&gt; :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
&gt; :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
$c&gt;= :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
&gt;= :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
$cmax :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; BalanceOutputPolicy
max :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; BalanceOutputPolicy
$cmin :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; BalanceOutputPolicy
min :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; BalanceOutputPolicy
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679692633"><span id="local-6989586621679692635"><span id="local-6989586621679692639"><span class="annot"><span class="annottext">Int -&gt; BalanceOutputPolicy -&gt; ShowS
[BalanceOutputPolicy] -&gt; ShowS
BalanceOutputPolicy -&gt; String
(Int -&gt; BalanceOutputPolicy -&gt; ShowS)
-&gt; (BalanceOutputPolicy -&gt; String)
-&gt; ([BalanceOutputPolicy] -&gt; ShowS)
-&gt; Show BalanceOutputPolicy
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; BalanceOutputPolicy -&gt; ShowS
showsPrec :: Int -&gt; BalanceOutputPolicy -&gt; ShowS
$cshow :: BalanceOutputPolicy -&gt; String
show :: BalanceOutputPolicy -&gt; String
$cshowList :: [BalanceOutputPolicy] -&gt; ShowS
showList :: [BalanceOutputPolicy] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#BalanceOutputPolicy"><span class="hs-identifier hs-type">BalanceOutputPolicy</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-151"></span><span>  </span><span id="local-6989586621679692644"><span class="annot"><span class="annottext">def :: BalanceOutputPolicy
</span><a href="#local-6989586621679692644"><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BalanceOutputPolicy
</span><a href="Cooked.Skeleton.html#AdjustExistingOutput"><span class="hs-identifier hs-var">AdjustExistingOutput</span></a></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="hs-comment">-- | Which wallet to use to provide outputs for balancing and collaterals.</span><span>
</span><span id="line-154"></span><span class="hs-comment">-- Either the first signer or an explicit wallet. In the second case, this</span><span>
</span><span id="line-155"></span><span class="hs-comment">-- wallet must be a signer of the transaction.</span><span>
</span><span id="line-156"></span><span class="hs-keyword">data</span><span> </span><span id="BalancingWallet"><span class="annot"><a href="Cooked.Skeleton.html#BalancingWallet"><span class="hs-identifier hs-var">BalancingWallet</span></a></span></span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="BalanceWithFirstSigner"><span class="annot"><a href="Cooked.Skeleton.html#BalanceWithFirstSigner"><span class="hs-identifier hs-var">BalanceWithFirstSigner</span></a></span></span><span>
</span><span id="line-158"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="BalanceWith"><span class="annot"><a href="Cooked.Skeleton.html#BalanceWith"><span class="hs-identifier hs-var">BalanceWith</span></a></span></span><span> </span><span class="annot"><a href="Cooked.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span>
</span><span id="line-159"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679692649"><span id="local-6989586621679692653"><span class="annot"><span class="annottext">BalancingWallet -&gt; BalancingWallet -&gt; Bool
(BalancingWallet -&gt; BalancingWallet -&gt; Bool)
-&gt; (BalancingWallet -&gt; BalancingWallet -&gt; Bool)
-&gt; Eq BalancingWallet
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: BalancingWallet -&gt; BalancingWallet -&gt; Bool
== :: BalancingWallet -&gt; BalancingWallet -&gt; Bool
$c/= :: BalancingWallet -&gt; BalancingWallet -&gt; Bool
/= :: BalancingWallet -&gt; BalancingWallet -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679692659"><span id="local-6989586621679692663"><span id="local-6989586621679692666"><span id="local-6989586621679692670"><span id="local-6989586621679692673"><span id="local-6989586621679692676"><span id="local-6989586621679692679"><span class="annot"><span class="annottext">Eq BalancingWallet
Eq BalancingWallet =&gt;
(BalancingWallet -&gt; BalancingWallet -&gt; Ordering)
-&gt; (BalancingWallet -&gt; BalancingWallet -&gt; Bool)
-&gt; (BalancingWallet -&gt; BalancingWallet -&gt; Bool)
-&gt; (BalancingWallet -&gt; BalancingWallet -&gt; Bool)
-&gt; (BalancingWallet -&gt; BalancingWallet -&gt; Bool)
-&gt; (BalancingWallet -&gt; BalancingWallet -&gt; BalancingWallet)
-&gt; (BalancingWallet -&gt; BalancingWallet -&gt; BalancingWallet)
-&gt; Ord BalancingWallet
BalancingWallet -&gt; BalancingWallet -&gt; Bool
BalancingWallet -&gt; BalancingWallet -&gt; Ordering
BalancingWallet -&gt; BalancingWallet -&gt; BalancingWallet
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: BalancingWallet -&gt; BalancingWallet -&gt; Ordering
compare :: BalancingWallet -&gt; BalancingWallet -&gt; Ordering
$c&lt; :: BalancingWallet -&gt; BalancingWallet -&gt; Bool
&lt; :: BalancingWallet -&gt; BalancingWallet -&gt; Bool
$c&lt;= :: BalancingWallet -&gt; BalancingWallet -&gt; Bool
&lt;= :: BalancingWallet -&gt; BalancingWallet -&gt; Bool
$c&gt; :: BalancingWallet -&gt; BalancingWallet -&gt; Bool
&gt; :: BalancingWallet -&gt; BalancingWallet -&gt; Bool
$c&gt;= :: BalancingWallet -&gt; BalancingWallet -&gt; Bool
&gt;= :: BalancingWallet -&gt; BalancingWallet -&gt; Bool
$cmax :: BalancingWallet -&gt; BalancingWallet -&gt; BalancingWallet
max :: BalancingWallet -&gt; BalancingWallet -&gt; BalancingWallet
$cmin :: BalancingWallet -&gt; BalancingWallet -&gt; BalancingWallet
min :: BalancingWallet -&gt; BalancingWallet -&gt; BalancingWallet
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679692682"><span id="local-6989586621679692687"><span id="local-6989586621679692691"><span class="annot"><span class="annottext">Int -&gt; BalancingWallet -&gt; ShowS
[BalancingWallet] -&gt; ShowS
BalancingWallet -&gt; String
(Int -&gt; BalancingWallet -&gt; ShowS)
-&gt; (BalancingWallet -&gt; String)
-&gt; ([BalancingWallet] -&gt; ShowS)
-&gt; Show BalancingWallet
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; BalancingWallet -&gt; ShowS
showsPrec :: Int -&gt; BalancingWallet -&gt; ShowS
$cshow :: BalancingWallet -&gt; String
show :: BalancingWallet -&gt; String
$cshowList :: [BalancingWallet] -&gt; ShowS
showList :: [BalancingWallet] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#BalancingWallet"><span class="hs-identifier hs-type">BalancingWallet</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-162"></span><span>  </span><span id="local-6989586621679692695"><span class="annot"><span class="annottext">def :: BalancingWallet
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BalancingWallet
</span><a href="Cooked.Skeleton.html#BalanceWithFirstSigner"><span class="hs-identifier hs-var">BalanceWithFirstSigner</span></a></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="hs-comment">-- | Wraps a function that will be applied to a transaction right before</span><span>
</span><span id="line-165"></span><span class="hs-comment">-- submission, and after balancing.</span><span>
</span><span id="line-166"></span><span class="hs-keyword">newtype</span><span> </span><span id="RawModTx"><span class="annot"><a href="Cooked.Skeleton.html#RawModTx"><span class="hs-identifier hs-var">RawModTx</span></a></span></span><span>
</span><span id="line-167"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="RawModTxAfterBalancing"><span class="annot"><a href="Cooked.Skeleton.html#RawModTxAfterBalancing"><span class="hs-identifier hs-var">RawModTxAfterBalancing</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Cardano.Tx</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cardano.ConwayEra</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cardano.Tx</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cardano.ConwayEra</span></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span class="hs-comment">-- This instance always returns @False@, which is no problem, because 'Eq</span><span>
</span><span id="line-170"></span><span class="hs-comment">-- TxSkel' is only used for tests that never depend on this comparison</span><span>
</span><span id="line-171"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679692699"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#RawModTx"><span class="hs-identifier hs-type">RawModTx</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-172"></span><span>  </span><span class="annot"><span class="annottext">RawModTx
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679692702"><span class="annot"><span class="annottext">== :: RawModTx -&gt; RawModTx -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span class="annot"><span class="annottext">RawModTx
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679692704"><span id="local-6989586621679692709"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#RawModTx"><span class="hs-identifier hs-type">RawModTx</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-175"></span><span>  </span><span id="local-6989586621679692711"><span class="annot"><span class="annottext">show :: RawModTx -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#RawModTxAfterBalancing"><span class="hs-identifier hs-type">RawModTxAfterBalancing</span></a></span><span> </span><span class="annot"><span class="annottext">Tx ConwayEra -&gt; Tx ConwayEra
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RawModTxAfterBalancing&quot;</span></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="hs-comment">-- | Applies a list of modifications right before the transaction is</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- submitted. The leftmost function in the argument list is applied first.</span><span>
</span><span id="line-179"></span><span class="annot"><a href="Cooked.Skeleton.html#applyRawModOnBalancedTx"><span class="hs-identifier hs-type">applyRawModOnBalancedTx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Skeleton.html#RawModTx"><span class="hs-identifier hs-type">RawModTx</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cardano.Tx</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cardano.ConwayEra</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cardano.Tx</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cardano.ConwayEra</span></span><span>
</span><span id="line-180"></span><span id="applyRawModOnBalancedTx"><span class="annot"><span class="annottext">applyRawModOnBalancedTx :: [RawModTx] -&gt; Tx ConwayEra -&gt; Tx ConwayEra
</span><a href="Cooked.Skeleton.html#applyRawModOnBalancedTx"><span class="hs-identifier hs-var hs-var">applyRawModOnBalancedTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Tx ConwayEra -&gt; Tx ConwayEra)
 -&gt; RawModTx -&gt; Tx ConwayEra -&gt; Tx ConwayEra)
-&gt; (Tx ConwayEra -&gt; Tx ConwayEra)
-&gt; [RawModTx]
-&gt; Tx ConwayEra
-&gt; Tx ConwayEra
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679692712"><span class="annot"><span class="annottext">Tx ConwayEra -&gt; Tx ConwayEra
</span><a href="#local-6989586621679692712"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#RawModTxAfterBalancing"><span class="hs-identifier hs-type">RawModTxAfterBalancing</span></a></span><span> </span><span id="local-6989586621679692713"><span class="annot"><span class="annottext">Tx ConwayEra -&gt; Tx ConwayEra
</span><a href="#local-6989586621679692713"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tx ConwayEra -&gt; Tx ConwayEra
</span><a href="#local-6989586621679692712"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx ConwayEra -&gt; Tx ConwayEra)
-&gt; (Tx ConwayEra -&gt; Tx ConwayEra) -&gt; Tx ConwayEra -&gt; Tx ConwayEra
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Tx ConwayEra -&gt; Tx ConwayEra
</span><a href="#local-6989586621679692713"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Tx ConwayEra -&gt; Tx ConwayEra
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-181"></span><span>
</span><span id="line-182"></span><span class="hs-comment">-- | Wraps a function that will temporarily change the emulator parameters for</span><span>
</span><span id="line-183"></span><span class="hs-comment">-- the transaction's balancing and submission.</span><span>
</span><span id="line-184"></span><span class="hs-keyword">newtype</span><span> </span><span id="EmulatorParamsModification"><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-var">EmulatorParamsModification</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EmulatorParamsModification"><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-var">EmulatorParamsModification</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Emulator.Params</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Emulator.Params</span></span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>
</span><span id="line-186"></span><span class="hs-comment">-- This instance always returns @False@, which is no problem, because 'Eq</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- TxSkel' is only used for tests that never depend on this comparison</span><span>
</span><span id="line-188"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679692719"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-type">EmulatorParamsModification</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-189"></span><span>  </span><span class="annot"><span class="annottext">EmulatorParamsModification
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679692722"><span class="annot"><span class="annottext">== :: EmulatorParamsModification -&gt; EmulatorParamsModification -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span class="annot"><span class="annottext">EmulatorParamsModification
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679692724"><span id="local-6989586621679692729"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-type">EmulatorParamsModification</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-192"></span><span>  </span><span id="local-6989586621679692731"><span class="annot"><span class="annottext">show :: EmulatorParamsModification -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-type">EmulatorParamsModification</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;EmulatorParamsModification &lt;function&gt;&quot;</span></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="annot"><a href="Cooked.Skeleton.html#applyEmulatorParamsModification"><span class="hs-identifier hs-type">applyEmulatorParamsModification</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-type">EmulatorParamsModification</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Emulator.Params</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Emulator.Params</span></span><span>
</span><span id="line-195"></span><span id="applyEmulatorParamsModification"><span class="annot"><span class="annottext">applyEmulatorParamsModification :: Maybe EmulatorParamsModification -&gt; Params -&gt; Params
</span><a href="Cooked.Skeleton.html#applyEmulatorParamsModification"><span class="hs-identifier hs-var hs-var">applyEmulatorParamsModification</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-type">EmulatorParamsModification</span></a></span><span> </span><span id="local-6989586621679692732"><span class="annot"><span class="annottext">Params -&gt; Params
</span><a href="#local-6989586621679692732"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Params -&gt; Params
</span><a href="#local-6989586621679692732"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-196"></span><span class="annot"><a href="Cooked.Skeleton.html#applyEmulatorParamsModification"><span class="hs-identifier hs-var">applyEmulatorParamsModification</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EmulatorParamsModification
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Params -&gt; Params
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="annot"><span class="hs-comment">-- | Describe which UTxOs to use as collaterals</span></span><span>
</span><span id="line-199"></span><span class="hs-keyword">data</span><span> </span><span id="CollateralUtxos"><span class="annot"><a href="Cooked.Skeleton.html#CollateralUtxos"><span class="hs-identifier hs-var">CollateralUtxos</span></a></span></span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-comment">-- | Rely on automated computation with UTxOs from the balancing wallet</span></span><span>
</span><span id="line-201"></span><span>    </span><span id="CollateralUtxosFromBalancingWallet"><span class="annot"><a href="Cooked.Skeleton.html#CollateralUtxosFromBalancingWallet"><span class="hs-identifier hs-var">CollateralUtxosFromBalancingWallet</span></a></span></span><span>
</span><span id="line-202"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | Rely on automated computaton with UTxOs from a given wallet</span></span><span>
</span><span id="line-203"></span><span>    </span><span id="CollateralUtxosFromWallet"><span class="annot"><a href="Cooked.Skeleton.html#CollateralUtxosFromWallet"><span class="hs-identifier hs-var">CollateralUtxosFromWallet</span></a></span></span><span> </span><span class="annot"><a href="Cooked.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span>
</span><span id="line-204"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | Manually provide a set of UTxOs</span></span><span>
</span><span id="line-205"></span><span>    </span><span id="CollateralUtxosFromSet"><span class="annot"><a href="Cooked.Skeleton.html#CollateralUtxosFromSet"><span class="hs-identifier hs-var">CollateralUtxosFromSet</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span class="hs-special">)</span><span>
</span><span id="line-206"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679692737"><span id="local-6989586621679692743"><span class="annot"><span class="annottext">CollateralUtxos -&gt; CollateralUtxos -&gt; Bool
(CollateralUtxos -&gt; CollateralUtxos -&gt; Bool)
-&gt; (CollateralUtxos -&gt; CollateralUtxos -&gt; Bool)
-&gt; Eq CollateralUtxos
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: CollateralUtxos -&gt; CollateralUtxos -&gt; Bool
== :: CollateralUtxos -&gt; CollateralUtxos -&gt; Bool
$c/= :: CollateralUtxos -&gt; CollateralUtxos -&gt; Bool
/= :: CollateralUtxos -&gt; CollateralUtxos -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679692748"><span id="local-6989586621679692756"><span id="local-6989586621679692760"><span class="annot"><span class="annottext">Int -&gt; CollateralUtxos -&gt; ShowS
[CollateralUtxos] -&gt; ShowS
CollateralUtxos -&gt; String
(Int -&gt; CollateralUtxos -&gt; ShowS)
-&gt; (CollateralUtxos -&gt; String)
-&gt; ([CollateralUtxos] -&gt; ShowS)
-&gt; Show CollateralUtxos
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; CollateralUtxos -&gt; ShowS
showsPrec :: Int -&gt; CollateralUtxos -&gt; ShowS
$cshow :: CollateralUtxos -&gt; String
show :: CollateralUtxos -&gt; String
$cshowList :: [CollateralUtxos] -&gt; ShowS
showList :: [CollateralUtxos] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#CollateralUtxos"><span class="hs-identifier hs-type">CollateralUtxos</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-209"></span><span>  </span><span id="local-6989586621679692764"><span class="annot"><span class="annottext">def :: CollateralUtxos
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CollateralUtxos
</span><a href="Cooked.Skeleton.html#CollateralUtxosFromBalancingWallet"><span class="hs-identifier hs-var">CollateralUtxosFromBalancingWallet</span></a></span><span>
</span><span id="line-210"></span><span>
</span><span id="line-211"></span><span class="hs-comment">-- | Set of options to modify the behavior of generating and validating some</span><span>
</span><span id="line-212"></span><span class="hs-comment">-- transaction.</span><span>
</span><span id="line-213"></span><span class="hs-keyword">data</span><span> </span><span id="TxOpts"><span class="annot"><a href="Cooked.Skeleton.html#TxOpts"><span class="hs-identifier hs-var">TxOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TxOpts"><span class="annot"><a href="Cooked.Skeleton.html#TxOpts"><span class="hs-identifier hs-var">TxOpts</span></a></span></span><span>
</span><span id="line-214"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | Performs an adjustment to unbalanced transactions, making sure every</span><span>
</span><span id="line-215"></span><span>    </span><span class="hs-comment">-- UTxO that is produced has the necessary minimum amount of Ada.</span><span>
</span><span id="line-216"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-217"></span><span>    </span><span class="hs-comment">-- Default is @False@.</span><span>
</span><span id="line-218"></span><span>    </span><span id="txOptEnsureMinAda"><span class="annot"><span class="annottext">TxOpts -&gt; Bool
</span><a href="Cooked.Skeleton.html#txOptEnsureMinAda"><span class="hs-identifier hs-var hs-var">txOptEnsureMinAda</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-comment">-- | Whether to increase the slot counter automatically on transaction</span><span>
</span><span id="line-220"></span><span>    </span><span class="hs-comment">-- submission.  This is useful for modelling transactions that could be</span><span>
</span><span id="line-221"></span><span>    </span><span class="hs-comment">-- submitted in parallel in reality, so there should be no explicit ordering</span><span>
</span><span id="line-222"></span><span>    </span><span class="hs-comment">-- of what comes first.</span><span>
</span><span id="line-223"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-comment">-- Default is @True@.</span><span>
</span><span id="line-225"></span><span>    </span><span id="txOptAutoSlotIncrease"><span class="annot"><span class="annottext">TxOpts -&gt; Bool
</span><a href="Cooked.Skeleton.html#txOptAutoSlotIncrease"><span class="hs-identifier hs-var hs-var">txOptAutoSlotIncrease</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-comment">-- | Applies an arbitrary modification to a transaction after it has been</span><span>
</span><span id="line-227"></span><span>    </span><span class="hs-comment">-- potentially adjusted ('txOptEnsureMinAda') and balanced. The name of this</span><span>
</span><span id="line-228"></span><span>    </span><span class="hs-comment">-- option contains /unsafe/ to draw attention to the fact that modifying a</span><span>
</span><span id="line-229"></span><span>    </span><span class="hs-comment">-- transaction at that stage might make it invalid. Still, this offers a</span><span>
</span><span id="line-230"></span><span>    </span><span class="hs-comment">-- hook for being able to alter a transaction in unforeseen ways. It is</span><span>
</span><span id="line-231"></span><span>    </span><span class="hs-comment">-- mostly used to test contracts that have been written for custom PABs.</span><span>
</span><span id="line-232"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-233"></span><span>    </span><span class="hs-comment">-- One interesting use of this function is to observe a transaction just</span><span>
</span><span id="line-234"></span><span>    </span><span class="hs-comment">-- before it is being sent for validation, with</span><span>
</span><span id="line-235"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-236"></span><span>    </span><span class="hs-comment">-- &gt; txOptUnsafeModTx = [RawModTxAfterBalancing Debug.Trace.traceShowId]</span><span>
</span><span id="line-237"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-238"></span><span>    </span><span class="hs-comment">-- The leftmost function in the list is applied first.</span><span>
</span><span id="line-239"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-240"></span><span>    </span><span class="hs-comment">-- Default is @[]@.</span><span>
</span><span id="line-241"></span><span>    </span><span id="txOptUnsafeModTx"><span class="annot"><span class="annottext">TxOpts -&gt; [RawModTx]
</span><a href="Cooked.Skeleton.html#txOptUnsafeModTx"><span class="hs-identifier hs-var hs-var">txOptUnsafeModTx</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Skeleton.html#RawModTx"><span class="hs-identifier hs-type">RawModTx</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-comment">-- | Whether to balance the transaction or not. Balancing ensures that</span><span>
</span><span id="line-243"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-244"></span><span>    </span><span class="hs-comment">-- &gt; input + mints == output + fees + burns</span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-246"></span><span>    </span><span class="hs-comment">-- If you decide to set @txOptBalance = False@ you will have trouble</span><span>
</span><span id="line-247"></span><span>    </span><span class="hs-comment">-- satisfying that equation by hand because @fees@ are variable. You will</span><span>
</span><span id="line-248"></span><span>    </span><span class="hs-comment">-- likely see a error about value preservation, and should adjust the fees</span><span>
</span><span id="line-249"></span><span>    </span><span class="hs-comment">-- accordingly.</span><span>
</span><span id="line-250"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-251"></span><span>    </span><span class="hs-comment">-- Default is @True@, and nobody in their right mind will ever set it</span><span>
</span><span id="line-252"></span><span>    </span><span class="hs-comment">-- otherwise.</span><span>
</span><span id="line-253"></span><span>    </span><span id="txOptBalance"><span class="annot"><span class="annottext">TxOpts -&gt; Bool
</span><a href="Cooked.Skeleton.html#txOptBalance"><span class="hs-identifier hs-var hs-var">txOptBalance</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-254"></span><span>    </span><span class="hs-comment">-- | The 'BalanceOutputPolicy' to apply when balancing the transaction.</span><span>
</span><span id="line-255"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-256"></span><span>    </span><span class="hs-comment">-- Default is 'AdjustExistingOutput'.</span><span>
</span><span id="line-257"></span><span>    </span><span id="txOptBalanceOutputPolicy"><span class="annot"><span class="annottext">TxOpts -&gt; BalanceOutputPolicy
</span><a href="Cooked.Skeleton.html#txOptBalanceOutputPolicy"><span class="hs-identifier hs-var hs-var">txOptBalanceOutputPolicy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#BalanceOutputPolicy"><span class="hs-identifier hs-type">BalanceOutputPolicy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-258"></span><span>    </span><span class="hs-comment">-- | Which wallet to use to provide outputs for balancing and collaterals.</span><span>
</span><span id="line-259"></span><span>    </span><span class="hs-comment">-- Either the first signer by default, or an explicit wallet. In the second</span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-comment">-- case, this wallet must be a signer of the transaction. This option WILL</span><span>
</span><span id="line-261"></span><span>    </span><span class="hs-comment">-- NOT ensure that it is added in case it is not already present in the list</span><span>
</span><span id="line-262"></span><span>    </span><span class="hs-comment">-- of signers.</span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-comment">-- Default is 'BalanceWithFirstSigner'.</span><span>
</span><span id="line-265"></span><span>    </span><span id="txOptBalanceWallet"><span class="annot"><span class="annottext">TxOpts -&gt; BalancingWallet
</span><a href="Cooked.Skeleton.html#txOptBalanceWallet"><span class="hs-identifier hs-var hs-var">txOptBalanceWallet</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#BalancingWallet"><span class="hs-identifier hs-type">BalancingWallet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-266"></span><span>    </span><span class="hs-comment">-- | Apply an arbitrary modification to the protocol parameters that are</span><span>
</span><span id="line-267"></span><span>    </span><span class="hs-comment">-- used to balance and submit the transaction. This is obviously a very</span><span>
</span><span id="line-268"></span><span>    </span><span class="hs-comment">-- unsafe thing to do if you want to preserve compatibility with the actual</span><span>
</span><span id="line-269"></span><span>    </span><span class="hs-comment">-- chain. It is useful mainly for testing purposes, when you might want to</span><span>
</span><span id="line-270"></span><span>    </span><span class="hs-comment">-- use extremely big transactions or transactions that exhaust the maximum</span><span>
</span><span id="line-271"></span><span>    </span><span class="hs-comment">-- execution budget. Such a thing could be accomplished with</span><span>
</span><span id="line-272"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-273"></span><span>    </span><span class="hs-comment">-- &gt; txOptEmulatorParamsModification = Just $ EmulatorParamsModification increaseTransactionLimits</span><span>
</span><span id="line-274"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-comment">-- for example.</span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-comment">-- Default is 'Nothing'.</span><span>
</span><span id="line-278"></span><span>    </span><span id="txOptEmulatorParamsModification"><span class="annot"><span class="annottext">TxOpts -&gt; Maybe EmulatorParamsModification
</span><a href="Cooked.Skeleton.html#txOptEmulatorParamsModification"><span class="hs-identifier hs-var hs-var">txOptEmulatorParamsModification</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-type">EmulatorParamsModification</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-279"></span><span>    </span><span class="hs-comment">-- | Which utxos to use as collaterals. They can be given manually, or</span><span>
</span><span id="line-280"></span><span>    </span><span class="hs-comment">-- computed automatically from a given, or the balancing, wallet.</span><span>
</span><span id="line-281"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-282"></span><span>    </span><span class="hs-comment">-- Default is 'CollateralUtxosFromBalancingWallet'</span><span>
</span><span id="line-283"></span><span>    </span><span id="txOptCollateralUtxos"><span class="annot"><span class="annottext">TxOpts -&gt; CollateralUtxos
</span><a href="Cooked.Skeleton.html#txOptCollateralUtxos"><span class="hs-identifier hs-var hs-var">txOptCollateralUtxos</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#CollateralUtxos"><span class="hs-identifier hs-type">CollateralUtxos</span></a></span><span>
</span><span id="line-284"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-285"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679692775"><span id="local-6989586621679692790"><span class="annot"><span class="annottext">TxOpts -&gt; TxOpts -&gt; Bool
(TxOpts -&gt; TxOpts -&gt; Bool)
-&gt; (TxOpts -&gt; TxOpts -&gt; Bool) -&gt; Eq TxOpts
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TxOpts -&gt; TxOpts -&gt; Bool
== :: TxOpts -&gt; TxOpts -&gt; Bool
$c/= :: TxOpts -&gt; TxOpts -&gt; Bool
/= :: TxOpts -&gt; TxOpts -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679692794"><span id="local-6989586621679692810"><span id="local-6989586621679692814"><span class="annot"><span class="annottext">Int -&gt; TxOpts -&gt; ShowS
[TxOpts] -&gt; ShowS
TxOpts -&gt; String
(Int -&gt; TxOpts -&gt; ShowS)
-&gt; (TxOpts -&gt; String) -&gt; ([TxOpts] -&gt; ShowS) -&gt; Show TxOpts
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; TxOpts -&gt; ShowS
showsPrec :: Int -&gt; TxOpts -&gt; ShowS
$cshow :: TxOpts -&gt; String
show :: TxOpts -&gt; String
$cshowList :: [TxOpts] -&gt; ShowS
showList :: [TxOpts] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-286"></span><span>
</span><span id="line-287"></span><span id="txOptEnsureMinAdaL"><span id="txOptUnsafeModTxL"><span id="txOptAutoSlotIncreaseL"><span id="txOptBalanceL"><span id="txOptBalanceOutputPolicyL"><span id="txOptBalanceWalletL"><span id="txOptEmulatorParamsModificationL"><span id="txOptCollateralUtxosL"><span class="hs-identifier">makeLensesFor</span><span>
</span><span id="line-288"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptEnsureMinAda&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptEnsureMinAdaL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-289"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptAutoSlotIncrease&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptAutoSlotIncreaseL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-290"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptUnsafeModTx&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptUnsafeModTxL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-291"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptBalance&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptBalanceL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptBalanceOutputPolicy&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptBalanceOutputPolicyL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-293"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptBalanceWallet&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptBalanceWalletL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-294"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptEmulatorParamsModification&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptEmulatorParamsModificationL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptCollateralUtxos&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptCollateralUtxosL&quot;</span><span class="hs-special">)</span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-297"></span><span>  </span><span class="hs-special">''</span><span class="hs-identifier">TxOpts</span></span></span></span></span></span></span></span></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxOpts"><span class="hs-identifier hs-type">TxOpts</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-300"></span><span>  </span><span id="local-6989586621679692925"><span class="annot"><span class="annottext">def :: TxOpts
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-301"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxOpts"><span class="hs-identifier hs-type">TxOpts</span></a></span><span>
</span><span id="line-302"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">txOptEnsureMinAda :: Bool
</span><a href="Cooked.Skeleton.html#txOptEnsureMinAda"><span class="hs-identifier hs-var">txOptEnsureMinAda</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span>
</span><span id="line-303"></span><span>        </span><span class="annot"><span class="annottext">txOptAutoSlotIncrease :: Bool
</span><a href="Cooked.Skeleton.html#txOptAutoSlotIncrease"><span class="hs-identifier hs-var">txOptAutoSlotIncrease</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-304"></span><span>        </span><span class="annot"><span class="annottext">txOptUnsafeModTx :: [RawModTx]
</span><a href="Cooked.Skeleton.html#txOptUnsafeModTx"><span class="hs-identifier hs-var">txOptUnsafeModTx</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-305"></span><span>        </span><span class="annot"><span class="annottext">txOptBalance :: Bool
</span><a href="Cooked.Skeleton.html#txOptBalance"><span class="hs-identifier hs-var">txOptBalance</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-306"></span><span>        </span><span class="annot"><span class="annottext">txOptBalanceOutputPolicy :: BalanceOutputPolicy
</span><a href="Cooked.Skeleton.html#txOptBalanceOutputPolicy"><span class="hs-identifier hs-var">txOptBalanceOutputPolicy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BalanceOutputPolicy
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span class="hs-special">,</span><span>
</span><span id="line-307"></span><span>        </span><span class="annot"><span class="annottext">txOptBalanceWallet :: BalancingWallet
</span><a href="Cooked.Skeleton.html#txOptBalanceWallet"><span class="hs-identifier hs-var">txOptBalanceWallet</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BalancingWallet
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span class="hs-special">,</span><span>
</span><span id="line-308"></span><span>        </span><span class="annot"><span class="annottext">txOptEmulatorParamsModification :: Maybe EmulatorParamsModification
</span><a href="Cooked.Skeleton.html#txOptEmulatorParamsModification"><span class="hs-identifier hs-var">txOptEmulatorParamsModification</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe EmulatorParamsModification
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span>
</span><span id="line-309"></span><span>        </span><span class="annot"><span class="annottext">txOptCollateralUtxos :: CollateralUtxos
</span><a href="Cooked.Skeleton.html#txOptCollateralUtxos"><span class="hs-identifier hs-var">txOptCollateralUtxos</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CollateralUtxos
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span>
</span><span id="line-310"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span class="annot"><span class="hs-comment">-- * Description of the Minting</span></span><span>
</span><span id="line-313"></span><span>
</span><span id="line-314"></span><span class="hs-keyword">type</span><span> </span><span id="MintsConstrs"><span class="annot"><a href="Cooked.Skeleton.html#MintsConstrs"><span class="hs-identifier hs-var">MintsConstrs</span></a></span></span><span> </span><span id="local-6989586621679692926"><span class="annot"><a href="#local-6989586621679692926"><span class="hs-identifier hs-type">redeemer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-315"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="annot"><a href="#local-6989586621679692926"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-316"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679692926"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-317"></span><span>    </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679692926"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-318"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679692926"><span class="hs-identifier hs-type">redeemer</span></a></span><span>
</span><span id="line-319"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-320"></span><span>
</span><span id="line-321"></span><span class="hs-comment">-- | Which redeemer to use for minting. Note that using 'NoMintsRedeemer'</span><span>
</span><span id="line-322"></span><span class="hs-comment">-- corresponds to the redeemer @()@ on-chain.</span><span>
</span><span id="line-323"></span><span class="hs-keyword">data</span><span> </span><span id="MintsRedeemer"><span class="annot"><a href="Cooked.Skeleton.html#MintsRedeemer"><span class="hs-identifier hs-var">MintsRedeemer</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-324"></span><span>  </span><span id="NoMintsRedeemer"><span class="annot"><a href="Cooked.Skeleton.html#NoMintsRedeemer"><span class="hs-identifier hs-var">NoMintsRedeemer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#MintsRedeemer"><span class="hs-identifier hs-type">MintsRedeemer</span></a></span><span>
</span><span id="line-325"></span><span>  </span><span id="local-6989586621679692928"><span id="SomeMintsRedeemer"><span class="annot"><a href="Cooked.Skeleton.html#SomeMintsRedeemer"><span class="hs-identifier hs-var">SomeMintsRedeemer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#MintsConstrs"><span class="hs-identifier hs-type">MintsConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679692928"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679692928"><span class="hs-identifier hs-type">redeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#MintsRedeemer"><span class="hs-identifier hs-type">MintsRedeemer</span></a></span></span><span>
</span><span id="line-326"></span><span>
</span><span id="line-327"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679692931"><span id="local-6989586621679692936"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#MintsRedeemer"><span class="hs-identifier hs-type">MintsRedeemer</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-328"></span><span>  </span><span id="local-6989586621679692938"><span class="annot"><span class="annottext">show :: MintsRedeemer -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></span></span><span> </span><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="Cooked.Skeleton.html#NoMintsRedeemer"><span class="hs-identifier hs-var">NoMintsRedeemer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;NoMintsRedeemer&quot;</span></span><span>
</span><span id="line-329"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#SomeMintsRedeemer"><span class="hs-identifier hs-type">SomeMintsRedeemer</span></a></span><span> </span><span id="local-6989586621679692946"><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679692946"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;(SomeMintsRedeemer &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679692946"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;)&quot;</span></span><span>
</span><span id="line-330"></span><span>
</span><span id="line-331"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679692949"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#MintsRedeemer"><span class="hs-identifier hs-type">MintsRedeemer</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-332"></span><span>  </span><span id="local-6989586621679692955"><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679692955"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679692956"><span class="annot"><span class="annottext">== :: MintsRedeemer -&gt; MintsRedeemer -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span id="local-6989586621679692957"><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679692957"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MintsRedeemer -&gt; MintsRedeemer -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679692955"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679692957"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Ordering -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-333"></span><span>
</span><span id="line-334"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679692962"><span id="local-6989586621679692965"><span id="local-6989586621679692968"><span id="local-6989586621679692971"><span id="local-6989586621679692974"><span id="local-6989586621679692977"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#MintsRedeemer"><span class="hs-identifier hs-type">MintsRedeemer</span></a></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-335"></span><span>  </span><span id="local-6989586621679692979"><span class="annot"><span class="annottext">compare :: MintsRedeemer -&gt; MintsRedeemer -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">compare</span></span></span><span> </span><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="Cooked.Skeleton.html#NoMintsRedeemer"><span class="hs-identifier hs-var">NoMintsRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="Cooked.Skeleton.html#NoMintsRedeemer"><span class="hs-identifier hs-var">NoMintsRedeemer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-336"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="Cooked.Skeleton.html#NoMintsRedeemer"><span class="hs-identifier hs-var">NoMintsRedeemer</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#SomeMintsRedeemer"><span class="hs-identifier hs-type">SomeMintsRedeemer</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-337"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#SomeMintsRedeemer"><span class="hs-identifier hs-type">SomeMintsRedeemer</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="Cooked.Skeleton.html#NoMintsRedeemer"><span class="hs-identifier hs-var">NoMintsRedeemer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-338"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#SomeMintsRedeemer"><span class="hs-identifier hs-type">SomeMintsRedeemer</span></a></span><span> </span><span id="local-6989586621679692985"><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679692985"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#SomeMintsRedeemer"><span class="hs-identifier hs-type">SomeMintsRedeemer</span></a></span><span> </span><span id="local-6989586621679692995"><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679692995"><span class="hs-identifier hs-var">b</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-339"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SomeTypeRep -&gt; SomeTypeRep -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeRep redeemer -&gt; SomeTypeRep
forall k (a :: k). TypeRep a -&gt; SomeTypeRep
</span><span class="hs-identifier hs-var">SomeTypeRep</span></span><span> </span><span class="annot"><span class="annottext">(TypeRep redeemer -&gt; SomeTypeRep)
-&gt; TypeRep redeemer -&gt; SomeTypeRep
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; TypeRep redeemer
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679692985"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeRep redeemer -&gt; SomeTypeRep
forall k (a :: k). TypeRep a -&gt; SomeTypeRep
</span><span class="hs-identifier hs-var">SomeTypeRep</span></span><span> </span><span class="annot"><span class="annottext">(TypeRep redeemer -&gt; SomeTypeRep)
-&gt; TypeRep redeemer -&gt; SomeTypeRep
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; TypeRep redeemer
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679692995"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-340"></span><span>      </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-341"></span><span>      </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-342"></span><span>      </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; TypeRep redeemer
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679692985"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep redeemer
-&gt; TypeRep redeemer -&gt; Maybe (redeemer :~~: redeemer)
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-operator hs-var">`eqTypeRep`</span></span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; TypeRep redeemer
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679692995"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-343"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">redeemer :~~: redeemer
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Data -&gt; Data -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">redeemer -&gt; Data
forall a. ToData a =&gt; a -&gt; Data
</span><span class="hs-identifier hs-var">Api.toData</span></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679692985"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">redeemer -&gt; Data
forall a. ToData a =&gt; a -&gt; Data
</span><span class="hs-identifier hs-var">Api.toData</span></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679692995"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>        </span><span class="annot"><span class="annottext">Maybe (redeemer :~~: redeemer)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Ordering
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type representations compare as EQ, but are not eqTypeRep&quot;</span></span><span>
</span><span id="line-345"></span><span>
</span><span id="line-346"></span><span class="hs-comment">-- | A description of what a transaction mints. For every policy, there can only</span><span>
</span><span id="line-347"></span><span class="hs-comment">-- be one 'MintsRedeemer', and if there is, there must be some token names, each</span><span>
</span><span id="line-348"></span><span class="hs-comment">-- with a non-zero amount of tokens.</span><span>
</span><span id="line-349"></span><span class="hs-comment">--</span><span>
</span><span id="line-350"></span><span class="hs-comment">-- You'll probably not construct this by hand, but use 'txSkelMintsFromList'.</span><span>
</span><span id="line-351"></span><span class="hs-keyword">type</span><span> </span><span id="TxSkelMints"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-var">TxSkelMints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-352"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span>
</span><span id="line-353"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.MintingPolicy</span></span><span class="hs-special">)</span><span>
</span><span id="line-354"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#MintsRedeemer"><span class="hs-identifier hs-type">MintsRedeemer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NEMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TokenName</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonZero</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-355"></span><span>
</span><span id="line-356"></span><span class="hs-comment">-- | Combining 'TxSkelMints' in a sensible way. In particular, this means that</span><span>
</span><span id="line-357"></span><span class="hs-comment">--</span><span>
</span><span id="line-358"></span><span class="hs-comment">-- &gt; Map.fromList [(pol, (red, NEMap.fromList [(tName, 1)]))]</span><span>
</span><span id="line-359"></span><span class="hs-comment">--</span><span>
</span><span id="line-360"></span><span class="hs-comment">-- and</span><span>
</span><span id="line-361"></span><span class="hs-comment">--</span><span>
</span><span id="line-362"></span><span class="hs-comment">-- &gt; Map.fromList [(pol, (red', NEMap.fromList [(tName, -1)]))]</span><span>
</span><span id="line-363"></span><span class="hs-comment">--</span><span>
</span><span id="line-364"></span><span class="hs-comment">-- will combine to become the empty 'TxSkelMints' (and similar examples, where</span><span>
</span><span id="line-365"></span><span class="hs-comment">-- the values add up to zero, see the comment at the definition of</span><span>
</span><span id="line-366"></span><span class="hs-comment">-- 'addToTxSkelMints').</span><span>
</span><span id="line-367"></span><span class="hs-comment">--</span><span>
</span><span id="line-368"></span><span class="hs-comment">-- In every case, if you add mints with a different redeemer for the same</span><span>
</span><span id="line-369"></span><span class="hs-comment">-- policy, the redeemer used in the right argument takes precedence.</span><span>
</span><span id="line-370"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPING</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span id="local-6989586621679693005"><span id="local-6989586621679693009"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-371"></span><span>  </span><span id="local-6989586621679693015"><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679693015"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679693016"><span class="annot"><span class="annottext">&lt;&gt; :: TxSkelMints -&gt; TxSkelMints -&gt; TxSkelMints
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span id="local-6989586621679693017"><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679693017"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-372"></span><span>    </span><span class="annot"><span class="annottext">(TxSkelMints
 -&gt; (Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)
 -&gt; TxSkelMints)
-&gt; TxSkelMints
-&gt; [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
-&gt; TxSkelMints
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl</span></span><span>
</span><span id="line-373"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)
 -&gt; TxSkelMints -&gt; TxSkelMints)
-&gt; TxSkelMints
-&gt; (Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)
-&gt; TxSkelMints
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)
-&gt; TxSkelMints -&gt; TxSkelMints
</span><a href="Cooked.Skeleton.html#addToTxSkelMints"><span class="hs-identifier hs-var">addToTxSkelMints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-374"></span><span>      </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679693015"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-375"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelMints
-&gt; [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
</span><a href="Cooked.Skeleton.html#txSkelMintsToList"><span class="hs-identifier hs-var">txSkelMintsToList</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679693017"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-376"></span><span>
</span><span id="line-377"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPING</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span id="local-6989586621679693024"><span id="local-6989586621679693027"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-378"></span><span>  </span><span id="local-6989586621679693030"><span class="annot"><span class="annottext">mempty :: TxSkelMints
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span class="hs-comment">-- | Add a new entry to a 'TxSkelMints'. There are a few wrinkles:</span><span>
</span><span id="line-381"></span><span class="hs-comment">--</span><span>
</span><span id="line-382"></span><span class="hs-comment">-- (1) If for a given policy, redeemer, and token name, there are @n@ tokens in</span><span>
</span><span id="line-383"></span><span class="hs-comment">-- the argument 'TxSkelMints', and you add @-n@ tokens, the corresponding entry</span><span>
</span><span id="line-384"></span><span class="hs-comment">-- in the &quot;inner map&quot; of the policy will disappear (obviously, because all of</span><span>
</span><span id="line-385"></span><span class="hs-comment">-- its values have to be non-zero). If that also means that the inner map</span><span>
</span><span id="line-386"></span><span class="hs-comment">-- becomes empty, the policy will disappear from the 'TxSkelMints' altogether.</span><span>
</span><span id="line-387"></span><span class="hs-comment">--</span><span>
</span><span id="line-388"></span><span class="hs-comment">-- (2) If a policy is already present on the argument 'TxSkelMints' with a</span><span>
</span><span id="line-389"></span><span class="hs-comment">-- redeemer @a@, and you add a mint with a different redeemer @b@, the old</span><span>
</span><span id="line-390"></span><span class="hs-comment">-- redeemer is thrown away. The values associated with the token names of that</span><span>
</span><span id="line-391"></span><span class="hs-comment">-- policy are added as described above, though. This means that any pre-existing</span><span>
</span><span id="line-392"></span><span class="hs-comment">-- values will be minted with a new redeemer.</span><span>
</span><span id="line-393"></span><span class="hs-comment">--</span><span>
</span><span id="line-394"></span><span class="hs-comment">-- If, for some reason, you really want to generate a 'TxSkelMints' that has</span><span>
</span><span id="line-395"></span><span class="hs-comment">-- both a negative and a positive entry of the same asset class and redeemer,</span><span>
</span><span id="line-396"></span><span class="hs-comment">-- you'll have to do so manually. Note, however, that even if you do so, NO</span><span>
</span><span id="line-397"></span><span class="hs-comment">-- VALIDATOR OR MINTING POLICY WILL EVER GET TO SEE A TRANSACTION WITH SUCH</span><span>
</span><span id="line-398"></span><span class="hs-comment">-- CONFLICTING INFORMATION. This is not a design decision/limitation of</span><span>
</span><span id="line-399"></span><span class="hs-comment">-- cooked-validators: The Cardano API 'TxBodyContent' type, that we're</span><span>
</span><span id="line-400"></span><span class="hs-comment">-- translating everything into eventually, stores minting information as a</span><span>
</span><span id="line-401"></span><span class="hs-comment">-- minted value together with a map from policy IDs to witnesses (which</span><span>
</span><span id="line-402"></span><span class="hs-comment">-- represent the used redeemers). That means that we can only store _one_</span><span>
</span><span id="line-403"></span><span class="hs-comment">-- redeemer per minting policy, and no conflicting mints of the same asset</span><span>
</span><span id="line-404"></span><span class="hs-comment">-- class, since they'll just cancel.</span><span>
</span><span id="line-405"></span><span class="annot"><a href="Cooked.Skeleton.html#addToTxSkelMints"><span class="hs-identifier hs-type">addToTxSkelMints</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-406"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.MintingPolicy</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#MintsRedeemer"><span class="hs-identifier hs-type">MintsRedeemer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TokenName</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-407"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-408"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span><span>
</span><span id="line-409"></span><span id="addToTxSkelMints"><span class="annot"><span class="annottext">addToTxSkelMints :: (Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)
-&gt; TxSkelMints -&gt; TxSkelMints
</span><a href="Cooked.Skeleton.html#addToTxSkelMints"><span class="hs-identifier hs-var hs-var">addToTxSkelMints</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679693032"><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679693032"><span class="hs-identifier hs-var">pol</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679693033"><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679693033"><span class="hs-identifier hs-var">red</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679693034"><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679693034"><span class="hs-identifier hs-var">tName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679693035"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679693035"><span class="hs-identifier hs-var">amount</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679693036"><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679693036"><span class="hs-identifier hs-var">mints</span></a></span></span><span>
</span><span id="line-410"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679693035"><span class="hs-identifier hs-var">amount</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679693036"><span class="hs-identifier hs-var">mints</span></a></span><span>
</span><span id="line-411"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679693036"><span class="hs-identifier hs-var">mints</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
-&gt; Versioned MintingPolicy
-&gt; Maybe (MintsRedeemer, NEMap TokenName (NonZero Integer))
forall k a. Ord k =&gt; Map k a -&gt; k -&gt; Maybe a
</span><span class="hs-operator hs-var">Map.!?</span></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679693032"><span class="hs-identifier hs-var">pol</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-412"></span><span>      </span><span class="annot"><span class="annottext">Maybe (MintsRedeemer, NEMap TokenName (NonZero Integer))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-413"></span><span>        </span><span class="hs-comment">-- The policy isn't yet in the given 'TxSkelMints', so we can just add a</span><span>
</span><span id="line-414"></span><span>        </span><span class="hs-comment">-- new entry:</span><span>
</span><span id="line-415"></span><span>        </span><span class="annot"><span class="annottext">Versioned MintingPolicy
-&gt; (MintsRedeemer, NEMap TokenName (NonZero Integer))
-&gt; TxSkelMints
-&gt; TxSkelMints
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679693032"><span class="hs-identifier hs-var">pol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679693033"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TokenName -&gt; NonZero Integer -&gt; NEMap TokenName (NonZero Integer)
forall k a. k -&gt; a -&gt; NEMap k a
</span><span class="hs-identifier hs-var">NEMap.singleton</span></span><span> </span><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679693034"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; NonZero Integer
forall a. a -&gt; NonZero a
</span><span class="hs-identifier hs-var">NonZero</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679693035"><span class="hs-identifier hs-var">amount</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679693036"><span class="hs-identifier hs-var">mints</span></a></span><span>
</span><span id="line-416"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679693041"><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679693041"><span class="hs-identifier hs-var">_oldRed</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679693042"><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679693042"><span class="hs-identifier hs-var">innerMap</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-417"></span><span>        </span><span class="hs-comment">-- Ignore the old redeemer: If it's the same as the new one, nothing</span><span>
</span><span id="line-418"></span><span>        </span><span class="hs-comment">-- will change, if not, the new redeemer will be kept.</span><span>
</span><span id="line-419"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679693042"><span class="hs-identifier hs-var">innerMap</span></a></span><span> </span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
-&gt; TokenName -&gt; Maybe (NonZero Integer)
forall k a. Ord k =&gt; NEMap k a -&gt; k -&gt; Maybe a
</span><span class="hs-operator hs-var">NEMap.!?</span></span><span> </span><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679693034"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-420"></span><span>          </span><span class="annot"><span class="annottext">Maybe (NonZero Integer)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-421"></span><span>            </span><span class="hs-comment">-- The given token name has not yet occurred for the given</span><span>
</span><span id="line-422"></span><span>            </span><span class="hs-comment">-- policy. This means that we can just add the new tokens to the</span><span>
</span><span id="line-423"></span><span>            </span><span class="hs-comment">-- inner map:</span><span>
</span><span id="line-424"></span><span>            </span><span class="annot"><span class="annottext">Versioned MintingPolicy
-&gt; (MintsRedeemer, NEMap TokenName (NonZero Integer))
-&gt; TxSkelMints
-&gt; TxSkelMints
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679693032"><span class="hs-identifier hs-var">pol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679693033"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TokenName
-&gt; NonZero Integer
-&gt; NEMap TokenName (NonZero Integer)
-&gt; NEMap TokenName (NonZero Integer)
forall k a. Ord k =&gt; k -&gt; a -&gt; NEMap k a -&gt; NEMap k a
</span><span class="hs-identifier hs-var">NEMap.insert</span></span><span> </span><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679693034"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; NonZero Integer
forall a. a -&gt; NonZero a
</span><span class="hs-identifier hs-var">NonZero</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679693035"><span class="hs-identifier hs-var">amount</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679693042"><span class="hs-identifier hs-var">innerMap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679693036"><span class="hs-identifier hs-var">mints</span></a></span><span>
</span><span id="line-425"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonZero</span></span><span> </span><span id="local-6989586621679693045"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679693045"><span class="hs-identifier hs-var">oldAmount</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-426"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679693046"><span class="annot"><span class="annottext">newAmount :: Integer
</span><a href="#local-6989586621679693046"><span class="hs-identifier hs-var hs-var">newAmount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679693045"><span class="hs-identifier hs-var">oldAmount</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679693035"><span class="hs-identifier hs-var">amount</span></a></span><span>
</span><span id="line-427"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679693046"><span class="hs-identifier hs-var">newAmount</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-428"></span><span>                  </span><span class="hs-keyword">then</span><span> </span><span class="hs-comment">-- If the sum of the old amount of tokens and the</span><span>
</span><span id="line-429"></span><span>                  </span><span class="hs-comment">-- additional tokens is non-zero, we can just update the</span><span>
</span><span id="line-430"></span><span>                  </span><span class="hs-comment">-- amount in the inner map:</span><span>
</span><span id="line-431"></span><span>                    </span><span class="annot"><span class="annottext">Versioned MintingPolicy
-&gt; (MintsRedeemer, NEMap TokenName (NonZero Integer))
-&gt; TxSkelMints
-&gt; TxSkelMints
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679693032"><span class="hs-identifier hs-var">pol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679693033"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TokenName
-&gt; NonZero Integer
-&gt; NEMap TokenName (NonZero Integer)
-&gt; NEMap TokenName (NonZero Integer)
forall k a. Ord k =&gt; k -&gt; a -&gt; NEMap k a -&gt; NEMap k a
</span><span class="hs-identifier hs-var">NEMap.insert</span></span><span> </span><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679693034"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; NonZero Integer
forall a. a -&gt; NonZero a
</span><span class="hs-identifier hs-var">NonZero</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679693046"><span class="hs-identifier hs-var">newAmount</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679693042"><span class="hs-identifier hs-var">innerMap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679693036"><span class="hs-identifier hs-var">mints</span></a></span><span>
</span><span id="line-432"></span><span>                  </span><span class="hs-keyword">else</span><span> </span><span class="hs-comment">-- If the sum is zero, we'll have to delete the token</span><span>
</span><span id="line-433"></span><span>                  </span><span class="hs-comment">-- name from the inner map. If that yields a completely empty</span><span>
</span><span id="line-434"></span><span>                  </span><span class="hs-comment">-- inner map, we'll have to remove the entry altogether:</span><span>
</span><span id="line-435"></span><span>                  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Map TokenName (NonZero Integer)
-&gt; Maybe (NEMap TokenName (NonZero Integer))
forall k a. Map k a -&gt; Maybe (NEMap k a)
</span><span class="hs-identifier hs-var">NEMap.nonEmptyMap</span></span><span> </span><span class="annot"><span class="annottext">(Map TokenName (NonZero Integer)
 -&gt; Maybe (NEMap TokenName (NonZero Integer)))
-&gt; Map TokenName (NonZero Integer)
-&gt; Maybe (NEMap TokenName (NonZero Integer))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TokenName
-&gt; NEMap TokenName (NonZero Integer)
-&gt; Map TokenName (NonZero Integer)
forall k a. Ord k =&gt; k -&gt; NEMap k a -&gt; Map k a
</span><span class="hs-identifier hs-var">NEMap.delete</span></span><span> </span><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679693034"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679693042"><span class="hs-identifier hs-var">innerMap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-436"></span><span>                    </span><span class="annot"><span class="annottext">Maybe (NEMap TokenName (NonZero Integer))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy -&gt; TxSkelMints -&gt; TxSkelMints
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.delete</span></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679693032"><span class="hs-identifier hs-var">pol</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679693036"><span class="hs-identifier hs-var">mints</span></a></span><span>
</span><span id="line-437"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679693052"><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679693052"><span class="hs-identifier hs-var">newInnerMap</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
-&gt; (MintsRedeemer, NEMap TokenName (NonZero Integer))
-&gt; TxSkelMints
-&gt; TxSkelMints
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679693032"><span class="hs-identifier hs-var">pol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679693033"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679693052"><span class="hs-identifier hs-var">newInnerMap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679693036"><span class="hs-identifier hs-var">mints</span></a></span><span>
</span><span id="line-438"></span><span>
</span><span id="line-439"></span><span class="hs-comment">-- | Convert from 'TxSkelMints' to a list of tuples describing eveything that's</span><span>
</span><span id="line-440"></span><span class="hs-comment">-- being minted.</span><span>
</span><span id="line-441"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsToList"><span class="hs-identifier hs-type">txSkelMintsToList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.MintingPolicy</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#MintsRedeemer"><span class="hs-identifier hs-type">MintsRedeemer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TokenName</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-442"></span><span id="txSkelMintsToList"><span class="annot"><span class="annottext">txSkelMintsToList :: TxSkelMints
-&gt; [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
</span><a href="Cooked.Skeleton.html#txSkelMintsToList"><span class="hs-identifier hs-var hs-var">txSkelMintsToList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-443"></span><span>  </span><span class="annot"><span class="annottext">((Versioned MintingPolicy,
  (MintsRedeemer, NEMap TokenName (NonZero Integer)))
 -&gt; [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)])
-&gt; [(Versioned MintingPolicy,
     (MintsRedeemer, NEMap TokenName (NonZero Integer)))]
-&gt; [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span>
</span><span id="line-444"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679693054"><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679693054"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679693055"><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679693055"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679693056"><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679693056"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-445"></span><span>        </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679693057"><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679693057"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonZero</span></span><span> </span><span id="local-6989586621679693058"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679693058"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679693054"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679693055"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679693057"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679693058"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-446"></span><span>          </span><span class="annot"><span class="annottext">((TokenName, NonZero Integer)
 -&gt; (Versioned MintingPolicy, MintsRedeemer, TokenName, Integer))
-&gt; [(TokenName, NonZero Integer)]
-&gt; [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (TokenName, NonZero Integer)
-&gt; [(TokenName, NonZero Integer)]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NEList.toList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
-&gt; NonEmpty (TokenName, NonZero Integer)
forall k a. NEMap k a -&gt; NonEmpty (k, a)
</span><span class="hs-identifier hs-var">NEMap.toList</span></span><span> </span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679693056"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-447"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-448"></span><span>    </span><span class="annot"><span class="annottext">([(Versioned MintingPolicy,
   (MintsRedeemer, NEMap TokenName (NonZero Integer)))]
 -&gt; [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)])
-&gt; (TxSkelMints
    -&gt; [(Versioned MintingPolicy,
         (MintsRedeemer, NEMap TokenName (NonZero Integer)))])
-&gt; TxSkelMints
-&gt; [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
-&gt; [(Versioned MintingPolicy,
     (MintsRedeemer, NEMap TokenName (NonZero Integer)))]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span>
</span><span id="line-449"></span><span>
</span><span id="line-450"></span><span class="hs-comment">-- | Smart constructor for 'TxSkelMints'. This function relies on</span><span>
</span><span id="line-451"></span><span class="hs-comment">-- 'addToTxSkelMints'. So, some non-empty lists (where all amounts for a given</span><span>
</span><span id="line-452"></span><span class="hs-comment">-- asset class an redeemer add up to zero) might be translated into the empty</span><span>
</span><span id="line-453"></span><span class="hs-comment">-- 'TxSkelMints'.</span><span>
</span><span id="line-454"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsFromList"><span class="hs-identifier hs-type">txSkelMintsFromList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.MintingPolicy</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#MintsRedeemer"><span class="hs-identifier hs-type">MintsRedeemer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TokenName</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span><span>
</span><span id="line-455"></span><span id="txSkelMintsFromList"><span class="annot"><span class="annottext">txSkelMintsFromList :: [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
-&gt; TxSkelMints
</span><a href="Cooked.Skeleton.html#txSkelMintsFromList"><span class="hs-identifier hs-var hs-var">txSkelMintsFromList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)
 -&gt; TxSkelMints -&gt; TxSkelMints)
-&gt; TxSkelMints
-&gt; [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
-&gt; TxSkelMints
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)
-&gt; TxSkelMints -&gt; TxSkelMints
</span><a href="Cooked.Skeleton.html#addToTxSkelMints"><span class="hs-identifier hs-var">addToTxSkelMints</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-456"></span><span>
</span><span id="line-457"></span><span class="annot"><span class="hs-comment">-- | The value described by a 'TxSkelMints'</span></span><span>
</span><span id="line-458"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsValue"><span class="hs-identifier hs-type">txSkelMintsValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span>
</span><span id="line-459"></span><span id="txSkelMintsValue"><span class="annot"><span class="annottext">txSkelMintsValue :: TxSkelMints -&gt; Value
</span><a href="Cooked.Skeleton.html#txSkelMintsValue"><span class="hs-identifier hs-var hs-var">txSkelMintsValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-460"></span><span>  </span><span class="annot"><span class="annottext">Optic'
  A_Fold
  NoIx
  TxSkelMints
  (Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)
-&gt; ((Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)
    -&gt; Value)
-&gt; TxSkelMints
-&gt; Value
forall k m (is :: IxList) s a.
(Is k A_Fold, Monoid m) =&gt;
Optic' k is s a -&gt; (a -&gt; m) -&gt; s -&gt; m
</span><span class="hs-identifier hs-var">foldMapOf</span></span><span>
</span><span id="line-461"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TxSkelMints
 -&gt; [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)])
-&gt; Getter
     TxSkelMints
     [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
forall s a. (s -&gt; a) -&gt; Getter s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
-&gt; [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
</span><a href="Cooked.Skeleton.html#txSkelMintsToList"><span class="hs-identifier hs-var">txSkelMintsToList</span></a></span><span> </span><span class="annot"><span class="annottext">Getter
  TxSkelMints
  [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
-&gt; Optic
     A_Fold
     NoIx
     [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
     [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
     (Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)
     (Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)
-&gt; Optic'
     A_Fold
     NoIx
     TxSkelMints
     (Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Fold
  NoIx
  [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
  [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
  (Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)
  (Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)
forall (f :: * -&gt; *) a. Foldable f =&gt; Fold (f a) a
</span><span class="hs-identifier hs-var">folded</span></span><span class="hs-special">)</span><span>
</span><span id="line-462"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679693068"><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679693068"><span class="hs-identifier hs-var">policy</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MintsRedeemer
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679693069"><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679693069"><span class="hs-identifier hs-var">tName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679693070"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679693070"><span class="hs-identifier hs-var">amount</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-463"></span><span>        </span><span class="annot"><span class="annottext">AssetClass -&gt; Integer -&gt; Value
</span><span class="hs-identifier hs-var">Script.assetClassValue</span></span><span>
</span><span id="line-464"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">CurrencySymbol -&gt; TokenName -&gt; AssetClass
</span><span class="hs-identifier hs-var">Script.assetClass</span></span><span>
</span><span id="line-465"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Versioned MintingPolicy -&gt; CurrencySymbol
</span><span class="hs-identifier hs-var">Script.scriptCurrencySymbol</span></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679693068"><span class="hs-identifier hs-var">policy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-466"></span><span>              </span><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679693069"><span class="hs-identifier hs-var">tName</span></a></span><span>
</span><span id="line-467"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-468"></span><span>          </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679693070"><span class="hs-identifier hs-var">amount</span></a></span><span>
</span><span id="line-469"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-470"></span><span>
</span><span id="line-471"></span><span class="annot"><span class="hs-comment">-- * Transaction outputs</span></span><span>
</span><span id="line-472"></span><span>
</span><span id="line-473"></span><span class="hs-keyword">class</span><span> </span><span id="IsTxSkelOutAllowedOwner"><span class="annot"><a href="Cooked.Skeleton.html#IsTxSkelOutAllowedOwner"><span class="hs-identifier hs-var">IsTxSkelOutAllowedOwner</span></a></span></span><span> </span><span id="local-6989586621679692127"><span class="annot"><a href="#local-6989586621679692127"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-474"></span><span>  </span><span id="toPKHOrValidator"><span class="annot"><a href="Cooked.Skeleton.html#toPKHOrValidator"><span class="hs-identifier hs-type">toPKHOrValidator</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679692127"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.PubKeyHash</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Validator</span></span><span class="hs-special">)</span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#IsTxSkelOutAllowedOwner"><span class="hs-identifier hs-type">IsTxSkelOutAllowedOwner</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.PubKeyHash</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-477"></span><span>  </span><span id="local-6989586621679693078"><span class="annot"><span class="annottext">toPKHOrValidator :: PubKeyHash -&gt; Either PubKeyHash (Versioned Validator)
</span><a href="Cooked.Skeleton.html#toPKHOrValidator"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPKHOrValidator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PubKeyHash -&gt; Either PubKeyHash (Versioned Validator)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span>
</span><span id="line-478"></span><span>
</span><span id="line-479"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679692132"><span class="annot"><a href="Cooked.Skeleton.html#IsTxSkelOutAllowedOwner"><span class="hs-identifier hs-type">IsTxSkelOutAllowedOwner</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.TypedValidator</span></span><span> </span><span class="annot"><a href="#local-6989586621679692132"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-480"></span><span>  </span><span id="local-6989586621679693081"><span class="annot"><span class="annottext">toPKHOrValidator :: TypedValidator a -&gt; Either PubKeyHash (Versioned Validator)
</span><a href="Cooked.Skeleton.html#toPKHOrValidator"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPKHOrValidator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Versioned Validator -&gt; Either PubKeyHash (Versioned Validator)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Versioned Validator -&gt; Either PubKeyHash (Versioned Validator))
-&gt; (TypedValidator a -&gt; Versioned Validator)
-&gt; TypedValidator a
-&gt; Either PubKeyHash (Versioned Validator)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TypedValidator a -&gt; Versioned Validator
forall a. TypedValidator a -&gt; Versioned Validator
</span><span class="hs-identifier hs-var">Script.tvValidator</span></span><span>
</span><span id="line-481"></span><span>
</span><span id="line-482"></span><span class="hs-comment">-- | Transaction outputs. The 'Pays' constructor is really general, and you'll</span><span>
</span><span id="line-483"></span><span class="hs-comment">-- probably want to use one of the smart constructors like 'paysScript' or</span><span>
</span><span id="line-484"></span><span class="hs-comment">-- 'paysPK' in most cases.</span><span>
</span><span id="line-485"></span><span class="hs-keyword">data</span><span> </span><span id="TxSkelOut"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-var">TxSkelOut</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-486"></span><span>  </span><span id="local-6989586621679693084"><span id="Pays"><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-487"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679693084"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- This is needed only for the 'Show' instance of 'TxSkel', which</span><span>
</span><span id="line-488"></span><span>    </span><span class="hs-comment">-- in turn is only needed in tests.</span><span>
</span><span id="line-489"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679693084"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-490"></span><span>      </span><span class="annot"><a href="Cooked.Output.html#IsTxInfoOutput"><span class="hs-identifier hs-type">IsTxInfoOutput</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693084"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-491"></span><span>      </span><span class="annot"><a href="Cooked.Skeleton.html#IsTxSkelOutAllowedOwner"><span class="hs-identifier hs-type">IsTxSkelOutAllowedOwner</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#OwnerType"><span class="hs-identifier hs-type">OwnerType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693084"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-492"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#OwnerType"><span class="hs-identifier hs-type">OwnerType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693084"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-493"></span><span>      </span><span class="annot"><a href="Cooked.Classes.html#ToCredential"><span class="hs-identifier hs-type">ToCredential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#OwnerType"><span class="hs-identifier hs-type">OwnerType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693084"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-494"></span><span>      </span><span class="annot"><a href="Cooked.Output.html#DatumType"><span class="hs-identifier hs-type">DatumType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693084"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-495"></span><span>      </span><span class="annot"><a href="Cooked.Output.html#ValueType"><span class="hs-identifier hs-type">ValueType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693084"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- needed for the 'txSkelOutValueL'</span><span>
</span><span id="line-496"></span><span>      </span><span class="annot"><a href="Cooked.Classes.html#ToScript"><span class="hs-identifier hs-type">ToScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#ReferenceScriptType"><span class="hs-identifier hs-type">ReferenceScriptType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693084"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-497"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#OwnerType"><span class="hs-identifier hs-type">OwnerType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693084"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-498"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#ReferenceScriptType"><span class="hs-identifier hs-type">ReferenceScriptType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693084"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-499"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#ReferenceScriptType"><span class="hs-identifier hs-type">ReferenceScriptType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693084"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-500"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-501"></span><span>    </span><span class="hs-special">{</span><span id="producedOutput"><span class="annot"><span class="annottext">()
</span><a href="Cooked.Skeleton.html#producedOutput"><span class="hs-identifier hs-var hs-var">producedOutput</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679693084"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-502"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-503"></span><span>
</span><span id="line-504"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679693088"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-505"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679693106"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693106"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679693107"><span class="annot"><span class="annottext">== :: TxSkelOut -&gt; TxSkelOut -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679693122"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693122"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">o -&gt; TypeRep o
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693106"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep o -&gt; TypeRep o -&gt; Maybe (o :~~: o)
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-operator hs-var">`eqTypeRep`</span></span><span> </span><span class="annot"><span class="annottext">o -&gt; TypeRep o
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693122"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-506"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">o :~~: o
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">o -&gt; TxOut
forall o. IsTxInfoOutput o =&gt; o -&gt; TxOut
</span><a href="Cooked.Output.html#outputTxOut"><span class="hs-identifier hs-var">outputTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693106"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; TxOut -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">o -&gt; TxOut
forall o. IsTxInfoOutput o =&gt; o -&gt; TxOut
</span><a href="Cooked.Output.html#outputTxOut"><span class="hs-identifier hs-var">outputTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693122"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-507"></span><span>    </span><span class="annot"><span class="annottext">Maybe (o :~~: o)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-508"></span><span>
</span><span id="line-509"></span><span id="local-6989586621679693131"><span id="local-6989586621679693133"><span id="local-6989586621679693137"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span></span></span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutDatumL"><span class="hs-identifier hs-type">txSkelOutDatumL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span>
</span><span id="line-512"></span><span id="txSkelOutDatumL"><span class="annot"><span class="annottext">txSkelOutDatumL :: Lens' TxSkelOut TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#txSkelOutDatumL"><span class="hs-identifier hs-var hs-var">txSkelOutDatumL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-513"></span><span>  </span><span class="annot"><span class="annottext">(TxSkelOut -&gt; TxSkelOutDatum)
-&gt; (TxSkelOut -&gt; TxSkelOutDatum -&gt; TxSkelOut)
-&gt; Lens' TxSkelOut TxSkelOutDatum
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span>
</span><span id="line-514"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679693156"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693156"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693156"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o TxSkelOutDatum -&gt; TxSkelOutDatum
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Lens' o (DatumType o)
Optic' A_Lens NoIx o TxSkelOutDatum
forall o. IsAbstractOutput o =&gt; Lens' o (DatumType o)
</span><a href="Cooked.Output.html#outputDatumL"><span class="hs-identifier hs-var">outputDatumL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-515"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679693193"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693193"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679693194"><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679693194"><span class="hs-identifier hs-var">newDatum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">o -&gt; TxSkelOut
forall redeemer.
(Show redeemer, Typeable redeemer, IsTxInfoOutput redeemer,
 IsTxSkelOutAllowedOwner (OwnerType redeemer),
 Typeable (OwnerType redeemer), ToCredential (OwnerType redeemer),
 DatumType redeemer ~ TxSkelOutDatum, ValueType redeemer ~ Value,
 ToScript (ReferenceScriptType redeemer), Show (OwnerType redeemer),
 Show (ReferenceScriptType redeemer),
 Typeable (ReferenceScriptType redeemer)) =&gt;
redeemer -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(o -&gt; TxSkelOut) -&gt; o -&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693193"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; (o -&gt; o) -&gt; o
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">Lens' o (DatumType o)
Optic A_Lens NoIx o o TxSkelOutDatum TxSkelOutDatum
forall o. IsAbstractOutput o =&gt; Lens' o (DatumType o)
</span><a href="Cooked.Output.html#outputDatumL"><span class="hs-identifier hs-var">outputDatumL</span></a></span><span> </span><span class="annot"><span class="annottext">Optic A_Lens NoIx o o TxSkelOutDatum TxSkelOutDatum
-&gt; TxSkelOutDatum -&gt; o -&gt; o
forall k (is :: IxList) s t a b.
Is k A_Setter =&gt;
Optic k is s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679693194"><span class="hs-identifier hs-var">newDatum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-516"></span><span>
</span><span id="line-517"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutValueL"><span class="hs-identifier hs-type">txSkelOutValueL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span>
</span><span id="line-518"></span><span id="txSkelOutValueL"><span class="annot"><span class="annottext">txSkelOutValueL :: Lens' TxSkelOut Value
</span><a href="Cooked.Skeleton.html#txSkelOutValueL"><span class="hs-identifier hs-var hs-var">txSkelOutValueL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-519"></span><span>  </span><span class="annot"><span class="annottext">(TxSkelOut -&gt; Value)
-&gt; (TxSkelOut -&gt; Value -&gt; TxSkelOut) -&gt; Lens' TxSkelOut Value
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span>
</span><span id="line-520"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679693215"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693215"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">o -&gt; Value
forall o. (IsAbstractOutput o, ToValue (ValueType o)) =&gt; o -&gt; Value
</span><a href="Cooked.Output.html#outputValue"><span class="hs-identifier hs-var">outputValue</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693215"><span class="hs-identifier hs-var">output</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-521"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679693250"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693250"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679693251"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679693251"><span class="hs-identifier hs-var">newValue</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">o -&gt; TxSkelOut
forall redeemer.
(Show redeemer, Typeable redeemer, IsTxInfoOutput redeemer,
 IsTxSkelOutAllowedOwner (OwnerType redeemer),
 Typeable (OwnerType redeemer), ToCredential (OwnerType redeemer),
 DatumType redeemer ~ TxSkelOutDatum, ValueType redeemer ~ Value,
 ToScript (ReferenceScriptType redeemer), Show (OwnerType redeemer),
 Show (ReferenceScriptType redeemer),
 Typeable (ReferenceScriptType redeemer)) =&gt;
redeemer -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(o -&gt; TxSkelOut) -&gt; o -&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693250"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; (o -&gt; o) -&gt; o
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">Optic A_Lens NoIx o o Value Value
Lens' o (ValueType o)
forall o. IsAbstractOutput o =&gt; Lens' o (ValueType o)
</span><a href="Cooked.Output.html#outputValueL"><span class="hs-identifier hs-var">outputValueL</span></a></span><span> </span><span class="annot"><span class="annottext">Optic A_Lens NoIx o o Value Value -&gt; Value -&gt; o -&gt; o
forall k (is :: IxList) s t a b.
Is k A_Setter =&gt;
Optic k is s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679693251"><span class="hs-identifier hs-var">newValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-522"></span><span>
</span><span id="line-523"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutValue"><span class="hs-identifier hs-type">txSkelOutValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span>
</span><span id="line-524"></span><span id="txSkelOutValue"><span class="annot"><span class="annottext">txSkelOutValue :: TxSkelOut -&gt; Value
</span><a href="Cooked.Skeleton.html#txSkelOutValue"><span class="hs-identifier hs-var hs-var">txSkelOutValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelOut -&gt; Lens' TxSkelOut Value -&gt; Value
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Lens' TxSkelOut Value
</span><a href="Cooked.Skeleton.html#txSkelOutValueL"><span class="hs-identifier hs-var">txSkelOutValueL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-525"></span><span>
</span><span id="line-526"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutValidator"><span class="hs-identifier hs-type">txSkelOutValidator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Validator</span></span><span class="hs-special">)</span><span>
</span><span id="line-527"></span><span id="txSkelOutValidator"><span class="annot"><span class="annottext">txSkelOutValidator :: TxSkelOut -&gt; Maybe (Versioned Validator)
</span><a href="Cooked.Skeleton.html#txSkelOutValidator"><span class="hs-identifier hs-var hs-var">txSkelOutValidator</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679693269"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693269"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either PubKeyHash (Versioned Validator)
-&gt; Maybe (Versioned Validator)
forall a b. Either a b -&gt; Maybe b
</span><span class="hs-identifier hs-var">rightToMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OwnerType o -&gt; Either PubKeyHash (Versioned Validator)
forall a.
IsTxSkelOutAllowedOwner a =&gt;
a -&gt; Either PubKeyHash (Versioned Validator)
</span><a href="Cooked.Skeleton.html#toPKHOrValidator"><span class="hs-identifier hs-var">toPKHOrValidator</span></a></span><span> </span><span class="annot"><span class="annottext">(OwnerType o -&gt; Either PubKeyHash (Versioned Validator))
-&gt; OwnerType o -&gt; Either PubKeyHash (Versioned Validator)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693269"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o (OwnerType o) -&gt; OwnerType o
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (OwnerType o)
forall o. IsAbstractOutput o =&gt; Lens' o (OwnerType o)
</span><a href="Cooked.Output.html#outputOwnerL"><span class="hs-identifier hs-var">outputOwnerL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-528"></span><span>
</span><span id="line-529"></span><span class="hs-keyword">type</span><span> </span><span id="TxSkelOutDatumConstrs"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumConstrs"><span class="hs-identifier hs-var">TxSkelOutDatumConstrs</span></a></span></span><span> </span><span id="local-6989586621679693272"><span class="annot"><a href="#local-6989586621679693272"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679693272"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693272"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="annot"><a href="#local-6989586621679693272"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679693272"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679693272"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-530"></span><span>
</span><span id="line-531"></span><span class="hs-comment">-- | On transaction outputs, we have the options to use</span><span>
</span><span id="line-532"></span><span class="hs-comment">--</span><span>
</span><span id="line-533"></span><span class="hs-comment">-- 1. no datum</span><span>
</span><span id="line-534"></span><span class="hs-comment">-- 2. only a datum hash</span><span>
</span><span id="line-535"></span><span class="hs-comment">-- 3. a &quot;normal&quot; datum</span><span>
</span><span id="line-536"></span><span class="hs-comment">-- 4. an inline datum</span><span>
</span><span id="line-537"></span><span class="hs-comment">--</span><span>
</span><span id="line-538"></span><span class="hs-comment">-- These four options are also what the type 'TxSkelOutDatum' records. The</span><span>
</span><span id="line-539"></span><span class="hs-comment">-- following table explains their differences.</span><span>
</span><span id="line-540"></span><span class="hs-comment">--</span><span>
</span><span id="line-541"></span><span class="hs-comment">-- +------------------------+------------------+---------------------+-----------------------+</span><span>
</span><span id="line-542"></span><span class="hs-comment">-- |                        | datum stored in  |                     | 'Api.OutputDatum'     |</span><span>
</span><span id="line-543"></span><span class="hs-comment">-- |                        | in the simulated | datum resolved      | constructor           |</span><span>
</span><span id="line-544"></span><span class="hs-comment">-- |                        | chain state      | on the 'txInfoData' | seen by the validator |</span><span>
</span><span id="line-545"></span><span class="hs-comment">-- +========================+==================+=====================+=======================+</span><span>
</span><span id="line-546"></span><span class="hs-comment">-- | 'TxSkelOutNoDatum'     | no               | no                  | 'Api.NoOutputDatum'   |</span><span>
</span><span id="line-547"></span><span class="hs-comment">-- +------------------------+------------------+---------------------+-----------------------+</span><span>
</span><span id="line-548"></span><span class="hs-comment">-- | 'TxSkelOutDatumHash'   | yes              | no                  | 'Api.OutputDatumHash' |</span><span>
</span><span id="line-549"></span><span class="hs-comment">-- +------------------------+------------------+---------------------+-----------------------+</span><span>
</span><span id="line-550"></span><span class="hs-comment">-- | 'TxSkelOutDatum'       | yes              | yes                 | 'Api.OutputDatumHash' |</span><span>
</span><span id="line-551"></span><span class="hs-comment">-- +------------------------+------------------+---------------------+-----------------------+</span><span>
</span><span id="line-552"></span><span class="hs-comment">-- | 'TxSkelOutInlineDatum' | yes              | no                  | 'Api.OutputDatum'     |</span><span>
</span><span id="line-553"></span><span class="hs-comment">-- +------------------------+------------------+---------------------+-----------------------+</span><span>
</span><span id="line-554"></span><span class="hs-comment">--</span><span>
</span><span id="line-555"></span><span class="hs-comment">-- That is:</span><span>
</span><span id="line-556"></span><span class="hs-comment">--</span><span>
</span><span id="line-557"></span><span class="hs-comment">-- - Whenever there is a datum, we'll store it in the state of our simulated</span><span>
</span><span id="line-558"></span><span class="hs-comment">--   chain. This will make it possible to retrieve it later, using functions</span><span>
</span><span id="line-559"></span><span class="hs-comment">--   such as 'datumFromHash'.</span><span>
</span><span id="line-560"></span><span class="hs-comment">--</span><span>
</span><span id="line-561"></span><span class="hs-comment">-- - Both of the 'TxSkelOutDatumHash' and 'TxSkelOutDatum' constructors will</span><span>
</span><span id="line-562"></span><span class="hs-comment">--   create an output that scripts see on the 'txInfo' as having a datum</span><span>
</span><span id="line-563"></span><span class="hs-comment">--   hash. The difference is whether that hash will be resolvable using</span><span>
</span><span id="line-564"></span><span class="hs-comment">--   validator functions like 'findDatum'.</span><span>
</span><span id="line-565"></span><span class="hs-keyword">data</span><span> </span><span id="TxSkelOutDatum"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-var">TxSkelOutDatum</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-566"></span><span>  </span><span class="annot"><span class="hs-comment">-- | use no datum</span></span><span>
</span><span id="line-567"></span><span>  </span><span id="TxSkelOutNoDatum"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span>
</span><span id="line-568"></span><span>  </span><span class="annot"><span class="hs-comment">-- | only include the hash on the transaction</span></span><span>
</span><span id="line-569"></span><span>  </span><span id="local-6989586621679693280"><span id="TxSkelOutDatumHash"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-var">TxSkelOutDatumHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumConstrs"><span class="hs-identifier hs-type">TxSkelOutDatumConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693280"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679693280"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span><span>
</span><span id="line-570"></span><span>  </span><span class="hs-comment">-- | use a 'Api.OutputDatumHash' on the transaction output, but generate the</span><span>
</span><span id="line-571"></span><span>  </span><span class="hs-comment">-- transaction in such a way that the complete datum is included in the</span><span>
</span><span id="line-572"></span><span>  </span><span class="hs-comment">-- 'txInfoData' seen by validators</span><span>
</span><span id="line-573"></span><span>  </span><span id="local-6989586621679693281"><span id="TxSkelOutDatum"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-var">TxSkelOutDatum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumConstrs"><span class="hs-identifier hs-type">TxSkelOutDatumConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693281"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679693281"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span><span>
</span><span id="line-574"></span><span>  </span><span class="annot"><span class="hs-comment">-- | use an inline datum</span></span><span>
</span><span id="line-575"></span><span>  </span><span id="local-6989586621679693282"><span id="TxSkelOutInlineDatum"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-var">TxSkelOutInlineDatum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumConstrs"><span class="hs-identifier hs-type">TxSkelOutDatumConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693282"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679693282"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span><span>
</span><span id="line-576"></span><span>
</span><span id="line-577"></span><span id="local-6989586621679693284"><span id="local-6989586621679693286"><span id="local-6989586621679693290"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span></span></span><span>
</span><span id="line-578"></span><span>
</span><span id="line-579"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679693294"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-580"></span><span>  </span><span id="local-6989586621679693300"><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679693300"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679693301"><span class="annot"><span class="annottext">== :: TxSkelOutDatum -&gt; TxSkelOutDatum -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span id="local-6989586621679693302"><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679693302"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; TxSkelOutDatum -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679693300"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679693302"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Ordering -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-581"></span><span>
</span><span id="line-582"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679693307"><span id="local-6989586621679693310"><span id="local-6989586621679693313"><span id="local-6989586621679693316"><span id="local-6989586621679693319"><span id="local-6989586621679693322"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-583"></span><span>  </span><span id="local-6989586621679693324"><span class="annot"><span class="annottext">compare :: TxSkelOutDatum -&gt; TxSkelOutDatum -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">compare</span></span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-584"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span id="local-6989586621679693328"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693328"><span class="hs-identifier hs-var">d1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span id="local-6989586621679693338"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693338"><span class="hs-identifier hs-var">d2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-585"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SomeTypeRep -&gt; SomeTypeRep -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeRep a -&gt; SomeTypeRep
forall k (a :: k). TypeRep a -&gt; SomeTypeRep
</span><span class="hs-identifier hs-var">SomeTypeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TypeRep a
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693328"><span class="hs-identifier hs-var">d1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeRep a -&gt; SomeTypeRep
forall k (a :: k). TypeRep a -&gt; SomeTypeRep
</span><span class="hs-identifier hs-var">SomeTypeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TypeRep a
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693338"><span class="hs-identifier hs-var">d2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-586"></span><span>      </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-587"></span><span>      </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-588"></span><span>      </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">a -&gt; TypeRep a
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693328"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep a -&gt; TypeRep a -&gt; Maybe (a :~~: a)
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-operator hs-var">`eqTypeRep`</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TypeRep a
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693338"><span class="hs-identifier hs-var">d2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-589"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">a :~~: a
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; BuiltinData -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693328"><span class="hs-identifier hs-var">d1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693338"><span class="hs-identifier hs-var">d2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-590"></span><span>        </span><span class="annot"><span class="annottext">Maybe (a :~~: a)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Ordering
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;This branch cannot happen: un-equal type representations that compare to EQ&quot;</span></span><span>
</span><span id="line-591"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679693347"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693347"><span class="hs-identifier hs-var">d1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679693352"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693352"><span class="hs-identifier hs-var">d2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-592"></span><span>    </span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; TxSkelOutDatum -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall redeemer.
TxSkelOutDatumConstrs redeemer =&gt;
redeemer -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-var">TxSkelOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693347"><span class="hs-identifier hs-var">d1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall redeemer.
TxSkelOutDatumConstrs redeemer =&gt;
redeemer -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-var">TxSkelOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693352"><span class="hs-identifier hs-var">d2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-593"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-type">TxSkelOutInlineDatum</span></a></span><span> </span><span id="local-6989586621679693354"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693354"><span class="hs-identifier hs-var">d1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-type">TxSkelOutInlineDatum</span></a></span><span> </span><span id="local-6989586621679693359"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693359"><span class="hs-identifier hs-var">d2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-594"></span><span>    </span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; TxSkelOutDatum -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall redeemer.
TxSkelOutDatumConstrs redeemer =&gt;
redeemer -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-var">TxSkelOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693354"><span class="hs-identifier hs-var">d1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall redeemer.
TxSkelOutDatumConstrs redeemer =&gt;
redeemer -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-var">TxSkelOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693359"><span class="hs-identifier hs-var">d2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-595"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-596"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-597"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-598"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-type">TxSkelOutInlineDatum</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-599"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-600"></span><span>
</span><span id="line-601"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cooked.Classes.html#ToOutputDatum"><span class="hs-identifier hs-type">ToOutputDatum</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-602"></span><span>  </span><span id="local-6989586621679693368"><span class="annot"><span class="annottext">toOutputDatum :: TxSkelOutDatum -&gt; OutputDatum
</span><a href="#local-6989586621679693368"><span class="hs-identifier hs-var hs-var hs-var hs-var">toOutputDatum</span></a></span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OutputDatum
</span><span class="hs-identifier hs-var">Api.NoOutputDatum</span></span><span>
</span><span id="line-603"></span><span>  </span><span class="annot"><a href="Cooked.Classes.html#toOutputDatum"><span class="hs-identifier hs-var">toOutputDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span id="local-6989586621679693373"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693373"><span class="hs-identifier hs-var">datum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DatumHash -&gt; OutputDatum
</span><span class="hs-identifier hs-var">Api.OutputDatumHash</span></span><span> </span><span class="annot"><span class="annottext">(DatumHash -&gt; OutputDatum) -&gt; (a -&gt; DatumHash) -&gt; a -&gt; OutputDatum
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Datum -&gt; DatumHash
</span><span class="hs-identifier hs-var">Script.datumHash</span></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; DatumHash) -&gt; (a -&gt; Datum) -&gt; a -&gt; DatumHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><span class="hs-identifier hs-var">Api.Datum</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; (a -&gt; BuiltinData) -&gt; a -&gt; Datum
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; OutputDatum) -&gt; a -&gt; OutputDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693373"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-604"></span><span>  </span><span class="annot"><a href="Cooked.Classes.html#toOutputDatum"><span class="hs-identifier hs-var">toOutputDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679693379"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693379"><span class="hs-identifier hs-var">datum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DatumHash -&gt; OutputDatum
</span><span class="hs-identifier hs-var">Api.OutputDatumHash</span></span><span> </span><span class="annot"><span class="annottext">(DatumHash -&gt; OutputDatum) -&gt; (a -&gt; DatumHash) -&gt; a -&gt; OutputDatum
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Datum -&gt; DatumHash
</span><span class="hs-identifier hs-var">Script.datumHash</span></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; DatumHash) -&gt; (a -&gt; Datum) -&gt; a -&gt; DatumHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><span class="hs-identifier hs-var">Api.Datum</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; (a -&gt; BuiltinData) -&gt; a -&gt; Datum
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; OutputDatum) -&gt; a -&gt; OutputDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693379"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-605"></span><span>  </span><span class="annot"><a href="Cooked.Classes.html#toOutputDatum"><span class="hs-identifier hs-var">toOutputDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-type">TxSkelOutInlineDatum</span></a></span><span> </span><span id="local-6989586621679693383"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693383"><span class="hs-identifier hs-var">datum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Datum -&gt; OutputDatum
</span><span class="hs-identifier hs-var">Api.OutputDatum</span></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; OutputDatum) -&gt; (a -&gt; Datum) -&gt; a -&gt; OutputDatum
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><span class="hs-identifier hs-var">Api.Datum</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; (a -&gt; BuiltinData) -&gt; a -&gt; Datum
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; OutputDatum) -&gt; a -&gt; OutputDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693383"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-606"></span><span>
</span><span id="line-607"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutUntypedDatum"><span class="hs-identifier hs-type">txSkelOutUntypedDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Datum</span></span><span>
</span><span id="line-608"></span><span id="txSkelOutUntypedDatum"><span class="annot"><span class="annottext">txSkelOutUntypedDatum :: TxSkelOutDatum -&gt; Maybe Datum
</span><a href="Cooked.Skeleton.html#txSkelOutUntypedDatum"><span class="hs-identifier hs-var hs-var">txSkelOutUntypedDatum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-609"></span><span>  </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Datum
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-610"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span id="local-6989586621679693387"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693387"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Datum -&gt; Maybe Datum
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><span class="hs-identifier hs-var">Api.Datum</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; BuiltinData -&gt; Datum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693387"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-611"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679693391"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693391"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Datum -&gt; Maybe Datum
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><span class="hs-identifier hs-var">Api.Datum</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; BuiltinData -&gt; Datum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693391"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-612"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-type">TxSkelOutInlineDatum</span></a></span><span> </span><span id="local-6989586621679693395"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693395"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Datum -&gt; Maybe Datum
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><span class="hs-identifier hs-var">Api.Datum</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; BuiltinData -&gt; Datum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693395"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-613"></span><span>
</span><span id="line-614"></span><span id="local-6989586621679692192"><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutTypedDatum"><span class="hs-identifier hs-type">txSkelOutTypedDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Api.FromData</span></span><span> </span><span class="annot"><a href="#local-6989586621679692192"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679692192"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-615"></span><span id="txSkelOutTypedDatum"><span class="annot"><span class="annottext">txSkelOutTypedDatum :: forall a. FromData a =&gt; TxSkelOutDatum -&gt; Maybe a
</span><a href="Cooked.Skeleton.html#txSkelOutTypedDatum"><span class="hs-identifier hs-var hs-var">txSkelOutTypedDatum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Maybe a
forall a. FromData a =&gt; BuiltinData -&gt; Maybe a
</span><span class="hs-identifier hs-var">Api.fromBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Maybe a)
-&gt; (Datum -&gt; BuiltinData) -&gt; Datum -&gt; Maybe a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Datum -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.getDatum</span></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; Maybe a)
-&gt; (TxSkelOutDatum -&gt; Maybe Datum) -&gt; TxSkelOutDatum -&gt; Maybe a
forall (m :: * -&gt; *) b c a.
Monad m =&gt;
(b -&gt; m c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c
</span><span class="hs-operator hs-var">&lt;=&lt;</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; Maybe Datum
</span><a href="Cooked.Skeleton.html#txSkelOutUntypedDatum"><span class="hs-identifier hs-var">txSkelOutUntypedDatum</span></a></span><span>
</span><span id="line-616"></span><span>
</span><span id="line-617"></span><span class="annot"><span class="hs-comment">-- ** Smart constructors for transaction outputs</span></span><span>
</span><span id="line-618"></span><span>
</span><span id="line-619"></span><span class="annot"><span class="hs-comment">-- | Pay a certain value to a public key.</span></span><span>
</span><span id="line-620"></span><span id="local-6989586621679692200"><span class="annot"><a href="Cooked.Skeleton.html#paysPK"><span class="hs-identifier hs-type">paysPK</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Classes.html#HasPubKeyHash"><span class="hs-identifier hs-type">HasPubKeyHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679692200"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679692200"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-621"></span><span id="paysPK"><span class="annot"><span class="annottext">paysPK :: forall a. HasPubKeyHash a =&gt; a -&gt; Value -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#paysPK"><span class="hs-identifier hs-var hs-var">paysPK</span></a></span></span><span> </span><span id="local-6989586621679693452"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693452"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679693453"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679693453"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-622"></span><span>  </span><span class="annot"><span class="annottext">ConcreteOutput PubKeyHash TxSkelOutDatum Value (Versioned Script)
-&gt; TxSkelOut
forall redeemer.
(Show redeemer, Typeable redeemer, IsTxInfoOutput redeemer,
 IsTxSkelOutAllowedOwner (OwnerType redeemer),
 Typeable (OwnerType redeemer), ToCredential (OwnerType redeemer),
 DatumType redeemer ~ TxSkelOutDatum, ValueType redeemer ~ Value,
 ToScript (ReferenceScriptType redeemer), Show (OwnerType redeemer),
 Show (ReferenceScriptType redeemer),
 Typeable (ReferenceScriptType redeemer)) =&gt;
redeemer -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span>
</span><span id="line-623"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">PubKeyHash
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe (Versioned Script)
-&gt; ConcreteOutput
     PubKeyHash TxSkelOutDatum Value (Versioned Script)
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-624"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; PubKeyHash
forall a. HasPubKeyHash a =&gt; a -&gt; PubKeyHash
</span><a href="Cooked.Classes.html#toPubKeyHash"><span class="hs-identifier hs-var">toPubKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693452"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-625"></span><span>        </span><span class="annot"><span class="annottext">Maybe StakingCredential
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-626"></span><span>        </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span>
</span><span id="line-627"></span><span>        </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679693453"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-628"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-629"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-630"></span><span>
</span><span id="line-631"></span><span class="hs-comment">-- | Pays a script a certain value with a certain datum, using the</span><span>
</span><span id="line-632"></span><span class="hs-comment">-- 'TxSkelOutDatum' constructor. (See the documentation of 'TxSkelOutDatum'.)</span><span>
</span><span id="line-633"></span><span id="local-6989586621679692220"><span class="annot"><a href="Cooked.Skeleton.html#paysScript"><span class="hs-identifier hs-type">paysScript</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-634"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679692220"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-635"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679692220"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-636"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679692220"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-637"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679692220"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-638"></span><span>    </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679692220"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-639"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679692220"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-640"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-641"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Script.TypedValidator</span></span><span> </span><span class="annot"><a href="#local-6989586621679692220"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-642"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679692220"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-643"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-644"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-645"></span><span id="paysScript"><span class="annot"><span class="annottext">paysScript :: forall a.
(ToData (DatumType a), Show (DatumType a), Typeable (DatumType a),
 Eq (DatumType a), PrettyCooked (DatumType a), Typeable a) =&gt;
TypedValidator a -&gt; DatumType a -&gt; Value -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#paysScript"><span class="hs-identifier hs-var hs-var">paysScript</span></a></span></span><span> </span><span id="local-6989586621679693503"><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679693503"><span class="hs-identifier hs-var">validator</span></a></span></span><span> </span><span id="local-6989586621679693504"><span class="annot"><span class="annottext">DatumType a
</span><a href="#local-6989586621679693504"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span id="local-6989586621679693505"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679693505"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-646"></span><span>  </span><span class="annot"><span class="annottext">ConcreteOutput
  (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
-&gt; TxSkelOut
forall redeemer.
(Show redeemer, Typeable redeemer, IsTxInfoOutput redeemer,
 IsTxSkelOutAllowedOwner (OwnerType redeemer),
 Typeable (OwnerType redeemer), ToCredential (OwnerType redeemer),
 DatumType redeemer ~ TxSkelOutDatum, ValueType redeemer ~ Value,
 ToScript (ReferenceScriptType redeemer), Show (OwnerType redeemer),
 Show (ReferenceScriptType redeemer),
 Typeable (ReferenceScriptType redeemer)) =&gt;
redeemer -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span>
</span><span id="line-647"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TypedValidator a
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe (Versioned Script)
-&gt; ConcreteOutput
     (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-648"></span><span>        </span><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679693503"><span class="hs-identifier hs-var">validator</span></a></span><span>
</span><span id="line-649"></span><span>        </span><span class="annot"><span class="annottext">Maybe StakingCredential
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-650"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatumType a -&gt; TxSkelOutDatum
forall redeemer.
TxSkelOutDatumConstrs redeemer =&gt;
redeemer -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-var">TxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="annottext">DatumType a
</span><a href="#local-6989586621679693504"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-651"></span><span>        </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679693505"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-652"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-653"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-654"></span><span>
</span><span id="line-655"></span><span class="annot"><span class="hs-comment">-- | Pays a script a certain value with a certain inlined datum.</span></span><span>
</span><span id="line-656"></span><span id="local-6989586621679693506"><span class="annot"><a href="Cooked.Skeleton.html#paysScriptInlineDatum"><span class="hs-identifier hs-type">paysScriptInlineDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-657"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679693506"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-658"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679693506"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-659"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679693506"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-660"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679693506"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-661"></span><span>    </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679693506"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-662"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679693506"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-663"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-664"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Script.TypedValidator</span></span><span> </span><span class="annot"><a href="#local-6989586621679693506"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-665"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679693506"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-666"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-667"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-668"></span><span id="paysScriptInlineDatum"><span class="annot"><span class="annottext">paysScriptInlineDatum :: forall a.
(ToData (DatumType a), Show (DatumType a), Typeable (DatumType a),
 Eq (DatumType a), PrettyCooked (DatumType a), Typeable a) =&gt;
TypedValidator a -&gt; DatumType a -&gt; Value -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#paysScriptInlineDatum"><span class="hs-identifier hs-var hs-var">paysScriptInlineDatum</span></a></span></span><span> </span><span id="local-6989586621679693552"><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679693552"><span class="hs-identifier hs-var">validator</span></a></span></span><span> </span><span id="local-6989586621679693553"><span class="annot"><span class="annottext">DatumType a
</span><a href="#local-6989586621679693553"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span id="local-6989586621679693554"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679693554"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-669"></span><span>  </span><span class="annot"><span class="annottext">ConcreteOutput
  (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
-&gt; TxSkelOut
forall redeemer.
(Show redeemer, Typeable redeemer, IsTxInfoOutput redeemer,
 IsTxSkelOutAllowedOwner (OwnerType redeemer),
 Typeable (OwnerType redeemer), ToCredential (OwnerType redeemer),
 DatumType redeemer ~ TxSkelOutDatum, ValueType redeemer ~ Value,
 ToScript (ReferenceScriptType redeemer), Show (OwnerType redeemer),
 Show (ReferenceScriptType redeemer),
 Typeable (ReferenceScriptType redeemer)) =&gt;
redeemer -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span>
</span><span id="line-670"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TypedValidator a
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe (Versioned Script)
-&gt; ConcreteOutput
     (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-671"></span><span>        </span><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679693552"><span class="hs-identifier hs-var">validator</span></a></span><span>
</span><span id="line-672"></span><span>        </span><span class="annot"><span class="annottext">Maybe StakingCredential
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-673"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatumType a -&gt; TxSkelOutDatum
forall redeemer.
TxSkelOutDatumConstrs redeemer =&gt;
redeemer -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-var">TxSkelOutInlineDatum</span></a></span><span> </span><span class="annot"><span class="annottext">DatumType a
</span><a href="#local-6989586621679693553"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-674"></span><span>        </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679693554"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-675"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-676"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-677"></span><span>
</span><span id="line-678"></span><span class="hs-comment">-- | Pays a script a certain value with a certain hashed (not resolved in</span><span>
</span><span id="line-679"></span><span class="hs-comment">-- transaction) datum.</span><span>
</span><span id="line-680"></span><span id="local-6989586621679693555"><span class="annot"><a href="Cooked.Skeleton.html#paysScriptDatumHash"><span class="hs-identifier hs-type">paysScriptDatumHash</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-681"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679693555"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-682"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679693555"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-683"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679693555"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-684"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679693555"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-685"></span><span>    </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679693555"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-686"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679693555"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-687"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-688"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Script.TypedValidator</span></span><span> </span><span class="annot"><a href="#local-6989586621679693555"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-689"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679693555"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-690"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-691"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-692"></span><span id="paysScriptDatumHash"><span class="annot"><span class="annottext">paysScriptDatumHash :: forall a.
(ToData (DatumType a), Show (DatumType a), Typeable (DatumType a),
 Eq (DatumType a), PrettyCooked (DatumType a), Typeable a) =&gt;
TypedValidator a -&gt; DatumType a -&gt; Value -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#paysScriptDatumHash"><span class="hs-identifier hs-var hs-var">paysScriptDatumHash</span></a></span></span><span> </span><span id="local-6989586621679693601"><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679693601"><span class="hs-identifier hs-var">validator</span></a></span></span><span> </span><span id="local-6989586621679693602"><span class="annot"><span class="annottext">DatumType a
</span><a href="#local-6989586621679693602"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span id="local-6989586621679693603"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679693603"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-693"></span><span>  </span><span class="annot"><span class="annottext">ConcreteOutput
  (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
-&gt; TxSkelOut
forall redeemer.
(Show redeemer, Typeable redeemer, IsTxInfoOutput redeemer,
 IsTxSkelOutAllowedOwner (OwnerType redeemer),
 Typeable (OwnerType redeemer), ToCredential (OwnerType redeemer),
 DatumType redeemer ~ TxSkelOutDatum, ValueType redeemer ~ Value,
 ToScript (ReferenceScriptType redeemer), Show (OwnerType redeemer),
 Show (ReferenceScriptType redeemer),
 Typeable (ReferenceScriptType redeemer)) =&gt;
redeemer -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span>
</span><span id="line-694"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TypedValidator a
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe (Versioned Script)
-&gt; ConcreteOutput
     (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-695"></span><span>        </span><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679693601"><span class="hs-identifier hs-var">validator</span></a></span><span>
</span><span id="line-696"></span><span>        </span><span class="annot"><span class="annottext">Maybe StakingCredential
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-697"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatumType a -&gt; TxSkelOutDatum
forall redeemer.
TxSkelOutDatumConstrs redeemer =&gt;
redeemer -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-var">TxSkelOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">DatumType a
</span><a href="#local-6989586621679693602"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-698"></span><span>        </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679693603"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-699"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-700"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-701"></span><span>
</span><span id="line-702"></span><span class="hs-comment">-- | Pays a script a certain value without any datum. Intended to be used with</span><span>
</span><span id="line-703"></span><span class="hs-comment">-- 'withDatum', 'withDatumHash', or 'withInlineDatum' to try a datum whose type</span><span>
</span><span id="line-704"></span><span class="hs-comment">-- does not match the validator's.</span><span>
</span><span id="line-705"></span><span id="local-6989586621679692228"><span class="annot"><a href="Cooked.Skeleton.html#paysScriptNoDatum"><span class="hs-identifier hs-type">paysScriptNoDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679692228"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.TypedValidator</span></span><span> </span><span class="annot"><a href="#local-6989586621679692228"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-706"></span><span id="paysScriptNoDatum"><span class="annot"><span class="annottext">paysScriptNoDatum :: forall a. Typeable a =&gt; TypedValidator a -&gt; Value -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#paysScriptNoDatum"><span class="hs-identifier hs-var hs-var">paysScriptNoDatum</span></a></span></span><span> </span><span id="local-6989586621679693643"><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679693643"><span class="hs-identifier hs-var">validator</span></a></span></span><span> </span><span id="local-6989586621679693644"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679693644"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-707"></span><span>  </span><span class="annot"><span class="annottext">ConcreteOutput
  (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
-&gt; TxSkelOut
forall redeemer.
(Show redeemer, Typeable redeemer, IsTxInfoOutput redeemer,
 IsTxSkelOutAllowedOwner (OwnerType redeemer),
 Typeable (OwnerType redeemer), ToCredential (OwnerType redeemer),
 DatumType redeemer ~ TxSkelOutDatum, ValueType redeemer ~ Value,
 ToScript (ReferenceScriptType redeemer), Show (OwnerType redeemer),
 Show (ReferenceScriptType redeemer),
 Typeable (ReferenceScriptType redeemer)) =&gt;
redeemer -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span>
</span><span id="line-708"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TypedValidator a
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe (Versioned Script)
-&gt; ConcreteOutput
     (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-709"></span><span>        </span><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679693643"><span class="hs-identifier hs-var">validator</span></a></span><span>
</span><span id="line-710"></span><span>        </span><span class="annot"><span class="annottext">Maybe StakingCredential
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-711"></span><span>        </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span>
</span><span id="line-712"></span><span>        </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679693644"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-713"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-714"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-715"></span><span>
</span><span id="line-716"></span><span class="hs-comment">-- | Set the datum in a payment to the given datum (whose type may not fit the</span><span>
</span><span id="line-717"></span><span class="hs-comment">-- typed validator in case of a script).</span><span>
</span><span id="line-718"></span><span id="local-6989586621679692230"><span class="annot"><a href="Cooked.Skeleton.html#withDatum"><span class="hs-identifier hs-type">withDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-719"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="annot"><a href="#local-6989586621679692230"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-720"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679692230"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-721"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679692230"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-722"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679692230"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-723"></span><span>    </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679692230"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-724"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-725"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-726"></span><span>  </span><span class="annot"><a href="#local-6989586621679692230"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-727"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-728"></span><span id="withDatum"><span class="annot"><span class="annottext">withDatum :: forall a.
(ToData a, Show a, Typeable a, Eq a, PrettyCooked a) =&gt;
TxSkelOut -&gt; a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#withDatum"><span class="hs-identifier hs-var hs-var">withDatum</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679693704"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693704"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679693705"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693705"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-729"></span><span>  </span><span class="annot"><span class="annottext">ConcreteOutput
  (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall redeemer.
(Show redeemer, Typeable redeemer, IsTxInfoOutput redeemer,
 IsTxSkelOutAllowedOwner (OwnerType redeemer),
 Typeable (OwnerType redeemer), ToCredential (OwnerType redeemer),
 DatumType redeemer ~ TxSkelOutDatum, ValueType redeemer ~ Value,
 ToScript (ReferenceScriptType redeemer), Show (OwnerType redeemer),
 Show (ReferenceScriptType redeemer),
 Typeable (ReferenceScriptType redeemer)) =&gt;
redeemer -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(ConcreteOutput
   (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
 -&gt; TxSkelOut)
-&gt; ConcreteOutput
     (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-730"></span><span>    </span><span class="annot"><span class="annottext">OwnerType o
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe (ReferenceScriptType o)
-&gt; ConcreteOutput
     (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-731"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693704"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o (OwnerType o) -&gt; OwnerType o
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (OwnerType o)
forall o. IsAbstractOutput o =&gt; Lens' o (OwnerType o)
</span><a href="Cooked.Output.html#outputOwnerL"><span class="hs-identifier hs-var">outputOwnerL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-732"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693704"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o
-&gt; Optic' A_Lens NoIx o (Maybe StakingCredential)
-&gt; Maybe StakingCredential
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (Maybe StakingCredential)
forall o. IsAbstractOutput o =&gt; Lens' o (Maybe StakingCredential)
</span><a href="Cooked.Output.html#outputStakingCredentialL"><span class="hs-identifier hs-var">outputStakingCredentialL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-733"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall redeemer.
TxSkelOutDatumConstrs redeemer =&gt;
redeemer -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-var">TxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693705"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-734"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693704"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o Value -&gt; Value
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o Value
Lens' o (ValueType o)
forall o. IsAbstractOutput o =&gt; Lens' o (ValueType o)
</span><a href="Cooked.Output.html#outputValueL"><span class="hs-identifier hs-var">outputValueL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-735"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693704"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o
-&gt; Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
-&gt; Maybe (ReferenceScriptType o)
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
forall o.
IsAbstractOutput o =&gt;
Lens' o (Maybe (ReferenceScriptType o))
</span><a href="Cooked.Output.html#outputReferenceScriptL"><span class="hs-identifier hs-var">outputReferenceScriptL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-736"></span><span>
</span><span id="line-737"></span><span class="hs-comment">-- | Set the datum in a payment to the given inlined datum (whose type may not</span><span>
</span><span id="line-738"></span><span class="hs-comment">-- fit the typed validator in case of a script).</span><span>
</span><span id="line-739"></span><span id="local-6989586621679693708"><span class="annot"><a href="Cooked.Skeleton.html#withInlineDatum"><span class="hs-identifier hs-type">withInlineDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-740"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="annot"><a href="#local-6989586621679693708"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-741"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679693708"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-742"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679693708"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-743"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679693708"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-744"></span><span>    </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693708"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-745"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-746"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-747"></span><span>  </span><span class="annot"><a href="#local-6989586621679693708"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-748"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-749"></span><span id="withInlineDatum"><span class="annot"><span class="annottext">withInlineDatum :: forall a.
(ToData a, Show a, Typeable a, Eq a, PrettyCooked a) =&gt;
TxSkelOut -&gt; a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#withInlineDatum"><span class="hs-identifier hs-var hs-var">withInlineDatum</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679693768"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693768"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679693769"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693769"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-750"></span><span>  </span><span class="annot"><span class="annottext">ConcreteOutput
  (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall redeemer.
(Show redeemer, Typeable redeemer, IsTxInfoOutput redeemer,
 IsTxSkelOutAllowedOwner (OwnerType redeemer),
 Typeable (OwnerType redeemer), ToCredential (OwnerType redeemer),
 DatumType redeemer ~ TxSkelOutDatum, ValueType redeemer ~ Value,
 ToScript (ReferenceScriptType redeemer), Show (OwnerType redeemer),
 Show (ReferenceScriptType redeemer),
 Typeable (ReferenceScriptType redeemer)) =&gt;
redeemer -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(ConcreteOutput
   (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
 -&gt; TxSkelOut)
-&gt; ConcreteOutput
     (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-751"></span><span>    </span><span class="annot"><span class="annottext">OwnerType o
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe (ReferenceScriptType o)
-&gt; ConcreteOutput
     (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-752"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693768"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o (OwnerType o) -&gt; OwnerType o
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (OwnerType o)
forall o. IsAbstractOutput o =&gt; Lens' o (OwnerType o)
</span><a href="Cooked.Output.html#outputOwnerL"><span class="hs-identifier hs-var">outputOwnerL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-753"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693768"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o
-&gt; Optic' A_Lens NoIx o (Maybe StakingCredential)
-&gt; Maybe StakingCredential
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (Maybe StakingCredential)
forall o. IsAbstractOutput o =&gt; Lens' o (Maybe StakingCredential)
</span><a href="Cooked.Output.html#outputStakingCredentialL"><span class="hs-identifier hs-var">outputStakingCredentialL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-754"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall redeemer.
TxSkelOutDatumConstrs redeemer =&gt;
redeemer -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-var">TxSkelOutInlineDatum</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693769"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-755"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693768"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o Value -&gt; Value
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o Value
Lens' o (ValueType o)
forall o. IsAbstractOutput o =&gt; Lens' o (ValueType o)
</span><a href="Cooked.Output.html#outputValueL"><span class="hs-identifier hs-var">outputValueL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-756"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693768"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o
-&gt; Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
-&gt; Maybe (ReferenceScriptType o)
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
forall o.
IsAbstractOutput o =&gt;
Lens' o (Maybe (ReferenceScriptType o))
</span><a href="Cooked.Output.html#outputReferenceScriptL"><span class="hs-identifier hs-var">outputReferenceScriptL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-757"></span><span>
</span><span id="line-758"></span><span class="hs-comment">-- | Set the datum in a payment to the given hashed (not resolved in the</span><span>
</span><span id="line-759"></span><span class="hs-comment">-- transaction) datum (whose type may not fit the typed validator in case of a</span><span>
</span><span id="line-760"></span><span class="hs-comment">-- script).</span><span>
</span><span id="line-761"></span><span id="local-6989586621679693770"><span class="annot"><a href="Cooked.Skeleton.html#withDatumHash"><span class="hs-identifier hs-type">withDatumHash</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-762"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="annot"><a href="#local-6989586621679693770"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-763"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679693770"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-764"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679693770"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-765"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679693770"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-766"></span><span>    </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693770"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-767"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-768"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-769"></span><span>  </span><span class="annot"><a href="#local-6989586621679693770"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-770"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-771"></span><span id="withDatumHash"><span class="annot"><span class="annottext">withDatumHash :: forall a.
(ToData a, Show a, Typeable a, Eq a, PrettyCooked a) =&gt;
TxSkelOut -&gt; a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#withDatumHash"><span class="hs-identifier hs-var hs-var">withDatumHash</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679693830"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693830"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679693831"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693831"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-772"></span><span>  </span><span class="annot"><span class="annottext">ConcreteOutput
  (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall redeemer.
(Show redeemer, Typeable redeemer, IsTxInfoOutput redeemer,
 IsTxSkelOutAllowedOwner (OwnerType redeemer),
 Typeable (OwnerType redeemer), ToCredential (OwnerType redeemer),
 DatumType redeemer ~ TxSkelOutDatum, ValueType redeemer ~ Value,
 ToScript (ReferenceScriptType redeemer), Show (OwnerType redeemer),
 Show (ReferenceScriptType redeemer),
 Typeable (ReferenceScriptType redeemer)) =&gt;
redeemer -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(ConcreteOutput
   (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
 -&gt; TxSkelOut)
-&gt; ConcreteOutput
     (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-773"></span><span>    </span><span class="annot"><span class="annottext">OwnerType o
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe (ReferenceScriptType o)
-&gt; ConcreteOutput
     (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-774"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693830"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o (OwnerType o) -&gt; OwnerType o
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (OwnerType o)
forall o. IsAbstractOutput o =&gt; Lens' o (OwnerType o)
</span><a href="Cooked.Output.html#outputOwnerL"><span class="hs-identifier hs-var">outputOwnerL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-775"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693830"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o
-&gt; Optic' A_Lens NoIx o (Maybe StakingCredential)
-&gt; Maybe StakingCredential
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (Maybe StakingCredential)
forall o. IsAbstractOutput o =&gt; Lens' o (Maybe StakingCredential)
</span><a href="Cooked.Output.html#outputStakingCredentialL"><span class="hs-identifier hs-var">outputStakingCredentialL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-776"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall redeemer.
TxSkelOutDatumConstrs redeemer =&gt;
redeemer -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-var">TxSkelOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679693831"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-777"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693830"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o Value -&gt; Value
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o Value
Lens' o (ValueType o)
forall o. IsAbstractOutput o =&gt; Lens' o (ValueType o)
</span><a href="Cooked.Output.html#outputValueL"><span class="hs-identifier hs-var">outputValueL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-778"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693830"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o
-&gt; Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
-&gt; Maybe (ReferenceScriptType o)
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
forall o.
IsAbstractOutput o =&gt;
Lens' o (Maybe (ReferenceScriptType o))
</span><a href="Cooked.Output.html#outputReferenceScriptL"><span class="hs-identifier hs-var">outputReferenceScriptL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-779"></span><span>
</span><span id="line-780"></span><span class="hs-comment">-- | Add a reference script to a transaction output (or replace it if there is</span><span>
</span><span id="line-781"></span><span class="hs-comment">-- already one)</span><span>
</span><span id="line-782"></span><span id="local-6989586621679692237"><span class="annot"><a href="Cooked.Skeleton.html#withReferenceScript"><span class="hs-identifier hs-type">withReferenceScript</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-783"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679692237"><span class="hs-identifier hs-type">script</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-784"></span><span>    </span><span class="annot"><a href="Cooked.Classes.html#ToScript"><span class="hs-identifier hs-type">ToScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679692237"><span class="hs-identifier hs-type">script</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-785"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679692237"><span class="hs-identifier hs-type">script</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-786"></span><span>    </span><span class="annot"><a href="Cooked.Classes.html#ToScriptHash"><span class="hs-identifier hs-type">ToScriptHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679692237"><span class="hs-identifier hs-type">script</span></a></span><span>
</span><span id="line-787"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-788"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-789"></span><span>  </span><span class="annot"><a href="#local-6989586621679692237"><span class="hs-identifier hs-type">script</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-790"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-791"></span><span id="withReferenceScript"><span class="annot"><span class="annottext">withReferenceScript :: forall script.
(Show script, ToScript script, Typeable script,
 ToScriptHash script) =&gt;
TxSkelOut -&gt; script -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#withReferenceScript"><span class="hs-identifier hs-var hs-var">withReferenceScript</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679693888"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693888"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679693889"><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679693889"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-792"></span><span>  </span><span class="annot"><span class="annottext">ConcreteOutput (OwnerType o) TxSkelOutDatum Value script
-&gt; TxSkelOut
forall redeemer.
(Show redeemer, Typeable redeemer, IsTxInfoOutput redeemer,
 IsTxSkelOutAllowedOwner (OwnerType redeemer),
 Typeable (OwnerType redeemer), ToCredential (OwnerType redeemer),
 DatumType redeemer ~ TxSkelOutDatum, ValueType redeemer ~ Value,
 ToScript (ReferenceScriptType redeemer), Show (OwnerType redeemer),
 Show (ReferenceScriptType redeemer),
 Typeable (ReferenceScriptType redeemer)) =&gt;
redeemer -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(ConcreteOutput (OwnerType o) TxSkelOutDatum Value script
 -&gt; TxSkelOut)
-&gt; ConcreteOutput (OwnerType o) TxSkelOutDatum Value script
-&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-793"></span><span>    </span><span class="annot"><span class="annottext">OwnerType o
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe script
-&gt; ConcreteOutput (OwnerType o) TxSkelOutDatum Value script
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-794"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693888"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o (OwnerType o) -&gt; OwnerType o
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (OwnerType o)
forall o. IsAbstractOutput o =&gt; Lens' o (OwnerType o)
</span><a href="Cooked.Output.html#outputOwnerL"><span class="hs-identifier hs-var">outputOwnerL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-795"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693888"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o
-&gt; Optic' A_Lens NoIx o (Maybe StakingCredential)
-&gt; Maybe StakingCredential
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (Maybe StakingCredential)
forall o. IsAbstractOutput o =&gt; Lens' o (Maybe StakingCredential)
</span><a href="Cooked.Output.html#outputStakingCredentialL"><span class="hs-identifier hs-var">outputStakingCredentialL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-796"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693888"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o TxSkelOutDatum -&gt; TxSkelOutDatum
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Lens' o (DatumType o)
Optic' A_Lens NoIx o TxSkelOutDatum
forall o. IsAbstractOutput o =&gt; Lens' o (DatumType o)
</span><a href="Cooked.Output.html#outputDatumL"><span class="hs-identifier hs-var">outputDatumL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-797"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693888"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o Value -&gt; Value
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o Value
Lens' o (ValueType o)
forall o. IsAbstractOutput o =&gt; Lens' o (ValueType o)
</span><a href="Cooked.Output.html#outputValueL"><span class="hs-identifier hs-var">outputValueL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-798"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">script -&gt; Maybe script
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679693889"><span class="hs-identifier hs-var">script</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-799"></span><span>
</span><span id="line-800"></span><span class="hs-comment">-- | Add a staking credential to a transaction output (or replace it if there is</span><span>
</span><span id="line-801"></span><span class="hs-comment">-- already one)</span><span>
</span><span id="line-802"></span><span class="annot"><a href="Cooked.Skeleton.html#withStakingCredential"><span class="hs-identifier hs-type">withStakingCredential</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.StakingCredential</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span>
</span><span id="line-803"></span><span id="withStakingCredential"><span class="annot"><span class="annottext">withStakingCredential :: TxSkelOut -&gt; StakingCredential -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#withStakingCredential"><span class="hs-identifier hs-var hs-var">withStakingCredential</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679693943"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693943"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679693944"><span class="annot"><span class="annottext">StakingCredential
</span><a href="#local-6989586621679693944"><span class="hs-identifier hs-var">stakingCredential</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-804"></span><span>  </span><span class="annot"><span class="annottext">ConcreteOutput
  (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall redeemer.
(Show redeemer, Typeable redeemer, IsTxInfoOutput redeemer,
 IsTxSkelOutAllowedOwner (OwnerType redeemer),
 Typeable (OwnerType redeemer), ToCredential (OwnerType redeemer),
 DatumType redeemer ~ TxSkelOutDatum, ValueType redeemer ~ Value,
 ToScript (ReferenceScriptType redeemer), Show (OwnerType redeemer),
 Show (ReferenceScriptType redeemer),
 Typeable (ReferenceScriptType redeemer)) =&gt;
redeemer -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(ConcreteOutput
   (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
 -&gt; TxSkelOut)
-&gt; ConcreteOutput
     (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-805"></span><span>    </span><span class="annot"><span class="annottext">OwnerType o
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe (ReferenceScriptType o)
-&gt; ConcreteOutput
     (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-806"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693943"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o (OwnerType o) -&gt; OwnerType o
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (OwnerType o)
forall o. IsAbstractOutput o =&gt; Lens' o (OwnerType o)
</span><a href="Cooked.Output.html#outputOwnerL"><span class="hs-identifier hs-var">outputOwnerL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-807"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StakingCredential -&gt; Maybe StakingCredential
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">StakingCredential
</span><a href="#local-6989586621679693944"><span class="hs-identifier hs-var">stakingCredential</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-808"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693943"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o TxSkelOutDatum -&gt; TxSkelOutDatum
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Lens' o (DatumType o)
Optic' A_Lens NoIx o TxSkelOutDatum
forall o. IsAbstractOutput o =&gt; Lens' o (DatumType o)
</span><a href="Cooked.Output.html#outputDatumL"><span class="hs-identifier hs-var">outputDatumL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-809"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693943"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o Value -&gt; Value
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o Value
Lens' o (ValueType o)
forall o. IsAbstractOutput o =&gt; Lens' o (ValueType o)
</span><a href="Cooked.Output.html#outputValueL"><span class="hs-identifier hs-var">outputValueL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679693943"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o
-&gt; Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
-&gt; Maybe (ReferenceScriptType o)
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
forall o.
IsAbstractOutput o =&gt;
Lens' o (Maybe (ReferenceScriptType o))
</span><a href="Cooked.Output.html#outputReferenceScriptL"><span class="hs-identifier hs-var">outputReferenceScriptL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-811"></span><span>
</span><span id="line-812"></span><span class="annot"><span class="hs-comment">-- * Redeemers for transaction inputs</span></span><span>
</span><span id="line-813"></span><span>
</span><span id="line-814"></span><span class="hs-keyword">type</span><span> </span><span id="SpendsScriptConstrs"><span class="annot"><a href="Cooked.Skeleton.html#SpendsScriptConstrs"><span class="hs-identifier hs-var">SpendsScriptConstrs</span></a></span></span><span> </span><span id="local-6989586621679693945"><span class="annot"><a href="#local-6989586621679693945"><span class="hs-identifier hs-type">redeemer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-815"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="annot"><a href="#local-6989586621679693945"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-816"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679693945"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-817"></span><span>    </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693945"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-818"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679693945"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-819"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679693945"><span class="hs-identifier hs-type">redeemer</span></a></span><span>
</span><span id="line-820"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-821"></span><span>
</span><span id="line-822"></span><span class="hs-keyword">data</span><span> </span><span id="TxSkelRedeemer"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-var">TxSkelRedeemer</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-823"></span><span>  </span><span id="TxSkelNoRedeemerForPK"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelNoRedeemerForPK"><span class="hs-identifier hs-var">TxSkelNoRedeemerForPK</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span>
</span><span id="line-824"></span><span>  </span><span id="local-6989586621679693947"><span id="TxSkelRedeemerForScript"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemerForScript"><span class="hs-identifier hs-var">TxSkelRedeemerForScript</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#SpendsScriptConstrs"><span class="hs-identifier hs-type">SpendsScriptConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693947"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679693947"><span class="hs-identifier hs-type">redeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span></span><span>
</span><span id="line-825"></span><span>  </span><span class="hs-comment">-- | The first argument is a reference to the output where the referenced</span><span>
</span><span id="line-826"></span><span>  </span><span class="hs-comment">-- script is stored.</span><span>
</span><span id="line-827"></span><span>  </span><span id="local-6989586621679693949"><span id="TxSkelRedeemerForReferencedScript"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemerForReferencedScript"><span class="hs-identifier hs-var">TxSkelRedeemerForReferencedScript</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#SpendsScriptConstrs"><span class="hs-identifier hs-type">SpendsScriptConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679693949"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679693949"><span class="hs-identifier hs-type">redeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span></span><span>
</span><span id="line-828"></span><span>
</span><span id="line-829"></span><span id="local-6989586621679692241"><span class="annot"><a href="Cooked.Skeleton.html#txSkelTypedRedeemer"><span class="hs-identifier hs-type">txSkelTypedRedeemer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Api.FromData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.RedeemerType</span></span><span> </span><span class="annot"><a href="#local-6989586621679692241"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.RedeemerType</span></span><span> </span><span class="annot"><a href="#local-6989586621679692241"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-830"></span><span id="txSkelTypedRedeemer"><span class="annot"><span class="annottext">txSkelTypedRedeemer :: forall a.
FromData (RedeemerType a) =&gt;
TxSkelRedeemer -&gt; Maybe (RedeemerType a)
</span><a href="Cooked.Skeleton.html#txSkelTypedRedeemer"><span class="hs-identifier hs-var hs-var">txSkelTypedRedeemer</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemerForScript"><span class="hs-identifier hs-type">TxSkelRedeemerForScript</span></a></span><span> </span><span id="local-6989586621679693956"><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679693956"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Data -&gt; Maybe (RedeemerType a)
forall a. FromData a =&gt; Data -&gt; Maybe a
</span><span class="hs-identifier hs-var">Api.fromData</span></span><span> </span><span class="annot"><span class="annottext">(Data -&gt; Maybe (RedeemerType a))
-&gt; (redeemer -&gt; Data) -&gt; redeemer -&gt; Maybe (RedeemerType a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; Data
forall a. ToData a =&gt; a -&gt; Data
</span><span class="hs-identifier hs-var">Api.toData</span></span><span> </span><span class="annot"><span class="annottext">(redeemer -&gt; Maybe (RedeemerType a))
-&gt; redeemer -&gt; Maybe (RedeemerType a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679693956"><span class="hs-identifier hs-var">redeemer</span></a></span><span>
</span><span id="line-831"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelTypedRedeemer"><span class="hs-identifier hs-var">txSkelTypedRedeemer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemerForReferencedScript"><span class="hs-identifier hs-type">TxSkelRedeemerForReferencedScript</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679693962"><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679693962"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Data -&gt; Maybe (RedeemerType a)
forall a. FromData a =&gt; Data -&gt; Maybe a
</span><span class="hs-identifier hs-var">Api.fromData</span></span><span> </span><span class="annot"><span class="annottext">(Data -&gt; Maybe (RedeemerType a))
-&gt; (redeemer -&gt; Data) -&gt; redeemer -&gt; Maybe (RedeemerType a)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; Data
forall a. ToData a =&gt; a -&gt; Data
</span><span class="hs-identifier hs-var">Api.toData</span></span><span> </span><span class="annot"><span class="annottext">(redeemer -&gt; Maybe (RedeemerType a))
-&gt; redeemer -&gt; Maybe (RedeemerType a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679693962"><span class="hs-identifier hs-var">redeemer</span></a></span><span>
</span><span id="line-832"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelTypedRedeemer"><span class="hs-identifier hs-var">txSkelTypedRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe (RedeemerType a)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-833"></span><span>
</span><span id="line-834"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelReferenceScript"><span class="hs-identifier hs-type">txSkelReferenceScript</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span>
</span><span id="line-835"></span><span id="txSkelReferenceScript"><span class="annot"><span class="annottext">txSkelReferenceScript :: TxSkelRedeemer -&gt; Maybe TxOutRef
</span><a href="Cooked.Skeleton.html#txSkelReferenceScript"><span class="hs-identifier hs-var hs-var">txSkelReferenceScript</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemerForReferencedScript"><span class="hs-identifier hs-type">TxSkelRedeemerForReferencedScript</span></a></span><span> </span><span id="local-6989586621679693964"><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679693964"><span class="hs-identifier hs-var">refScript</span></a></span></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxOutRef -&gt; Maybe TxOutRef
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679693964"><span class="hs-identifier hs-var">refScript</span></a></span><span>
</span><span id="line-836"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelReferenceScript"><span class="hs-identifier hs-var">txSkelReferenceScript</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe TxOutRef
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-837"></span><span>
</span><span id="line-838"></span><span id="local-6989586621679693966"><span id="local-6989586621679693968"><span id="local-6989586621679693972"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-839"></span><span>
</span><span id="line-840"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679693976"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-841"></span><span>  </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#TxSkelNoRedeemerForPK"><span class="hs-identifier hs-var">TxSkelNoRedeemerForPK</span></a></span><span> </span><span id="local-6989586621679693979"><span class="annot"><span class="annottext">== :: TxSkelRedeemer -&gt; TxSkelRedeemer -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#TxSkelNoRedeemerForPK"><span class="hs-identifier hs-var">TxSkelNoRedeemerForPK</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-842"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemerForScript"><span class="hs-identifier hs-type">TxSkelRedeemerForScript</span></a></span><span> </span><span id="local-6989586621679693983"><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679693983"><span class="hs-identifier hs-var">r1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemerForScript"><span class="hs-identifier hs-type">TxSkelRedeemerForScript</span></a></span><span> </span><span id="local-6989586621679693988"><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679693988"><span class="hs-identifier hs-var">r2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-843"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; TypeRep redeemer
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679693983"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep redeemer
-&gt; TypeRep redeemer -&gt; Maybe (redeemer :~~: redeemer)
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-operator hs-var">`eqTypeRep`</span></span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; TypeRep redeemer
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679693988"><span class="hs-identifier hs-var">r2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-844"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">redeemer :~~: redeemer
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679693983"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; redeemer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">PlutusTx.==</span></span><span> </span><span class="annot"><span class="annottext">redeemer
redeemer
</span><a href="#local-6989586621679693988"><span class="hs-identifier hs-var">r2</span></a></span><span>
</span><span id="line-845"></span><span>      </span><span class="annot"><span class="annottext">Maybe (redeemer :~~: redeemer)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-846"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemerForReferencedScript"><span class="hs-identifier hs-type">TxSkelRedeemerForReferencedScript</span></a></span><span> </span><span id="local-6989586621679693994"><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679693994"><span class="hs-identifier hs-var">o1</span></a></span></span><span> </span><span id="local-6989586621679693995"><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679693995"><span class="hs-identifier hs-var">r1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemerForReferencedScript"><span class="hs-identifier hs-type">TxSkelRedeemerForReferencedScript</span></a></span><span> </span><span id="local-6989586621679694001"><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679694001"><span class="hs-identifier hs-var">o2</span></a></span></span><span> </span><span id="local-6989586621679694002"><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679694002"><span class="hs-identifier hs-var">r2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-847"></span><span>    </span><span class="annot"><span class="annottext">redeemer -&gt; TxSkelRedeemer
forall redeemer.
SpendsScriptConstrs redeemer =&gt;
redeemer -&gt; TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#TxSkelRedeemerForScript"><span class="hs-identifier hs-var">TxSkelRedeemerForScript</span></a></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679693995"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer -&gt; TxSkelRedeemer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; TxSkelRedeemer
forall redeemer.
SpendsScriptConstrs redeemer =&gt;
redeemer -&gt; TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#TxSkelRedeemerForScript"><span class="hs-identifier hs-var">TxSkelRedeemerForScript</span></a></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679694002"><span class="hs-identifier hs-var">r2</span></a></span><span>
</span><span id="line-848"></span><span>      </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679693994"><span class="hs-identifier hs-var">o1</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef -&gt; TxOutRef -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679694001"><span class="hs-identifier hs-var">o2</span></a></span><span>
</span><span id="line-849"></span><span>  </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-850"></span><span>
</span><span id="line-851"></span><span class="annot"><span class="hs-comment">-- * Transaction skeletons</span></span><span>
</span><span id="line-852"></span><span>
</span><span id="line-853"></span><span class="hs-keyword">data</span><span> </span><span id="TxSkel"><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-var">TxSkel</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-854"></span><span>  </span><span id="TxSkel"><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-var">TxSkel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-855"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | Labels do not influence the transaction generation at all; they are</span><span>
</span><span id="line-856"></span><span>      </span><span class="hs-comment">-- pretty-printed whenever cooked-validators prints a transaction, and can</span><span>
</span><span id="line-857"></span><span>      </span><span class="hs-comment">-- therefore make the output more informative (and greppable).</span><span>
</span><span id="line-858"></span><span>      </span><span id="txSkelLabel"><span class="annot"><span class="annottext">TxSkel -&gt; Set TxLabel
</span><a href="Cooked.Skeleton.html#txSkelLabel"><span class="hs-identifier hs-var hs-var">txSkelLabel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-859"></span><span>      </span><span class="annot"><span class="hs-comment">-- | Some options that control transaction generation.</span></span><span>
</span><span id="line-860"></span><span>      </span><span id="txSkelOpts"><span class="annot"><span class="annottext">TxSkel -&gt; TxOpts
</span><a href="Cooked.Skeleton.html#txSkelOpts"><span class="hs-identifier hs-var hs-var">txSkelOpts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxOpts"><span class="hs-identifier hs-type">TxOpts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-861"></span><span>      </span><span class="hs-comment">-- | Any value minted or burned by the transaction. You'll probably want</span><span>
</span><span id="line-862"></span><span>      </span><span class="hs-comment">-- to use 'txSkelMintsFromList' to construct this.</span><span>
</span><span id="line-863"></span><span>      </span><span id="txSkelMints"><span class="annot"><span class="annottext">TxSkel -&gt; TxSkelMints
</span><a href="Cooked.Skeleton.html#txSkelMints"><span class="hs-identifier hs-var hs-var">txSkelMints</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-864"></span><span>      </span><span class="hs-comment">-- | The wallets signing the transaction. This list must contain at least</span><span>
</span><span id="line-865"></span><span>      </span><span class="hs-comment">-- one element. By default, the first signer will pay for fees and</span><span>
</span><span id="line-866"></span><span>      </span><span class="hs-comment">-- balancing. You can change that with 'txOptBalanceWallet'.</span><span>
</span><span id="line-867"></span><span>      </span><span id="txSkelSigners"><span class="annot"><span class="annottext">TxSkel -&gt; [Wallet]
</span><a href="Cooked.Skeleton.html#txSkelSigners"><span class="hs-identifier hs-var hs-var">txSkelSigners</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-868"></span><span>      </span><span id="txSkelValidityRange"><span class="annot"><span class="annottext">TxSkel -&gt; SlotRange
</span><a href="Cooked.Skeleton.html#txSkelValidityRange"><span class="hs-identifier hs-var hs-var">txSkelValidityRange</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ledger.SlotRange</span></span><span class="hs-special">,</span><span>
</span><span id="line-869"></span><span>      </span><span class="hs-comment">-- | To each 'TxOutRef' the transaction should consume, add a redeemer</span><span>
</span><span id="line-870"></span><span>      </span><span class="hs-comment">-- specifying how to spend it. You must make sure that</span><span>
</span><span id="line-871"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-872"></span><span>      </span><span class="hs-comment">-- - On 'TxOutRef's referencing UTxOs belonging to public keys, you use</span><span>
</span><span id="line-873"></span><span>      </span><span class="hs-comment">--   the 'TxSkelNoRedeemerForPK' constructor.</span><span>
</span><span id="line-874"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-875"></span><span>      </span><span class="hs-comment">-- - On 'TxOutRef's referencing UTxOs belonging to scripts, you must make</span><span>
</span><span id="line-876"></span><span>      </span><span class="hs-comment">--   sure that the type of the redeemer is appropriate for the script.</span><span>
</span><span id="line-877"></span><span>      </span><span id="txSkelIns"><span class="annot"><span class="annottext">TxSkel -&gt; Map TxOutRef TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#txSkelIns"><span class="hs-identifier hs-var hs-var">txSkelIns</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-878"></span><span>      </span><span class="annot"><span class="hs-comment">-- | All outputs referenced by the transaction.</span></span><span>
</span><span id="line-879"></span><span>      </span><span id="txSkelInsReference"><span class="annot"><span class="annottext">TxSkel -&gt; Set TxOutRef
</span><a href="Cooked.Skeleton.html#txSkelInsReference"><span class="hs-identifier hs-var hs-var">txSkelInsReference</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span class="hs-special">,</span><span>
</span><span id="line-880"></span><span>      </span><span class="hs-comment">-- | The outputs of the transaction. These will occur in exactly this</span><span>
</span><span id="line-881"></span><span>      </span><span class="hs-comment">-- order on the transaction.</span><span>
</span><span id="line-882"></span><span>      </span><span id="txSkelOuts"><span class="annot"><span class="annottext">TxSkel -&gt; [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOuts"><span class="hs-identifier hs-var hs-var">txSkelOuts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-883"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-884"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span>
</span><span id="line-885"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679694014"><span id="local-6989586621679694035"><span id="local-6989586621679694039"><span class="annot"><span class="annottext">Int -&gt; TxSkel -&gt; ShowS
[TxSkel] -&gt; ShowS
TxSkel -&gt; String
(Int -&gt; TxSkel -&gt; ShowS)
-&gt; (TxSkel -&gt; String) -&gt; ([TxSkel] -&gt; ShowS) -&gt; Show TxSkel
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; TxSkel -&gt; ShowS
showsPrec :: Int -&gt; TxSkel -&gt; ShowS
$cshow :: TxSkel -&gt; String
show :: TxSkel -&gt; String
$cshowList :: [TxSkel] -&gt; ShowS
showList :: [TxSkel] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679694055"><span id="local-6989586621679694076"><span class="annot"><span class="annottext">TxSkel -&gt; TxSkel -&gt; Bool
(TxSkel -&gt; TxSkel -&gt; Bool)
-&gt; (TxSkel -&gt; TxSkel -&gt; Bool) -&gt; Eq TxSkel
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TxSkel -&gt; TxSkel -&gt; Bool
== :: TxSkel -&gt; TxSkel -&gt; Bool
$c/= :: TxSkel -&gt; TxSkel -&gt; Bool
/= :: TxSkel -&gt; TxSkel -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-886"></span><span>
</span><span id="line-887"></span><span id="txSkelLabelL"><span id="txSkelOptsL"><span id="txSkelMintsL"><span id="txSkelValidityRangeL"><span id="txSkelSignersL"><span id="txSkelInsL"><span id="txSkelInsReferenceL"><span id="txSkelOutsL"><span class="hs-identifier">makeLensesFor</span><span>
</span><span id="line-888"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelLabel&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelLabelL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-889"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelOpts&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelOptsL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-890"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelMints&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelMintsL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-891"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelValidityRange&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelValidityRangeL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-892"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelSigners&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelSignersL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-893"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelIns&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelInsL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-894"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelInsReference&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelInsReferenceL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-895"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelInsCollateral&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelInsCollateralL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-896"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelOuts&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelOutsL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-897"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelFee&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelFeeL&quot;</span><span class="hs-special">)</span><span>
</span><span id="line-898"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-899"></span><span>  </span><span class="hs-special">''</span><span class="hs-identifier">TxSkel</span></span></span></span></span></span></span></span></span><span>
</span><span id="line-900"></span><span>
</span><span id="line-901"></span><span class="annot"><span class="hs-comment">-- | A convenience template of an empty transaction skeleton.</span></span><span>
</span><span id="line-902"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelTemplate"><span class="hs-identifier hs-type">txSkelTemplate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span>
</span><span id="line-903"></span><span id="txSkelTemplate"><span class="annot"><span class="annottext">txSkelTemplate :: TxSkel
</span><a href="Cooked.Skeleton.html#txSkelTemplate"><span class="hs-identifier hs-var hs-var">txSkelTemplate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-904"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span>
</span><span id="line-905"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">txSkelLabel :: Set TxLabel
</span><a href="Cooked.Skeleton.html#txSkelLabel"><span class="hs-identifier hs-var">txSkelLabel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set TxLabel
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">,</span><span>
</span><span id="line-906"></span><span>      </span><span class="annot"><span class="annottext">txSkelOpts :: TxOpts
</span><a href="Cooked.Skeleton.html#txSkelOpts"><span class="hs-identifier hs-var">txSkelOpts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxOpts
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span class="hs-special">,</span><span>
</span><span id="line-907"></span><span>      </span><span class="annot"><span class="annottext">txSkelMints :: TxSkelMints
</span><a href="Cooked.Skeleton.html#txSkelMints"><span class="hs-identifier hs-var">txSkelMints</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span class="hs-special">,</span><span>
</span><span id="line-908"></span><span>      </span><span class="annot"><span class="annottext">txSkelValidityRange :: SlotRange
</span><a href="Cooked.Skeleton.html#txSkelValidityRange"><span class="hs-identifier hs-var">txSkelValidityRange</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotRange
forall a. Interval a
</span><span class="hs-identifier hs-var">Api.always</span></span><span class="hs-special">,</span><span>
</span><span id="line-909"></span><span>      </span><span class="annot"><span class="annottext">txSkelSigners :: [Wallet]
</span><a href="Cooked.Skeleton.html#txSkelSigners"><span class="hs-identifier hs-var">txSkelSigners</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-910"></span><span>      </span><span class="annot"><span class="annottext">txSkelIns :: Map TxOutRef TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#txSkelIns"><span class="hs-identifier hs-var">txSkelIns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxSkelRedeemer
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span class="hs-special">,</span><span>
</span><span id="line-911"></span><span>      </span><span class="annot"><span class="annottext">txSkelInsReference :: Set TxOutRef
</span><a href="Cooked.Skeleton.html#txSkelInsReference"><span class="hs-identifier hs-var">txSkelInsReference</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set TxOutRef
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">,</span><span>
</span><span id="line-912"></span><span>      </span><span class="annot"><span class="annottext">txSkelOuts :: [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOuts"><span class="hs-identifier hs-var">txSkelOuts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-913"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-914"></span><span>
</span><span id="line-915"></span><span class="hs-comment">-- | The missing information on a 'TxSkel' that can only be resolved by querying</span><span>
</span><span id="line-916"></span><span class="hs-comment">-- the state of the blockchain.</span><span>
</span><span id="line-917"></span><span class="hs-keyword">data</span><span> </span><span id="SkelContext"><span class="annot"><a href="Cooked.Skeleton.html#SkelContext"><span class="hs-identifier hs-var">SkelContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SkelContext"><span class="annot"><a href="Cooked.Skeleton.html#SkelContext"><span class="hs-identifier hs-var">SkelContext</span></a></span></span><span>
</span><span id="line-918"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="skelContextTxOuts"><span class="annot"><span class="annottext">SkelContext -&gt; Map TxOutRef TxOut
</span><a href="Cooked.Skeleton.html#skelContextTxOuts"><span class="hs-identifier hs-var hs-var">skelContextTxOuts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOut</span></span><span class="hs-special">,</span><span>
</span><span id="line-919"></span><span>    </span><span id="skelContextTxSkelOutDatums"><span class="annot"><span class="annottext">SkelContext -&gt; Map DatumHash TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#skelContextTxSkelOutDatums"><span class="hs-identifier hs-var hs-var">skelContextTxSkelOutDatums</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.DatumHash</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span>
</span><span id="line-920"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-921"></span><span>
</span><span id="line-922"></span><span class="annot"><span class="hs-comment">-- | Return all data on transaction outputs.</span></span><span>
</span><span id="line-923"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutputData"><span class="hs-identifier hs-type">txSkelOutputData</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.DatumHash</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span>
</span><span id="line-924"></span><span id="txSkelOutputData"><span class="annot"><span class="annottext">txSkelOutputData :: TxSkel -&gt; Map DatumHash TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#txSkelOutputData"><span class="hs-identifier hs-var hs-var">txSkelOutputData</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-925"></span><span>  </span><span class="annot"><span class="annottext">Optic' A_Fold NoIx TxSkel TxSkelOutDatum
-&gt; (TxSkelOutDatum -&gt; Map DatumHash TxSkelOutDatum)
-&gt; TxSkel
-&gt; Map DatumHash TxSkelOutDatum
forall k m (is :: IxList) s a.
(Is k A_Fold, Monoid m) =&gt;
Optic' k is s a -&gt; (a -&gt; m) -&gt; s -&gt; m
</span><span class="hs-identifier hs-var">foldMapOf</span></span><span>
</span><span id="line-926"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Lens' TxSkel [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOutsL"><span class="hs-identifier hs-var">txSkelOutsL</span></a></span><span>
</span><span id="line-927"></span><span>        </span><span class="annot"><span class="annottext">Lens' TxSkel [TxSkelOut]
-&gt; Optic A_Fold NoIx [TxSkelOut] [TxSkelOut] TxSkelOut TxSkelOut
-&gt; Optic A_Fold NoIx TxSkel TxSkel TxSkelOut TxSkelOut
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic A_Fold NoIx [TxSkelOut] [TxSkelOut] TxSkelOut TxSkelOut
forall (f :: * -&gt; *) a. Foldable f =&gt; Fold (f a) a
</span><span class="hs-identifier hs-var">folded</span></span><span>
</span><span id="line-928"></span><span>        </span><span class="annot"><span class="annottext">Optic A_Fold NoIx TxSkel TxSkel TxSkelOut TxSkelOut
-&gt; Lens' TxSkelOut TxSkelOutDatum
-&gt; Optic' A_Fold NoIx TxSkel TxSkelOutDatum
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Lens' TxSkelOut TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#txSkelOutDatumL"><span class="hs-identifier hs-var">txSkelOutDatumL</span></a></span><span>
</span><span id="line-929"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-930"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679694201"><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679694201"><span class="hs-identifier hs-var">txSkelOutDatum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-931"></span><span>        </span><span class="annot"><span class="annottext">Map DatumHash TxSkelOutDatum
-&gt; (Datum -&gt; Map DatumHash TxSkelOutDatum)
-&gt; Maybe Datum
-&gt; Map DatumHash TxSkelOutDatum
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span>
</span><span id="line-932"></span><span>          </span><span class="annot"><span class="annottext">Map DatumHash TxSkelOutDatum
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-933"></span><span>          </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679694203"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679694203"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DatumHash -&gt; TxSkelOutDatum -&gt; Map DatumHash TxSkelOutDatum
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Datum -&gt; DatumHash
</span><span class="hs-identifier hs-var">Script.datumHash</span></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679694203"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679694201"><span class="hs-identifier hs-var">txSkelOutDatum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-934"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; Maybe Datum
</span><a href="Cooked.Skeleton.html#txSkelOutUntypedDatum"><span class="hs-identifier hs-var">txSkelOutUntypedDatum</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679694201"><span class="hs-identifier hs-var">txSkelOutDatum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-935"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-936"></span><span>
</span><span id="line-937"></span><span class="hs-keyword">newtype</span><span> </span><span id="Fee"><span class="annot"><a href="Cooked.Skeleton.html#Fee"><span class="hs-identifier hs-var">Fee</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Fee"><span class="annot"><a href="Cooked.Skeleton.html#Fee"><span class="hs-identifier hs-var">Fee</span></a></span></span><span> </span><span class="hs-special">{</span><span id="feeLovelace"><span class="annot"><span class="annottext">Fee -&gt; Integer
</span><a href="Cooked.Skeleton.html#feeLovelace"><span class="hs-identifier hs-var hs-var">feeLovelace</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">}</span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679694208"><span id="local-6989586621679694212"><span class="annot"><span class="annottext">Fee -&gt; Fee -&gt; Bool
(Fee -&gt; Fee -&gt; Bool) -&gt; (Fee -&gt; Fee -&gt; Bool) -&gt; Eq Fee
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Fee -&gt; Fee -&gt; Bool
== :: Fee -&gt; Fee -&gt; Bool
$c/= :: Fee -&gt; Fee -&gt; Bool
/= :: Fee -&gt; Fee -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679694219"><span id="local-6989586621679694224"><span id="local-6989586621679694228"><span id="local-6989586621679694232"><span id="local-6989586621679694236"><span id="local-6989586621679694240"><span id="local-6989586621679694244"><span class="annot"><span class="annottext">Eq Fee
Eq Fee =&gt;
(Fee -&gt; Fee -&gt; Ordering)
-&gt; (Fee -&gt; Fee -&gt; Bool)
-&gt; (Fee -&gt; Fee -&gt; Bool)
-&gt; (Fee -&gt; Fee -&gt; Bool)
-&gt; (Fee -&gt; Fee -&gt; Bool)
-&gt; (Fee -&gt; Fee -&gt; Fee)
-&gt; (Fee -&gt; Fee -&gt; Fee)
-&gt; Ord Fee
Fee -&gt; Fee -&gt; Bool
Fee -&gt; Fee -&gt; Ordering
Fee -&gt; Fee -&gt; Fee
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: Fee -&gt; Fee -&gt; Ordering
compare :: Fee -&gt; Fee -&gt; Ordering
$c&lt; :: Fee -&gt; Fee -&gt; Bool
&lt; :: Fee -&gt; Fee -&gt; Bool
$c&lt;= :: Fee -&gt; Fee -&gt; Bool
&lt;= :: Fee -&gt; Fee -&gt; Bool
$c&gt; :: Fee -&gt; Fee -&gt; Bool
&gt; :: Fee -&gt; Fee -&gt; Bool
$c&gt;= :: Fee -&gt; Fee -&gt; Bool
&gt;= :: Fee -&gt; Fee -&gt; Bool
$cmax :: Fee -&gt; Fee -&gt; Fee
max :: Fee -&gt; Fee -&gt; Fee
$cmin :: Fee -&gt; Fee -&gt; Fee
min :: Fee -&gt; Fee -&gt; Fee
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679694249"><span id="local-6989586621679694253"><span id="local-6989586621679694257"><span class="annot"><span class="annottext">Int -&gt; Fee -&gt; ShowS
[Fee] -&gt; ShowS
Fee -&gt; String
(Int -&gt; Fee -&gt; ShowS)
-&gt; (Fee -&gt; String) -&gt; ([Fee] -&gt; ShowS) -&gt; Show Fee
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Fee -&gt; ShowS
showsPrec :: Int -&gt; Fee -&gt; ShowS
$cshow :: Fee -&gt; String
show :: Fee -&gt; String
$cshowList :: [Fee] -&gt; ShowS
showList :: [Fee] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679694260"><span id="local-6989586621679694264"><span id="local-6989586621679694268"><span id="local-6989586621679694272"><span id="local-6989586621679694276"><span id="local-6989586621679694280"><span id="local-6989586621679694284"><span class="annot"><span class="annottext">Integer -&gt; Fee
Fee -&gt; Fee
Fee -&gt; Fee -&gt; Fee
(Fee -&gt; Fee -&gt; Fee)
-&gt; (Fee -&gt; Fee -&gt; Fee)
-&gt; (Fee -&gt; Fee -&gt; Fee)
-&gt; (Fee -&gt; Fee)
-&gt; (Fee -&gt; Fee)
-&gt; (Fee -&gt; Fee)
-&gt; (Integer -&gt; Fee)
-&gt; Num Fee
forall a.
(a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Integer -&gt; a)
-&gt; Num a
$c+ :: Fee -&gt; Fee -&gt; Fee
+ :: Fee -&gt; Fee -&gt; Fee
$c- :: Fee -&gt; Fee -&gt; Fee
- :: Fee -&gt; Fee -&gt; Fee
$c* :: Fee -&gt; Fee -&gt; Fee
* :: Fee -&gt; Fee -&gt; Fee
$cnegate :: Fee -&gt; Fee
negate :: Fee -&gt; Fee
$cabs :: Fee -&gt; Fee
abs :: Fee -&gt; Fee
$csignum :: Fee -&gt; Fee
signum :: Fee -&gt; Fee
$cfromInteger :: Integer -&gt; Fee
fromInteger :: Integer -&gt; Fee
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Num</span></span></span></span></span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-938"></span><span>
</span><span id="line-939"></span><span class="hs-comment">-- | The value in all transaction inputs, plus the negative parts of the minted</span><span>
</span><span id="line-940"></span><span class="hs-comment">-- value. This is the right hand side of the &quot;balancing equation&quot;:</span><span>
</span><span id="line-941"></span><span class="hs-comment">--</span><span>
</span><span id="line-942"></span><span class="hs-comment">-- &gt; mints + inputs = fees + burns + outputs</span><span>
</span><span id="line-943"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutputValue"><span class="hs-identifier hs-type">txSkelOutputValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#Fee"><span class="hs-identifier hs-type">Fee</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span>
</span><span id="line-944"></span><span id="txSkelOutputValue"><span class="annot"><span class="annottext">txSkelOutputValue :: TxSkel -&gt; Fee -&gt; Value
</span><a href="Cooked.Skeleton.html#txSkelOutputValue"><span class="hs-identifier hs-var hs-var">txSkelOutputValue</span></a></span></span><span> </span><span id="local-6989586621679694289"><span class="annot"><span class="annottext">skel :: TxSkel
</span><a href="#local-6989586621679694289"><span class="hs-identifier hs-var">skel</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">txSkelMints :: TxSkel -&gt; TxSkelMints
</span><a href="Cooked.Skeleton.html#txSkelMints"><span class="hs-identifier hs-var">txSkelMints</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621679694290"><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679694290"><span class="hs-identifier hs-var">mints</span></a></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679694291"><span class="annot"><span class="annottext">Fee
</span><a href="#local-6989586621679694291"><span class="hs-identifier hs-var">fees</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-945"></span><span>  </span><span class="annot"><span class="annottext">Value -&gt; Value
</span><a href="Cooked.ValueUtils.html#negativePart"><span class="hs-identifier hs-var">negativePart</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelMints -&gt; Value
</span><a href="Cooked.Skeleton.html#txSkelMintsValue"><span class="hs-identifier hs-var">txSkelMintsValue</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679694290"><span class="hs-identifier hs-var">mints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-946"></span><span>    </span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Value
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Fold NoIx TxSkel Value -&gt; TxSkel -&gt; Value
forall k a (is :: IxList) s.
(Is k A_Fold, Monoid a) =&gt;
Optic' k is s a -&gt; s -&gt; a
</span><span class="hs-identifier hs-var">foldOf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' TxSkel [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOutsL"><span class="hs-identifier hs-var">txSkelOutsL</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' TxSkel [TxSkelOut]
-&gt; Optic A_Fold NoIx [TxSkelOut] [TxSkelOut] TxSkelOut TxSkelOut
-&gt; Optic A_Fold NoIx TxSkel TxSkel TxSkelOut TxSkelOut
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic A_Fold NoIx [TxSkelOut] [TxSkelOut] TxSkelOut TxSkelOut
forall (f :: * -&gt; *) a. Foldable f =&gt; Fold (f a) a
</span><span class="hs-identifier hs-var">folded</span></span><span> </span><span class="annot"><span class="annottext">Optic A_Fold NoIx TxSkel TxSkel TxSkelOut TxSkelOut
-&gt; Lens' TxSkelOut Value -&gt; Optic' A_Fold NoIx TxSkel Value
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Lens' TxSkelOut Value
</span><a href="Cooked.Skeleton.html#txSkelOutValueL"><span class="hs-identifier hs-var">txSkelOutValueL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxSkel
</span><a href="#local-6989586621679694289"><span class="hs-identifier hs-var">skel</span></a></span><span>
</span><span id="line-947"></span><span>    </span><span class="annot"><span class="annottext">Value -&gt; Value -&gt; Value
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Value
</span><span class="hs-identifier hs-var">Script.lovelaceValueOf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Fee -&gt; Integer
</span><a href="Cooked.Skeleton.html#feeLovelace"><span class="hs-identifier hs-var">feeLovelace</span></a></span><span> </span><span class="annot"><span class="annottext">Fee
</span><a href="#local-6989586621679694291"><span class="hs-identifier hs-var">fees</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-948"></span><span>
</span><span id="line-949"></span><span class="annot"><span class="hs-comment">-- | All validators which will receive transaction outputs</span></span><span>
</span><span id="line-950"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutValidators"><span class="hs-identifier hs-type">txSkelOutValidators</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.ValidatorHash</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Validator</span></span><span class="hs-special">)</span><span>
</span><span id="line-951"></span><span id="txSkelOutValidators"><span class="annot"><span class="annottext">txSkelOutValidators :: TxSkel -&gt; Map ValidatorHash (Versioned Validator)
</span><a href="Cooked.Skeleton.html#txSkelOutValidators"><span class="hs-identifier hs-var hs-var">txSkelOutValidators</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-952"></span><span>  </span><span class="annot"><span class="annottext">[(ValidatorHash, Versioned Validator)]
-&gt; Map ValidatorHash (Versioned Validator)
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span>
</span><span id="line-953"></span><span>    </span><span class="annot"><span class="annottext">([(ValidatorHash, Versioned Validator)]
 -&gt; Map ValidatorHash (Versioned Validator))
-&gt; (TxSkel -&gt; [(ValidatorHash, Versioned Validator)])
-&gt; TxSkel
-&gt; Map ValidatorHash (Versioned Validator)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TxSkelOut -&gt; Maybe (ValidatorHash, Versioned Validator))
-&gt; [TxSkelOut] -&gt; [(ValidatorHash, Versioned Validator)]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Versioned Validator -&gt; (ValidatorHash, Versioned Validator))
-&gt; Maybe (Versioned Validator)
-&gt; Maybe (ValidatorHash, Versioned Validator)
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679694297"><span class="annot"><span class="annottext">Versioned Validator
</span><a href="#local-6989586621679694297"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Versioned Validator -&gt; ValidatorHash
</span><span class="hs-identifier hs-var">Script.validatorHash</span></span><span> </span><span class="annot"><span class="annottext">Versioned Validator
</span><a href="#local-6989586621679694297"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Versioned Validator
</span><a href="#local-6989586621679694297"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (Versioned Validator)
 -&gt; Maybe (ValidatorHash, Versioned Validator))
-&gt; (TxSkelOut -&gt; Maybe (Versioned Validator))
-&gt; TxSkelOut
-&gt; Maybe (ValidatorHash, Versioned Validator)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOut -&gt; Maybe (Versioned Validator)
</span><a href="Cooked.Skeleton.html#txSkelOutValidator"><span class="hs-identifier hs-var">txSkelOutValidator</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-954"></span><span>    </span><span class="annot"><span class="annottext">([TxSkelOut] -&gt; [(ValidatorHash, Versioned Validator)])
-&gt; (TxSkel -&gt; [TxSkelOut])
-&gt; TxSkel
-&gt; [(ValidatorHash, Versioned Validator)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOuts"><span class="hs-identifier hs-var">txSkelOuts</span></a></span><span>
</span><span id="line-955"></span><span>
</span><span id="line-956"></span><span class="annot"><span class="hs-comment">-- | All validators in the reference script field of transaction outputs</span></span><span>
</span><span id="line-957"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutReferenceScripts"><span class="hs-identifier hs-type">txSkelOutReferenceScripts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.ValidatorHash</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Validator</span></span><span class="hs-special">)</span><span>
</span><span id="line-958"></span><span id="txSkelOutReferenceScripts"><span class="annot"><span class="annottext">txSkelOutReferenceScripts :: TxSkel -&gt; Map ValidatorHash (Versioned Validator)
</span><a href="Cooked.Skeleton.html#txSkelOutReferenceScripts"><span class="hs-identifier hs-var hs-var">txSkelOutReferenceScripts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-959"></span><span>  </span><span class="annot"><span class="annottext">[Map ValidatorHash (Versioned Validator)]
-&gt; Map ValidatorHash (Versioned Validator)
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span>
</span><span id="line-960"></span><span>    </span><span class="annot"><span class="annottext">([Map ValidatorHash (Versioned Validator)]
 -&gt; Map ValidatorHash (Versioned Validator))
-&gt; (TxSkel -&gt; [Map ValidatorHash (Versioned Validator)])
-&gt; TxSkel
-&gt; Map ValidatorHash (Versioned Validator)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TxSkelOut -&gt; Map ValidatorHash (Versioned Validator))
-&gt; [TxSkelOut] -&gt; [Map ValidatorHash (Versioned Validator)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span>
</span><span id="line-961"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679694316"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679694316"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-962"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679694316"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o
-&gt; Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
-&gt; Maybe (ReferenceScriptType o)
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
forall o.
IsAbstractOutput o =&gt;
Lens' o (Maybe (ReferenceScriptType o))
</span><a href="Cooked.Output.html#outputReferenceScriptL"><span class="hs-identifier hs-var">outputReferenceScriptL</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-963"></span><span>            </span><span class="annot"><span class="annottext">Maybe (ReferenceScriptType o)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map ValidatorHash (Versioned Validator)
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-964"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679694317"><span class="annot"><span class="annottext">ReferenceScriptType o
</span><a href="#local-6989586621679694317"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-965"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679694318"><span class="annot"><span class="annottext">vScript :: Versioned Script
</span><a href="#local-6989586621679694318"><span class="hs-identifier hs-var">vScript</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span id="local-6989586621679694320"><span class="annot"><span class="annottext">Script
</span><a href="#local-6989586621679694320"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span id="local-6989586621679694321"><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621679694321"><span class="hs-identifier hs-var">version</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReferenceScriptType o -&gt; Versioned Script
forall a. ToScript a =&gt; a -&gt; Versioned Script
</span><a href="Cooked.Classes.html#toScript"><span class="hs-identifier hs-var">toScript</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceScriptType o
</span><a href="#local-6989586621679694317"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-966"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">Script.ScriptHash</span></span><span> </span><span id="local-6989586621679694324"><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621679694324"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Versioned Script -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><a href="Cooked.Classes.html#toScriptHash"><span class="hs-identifier hs-var">toScriptHash</span></a></span><span> </span><span class="annot"><span class="annottext">Versioned Script
</span><a href="#local-6989586621679694318"><span class="hs-identifier hs-var">vScript</span></a></span><span>
</span><span id="line-967"></span><span>               </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">ValidatorHash
-&gt; Versioned Validator -&gt; Map ValidatorHash (Versioned Validator)
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinByteString -&gt; ValidatorHash
</span><span class="hs-identifier hs-var">Script.ValidatorHash</span></span><span> </span><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621679694324"><span class="hs-identifier hs-var">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Versioned Validator -&gt; Map ValidatorHash (Versioned Validator))
-&gt; Versioned Validator -&gt; Map ValidatorHash (Versioned Validator)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Validator -&gt; Language -&gt; Versioned Validator
forall script. script -&gt; Language -&gt; Versioned script
</span><span class="hs-identifier hs-var">Script.Versioned</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Script -&gt; Validator
</span><span class="hs-identifier hs-var">Script.Validator</span></span><span> </span><span class="annot"><span class="annottext">Script
</span><a href="#local-6989586621679694320"><span class="hs-identifier hs-var">script</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621679694321"><span class="hs-identifier hs-var">version</span></a></span><span>
</span><span id="line-968"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-969"></span><span>    </span><span class="annot"><span class="annottext">([TxSkelOut] -&gt; [Map ValidatorHash (Versioned Validator)])
-&gt; (TxSkel -&gt; [TxSkelOut])
-&gt; TxSkel
-&gt; [Map ValidatorHash (Versioned Validator)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOuts"><span class="hs-identifier hs-var">txSkelOuts</span></a></span><span>
</span><span id="line-970"></span><span>
</span><span id="line-971"></span><span class="annot"><span class="hs-comment">-- * Various Optics on 'TxSkels' and all the other types defined here</span></span><span>
</span><span id="line-972"></span><span>
</span><span id="line-973"></span><span class="annot"><span class="hs-comment">-- | Decide if a transaction output has a certain owner and datum type.</span></span><span>
</span><span id="line-974"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutOwnerTypeP"><span class="hs-identifier hs-type">txSkelOutOwnerTypeP</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-975"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679692310"><span class="annot"><a href="#local-6989586621679692310"><span class="hs-identifier hs-type">ownerType</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-976"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cooked.Classes.html#ToCredential"><span class="hs-identifier hs-type">ToCredential</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679692310"><span class="hs-identifier hs-type">ownerType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-977"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679692310"><span class="hs-identifier hs-type">ownerType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-978"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#IsTxSkelOutAllowedOwner"><span class="hs-identifier hs-type">IsTxSkelOutAllowedOwner</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679692310"><span class="hs-identifier hs-type">ownerType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-979"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679692310"><span class="hs-identifier hs-type">ownerType</span></a></span><span>
</span><span id="line-980"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-981"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Prism'</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-type">ConcreteOutput</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679692310"><span class="hs-identifier hs-type">ownerType</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-982"></span><span id="txSkelOutOwnerTypeP"><span class="annot"><span class="annottext">txSkelOutOwnerTypeP :: forall ownerType.
(ToCredential ownerType, Show ownerType,
 IsTxSkelOutAllowedOwner ownerType, Typeable ownerType) =&gt;
Prism'
  TxSkelOut
  (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script))
</span><a href="Cooked.Skeleton.html#txSkelOutOwnerTypeP"><span class="hs-identifier hs-var hs-var">txSkelOutOwnerTypeP</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-983"></span><span>  </span><span class="annot"><span class="annottext">(ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script)
 -&gt; TxSkelOut)
-&gt; (TxSkelOut
    -&gt; Maybe
         (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script)))
-&gt; Prism
     TxSkelOut
     TxSkelOut
     (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script))
     (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script))
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><span class="hs-identifier hs-var">prism'</span></span><span>
</span><span id="line-984"></span><span>    </span><span class="annot"><span class="annottext">ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script)
-&gt; TxSkelOut
forall redeemer.
(Show redeemer, Typeable redeemer, IsTxInfoOutput redeemer,
 IsTxSkelOutAllowedOwner (OwnerType redeemer),
 Typeable (OwnerType redeemer), ToCredential (OwnerType redeemer),
 DatumType redeemer ~ TxSkelOutDatum, ValueType redeemer ~ Value,
 ToScript (ReferenceScriptType redeemer), Show (OwnerType redeemer),
 Show (ReferenceScriptType redeemer),
 Typeable (ReferenceScriptType redeemer)) =&gt;
redeemer -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span>
</span><span id="line-985"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679694385"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679694385"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-986"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679694386"><span class="annot"><span class="annottext">owner :: OwnerType o
</span><a href="#local-6989586621679694386"><span class="hs-identifier hs-var hs-var">owner</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679694385"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o (OwnerType o) -&gt; OwnerType o
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (OwnerType o)
forall o. IsAbstractOutput o =&gt; Lens' o (OwnerType o)
</span><a href="Cooked.Output.html#outputOwnerL"><span class="hs-identifier hs-var">outputOwnerL</span></a></span><span>
</span><span id="line-987"></span><span>         </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OwnerType o -&gt; TypeRep (OwnerType o)
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">OwnerType o
</span><a href="#local-6989586621679694386"><span class="hs-identifier hs-var">owner</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep (OwnerType o)
-&gt; TypeRep ownerType -&gt; Maybe (OwnerType o :~~: ownerType)
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-operator hs-var">`eqTypeRep`</span></span><span> </span><span class="annot"><span class="annottext">forall a. Typeable a =&gt; TypeRep a
forall {k} (a :: k). Typeable a =&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679692310"><span class="hs-identifier hs-type">ownerType</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-988"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">OwnerType o :~~: ownerType
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-989"></span><span>                </span><span class="annot"><span class="annottext">ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script)
-&gt; Maybe
     (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script)
 -&gt; Maybe
      (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script)))
-&gt; ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script)
-&gt; Maybe
     (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-990"></span><span>                  </span><span class="annot"><span class="annottext">ownerType
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe (Versioned Script)
-&gt; ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script)
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-991"></span><span>                    </span><span class="annot"><span class="annottext">ownerType
OwnerType o
</span><a href="#local-6989586621679694386"><span class="hs-identifier hs-var">owner</span></a></span><span>
</span><span id="line-992"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679694385"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o
-&gt; Optic' A_Lens NoIx o (Maybe StakingCredential)
-&gt; Maybe StakingCredential
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (Maybe StakingCredential)
forall o. IsAbstractOutput o =&gt; Lens' o (Maybe StakingCredential)
</span><a href="Cooked.Output.html#outputStakingCredentialL"><span class="hs-identifier hs-var">outputStakingCredentialL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-993"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679694385"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o TxSkelOutDatum -&gt; TxSkelOutDatum
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Lens' o (DatumType o)
Optic' A_Lens NoIx o TxSkelOutDatum
forall o. IsAbstractOutput o =&gt; Lens' o (DatumType o)
</span><a href="Cooked.Output.html#outputDatumL"><span class="hs-identifier hs-var">outputDatumL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-994"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679694385"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o Value -&gt; Value
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o Value
Lens' o (ValueType o)
forall o. IsAbstractOutput o =&gt; Lens' o (ValueType o)
</span><a href="Cooked.Output.html#outputValueL"><span class="hs-identifier hs-var">outputValueL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-995"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReferenceScriptType o -&gt; Versioned Script
forall a. ToScript a =&gt; a -&gt; Versioned Script
</span><a href="Cooked.Classes.html#toScript"><span class="hs-identifier hs-var">toScript</span></a></span><span> </span><span class="annot"><span class="annottext">(ReferenceScriptType o -&gt; Versioned Script)
-&gt; Maybe (ReferenceScriptType o) -&gt; Maybe (Versioned Script)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679694385"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o
-&gt; Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
-&gt; Maybe (ReferenceScriptType o)
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
forall o.
IsAbstractOutput o =&gt;
Lens' o (Maybe (ReferenceScriptType o))
</span><a href="Cooked.Output.html#outputReferenceScriptL"><span class="hs-identifier hs-var">outputReferenceScriptL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-996"></span><span>              </span><span class="annot"><span class="annottext">Maybe (OwnerType o :~~: ownerType)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe
  (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-997"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-998"></span><span>
</span><span id="line-999"></span><span id="local-6989586621679692320"><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutputDatumTypeAT"><span class="hs-identifier hs-type">txSkelOutputDatumTypeAT</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1000"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Api.FromData</span></span><span> </span><span class="annot"><a href="#local-6989586621679692320"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679692320"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1001"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">AffineTraversal'</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679692320"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1002"></span><span id="txSkelOutputDatumTypeAT"><span class="annot"><span class="annottext">txSkelOutputDatumTypeAT :: forall a. (FromData a, Typeable a) =&gt; AffineTraversal' TxSkelOut a
</span><a href="Cooked.Skeleton.html#txSkelOutputDatumTypeAT"><span class="hs-identifier hs-var hs-var">txSkelOutputDatumTypeAT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1003"></span><span>  </span><span class="annot"><span class="annottext">(TxSkelOut -&gt; Either TxSkelOut a)
-&gt; (TxSkelOut -&gt; a -&gt; TxSkelOut)
-&gt; AffineTraversal TxSkelOut TxSkelOut a a
forall s t a b.
(s -&gt; Either t a) -&gt; (s -&gt; b -&gt; t) -&gt; AffineTraversal s t a b
</span><span class="hs-identifier hs-var">atraversal</span></span><span>
</span><span id="line-1004"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679694405"><span class="annot"><span class="annottext">TxSkelOut
</span><a href="#local-6989586621679694405"><span class="hs-identifier hs-var">txSkelOut</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxSkelOut -&gt; Maybe Datum
</span><a href="#local-6989586621679694406"><span class="hs-identifier hs-var">txSkelOutDatumComplete</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelOut
</span><a href="#local-6989586621679694405"><span class="hs-identifier hs-var">txSkelOut</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1005"></span><span>        </span><span class="annot"><span class="annottext">Maybe Datum
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxSkelOut -&gt; Either TxSkelOut a
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOut
</span><a href="#local-6989586621679694405"><span class="hs-identifier hs-var">txSkelOut</span></a></span><span>
</span><span id="line-1006"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Api.Datum</span></span><span> </span><span id="local-6989586621679694407"><span class="annot"><span class="annottext">BuiltinData
</span><a href="#local-6989586621679694407"><span class="hs-identifier hs-var">datum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Maybe a
forall a. FromData a =&gt; BuiltinData -&gt; Maybe a
</span><span class="hs-identifier hs-var">Api.fromBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">BuiltinData
</span><a href="#local-6989586621679694407"><span class="hs-identifier hs-var">datum</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1007"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679694408"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679694408"><span class="hs-identifier hs-var">tyDatum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; Either TxSkelOut a
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679694408"><span class="hs-identifier hs-var">tyDatum</span></a></span><span>
</span><span id="line-1008"></span><span>          </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxSkelOut -&gt; Either TxSkelOut a
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOut
</span><a href="#local-6989586621679694405"><span class="hs-identifier hs-var">txSkelOut</span></a></span><span>
</span><span id="line-1009"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1010"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679694442"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679694442"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679694443"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679694443"><span class="hs-identifier hs-var">newTyDatum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1011"></span><span>        </span><span class="annot"><span class="annottext">o -&gt; TxSkelOut
forall redeemer.
(Show redeemer, Typeable redeemer, IsTxInfoOutput redeemer,
 IsTxSkelOutAllowedOwner (OwnerType redeemer),
 Typeable (OwnerType redeemer), ToCredential (OwnerType redeemer),
 DatumType redeemer ~ TxSkelOutDatum, ValueType redeemer ~ Value,
 ToScript (ReferenceScriptType redeemer), Show (OwnerType redeemer),
 Show (ReferenceScriptType redeemer),
 Typeable (ReferenceScriptType redeemer)) =&gt;
redeemer -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(o -&gt; TxSkelOut) -&gt; o -&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1012"></span><span>          </span><span class="annot"><span class="annottext">Optic A_Lens NoIx o o TxSkelOutDatum TxSkelOutDatum
-&gt; (TxSkelOutDatum -&gt; TxSkelOutDatum) -&gt; o -&gt; o
forall k (is :: IxList) s t a b.
Is k A_Setter =&gt;
Optic k is s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span>
</span><span id="line-1013"></span><span>            </span><span class="annot"><span class="annottext">Lens' o (DatumType o)
Optic A_Lens NoIx o o TxSkelOutDatum TxSkelOutDatum
forall o. IsAbstractOutput o =&gt; Lens' o (DatumType o)
</span><a href="Cooked.Output.html#outputDatumL"><span class="hs-identifier hs-var">outputDatumL</span></a></span><span>
</span><span id="line-1014"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1015"></span><span>                </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span>
</span><span id="line-1016"></span><span>                </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679694450"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679694450"><span class="hs-identifier hs-var">tyDatum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall redeemer.
TxSkelOutDatumConstrs redeemer =&gt;
redeemer -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-var">TxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; TxSkelOutDatum) -&gt; a -&gt; TxSkelOutDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall b a. (Typeable b, Typeable a) =&gt; b -&gt; a -&gt; b
</span><a href="#local-6989586621679694451"><span class="hs-identifier hs-var">replaceDatumOnCorrectType</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679694450"><span class="hs-identifier hs-var">tyDatum</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679694443"><span class="hs-identifier hs-var">newTyDatum</span></a></span><span>
</span><span id="line-1017"></span><span>                </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span id="local-6989586621679694457"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679694457"><span class="hs-identifier hs-var">tyDatum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall redeemer.
TxSkelOutDatumConstrs redeemer =&gt;
redeemer -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-var">TxSkelOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; TxSkelOutDatum) -&gt; a -&gt; TxSkelOutDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall b a. (Typeable b, Typeable a) =&gt; b -&gt; a -&gt; b
</span><a href="#local-6989586621679694451"><span class="hs-identifier hs-var">replaceDatumOnCorrectType</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679694457"><span class="hs-identifier hs-var">tyDatum</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679694443"><span class="hs-identifier hs-var">newTyDatum</span></a></span><span>
</span><span id="line-1018"></span><span>                </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-type">TxSkelOutInlineDatum</span></a></span><span> </span><span id="local-6989586621679694463"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679694463"><span class="hs-identifier hs-var">tyDatum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall redeemer.
TxSkelOutDatumConstrs redeemer =&gt;
redeemer -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-var">TxSkelOutInlineDatum</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; TxSkelOutDatum) -&gt; a -&gt; TxSkelOutDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall b a. (Typeable b, Typeable a) =&gt; b -&gt; a -&gt; b
</span><a href="#local-6989586621679694451"><span class="hs-identifier hs-var">replaceDatumOnCorrectType</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679694463"><span class="hs-identifier hs-var">tyDatum</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679694443"><span class="hs-identifier hs-var">newTyDatum</span></a></span><span>
</span><span id="line-1019"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-1020"></span><span>            </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679694442"><span class="hs-identifier hs-var">output</span></a></span><span>
</span><span id="line-1021"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1022"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1023"></span><span>    </span><span id="local-6989586621679692336"><span id="local-6989586621679692337"><span class="annot"><a href="#local-6989586621679694451"><span class="hs-identifier hs-type">replaceDatumOnCorrectType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679692336"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679692337"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679692336"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679692337"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679692336"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-1024"></span><span>    </span><span id="local-6989586621679694451"><span class="annot"><span class="annottext">replaceDatumOnCorrectType :: forall b a. (Typeable b, Typeable a) =&gt; b -&gt; a -&gt; b
</span><a href="#local-6989586621679694451"><span class="hs-identifier hs-var hs-var">replaceDatumOnCorrectType</span></a></span></span><span> </span><span id="local-6989586621679694468"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679694468"><span class="hs-identifier hs-var">old</span></a></span></span><span> </span><span id="local-6989586621679694469"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679694469"><span class="hs-identifier hs-var">new</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">b -&gt; TypeRep b
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679694468"><span class="hs-identifier hs-var">old</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep b -&gt; TypeRep a -&gt; Maybe (b :~~: a)
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-operator hs-var">`eqTypeRep`</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TypeRep a
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679694469"><span class="hs-identifier hs-var">new</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1025"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">b :~~: a
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b
a
</span><a href="#local-6989586621679694469"><span class="hs-identifier hs-var">new</span></a></span><span>
</span><span id="line-1026"></span><span>      </span><span class="annot"><span class="annottext">Maybe (b :~~: a)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679694468"><span class="hs-identifier hs-var">old</span></a></span><span>
</span><span id="line-1027"></span><span>
</span><span id="line-1028"></span><span>    </span><span class="annot"><a href="#local-6989586621679694406"><span class="hs-identifier hs-type">txSkelOutDatumComplete</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Datum</span></span><span>
</span><span id="line-1029"></span><span>    </span><span id="local-6989586621679694406"><span class="annot"><span class="annottext">txSkelOutDatumComplete :: TxSkelOut -&gt; Maybe Datum
</span><a href="#local-6989586621679694406"><span class="hs-identifier hs-var hs-var">txSkelOutDatumComplete</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679694488"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679694488"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; Maybe Datum
</span><a href="Cooked.Skeleton.html#txSkelOutUntypedDatum"><span class="hs-identifier hs-var">txSkelOutUntypedDatum</span></a></span><span> </span><span class="annot"><span class="annottext">(TxSkelOutDatum -&gt; Maybe Datum) -&gt; TxSkelOutDatum -&gt; Maybe Datum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679694488"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o TxSkelOutDatum -&gt; TxSkelOutDatum
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Lens' o (DatumType o)
Optic' A_Lens NoIx o TxSkelOutDatum
forall o. IsAbstractOutput o =&gt; Lens' o (DatumType o)
</span><a href="Cooked.Output.html#outputDatumL"><span class="hs-identifier hs-var">outputDatumL</span></a></span><span>
</span><span id="line-1030"></span></pre></body></html>