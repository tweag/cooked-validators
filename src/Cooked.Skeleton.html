<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- | This module provides the description of a transaction skeleton. We have our</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- own representation of a transaction for three main reasons:</span><span>
</span><span id="line-3"></span><span class="hs-comment">--</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- - our transaction skeletons are typed (datums, validators, outputs...)</span><span>
</span><span id="line-5"></span><span class="hs-comment">--</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- - with our own wrapper, we are less affected by plutus updates</span><span>
</span><span id="line-7"></span><span class="hs-comment">--</span><span>
</span><span id="line-8"></span><span class="hs-comment">-- - we can have default or automated behavior for the parts of the transactions</span><span>
</span><span id="line-9"></span><span class="hs-comment">-- that are less relevant to testing, such as collaterals or fees</span><span>
</span><span id="line-10"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cooked.Skeleton</span><span>
</span><span id="line-11"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#LabelConstrs"><span class="hs-identifier">LabelConstrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier">TxLabel</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#BalanceOutputPolicy"><span class="hs-identifier">BalanceOutputPolicy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#FeePolicy"><span class="hs-identifier">FeePolicy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#BalancingPolicy"><span class="hs-identifier">BalancingPolicy</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#BalancingUtxos"><span class="hs-identifier">BalancingUtxos</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#RawModTx"><span class="hs-identifier">RawModTx</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier">EmulatorParamsModification</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#CollateralUtxos"><span class="hs-identifier">CollateralUtxos</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#AnchorResolution"><span class="hs-identifier">AnchorResolution</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#applyEmulatorParamsModification"><span class="hs-identifier">applyEmulatorParamsModification</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#applyRawModOnBalancedTx"><span class="hs-identifier">applyRawModOnBalancedTx</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxOpts"><span class="hs-identifier">TxOpts</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptEnsureMinAdaL"><span class="hs-identifier">txOptEnsureMinAdaL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptUnsafeModTxL"><span class="hs-identifier">txOptUnsafeModTxL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptAutoSlotIncreaseL"><span class="hs-identifier">txOptAutoSlotIncreaseL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptBalancingPolicyL"><span class="hs-identifier">txOptBalancingPolicyL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptBalanceOutputPolicyL"><span class="hs-identifier">txOptBalanceOutputPolicyL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptFeePolicyL"><span class="hs-identifier">txOptFeePolicyL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptBalancingUtxosL"><span class="hs-identifier">txOptBalancingUtxosL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptEmulatorParamsModificationL"><span class="hs-identifier">txOptEmulatorParamsModificationL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptCollateralUtxosL"><span class="hs-identifier">txOptCollateralUtxosL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptAnchorResolutionL"><span class="hs-identifier">txOptAnchorResolutionL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txOptAutoReferenceScriptsL"><span class="hs-identifier">txOptAutoReferenceScriptsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier">TxSkelMints</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#addToTxSkelMints"><span class="hs-identifier">addToTxSkelMints</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsToList"><span class="hs-identifier">txSkelMintsToList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsFromList"><span class="hs-identifier">txSkelMintsFromList</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsFromList%27"><span class="hs-identifier">txSkelMintsFromList'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsValue"><span class="hs-identifier">txSkelMintsValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutValueL"><span class="hs-identifier">txSkelOutValueL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutDatumL"><span class="hs-identifier">txSkelOutDatumL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutValue"><span class="hs-identifier">txSkelOutValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutValidator"><span class="hs-identifier">txSkelOutValidator</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumConstrs"><span class="hs-identifier">TxSkelOutDatumConstrs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier">TxSkelOutDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier">TxSkelOut</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutTypedDatum"><span class="hs-identifier">txSkelOutTypedDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutUntypedDatum"><span class="hs-identifier">txSkelOutUntypedDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#paysPK"><span class="hs-identifier">paysPK</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#paysScript"><span class="hs-identifier">paysScript</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#paysScriptInlineDatum"><span class="hs-identifier">paysScriptInlineDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#paysScriptUnresolvedDatumHash"><span class="hs-identifier">paysScriptUnresolvedDatumHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#paysScriptNoDatum"><span class="hs-identifier">paysScriptNoDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#withDatum"><span class="hs-identifier">withDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#withInlineDatum"><span class="hs-identifier">withInlineDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#withUnresolvedDatumHash"><span class="hs-identifier">withUnresolvedDatumHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#withReferenceScript"><span class="hs-identifier">withReferenceScript</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#withStakingCredential"><span class="hs-identifier">withStakingCredential</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier">TxSkelRedeemer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#Redeemer"><span class="hs-identifier">Redeemer</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#withReferenceInput"><span class="hs-identifier">withReferenceInput</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier">TxParameterChange</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxGovAction"><span class="hs-identifier">TxGovAction</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelProposal"><span class="hs-identifier">TxSkelProposal</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelProposalsL"><span class="hs-identifier">txSkelProposalsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelProposalAddressL"><span class="hs-identifier">txSkelProposalAddressL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelProposalActionL"><span class="hs-identifier">txSkelProposalActionL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelProposalWitnessL"><span class="hs-identifier">txSkelProposalWitnessL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelProposalAnchorL"><span class="hs-identifier">txSkelProposalAnchorL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-71"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelWithdrawals"><span class="hs-identifier">TxSkelWithdrawals</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-72"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelWithdrawnValue"><span class="hs-identifier">txSkelWithdrawnValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-73"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelWithdrawalsScripts"><span class="hs-identifier">txSkelWithdrawalsScripts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-74"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#pkWithdrawal"><span class="hs-identifier">pkWithdrawal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-75"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#scriptWithdrawal"><span class="hs-identifier">scriptWithdrawal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier">TxSkel</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelLabelL"><span class="hs-identifier">txSkelLabelL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-78"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOptsL"><span class="hs-identifier">txSkelOptsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-79"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsL"><span class="hs-identifier">txSkelMintsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelValidityRangeL"><span class="hs-identifier">txSkelValidityRangeL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-81"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelSignersL"><span class="hs-identifier">txSkelSignersL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelInsL"><span class="hs-identifier">txSkelInsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-83"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelInsReferenceL"><span class="hs-identifier">txSkelInsReferenceL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-84"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutsL"><span class="hs-identifier">txSkelOutsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelWithdrawalsL"><span class="hs-identifier">txSkelWithdrawalsL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-86"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelTemplate"><span class="hs-identifier">txSkelTemplate</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-87"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelDataInOutputs"><span class="hs-identifier">txSkelDataInOutputs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-88"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelValidatorsInOutputs"><span class="hs-identifier">txSkelValidatorsInOutputs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutOwnerTypeP"><span class="hs-identifier">txSkelOutOwnerTypeP</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-90"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutputDatumTypeAT"><span class="hs-identifier">txSkelOutputDatumTypeAT</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-91"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#SkelContext"><span class="hs-identifier">SkelContext</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-92"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelKnownTxOutRefs"><span class="hs-identifier">txSkelKnownTxOutRefs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#simpleTxSkelProposal"><span class="hs-identifier">simpleTxSkelProposal</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#withWitness"><span class="hs-identifier">withWitness</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-95"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#withAnchor"><span class="hs-identifier">withAnchor</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-96"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelValueInOutputs"><span class="hs-identifier">txSkelValueInOutputs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-97"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelReferenceScripts"><span class="hs-identifier">txSkelReferenceScripts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-98"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#txSkelReferenceTxOutRefs"><span class="hs-identifier">txSkelReferenceTxOutRefs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#someTxSkelRedeemer"><span class="hs-identifier">someTxSkelRedeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-100"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#emptyTxSkelRedeemer"><span class="hs-identifier">emptyTxSkelRedeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-101"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span class="hs-keyword">where</span><span>
</span><span id="line-103"></span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Api</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Cardano</span></span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Cardano.Node.Emulator</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Emulator</span></span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Conversion.html"><span class="hs-identifier">Cooked.Conversion</span></a></span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Output.html"><span class="hs-identifier">Cooked.Output</span></a></span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Pretty.Class.html"><span class="hs-identifier">Cooked.Pretty.Class</span></a></span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Wallet.html"><span class="hs-identifier">Cooked.Wallet</span></a></span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Default</span></span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Either</span></span><span>
</span><span id="line-114"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Either.Combinators</span></span><span>
</span><span id="line-115"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Function</span></span><span>
</span><span id="line-116"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">foldl'</span></span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NEList</span></span><span>
</span><span id="line-118"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Map</span></span><span class="hs-special">)</span><span>
</span><span id="line-119"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-120"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.NonEmpty</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NEMap</span></span><span class="hs-special">)</span><span>
</span><span id="line-121"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Map.NonEmpty</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NEMap</span></span><span>
</span><span id="line-122"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span>
</span><span id="line-123"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Set</span></span><span class="hs-special">)</span><span>
</span><span id="line-124"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Set</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-125"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Ledger.Slot</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Ledger</span></span><span>
</span><span id="line-126"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Optics.Core</span></span><span>
</span><span id="line-127"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Optics.TH</span></span><span>
</span><span id="line-128"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.Script.Utils.Ada</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Script</span></span><span>
</span><span id="line-129"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.Script.Utils.Scripts</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Script</span></span><span>
</span><span id="line-130"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.Script.Utils.Typed</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Script</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">validatorHash</span></span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.Script.Utils.Value</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Script</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">adaSymbol</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">adaToken</span></span><span class="hs-special">)</span><span>
</span><span id="line-132"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusLedgerApi.V3</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Api</span></span><span>
</span><span id="line-133"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusTx.Prelude</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PlutusTx</span></span><span>
</span><span id="line-134"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Test.QuickCheck</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">NonZero</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Type.Reflection</span></span><span>
</span><span id="line-136"></span><span>
</span><span id="line-137"></span><span class="annot"><span class="hs-comment">-- * Transaction labels</span></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="hs-keyword">type</span><span> </span><span id="LabelConstrs"><span class="annot"><a href="Cooked.Skeleton.html#LabelConstrs"><span class="hs-identifier hs-var">LabelConstrs</span></a></span></span><span> </span><span id="local-6989586621679817115"><span class="annot"><a href="#local-6989586621679817115"><span class="hs-identifier hs-type">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679817115"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679817115"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679817115"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679817115"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="#local-6989586621679817115"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-keyword">data</span><span> </span><span id="TxLabel"><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-var">TxLabel</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-142"></span><span>  </span><span id="local-6989586621679817116"><span id="TxLabel"><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-var">TxLabel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#LabelConstrs"><span class="hs-identifier hs-type">LabelConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679817116"><span class="hs-identifier hs-type">x</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679817116"><span class="hs-identifier hs-type">x</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span></span><span>
</span><span id="line-143"></span><span>
</span><span id="line-144"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679817120"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-145"></span><span>  </span><span id="local-6989586621679817128"><span class="annot"><span class="annottext">TxLabel
</span><a href="#local-6989586621679817128"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679817129"><span class="annot"><span class="annottext">== :: TxLabel -&gt; TxLabel -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span id="local-6989586621679817130"><span class="annot"><span class="annottext">TxLabel
</span><a href="#local-6989586621679817130"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxLabel -&gt; TxLabel -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">TxLabel
</span><a href="#local-6989586621679817128"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">TxLabel
</span><a href="#local-6989586621679817130"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Ordering -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-146"></span><span>
</span><span id="line-147"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679817133"><span id="local-6989586621679817138"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-148"></span><span>  </span><span id="local-6989586621679817141"><span class="annot"><span class="annottext">show :: TxLabel -&gt; String
</span><a href="#local-6989586621679817141"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span><span> </span><span id="local-6989586621679817146"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679817146"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">x -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679817146"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679817148"><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-151"></span><span>  </span><span id="local-6989586621679817153"><span class="annot"><span class="annottext">prettyCookedOpt :: PrettyCookedOpts -&gt; TxLabel -&gt; DocCooked
</span><a href="#local-6989586621679817153"><span class="hs-identifier hs-var hs-var hs-var hs-var">prettyCookedOpt</span></a></span></span><span> </span><span id="local-6989586621679817155"><span class="annot"><span class="annottext">PrettyCookedOpts
</span><a href="#local-6989586621679817155"><span class="hs-identifier hs-var">opts</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span><span> </span><span id="local-6989586621679817159"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679817159"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PrettyCookedOpts -&gt; x -&gt; DocCooked
forall a. PrettyCooked a =&gt; PrettyCookedOpts -&gt; a -&gt; DocCooked
</span><a href="Cooked.Pretty.Class.html#prettyCookedOpt"><span class="hs-identifier hs-var">prettyCookedOpt</span></a></span><span> </span><span class="annot"><span class="annottext">PrettyCookedOpts
</span><a href="#local-6989586621679817155"><span class="hs-identifier hs-var">opts</span></a></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679817159"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679817164"><span id="local-6989586621679817167"><span id="local-6989586621679817170"><span id="local-6989586621679817173"><span id="local-6989586621679817176"><span id="local-6989586621679817179"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-154"></span><span>  </span><span id="local-6989586621679817182"><span class="annot"><span class="annottext">compare :: TxLabel -&gt; TxLabel -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">compare</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span><span> </span><span id="local-6989586621679817186"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679817186"><span class="hs-identifier hs-var">a</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span><span> </span><span id="local-6989586621679817197"><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679817197"><span class="hs-identifier hs-var">x</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-155"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SomeTypeRep -&gt; SomeTypeRep -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeRep x -&gt; SomeTypeRep
forall k (a :: k). TypeRep a -&gt; SomeTypeRep
</span><span class="hs-identifier hs-var">SomeTypeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; TypeRep x
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679817186"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeRep x -&gt; SomeTypeRep
forall k (a :: k). TypeRep a -&gt; SomeTypeRep
</span><span class="hs-identifier hs-var">SomeTypeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">x -&gt; TypeRep x
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679817197"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-156"></span><span>      </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-157"></span><span>      </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-158"></span><span>      </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">x -&gt; TypeRep x
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679817186"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep x -&gt; TypeRep x -&gt; Maybe (x :~~: x)
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-operator hs-var">`eqTypeRep`</span></span><span> </span><span class="annot"><span class="annottext">x -&gt; TypeRep x
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679817197"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-159"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">x :~~: x
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">x -&gt; x -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">x
</span><a href="#local-6989586621679817186"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">x
x
</span><a href="#local-6989586621679817197"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-160"></span><span>        </span><span class="hs-comment">-- This can never happen, since 'eqTypeRep' is implemented in terms of</span><span>
</span><span id="line-161"></span><span>        </span><span class="hs-comment">-- '==' on the type representation:</span><span>
</span><span id="line-162"></span><span>        </span><span class="annot"><span class="annottext">Maybe (x :~~: x)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Ordering
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Type representations compare as EQ, but are not eqTypeRep&quot;</span></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="annot"><span class="hs-comment">-- * Transaction options</span></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="annot"><span class="hs-comment">-- | What fee policy to use in the transaction.</span></span><span>
</span><span id="line-167"></span><span class="hs-keyword">data</span><span> </span><span id="FeePolicy"><span class="annot"><a href="Cooked.Skeleton.html#FeePolicy"><span class="hs-identifier hs-var">FeePolicy</span></a></span></span><span>
</span><span id="line-168"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | Use automatic fee computation. If balancing is activated, an optimal</span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-comment">-- fee will be computed based on the transaction and existing utxos in the</span><span>
</span><span id="line-170"></span><span>    </span><span class="hs-comment">-- balancing wallet. Otherwise, the maximum transaction fee will be applied.</span><span>
</span><span id="line-171"></span><span>    </span><span id="AutoFeeComputation"><span class="annot"><a href="Cooked.Skeleton.html#AutoFeeComputation"><span class="hs-identifier hs-var">AutoFeeComputation</span></a></span></span><span>
</span><span id="line-172"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Provide a fee to the transaction. If the autobalancing is activated, it</span><span>
</span><span id="line-173"></span><span>    </span><span class="hs-comment">-- will be attempted around this fee, which might lead to failure if it is</span><span>
</span><span id="line-174"></span><span>    </span><span class="hs-comment">-- too low, otherwise, this fee will be given to transaction generation.</span><span>
</span><span id="line-175"></span><span>    </span><span id="ManualFee"><span class="annot"><a href="Cooked.Skeleton.html#ManualFee"><span class="hs-identifier hs-var">ManualFee</span></a></span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span>
</span><span id="line-176"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679817208"><span id="local-6989586621679817211"><span class="annot"><span class="annottext">FeePolicy -&gt; FeePolicy -&gt; Bool
(FeePolicy -&gt; FeePolicy -&gt; Bool)
-&gt; (FeePolicy -&gt; FeePolicy -&gt; Bool) -&gt; Eq FeePolicy
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: FeePolicy -&gt; FeePolicy -&gt; Bool
== :: FeePolicy -&gt; FeePolicy -&gt; Bool
$c/= :: FeePolicy -&gt; FeePolicy -&gt; Bool
/= :: FeePolicy -&gt; FeePolicy -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679817217"><span id="local-6989586621679817221"><span id="local-6989586621679817224"><span id="local-6989586621679817228"><span id="local-6989586621679817231"><span id="local-6989586621679817234"><span id="local-6989586621679817237"><span class="annot"><span class="annottext">Eq FeePolicy
Eq FeePolicy =&gt;
(FeePolicy -&gt; FeePolicy -&gt; Ordering)
-&gt; (FeePolicy -&gt; FeePolicy -&gt; Bool)
-&gt; (FeePolicy -&gt; FeePolicy -&gt; Bool)
-&gt; (FeePolicy -&gt; FeePolicy -&gt; Bool)
-&gt; (FeePolicy -&gt; FeePolicy -&gt; Bool)
-&gt; (FeePolicy -&gt; FeePolicy -&gt; FeePolicy)
-&gt; (FeePolicy -&gt; FeePolicy -&gt; FeePolicy)
-&gt; Ord FeePolicy
FeePolicy -&gt; FeePolicy -&gt; Bool
FeePolicy -&gt; FeePolicy -&gt; Ordering
FeePolicy -&gt; FeePolicy -&gt; FeePolicy
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: FeePolicy -&gt; FeePolicy -&gt; Ordering
compare :: FeePolicy -&gt; FeePolicy -&gt; Ordering
$c&lt; :: FeePolicy -&gt; FeePolicy -&gt; Bool
&lt; :: FeePolicy -&gt; FeePolicy -&gt; Bool
$c&lt;= :: FeePolicy -&gt; FeePolicy -&gt; Bool
&lt;= :: FeePolicy -&gt; FeePolicy -&gt; Bool
$c&gt; :: FeePolicy -&gt; FeePolicy -&gt; Bool
&gt; :: FeePolicy -&gt; FeePolicy -&gt; Bool
$c&gt;= :: FeePolicy -&gt; FeePolicy -&gt; Bool
&gt;= :: FeePolicy -&gt; FeePolicy -&gt; Bool
$cmax :: FeePolicy -&gt; FeePolicy -&gt; FeePolicy
max :: FeePolicy -&gt; FeePolicy -&gt; FeePolicy
$cmin :: FeePolicy -&gt; FeePolicy -&gt; FeePolicy
min :: FeePolicy -&gt; FeePolicy -&gt; FeePolicy
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679817240"><span id="local-6989586621679817245"><span id="local-6989586621679817249"><span class="annot"><span class="annottext">Int -&gt; FeePolicy -&gt; ShowS
[FeePolicy] -&gt; ShowS
FeePolicy -&gt; String
(Int -&gt; FeePolicy -&gt; ShowS)
-&gt; (FeePolicy -&gt; String)
-&gt; ([FeePolicy] -&gt; ShowS)
-&gt; Show FeePolicy
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; FeePolicy -&gt; ShowS
showsPrec :: Int -&gt; FeePolicy -&gt; ShowS
$cshow :: FeePolicy -&gt; String
show :: FeePolicy -&gt; String
$cshowList :: [FeePolicy] -&gt; ShowS
showList :: [FeePolicy] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#FeePolicy"><span class="hs-identifier hs-type">FeePolicy</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-179"></span><span>  </span><span id="local-6989586621679817254"><span class="annot"><span class="annottext">def :: FeePolicy
</span><a href="#local-6989586621679817254"><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FeePolicy
</span><a href="Cooked.Skeleton.html#AutoFeeComputation"><span class="hs-identifier hs-var">AutoFeeComputation</span></a></span><span>
</span><span id="line-180"></span><span>
</span><span id="line-181"></span><span class="hs-comment">-- | Whether to adjust a potentially existing output to the balancing wallet</span><span>
</span><span id="line-182"></span><span class="hs-comment">-- with the change during transaction balancing.</span><span>
</span><span id="line-183"></span><span class="hs-keyword">data</span><span> </span><span id="BalanceOutputPolicy"><span class="annot"><a href="Cooked.Skeleton.html#BalanceOutputPolicy"><span class="hs-identifier hs-var">BalanceOutputPolicy</span></a></span></span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | Try to adjust an existing public key output with the change. If no</span><span>
</span><span id="line-185"></span><span>    </span><span class="hs-comment">-- suitable output can be found, create a new change output.</span><span>
</span><span id="line-186"></span><span>    </span><span id="AdjustExistingOutput"><span class="annot"><a href="Cooked.Skeleton.html#AdjustExistingOutput"><span class="hs-identifier hs-var">AdjustExistingOutput</span></a></span></span><span>
</span><span id="line-187"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | Do not change the existing outputs, always create a new change output.</span></span><span>
</span><span id="line-188"></span><span>    </span><span id="DontAdjustExistingOutput"><span class="annot"><a href="Cooked.Skeleton.html#DontAdjustExistingOutput"><span class="hs-identifier hs-var">DontAdjustExistingOutput</span></a></span></span><span>
</span><span id="line-189"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679817259"><span id="local-6989586621679817261"><span class="annot"><span class="annottext">BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
(BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool)
-&gt; (BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool)
-&gt; Eq BalanceOutputPolicy
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
== :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
$c/= :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
/= :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679817267"><span id="local-6989586621679817269"><span id="local-6989586621679817271"><span id="local-6989586621679817275"><span id="local-6989586621679817278"><span id="local-6989586621679817281"><span id="local-6989586621679817284"><span class="annot"><span class="annottext">Eq BalanceOutputPolicy
Eq BalanceOutputPolicy =&gt;
(BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Ordering)
-&gt; (BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool)
-&gt; (BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool)
-&gt; (BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool)
-&gt; (BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool)
-&gt; (BalanceOutputPolicy
    -&gt; BalanceOutputPolicy -&gt; BalanceOutputPolicy)
-&gt; (BalanceOutputPolicy
    -&gt; BalanceOutputPolicy -&gt; BalanceOutputPolicy)
-&gt; Ord BalanceOutputPolicy
BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Ordering
BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; BalanceOutputPolicy
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Ordering
compare :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Ordering
$c&lt; :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
&lt; :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
$c&lt;= :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
&lt;= :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
$c&gt; :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
&gt; :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
$c&gt;= :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
&gt;= :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; Bool
$cmax :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; BalanceOutputPolicy
max :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; BalanceOutputPolicy
$cmin :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; BalanceOutputPolicy
min :: BalanceOutputPolicy -&gt; BalanceOutputPolicy -&gt; BalanceOutputPolicy
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679817287"><span id="local-6989586621679817289"><span id="local-6989586621679817293"><span class="annot"><span class="annottext">Int -&gt; BalanceOutputPolicy -&gt; ShowS
[BalanceOutputPolicy] -&gt; ShowS
BalanceOutputPolicy -&gt; String
(Int -&gt; BalanceOutputPolicy -&gt; ShowS)
-&gt; (BalanceOutputPolicy -&gt; String)
-&gt; ([BalanceOutputPolicy] -&gt; ShowS)
-&gt; Show BalanceOutputPolicy
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; BalanceOutputPolicy -&gt; ShowS
showsPrec :: Int -&gt; BalanceOutputPolicy -&gt; ShowS
$cshow :: BalanceOutputPolicy -&gt; String
show :: BalanceOutputPolicy -&gt; String
$cshowList :: [BalanceOutputPolicy] -&gt; ShowS
showList :: [BalanceOutputPolicy] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#BalanceOutputPolicy"><span class="hs-identifier hs-type">BalanceOutputPolicy</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-192"></span><span>  </span><span id="local-6989586621679817297"><span class="annot"><span class="annottext">def :: BalanceOutputPolicy
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BalanceOutputPolicy
</span><a href="Cooked.Skeleton.html#AdjustExistingOutput"><span class="hs-identifier hs-var">AdjustExistingOutput</span></a></span><span>
</span><span id="line-193"></span><span>
</span><span id="line-194"></span><span class="hs-comment">-- | Which UTxOs to use when balancing. Note that utxos that are already known</span><span>
</span><span id="line-195"></span><span class="hs-comment">-- by the skeleton being balanced (in the sense of `txSkelKnownTxOutRefs`,</span><span>
</span><span id="line-196"></span><span class="hs-comment">-- i.e. inputs and reference inputs) will be filtered out during balancing.</span><span>
</span><span id="line-197"></span><span class="hs-keyword">data</span><span> </span><span id="BalancingUtxos"><span class="annot"><a href="Cooked.Skeleton.html#BalancingUtxos"><span class="hs-identifier hs-var">BalancingUtxos</span></a></span></span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | Use all UTxOs containing only a Value (no datum, no staking credential,</span><span>
</span><span id="line-199"></span><span>    </span><span class="hs-comment">-- and no reference script) belonging to the balancing wallet.</span><span>
</span><span id="line-200"></span><span>    </span><span id="BalancingUtxosFromBalancingWallet"><span class="annot"><a href="Cooked.Skeleton.html#BalancingUtxosFromBalancingWallet"><span class="hs-identifier hs-var">BalancingUtxosFromBalancingWallet</span></a></span></span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | Use the provided UTxOs. UTxOs belonging to scripts will be filtered out</span></span><span>
</span><span id="line-202"></span><span>    </span><span id="BalancingUtxosFromSet"><span class="annot"><a href="Cooked.Skeleton.html#BalancingUtxosFromSet"><span class="hs-identifier hs-var">BalancingUtxosFromSet</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span class="hs-special">)</span><span>
</span><span id="line-203"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679817301"><span id="local-6989586621679817306"><span class="annot"><span class="annottext">BalancingUtxos -&gt; BalancingUtxos -&gt; Bool
(BalancingUtxos -&gt; BalancingUtxos -&gt; Bool)
-&gt; (BalancingUtxos -&gt; BalancingUtxos -&gt; Bool) -&gt; Eq BalancingUtxos
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: BalancingUtxos -&gt; BalancingUtxos -&gt; Bool
== :: BalancingUtxos -&gt; BalancingUtxos -&gt; Bool
$c/= :: BalancingUtxos -&gt; BalancingUtxos -&gt; Bool
/= :: BalancingUtxos -&gt; BalancingUtxos -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679817313"><span id="local-6989586621679817318"><span id="local-6989586621679817322"><span id="local-6989586621679817326"><span id="local-6989586621679817329"><span id="local-6989586621679817332"><span id="local-6989586621679817335"><span class="annot"><span class="annottext">Eq BalancingUtxos
Eq BalancingUtxos =&gt;
(BalancingUtxos -&gt; BalancingUtxos -&gt; Ordering)
-&gt; (BalancingUtxos -&gt; BalancingUtxos -&gt; Bool)
-&gt; (BalancingUtxos -&gt; BalancingUtxos -&gt; Bool)
-&gt; (BalancingUtxos -&gt; BalancingUtxos -&gt; Bool)
-&gt; (BalancingUtxos -&gt; BalancingUtxos -&gt; Bool)
-&gt; (BalancingUtxos -&gt; BalancingUtxos -&gt; BalancingUtxos)
-&gt; (BalancingUtxos -&gt; BalancingUtxos -&gt; BalancingUtxos)
-&gt; Ord BalancingUtxos
BalancingUtxos -&gt; BalancingUtxos -&gt; Bool
BalancingUtxos -&gt; BalancingUtxos -&gt; Ordering
BalancingUtxos -&gt; BalancingUtxos -&gt; BalancingUtxos
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: BalancingUtxos -&gt; BalancingUtxos -&gt; Ordering
compare :: BalancingUtxos -&gt; BalancingUtxos -&gt; Ordering
$c&lt; :: BalancingUtxos -&gt; BalancingUtxos -&gt; Bool
&lt; :: BalancingUtxos -&gt; BalancingUtxos -&gt; Bool
$c&lt;= :: BalancingUtxos -&gt; BalancingUtxos -&gt; Bool
&lt;= :: BalancingUtxos -&gt; BalancingUtxos -&gt; Bool
$c&gt; :: BalancingUtxos -&gt; BalancingUtxos -&gt; Bool
&gt; :: BalancingUtxos -&gt; BalancingUtxos -&gt; Bool
$c&gt;= :: BalancingUtxos -&gt; BalancingUtxos -&gt; Bool
&gt;= :: BalancingUtxos -&gt; BalancingUtxos -&gt; Bool
$cmax :: BalancingUtxos -&gt; BalancingUtxos -&gt; BalancingUtxos
max :: BalancingUtxos -&gt; BalancingUtxos -&gt; BalancingUtxos
$cmin :: BalancingUtxos -&gt; BalancingUtxos -&gt; BalancingUtxos
min :: BalancingUtxos -&gt; BalancingUtxos -&gt; BalancingUtxos
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679817339"><span id="local-6989586621679817345"><span id="local-6989586621679817349"><span class="annot"><span class="annottext">Int -&gt; BalancingUtxos -&gt; ShowS
[BalancingUtxos] -&gt; ShowS
BalancingUtxos -&gt; String
(Int -&gt; BalancingUtxos -&gt; ShowS)
-&gt; (BalancingUtxos -&gt; String)
-&gt; ([BalancingUtxos] -&gt; ShowS)
-&gt; Show BalancingUtxos
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; BalancingUtxos -&gt; ShowS
showsPrec :: Int -&gt; BalancingUtxos -&gt; ShowS
$cshow :: BalancingUtxos -&gt; String
show :: BalancingUtxos -&gt; String
$cshowList :: [BalancingUtxos] -&gt; ShowS
showList :: [BalancingUtxos] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>
</span><span id="line-205"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#BalancingUtxos"><span class="hs-identifier hs-type">BalancingUtxos</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-206"></span><span>  </span><span id="local-6989586621679817354"><span class="annot"><span class="annottext">def :: BalancingUtxos
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BalancingUtxos
</span><a href="Cooked.Skeleton.html#BalancingUtxosFromBalancingWallet"><span class="hs-identifier hs-var">BalancingUtxosFromBalancingWallet</span></a></span><span>
</span><span id="line-207"></span><span>
</span><span id="line-208"></span><span class="hs-comment">-- | Whether to balance the transaction or not, and which wallet to use to</span><span>
</span><span id="line-209"></span><span class="hs-comment">-- provide outputs for balancing. Either the first signer or an explicit</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- wallet. In the second case, this wallet must be a signer of the transaction.</span><span>
</span><span id="line-211"></span><span class="hs-keyword">data</span><span> </span><span id="BalancingPolicy"><span class="annot"><a href="Cooked.Skeleton.html#BalancingPolicy"><span class="hs-identifier hs-var">BalancingPolicy</span></a></span></span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="BalanceWithFirstSigner"><span class="annot"><a href="Cooked.Skeleton.html#BalanceWithFirstSigner"><span class="hs-identifier hs-var">BalanceWithFirstSigner</span></a></span></span><span>
</span><span id="line-213"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="BalanceWith"><span class="annot"><a href="Cooked.Skeleton.html#BalanceWith"><span class="hs-identifier hs-var">BalanceWith</span></a></span></span><span> </span><span class="annot"><a href="Cooked.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span>
</span><span id="line-214"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="DoNotBalance"><span class="annot"><a href="Cooked.Skeleton.html#DoNotBalance"><span class="hs-identifier hs-var">DoNotBalance</span></a></span></span><span>
</span><span id="line-215"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679817359"><span id="local-6989586621679817363"><span class="annot"><span class="annottext">BalancingPolicy -&gt; BalancingPolicy -&gt; Bool
(BalancingPolicy -&gt; BalancingPolicy -&gt; Bool)
-&gt; (BalancingPolicy -&gt; BalancingPolicy -&gt; Bool)
-&gt; Eq BalancingPolicy
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: BalancingPolicy -&gt; BalancingPolicy -&gt; Bool
== :: BalancingPolicy -&gt; BalancingPolicy -&gt; Bool
$c/= :: BalancingPolicy -&gt; BalancingPolicy -&gt; Bool
/= :: BalancingPolicy -&gt; BalancingPolicy -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679817369"><span id="local-6989586621679817373"><span id="local-6989586621679817376"><span id="local-6989586621679817380"><span id="local-6989586621679817383"><span id="local-6989586621679817386"><span id="local-6989586621679817389"><span class="annot"><span class="annottext">Eq BalancingPolicy
Eq BalancingPolicy =&gt;
(BalancingPolicy -&gt; BalancingPolicy -&gt; Ordering)
-&gt; (BalancingPolicy -&gt; BalancingPolicy -&gt; Bool)
-&gt; (BalancingPolicy -&gt; BalancingPolicy -&gt; Bool)
-&gt; (BalancingPolicy -&gt; BalancingPolicy -&gt; Bool)
-&gt; (BalancingPolicy -&gt; BalancingPolicy -&gt; Bool)
-&gt; (BalancingPolicy -&gt; BalancingPolicy -&gt; BalancingPolicy)
-&gt; (BalancingPolicy -&gt; BalancingPolicy -&gt; BalancingPolicy)
-&gt; Ord BalancingPolicy
BalancingPolicy -&gt; BalancingPolicy -&gt; Bool
BalancingPolicy -&gt; BalancingPolicy -&gt; Ordering
BalancingPolicy -&gt; BalancingPolicy -&gt; BalancingPolicy
forall a.
Eq a =&gt;
(a -&gt; a -&gt; Ordering)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; Bool)
-&gt; (a -&gt; a -&gt; a)
-&gt; (a -&gt; a -&gt; a)
-&gt; Ord a
$ccompare :: BalancingPolicy -&gt; BalancingPolicy -&gt; Ordering
compare :: BalancingPolicy -&gt; BalancingPolicy -&gt; Ordering
$c&lt; :: BalancingPolicy -&gt; BalancingPolicy -&gt; Bool
&lt; :: BalancingPolicy -&gt; BalancingPolicy -&gt; Bool
$c&lt;= :: BalancingPolicy -&gt; BalancingPolicy -&gt; Bool
&lt;= :: BalancingPolicy -&gt; BalancingPolicy -&gt; Bool
$c&gt; :: BalancingPolicy -&gt; BalancingPolicy -&gt; Bool
&gt; :: BalancingPolicy -&gt; BalancingPolicy -&gt; Bool
$c&gt;= :: BalancingPolicy -&gt; BalancingPolicy -&gt; Bool
&gt;= :: BalancingPolicy -&gt; BalancingPolicy -&gt; Bool
$cmax :: BalancingPolicy -&gt; BalancingPolicy -&gt; BalancingPolicy
max :: BalancingPolicy -&gt; BalancingPolicy -&gt; BalancingPolicy
$cmin :: BalancingPolicy -&gt; BalancingPolicy -&gt; BalancingPolicy
min :: BalancingPolicy -&gt; BalancingPolicy -&gt; BalancingPolicy
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Ord</span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679817392"><span id="local-6989586621679817397"><span id="local-6989586621679817401"><span class="annot"><span class="annottext">Int -&gt; BalancingPolicy -&gt; ShowS
[BalancingPolicy] -&gt; ShowS
BalancingPolicy -&gt; String
(Int -&gt; BalancingPolicy -&gt; ShowS)
-&gt; (BalancingPolicy -&gt; String)
-&gt; ([BalancingPolicy] -&gt; ShowS)
-&gt; Show BalancingPolicy
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; BalancingPolicy -&gt; ShowS
showsPrec :: Int -&gt; BalancingPolicy -&gt; ShowS
$cshow :: BalancingPolicy -&gt; String
show :: BalancingPolicy -&gt; String
$cshowList :: [BalancingPolicy] -&gt; ShowS
showList :: [BalancingPolicy] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-216"></span><span>
</span><span id="line-217"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#BalancingPolicy"><span class="hs-identifier hs-type">BalancingPolicy</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-218"></span><span>  </span><span id="local-6989586621679817405"><span class="annot"><span class="annottext">def :: BalancingPolicy
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BalancingPolicy
</span><a href="Cooked.Skeleton.html#BalanceWithFirstSigner"><span class="hs-identifier hs-var">BalanceWithFirstSigner</span></a></span><span>
</span><span id="line-219"></span><span>
</span><span id="line-220"></span><span class="hs-comment">-- | Wraps a function that will be applied to a transaction right before</span><span>
</span><span id="line-221"></span><span class="hs-comment">-- submission, and after balancing.</span><span>
</span><span id="line-222"></span><span class="hs-keyword">newtype</span><span> </span><span id="RawModTx"><span class="annot"><a href="Cooked.Skeleton.html#RawModTx"><span class="hs-identifier hs-var">RawModTx</span></a></span></span><span>
</span><span id="line-223"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="RawModTxAfterBalancing"><span class="annot"><a href="Cooked.Skeleton.html#RawModTxAfterBalancing"><span class="hs-identifier hs-var">RawModTxAfterBalancing</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Cardano.Tx</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cardano.ConwayEra</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cardano.Tx</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cardano.ConwayEra</span></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>
</span><span id="line-225"></span><span class="hs-comment">-- This instance always returns @False@, which is no problem, because 'Eq</span><span>
</span><span id="line-226"></span><span class="hs-comment">-- TxSkel' is only used for tests that never depend on this comparison</span><span>
</span><span id="line-227"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679817409"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#RawModTx"><span class="hs-identifier hs-type">RawModTx</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-228"></span><span>  </span><span class="annot"><span class="annottext">RawModTx
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679817412"><span class="annot"><span class="annottext">== :: RawModTx -&gt; RawModTx -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span class="annot"><span class="annottext">RawModTx
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679817414"><span id="local-6989586621679817419"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#RawModTx"><span class="hs-identifier hs-type">RawModTx</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-231"></span><span>  </span><span id="local-6989586621679817421"><span class="annot"><span class="annottext">show :: RawModTx -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#RawModTxAfterBalancing"><span class="hs-identifier hs-type">RawModTxAfterBalancing</span></a></span><span> </span><span class="annot"><span class="annottext">Tx ConwayEra -&gt; Tx ConwayEra
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RawModTxAfterBalancing&quot;</span></span><span>
</span><span id="line-232"></span><span>
</span><span id="line-233"></span><span class="hs-comment">-- | Applies a list of modifications right before the transaction is</span><span>
</span><span id="line-234"></span><span class="hs-comment">-- submitted. The leftmost function in the argument list is applied first.</span><span>
</span><span id="line-235"></span><span class="annot"><a href="Cooked.Skeleton.html#applyRawModOnBalancedTx"><span class="hs-identifier hs-type">applyRawModOnBalancedTx</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Skeleton.html#RawModTx"><span class="hs-identifier hs-type">RawModTx</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cardano.Tx</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cardano.ConwayEra</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cardano.Tx</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Cardano.ConwayEra</span></span><span>
</span><span id="line-236"></span><span id="applyRawModOnBalancedTx"><span class="annot"><span class="annottext">applyRawModOnBalancedTx :: [RawModTx] -&gt; Tx ConwayEra -&gt; Tx ConwayEra
</span><a href="Cooked.Skeleton.html#applyRawModOnBalancedTx"><span class="hs-identifier hs-var hs-var">applyRawModOnBalancedTx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Tx ConwayEra -&gt; Tx ConwayEra)
 -&gt; RawModTx -&gt; Tx ConwayEra -&gt; Tx ConwayEra)
-&gt; (Tx ConwayEra -&gt; Tx ConwayEra)
-&gt; [RawModTx]
-&gt; Tx ConwayEra
-&gt; Tx ConwayEra
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679817422"><span class="annot"><span class="annottext">Tx ConwayEra -&gt; Tx ConwayEra
</span><a href="#local-6989586621679817422"><span class="hs-identifier hs-var">acc</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#RawModTxAfterBalancing"><span class="hs-identifier hs-type">RawModTxAfterBalancing</span></a></span><span> </span><span id="local-6989586621679817423"><span class="annot"><span class="annottext">Tx ConwayEra -&gt; Tx ConwayEra
</span><a href="#local-6989586621679817423"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tx ConwayEra -&gt; Tx ConwayEra
</span><a href="#local-6989586621679817422"><span class="hs-identifier hs-var">acc</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx ConwayEra -&gt; Tx ConwayEra)
-&gt; (Tx ConwayEra -&gt; Tx ConwayEra) -&gt; Tx ConwayEra -&gt; Tx ConwayEra
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Tx ConwayEra -&gt; Tx ConwayEra
</span><a href="#local-6989586621679817423"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Tx ConwayEra -&gt; Tx ConwayEra
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-237"></span><span>
</span><span id="line-238"></span><span class="hs-comment">-- | Wraps a function that will temporarily change the emulator parameters for</span><span>
</span><span id="line-239"></span><span class="hs-comment">-- the transaction's balancing and submission.</span><span>
</span><span id="line-240"></span><span class="hs-keyword">newtype</span><span> </span><span id="EmulatorParamsModification"><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-var">EmulatorParamsModification</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="EmulatorParamsModification"><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-var">EmulatorParamsModification</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Emulator.Params</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Emulator.Params</span></span><span class="hs-special">)</span><span>
</span><span id="line-241"></span><span>
</span><span id="line-242"></span><span class="hs-comment">-- This instance always returns @False@, which is no problem, because 'Eq</span><span>
</span><span id="line-243"></span><span class="hs-comment">-- TxSkel' is only used for tests that never depend on this comparison</span><span>
</span><span id="line-244"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679817429"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-type">EmulatorParamsModification</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-245"></span><span>  </span><span class="annot"><span class="annottext">EmulatorParamsModification
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679817432"><span class="annot"><span class="annottext">== :: EmulatorParamsModification -&gt; EmulatorParamsModification -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span class="annot"><span class="annottext">EmulatorParamsModification
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679817434"><span id="local-6989586621679817439"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-type">EmulatorParamsModification</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-248"></span><span>  </span><span id="local-6989586621679817441"><span class="annot"><span class="annottext">show :: EmulatorParamsModification -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-type">EmulatorParamsModification</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;EmulatorParamsModification &lt;function&gt;&quot;</span></span><span>
</span><span id="line-249"></span><span>
</span><span id="line-250"></span><span class="annot"><a href="Cooked.Skeleton.html#applyEmulatorParamsModification"><span class="hs-identifier hs-type">applyEmulatorParamsModification</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-type">EmulatorParamsModification</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Emulator.Params</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Emulator.Params</span></span><span>
</span><span id="line-251"></span><span id="applyEmulatorParamsModification"><span class="annot"><span class="annottext">applyEmulatorParamsModification :: Maybe EmulatorParamsModification -&gt; Params -&gt; Params
</span><a href="Cooked.Skeleton.html#applyEmulatorParamsModification"><span class="hs-identifier hs-var hs-var">applyEmulatorParamsModification</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-type">EmulatorParamsModification</span></a></span><span> </span><span id="local-6989586621679817442"><span class="annot"><span class="annottext">Params -&gt; Params
</span><a href="#local-6989586621679817442"><span class="hs-identifier hs-var">f</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Params -&gt; Params
</span><a href="#local-6989586621679817442"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-252"></span><span class="annot"><a href="Cooked.Skeleton.html#applyEmulatorParamsModification"><span class="hs-identifier hs-var">applyEmulatorParamsModification</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe EmulatorParamsModification
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Params -&gt; Params
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="annot"><span class="hs-comment">-- | Describe which UTxOs to use as collaterals</span></span><span>
</span><span id="line-255"></span><span class="hs-keyword">data</span><span> </span><span id="CollateralUtxos"><span class="annot"><a href="Cooked.Skeleton.html#CollateralUtxos"><span class="hs-identifier hs-var">CollateralUtxos</span></a></span></span><span>
</span><span id="line-256"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-comment">-- | Rely on automated computation with only-value UTxOs from the balancing</span><span>
</span><span id="line-257"></span><span>    </span><span class="hs-comment">-- wallet. Return collaterals will be sent to this wallet.</span><span>
</span><span id="line-258"></span><span>    </span><span id="CollateralUtxosFromBalancingWallet"><span class="annot"><a href="Cooked.Skeleton.html#CollateralUtxosFromBalancingWallet"><span class="hs-identifier hs-var">CollateralUtxosFromBalancingWallet</span></a></span></span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Rely on automated computation with only-value UTxOs from a given</span><span>
</span><span id="line-260"></span><span>    </span><span class="hs-comment">-- wallet. Return collaterals will be sent to this wallet.</span><span>
</span><span id="line-261"></span><span>    </span><span id="CollateralUtxosFromWallet"><span class="annot"><a href="Cooked.Skeleton.html#CollateralUtxosFromWallet"><span class="hs-identifier hs-var">CollateralUtxosFromWallet</span></a></span></span><span> </span><span class="annot"><a href="Cooked.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span>
</span><span id="line-262"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Manually provide a set of candidate UTxOs to be used as collaterals</span><span>
</span><span id="line-263"></span><span>    </span><span class="hs-comment">-- alongside a wallet to send return collaterals back to.</span><span>
</span><span id="line-264"></span><span>    </span><span id="CollateralUtxosFromSet"><span class="annot"><a href="Cooked.Skeleton.html#CollateralUtxosFromSet"><span class="hs-identifier hs-var">CollateralUtxosFromSet</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Cooked.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span>
</span><span id="line-265"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679817447"><span id="local-6989586621679817453"><span class="annot"><span class="annottext">CollateralUtxos -&gt; CollateralUtxos -&gt; Bool
(CollateralUtxos -&gt; CollateralUtxos -&gt; Bool)
-&gt; (CollateralUtxos -&gt; CollateralUtxos -&gt; Bool)
-&gt; Eq CollateralUtxos
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: CollateralUtxos -&gt; CollateralUtxos -&gt; Bool
== :: CollateralUtxos -&gt; CollateralUtxos -&gt; Bool
$c/= :: CollateralUtxos -&gt; CollateralUtxos -&gt; Bool
/= :: CollateralUtxos -&gt; CollateralUtxos -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679817457"><span id="local-6989586621679817465"><span id="local-6989586621679817469"><span class="annot"><span class="annottext">Int -&gt; CollateralUtxos -&gt; ShowS
[CollateralUtxos] -&gt; ShowS
CollateralUtxos -&gt; String
(Int -&gt; CollateralUtxos -&gt; ShowS)
-&gt; (CollateralUtxos -&gt; String)
-&gt; ([CollateralUtxos] -&gt; ShowS)
-&gt; Show CollateralUtxos
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; CollateralUtxos -&gt; ShowS
showsPrec :: Int -&gt; CollateralUtxos -&gt; ShowS
$cshow :: CollateralUtxos -&gt; String
show :: CollateralUtxos -&gt; String
$cshowList :: [CollateralUtxos] -&gt; ShowS
showList :: [CollateralUtxos] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#CollateralUtxos"><span class="hs-identifier hs-type">CollateralUtxos</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-268"></span><span>  </span><span id="local-6989586621679817473"><span class="annot"><span class="annottext">def :: CollateralUtxos
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CollateralUtxos
</span><a href="Cooked.Skeleton.html#CollateralUtxosFromBalancingWallet"><span class="hs-identifier hs-var">CollateralUtxosFromBalancingWallet</span></a></span><span>
</span><span id="line-269"></span><span>
</span><span id="line-270"></span><span class="annot"><span class="hs-comment">-- | Describes how to resolve anchors in proposal procedures</span></span><span>
</span><span id="line-271"></span><span class="hs-keyword">data</span><span> </span><span id="AnchorResolution"><span class="annot"><a href="Cooked.Skeleton.html#AnchorResolution"><span class="hs-identifier hs-var">AnchorResolution</span></a></span></span><span>
</span><span id="line-272"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-comment">-- | Provide a map between urls and page content as Bytestring</span></span><span>
</span><span id="line-273"></span><span>    </span><span id="AnchorResolutionLocal"><span class="annot"><a href="Cooked.Skeleton.html#AnchorResolutionLocal"><span class="hs-identifier hs-var">AnchorResolutionLocal</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ByteString</span></span><span class="hs-special">)</span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | Allow online fetch of pages from a given URL. Important note: using</span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-comment">-- this option is unsafe, as it requires a web connection and inherently</span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-comment">-- prevents guarantees of reproducibily. Use at your own discretion.</span><span>
</span><span id="line-277"></span><span>    </span><span id="AnchorResolutionHttp"><span class="annot"><a href="Cooked.Skeleton.html#AnchorResolutionHttp"><span class="hs-identifier hs-var">AnchorResolutionHttp</span></a></span></span><span>
</span><span id="line-278"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679817477"><span id="local-6989586621679817483"><span class="annot"><span class="annottext">AnchorResolution -&gt; AnchorResolution -&gt; Bool
(AnchorResolution -&gt; AnchorResolution -&gt; Bool)
-&gt; (AnchorResolution -&gt; AnchorResolution -&gt; Bool)
-&gt; Eq AnchorResolution
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: AnchorResolution -&gt; AnchorResolution -&gt; Bool
== :: AnchorResolution -&gt; AnchorResolution -&gt; Bool
$c/= :: AnchorResolution -&gt; AnchorResolution -&gt; Bool
/= :: AnchorResolution -&gt; AnchorResolution -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679817491"><span id="local-6989586621679817498"><span id="local-6989586621679817502"><span class="annot"><span class="annottext">Int -&gt; AnchorResolution -&gt; ShowS
[AnchorResolution] -&gt; ShowS
AnchorResolution -&gt; String
(Int -&gt; AnchorResolution -&gt; ShowS)
-&gt; (AnchorResolution -&gt; String)
-&gt; ([AnchorResolution] -&gt; ShowS)
-&gt; Show AnchorResolution
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; AnchorResolution -&gt; ShowS
showsPrec :: Int -&gt; AnchorResolution -&gt; ShowS
$cshow :: AnchorResolution -&gt; String
show :: AnchorResolution -&gt; String
$cshowList :: [AnchorResolution] -&gt; ShowS
showList :: [AnchorResolution] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>
</span><span id="line-280"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#AnchorResolution"><span class="hs-identifier hs-type">AnchorResolution</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-281"></span><span>  </span><span id="local-6989586621679817510"><span class="annot"><span class="annottext">def :: AnchorResolution
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map String ByteString -&gt; AnchorResolution
</span><a href="Cooked.Skeleton.html#AnchorResolutionLocal"><span class="hs-identifier hs-var">AnchorResolutionLocal</span></a></span><span> </span><span class="annot"><span class="annottext">Map String ByteString
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span class="hs-comment">-- | Set of options to modify the behavior of generating and validating some</span><span>
</span><span id="line-284"></span><span class="hs-comment">-- transaction.</span><span>
</span><span id="line-285"></span><span class="hs-keyword">data</span><span> </span><span id="TxOpts"><span class="annot"><a href="Cooked.Skeleton.html#TxOpts"><span class="hs-identifier hs-var">TxOpts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TxOpts"><span class="annot"><a href="Cooked.Skeleton.html#TxOpts"><span class="hs-identifier hs-var">TxOpts</span></a></span></span><span>
</span><span id="line-286"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | Performs an adjustment to unbalanced transactions, making sure every</span><span>
</span><span id="line-287"></span><span>    </span><span class="hs-comment">-- UTxO that is produced has the necessary minimum amount of Ada.</span><span>
</span><span id="line-288"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-289"></span><span>    </span><span class="hs-comment">-- Default is @False@.</span><span>
</span><span id="line-290"></span><span>    </span><span id="txOptEnsureMinAda"><span class="annot"><span class="annottext">TxOpts -&gt; Bool
</span><a href="Cooked.Skeleton.html#txOptEnsureMinAda"><span class="hs-identifier hs-var hs-var">txOptEnsureMinAda</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-291"></span><span>    </span><span class="hs-comment">-- | Whether to increase the slot counter automatically on transaction</span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-comment">-- submission.  This is useful for modelling transactions that could be</span><span>
</span><span id="line-293"></span><span>    </span><span class="hs-comment">-- submitted in parallel in reality, so there should be no explicit ordering</span><span>
</span><span id="line-294"></span><span>    </span><span class="hs-comment">-- of what comes first.</span><span>
</span><span id="line-295"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-296"></span><span>    </span><span class="hs-comment">-- Default is @True@.</span><span>
</span><span id="line-297"></span><span>    </span><span id="txOptAutoSlotIncrease"><span class="annot"><span class="annottext">TxOpts -&gt; Bool
</span><a href="Cooked.Skeleton.html#txOptAutoSlotIncrease"><span class="hs-identifier hs-var hs-var">txOptAutoSlotIncrease</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">,</span><span>
</span><span id="line-298"></span><span>    </span><span class="hs-comment">-- | Applies an arbitrary modification to a transaction after it has been</span><span>
</span><span id="line-299"></span><span>    </span><span class="hs-comment">-- potentially adjusted ('txOptEnsureMinAda') and balanced. The name of this</span><span>
</span><span id="line-300"></span><span>    </span><span class="hs-comment">-- option contains /unsafe/ to draw attention to the fact that modifying a</span><span>
</span><span id="line-301"></span><span>    </span><span class="hs-comment">-- transaction at that stage might make it invalid. Still, this offers a</span><span>
</span><span id="line-302"></span><span>    </span><span class="hs-comment">-- hook for being able to alter a transaction in unforeseen ways. It is</span><span>
</span><span id="line-303"></span><span>    </span><span class="hs-comment">-- mostly used to test contracts that have been written for custom PABs.</span><span>
</span><span id="line-304"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-305"></span><span>    </span><span class="hs-comment">-- One interesting use of this function is to observe a transaction just</span><span>
</span><span id="line-306"></span><span>    </span><span class="hs-comment">-- before it is being sent for validation, with</span><span>
</span><span id="line-307"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-308"></span><span>    </span><span class="hs-comment">-- &gt; txOptUnsafeModTx = [RawModTxAfterBalancing Debug.Trace.traceShowId]</span><span>
</span><span id="line-309"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-310"></span><span>    </span><span class="hs-comment">-- The leftmost function in the list is applied first.</span><span>
</span><span id="line-311"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-312"></span><span>    </span><span class="hs-comment">-- Default is @[]@.</span><span>
</span><span id="line-313"></span><span>    </span><span id="txOptUnsafeModTx"><span class="annot"><span class="annottext">TxOpts -&gt; [RawModTx]
</span><a href="Cooked.Skeleton.html#txOptUnsafeModTx"><span class="hs-identifier hs-var hs-var">txOptUnsafeModTx</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Skeleton.html#RawModTx"><span class="hs-identifier hs-type">RawModTx</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-314"></span><span>    </span><span class="hs-comment">-- | Whether to balance the transaction or not, and which wallet should</span><span>
</span><span id="line-315"></span><span>    </span><span class="hs-comment">-- provide/reclaim the missing and surplus value. Balancing ensures that</span><span>
</span><span id="line-316"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-317"></span><span>    </span><span class="hs-comment">-- &gt; input + mints == output + fees + burns</span><span>
</span><span id="line-318"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-319"></span><span>    </span><span class="hs-comment">-- If you decide to set @txOptBalance = DoNotBalance@ you will have trouble</span><span>
</span><span id="line-320"></span><span>    </span><span class="hs-comment">-- satisfying that equation by hand unless you use @ManualFee@. You will</span><span>
</span><span id="line-321"></span><span>    </span><span class="hs-comment">-- likely see a error about value preservation.</span><span>
</span><span id="line-322"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-323"></span><span>    </span><span class="hs-comment">-- Default is 'BalanceWithFirstSigner'</span><span>
</span><span id="line-324"></span><span>    </span><span id="txOptBalancingPolicy"><span class="annot"><span class="annottext">TxOpts -&gt; BalancingPolicy
</span><a href="Cooked.Skeleton.html#txOptBalancingPolicy"><span class="hs-identifier hs-var hs-var">txOptBalancingPolicy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#BalancingPolicy"><span class="hs-identifier hs-type">BalancingPolicy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-325"></span><span>    </span><span class="hs-comment">-- | The fee to use when balancing the transaction</span><span>
</span><span id="line-326"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-327"></span><span>    </span><span class="hs-comment">-- Default is 'AutomaticFeeComputation'</span><span>
</span><span id="line-328"></span><span>    </span><span id="txOptFeePolicy"><span class="annot"><span class="annottext">TxOpts -&gt; FeePolicy
</span><a href="Cooked.Skeleton.html#txOptFeePolicy"><span class="hs-identifier hs-var hs-var">txOptFeePolicy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#FeePolicy"><span class="hs-identifier hs-type">FeePolicy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-329"></span><span>    </span><span class="hs-comment">-- | The 'BalanceOutputPolicy' to apply when balancing the transaction.</span><span>
</span><span id="line-330"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-331"></span><span>    </span><span class="hs-comment">-- Default is 'AdjustExistingOutput'.</span><span>
</span><span id="line-332"></span><span>    </span><span id="txOptBalanceOutputPolicy"><span class="annot"><span class="annottext">TxOpts -&gt; BalanceOutputPolicy
</span><a href="Cooked.Skeleton.html#txOptBalanceOutputPolicy"><span class="hs-identifier hs-var hs-var">txOptBalanceOutputPolicy</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#BalanceOutputPolicy"><span class="hs-identifier hs-type">BalanceOutputPolicy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-333"></span><span>    </span><span class="hs-comment">-- | Which UTxOs to use during balancing. This can either be a precise list,</span><span>
</span><span id="line-334"></span><span>    </span><span class="hs-comment">-- or rely on automatic searches for utxos with values only belonging to the</span><span>
</span><span id="line-335"></span><span>    </span><span class="hs-comment">-- balancing wallet.</span><span>
</span><span id="line-336"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-337"></span><span>    </span><span class="hs-comment">-- Default is 'BalancingUtxosFromBalancingWallet'.</span><span>
</span><span id="line-338"></span><span>    </span><span id="txOptBalancingUtxos"><span class="annot"><span class="annottext">TxOpts -&gt; BalancingUtxos
</span><a href="Cooked.Skeleton.html#txOptBalancingUtxos"><span class="hs-identifier hs-var hs-var">txOptBalancingUtxos</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#BalancingUtxos"><span class="hs-identifier hs-type">BalancingUtxos</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-339"></span><span>    </span><span class="hs-comment">-- | Apply an arbitrary modification to the protocol parameters that are</span><span>
</span><span id="line-340"></span><span>    </span><span class="hs-comment">-- used to balance and submit the transaction. This is obviously a very</span><span>
</span><span id="line-341"></span><span>    </span><span class="hs-comment">-- unsafe thing to do if you want to preserve compatibility with the actual</span><span>
</span><span id="line-342"></span><span>    </span><span class="hs-comment">-- chain. It is useful mainly for testing purposes, when you might want to</span><span>
</span><span id="line-343"></span><span>    </span><span class="hs-comment">-- use extremely big transactions or transactions that exhaust the maximum</span><span>
</span><span id="line-344"></span><span>    </span><span class="hs-comment">-- execution budget. Such a thing could be accomplished with</span><span>
</span><span id="line-345"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-346"></span><span>    </span><span class="hs-comment">-- &gt; txOptEmulatorParamsModification = Just $ EmulatorParamsModification increaseTransactionLimits</span><span>
</span><span id="line-347"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-348"></span><span>    </span><span class="hs-comment">-- for example.</span><span>
</span><span id="line-349"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-350"></span><span>    </span><span class="hs-comment">-- Default is 'Nothing'.</span><span>
</span><span id="line-351"></span><span>    </span><span id="txOptEmulatorParamsModification"><span class="annot"><span class="annottext">TxOpts -&gt; Maybe EmulatorParamsModification
</span><a href="Cooked.Skeleton.html#txOptEmulatorParamsModification"><span class="hs-identifier hs-var hs-var">txOptEmulatorParamsModification</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#EmulatorParamsModification"><span class="hs-identifier hs-type">EmulatorParamsModification</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-352"></span><span>    </span><span class="hs-comment">-- | Which utxos to use as collaterals. They can be given manually, or</span><span>
</span><span id="line-353"></span><span>    </span><span class="hs-comment">-- computed automatically from a given, or the balancing, wallet.</span><span>
</span><span id="line-354"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-355"></span><span>    </span><span class="hs-comment">-- Default is 'CollateralUtxosFromBalancingWallet'</span><span>
</span><span id="line-356"></span><span>    </span><span id="txOptCollateralUtxos"><span class="annot"><span class="annottext">TxOpts -&gt; CollateralUtxos
</span><a href="Cooked.Skeleton.html#txOptCollateralUtxos"><span class="hs-identifier hs-var hs-var">txOptCollateralUtxos</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#CollateralUtxos"><span class="hs-identifier hs-type">CollateralUtxos</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-357"></span><span>    </span><span class="hs-comment">-- | How to resolve anchor in proposal procedures</span><span>
</span><span id="line-358"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-359"></span><span>    </span><span class="hs-comment">-- Default is 'AnchorResolutionLocal Map.Empty'</span><span>
</span><span id="line-360"></span><span>    </span><span id="txOptAnchorResolution"><span class="annot"><span class="annottext">TxOpts -&gt; AnchorResolution
</span><a href="Cooked.Skeleton.html#txOptAnchorResolution"><span class="hs-identifier hs-var hs-var">txOptAnchorResolution</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#AnchorResolution"><span class="hs-identifier hs-type">AnchorResolution</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-361"></span><span>    </span><span class="hs-comment">-- | Whether to automatically fill up reference inputs in redeemers when</span><span>
</span><span id="line-362"></span><span>    </span><span class="hs-comment">-- they contain the right reference script. This will imply going through</span><span>
</span><span id="line-363"></span><span>    </span><span class="hs-comment">-- all the known utxos with reference scripts and compare their hashes, thus</span><span>
</span><span id="line-364"></span><span>    </span><span class="hs-comment">-- will slightly reduce performance.</span><span>
</span><span id="line-365"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-366"></span><span>    </span><span class="hs-comment">-- Defaut is 'False'.</span><span>
</span><span id="line-367"></span><span>    </span><span id="txOptAutoReferenceScripts"><span class="annot"><span class="annottext">TxOpts -&gt; Bool
</span><a href="Cooked.Skeleton.html#txOptAutoReferenceScripts"><span class="hs-identifier hs-var hs-var">txOptAutoReferenceScripts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-368"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-369"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679817525"><span id="local-6989586621679817542"><span class="annot"><span class="annottext">TxOpts -&gt; TxOpts -&gt; Bool
(TxOpts -&gt; TxOpts -&gt; Bool)
-&gt; (TxOpts -&gt; TxOpts -&gt; Bool) -&gt; Eq TxOpts
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TxOpts -&gt; TxOpts -&gt; Bool
== :: TxOpts -&gt; TxOpts -&gt; Bool
$c/= :: TxOpts -&gt; TxOpts -&gt; Bool
/= :: TxOpts -&gt; TxOpts -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679817546"><span id="local-6989586621679817564"><span id="local-6989586621679817568"><span class="annot"><span class="annottext">Int -&gt; TxOpts -&gt; ShowS
[TxOpts] -&gt; ShowS
TxOpts -&gt; String
(Int -&gt; TxOpts -&gt; ShowS)
-&gt; (TxOpts -&gt; String) -&gt; ([TxOpts] -&gt; ShowS) -&gt; Show TxOpts
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; TxOpts -&gt; ShowS
showsPrec :: Int -&gt; TxOpts -&gt; ShowS
$cshow :: TxOpts -&gt; String
show :: TxOpts -&gt; String
$cshowList :: [TxOpts] -&gt; ShowS
showList :: [TxOpts] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-370"></span><span>
</span><span id="line-371"></span><span id="txOptEnsureMinAdaL"><span id="txOptUnsafeModTxL"><span id="txOptAutoSlotIncreaseL"><span id="txOptBalancingPolicyL"><span id="txOptBalanceOutputPolicyL"><span id="txOptFeePolicyL"><span id="txOptBalancingUtxosL"><span id="txOptEmulatorParamsModificationL"><span id="txOptCollateralUtxosL"><span id="txOptAnchorResolutionL"><span id="txOptAutoReferenceScriptsL"><span class="hs-identifier">makeLensesFor</span><span>
</span><span id="line-372"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptEnsureMinAda&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptEnsureMinAdaL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-373"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptAutoSlotIncrease&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptAutoSlotIncreaseL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-374"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptUnsafeModTx&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptUnsafeModTxL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-375"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptBalancingPolicy&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptBalancingPolicyL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-376"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptFeePolicy&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptFeePolicyL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-377"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptBalanceOutputPolicy&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptBalanceOutputPolicyL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-378"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptBalancingUtxos&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptBalancingUtxosL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-379"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptEmulatorParamsModification&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptEmulatorParamsModificationL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-380"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptCollateralUtxos&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptCollateralUtxosL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-381"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptAnchorResolution&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptAnchorResolutionL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-382"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txOptAutoReferenceScripts&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txOptAutoReferenceScriptsL&quot;</span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-384"></span><span>  </span><span class="hs-special">''</span><span class="hs-identifier">TxOpts</span></span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Default</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxOpts"><span class="hs-identifier hs-type">TxOpts</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-387"></span><span>  </span><span id="local-6989586621679817754"><span class="annot"><span class="annottext">def :: TxOpts
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-388"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxOpts"><span class="hs-identifier hs-type">TxOpts</span></a></span><span>
</span><span id="line-389"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">txOptEnsureMinAda :: Bool
</span><a href="Cooked.Skeleton.html#txOptEnsureMinAda"><span class="hs-identifier hs-var">txOptEnsureMinAda</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span class="hs-special">,</span><span>
</span><span id="line-390"></span><span>        </span><span class="annot"><span class="annottext">txOptAutoSlotIncrease :: Bool
</span><a href="Cooked.Skeleton.html#txOptAutoSlotIncrease"><span class="hs-identifier hs-var">txOptAutoSlotIncrease</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span class="hs-special">,</span><span>
</span><span id="line-391"></span><span>        </span><span class="annot"><span class="annottext">txOptUnsafeModTx :: [RawModTx]
</span><a href="Cooked.Skeleton.html#txOptUnsafeModTx"><span class="hs-identifier hs-var">txOptUnsafeModTx</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-392"></span><span>        </span><span class="annot"><span class="annottext">txOptBalancingPolicy :: BalancingPolicy
</span><a href="Cooked.Skeleton.html#txOptBalancingPolicy"><span class="hs-identifier hs-var">txOptBalancingPolicy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BalancingPolicy
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span class="hs-special">,</span><span>
</span><span id="line-393"></span><span>        </span><span class="annot"><span class="annottext">txOptBalanceOutputPolicy :: BalanceOutputPolicy
</span><a href="Cooked.Skeleton.html#txOptBalanceOutputPolicy"><span class="hs-identifier hs-var">txOptBalanceOutputPolicy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BalanceOutputPolicy
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span class="hs-special">,</span><span>
</span><span id="line-394"></span><span>        </span><span class="annot"><span class="annottext">txOptFeePolicy :: FeePolicy
</span><a href="Cooked.Skeleton.html#txOptFeePolicy"><span class="hs-identifier hs-var">txOptFeePolicy</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">FeePolicy
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span class="hs-special">,</span><span>
</span><span id="line-395"></span><span>        </span><span class="annot"><span class="annottext">txOptBalancingUtxos :: BalancingUtxos
</span><a href="Cooked.Skeleton.html#txOptBalancingUtxos"><span class="hs-identifier hs-var">txOptBalancingUtxos</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BalancingUtxos
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span class="hs-special">,</span><span>
</span><span id="line-396"></span><span>        </span><span class="annot"><span class="annottext">txOptEmulatorParamsModification :: Maybe EmulatorParamsModification
</span><a href="Cooked.Skeleton.html#txOptEmulatorParamsModification"><span class="hs-identifier hs-var">txOptEmulatorParamsModification</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe EmulatorParamsModification
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span>
</span><span id="line-397"></span><span>        </span><span class="annot"><span class="annottext">txOptCollateralUtxos :: CollateralUtxos
</span><a href="Cooked.Skeleton.html#txOptCollateralUtxos"><span class="hs-identifier hs-var">txOptCollateralUtxos</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CollateralUtxos
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span class="hs-special">,</span><span>
</span><span id="line-398"></span><span>        </span><span class="annot"><span class="annottext">txOptAnchorResolution :: AnchorResolution
</span><a href="Cooked.Skeleton.html#txOptAnchorResolution"><span class="hs-identifier hs-var">txOptAnchorResolution</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AnchorResolution
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span class="hs-special">,</span><span>
</span><span id="line-399"></span><span>        </span><span class="annot"><span class="annottext">txOptAutoReferenceScripts :: Bool
</span><a href="Cooked.Skeleton.html#txOptAutoReferenceScripts"><span class="hs-identifier hs-var">txOptAutoReferenceScripts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-400"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-401"></span><span>
</span><span id="line-402"></span><span class="annot"><span class="hs-comment">-- * Redeemers for transaction inputs</span></span><span>
</span><span id="line-403"></span><span>
</span><span id="line-404"></span><span class="hs-keyword">type</span><span> </span><span id="RedeemerConstrs"><span class="annot"><a href="Cooked.Skeleton.html#RedeemerConstrs"><span class="hs-identifier hs-var">RedeemerConstrs</span></a></span></span><span> </span><span id="local-6989586621679817755"><span class="annot"><a href="#local-6989586621679817755"><span class="hs-identifier hs-type">redeemer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-405"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="annot"><a href="#local-6989586621679817755"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-406"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679817755"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-407"></span><span>    </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679817755"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-408"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679817755"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-409"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679817755"><span class="hs-identifier hs-type">redeemer</span></a></span><span>
</span><span id="line-410"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-411"></span><span>
</span><span id="line-412"></span><span class="hs-keyword">data</span><span> </span><span id="Redeemer"><span class="annot"><a href="Cooked.Skeleton.html#Redeemer"><span class="hs-identifier hs-var">Redeemer</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-413"></span><span>  </span><span id="EmptyRedeemer"><span class="annot"><a href="Cooked.Skeleton.html#EmptyRedeemer"><span class="hs-identifier hs-var">EmptyRedeemer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#Redeemer"><span class="hs-identifier hs-type">Redeemer</span></a></span><span>
</span><span id="line-414"></span><span>  </span><span id="local-6989586621679817757"><span id="SomeRedeemer"><span class="annot"><a href="Cooked.Skeleton.html#SomeRedeemer"><span class="hs-identifier hs-var">SomeRedeemer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#RedeemerConstrs"><span class="hs-identifier hs-type">RedeemerConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679817757"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679817757"><span class="hs-identifier hs-type">redeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#Redeemer"><span class="hs-identifier hs-type">Redeemer</span></a></span></span><span>
</span><span id="line-415"></span><span>
</span><span id="line-416"></span><span id="local-6989586621679817760"><span id="local-6989586621679817762"><span id="local-6989586621679817766"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#Redeemer"><span class="hs-identifier hs-type">Redeemer</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-417"></span><span>
</span><span id="line-418"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679817770"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#Redeemer"><span class="hs-identifier hs-type">Redeemer</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-419"></span><span>  </span><span class="annot"><span class="annottext">Redeemer
</span><a href="Cooked.Skeleton.html#EmptyRedeemer"><span class="hs-identifier hs-var">EmptyRedeemer</span></a></span><span> </span><span id="local-6989586621679817773"><span class="annot"><span class="annottext">== :: Redeemer -&gt; Redeemer -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="Cooked.Skeleton.html#EmptyRedeemer"><span class="hs-identifier hs-var">EmptyRedeemer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-420"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#SomeRedeemer"><span class="hs-identifier hs-type">SomeRedeemer</span></a></span><span> </span><span id="local-6989586621679817777"><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679817777"><span class="hs-identifier hs-var">r1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#SomeRedeemer"><span class="hs-identifier hs-type">SomeRedeemer</span></a></span><span> </span><span id="local-6989586621679817782"><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679817782"><span class="hs-identifier hs-var">r2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-421"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; TypeRep redeemer
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679817777"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep redeemer
-&gt; TypeRep redeemer -&gt; Maybe (redeemer :~~: redeemer)
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-operator hs-var">`eqTypeRep`</span></span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; TypeRep redeemer
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679817782"><span class="hs-identifier hs-var">r2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-422"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">redeemer :~~: redeemer
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679817777"><span class="hs-identifier hs-var">r1</span></a></span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; redeemer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">PlutusTx.==</span></span><span> </span><span class="annot"><span class="annottext">redeemer
redeemer
</span><a href="#local-6989586621679817782"><span class="hs-identifier hs-var">r2</span></a></span><span>
</span><span id="line-423"></span><span>      </span><span class="annot"><span class="annottext">Maybe (redeemer :~~: redeemer)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-424"></span><span>  </span><span class="annot"><span class="annottext">Redeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-425"></span><span>
</span><span id="line-426"></span><span class="hs-keyword">data</span><span> </span><span id="TxSkelRedeemer"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-var">TxSkelRedeemer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="TxSkelRedeemer"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-var">TxSkelRedeemer</span></a></span></span><span>
</span><span id="line-427"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="txSkelRedeemer"><span class="annot"><span class="annottext">TxSkelRedeemer -&gt; Redeemer
</span><a href="Cooked.Skeleton.html#txSkelRedeemer"><span class="hs-identifier hs-var hs-var">txSkelRedeemer</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#Redeemer"><span class="hs-identifier hs-type">Redeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-428"></span><span>    </span><span class="hs-comment">-- An optional input containing a reference script</span><span>
</span><span id="line-429"></span><span>    </span><span id="txSkelReferenceInput"><span class="annot"><span class="annottext">TxSkelRedeemer -&gt; Maybe TxOutRef
</span><a href="Cooked.Skeleton.html#txSkelReferenceInput"><span class="hs-identifier hs-var hs-var">txSkelReferenceInput</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span>
</span><span id="line-430"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-431"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679817791"><span id="local-6989586621679817797"><span id="local-6989586621679817801"><span class="annot"><span class="annottext">Int -&gt; TxSkelRedeemer -&gt; ShowS
[TxSkelRedeemer] -&gt; ShowS
TxSkelRedeemer -&gt; String
(Int -&gt; TxSkelRedeemer -&gt; ShowS)
-&gt; (TxSkelRedeemer -&gt; String)
-&gt; ([TxSkelRedeemer] -&gt; ShowS)
-&gt; Show TxSkelRedeemer
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; TxSkelRedeemer -&gt; ShowS
showsPrec :: Int -&gt; TxSkelRedeemer -&gt; ShowS
$cshow :: TxSkelRedeemer -&gt; String
show :: TxSkelRedeemer -&gt; String
$cshowList :: [TxSkelRedeemer] -&gt; ShowS
showList :: [TxSkelRedeemer] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679817804"><span id="local-6989586621679817809"><span class="annot"><span class="annottext">TxSkelRedeemer -&gt; TxSkelRedeemer -&gt; Bool
(TxSkelRedeemer -&gt; TxSkelRedeemer -&gt; Bool)
-&gt; (TxSkelRedeemer -&gt; TxSkelRedeemer -&gt; Bool) -&gt; Eq TxSkelRedeemer
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TxSkelRedeemer -&gt; TxSkelRedeemer -&gt; Bool
== :: TxSkelRedeemer -&gt; TxSkelRedeemer -&gt; Bool
$c/= :: TxSkelRedeemer -&gt; TxSkelRedeemer -&gt; Bool
/= :: TxSkelRedeemer -&gt; TxSkelRedeemer -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-432"></span><span>
</span><span id="line-433"></span><span class="hs-comment">-- Two helpers to create skeleton redeemers</span><span>
</span><span id="line-434"></span><span id="local-6989586621679816604"><span class="annot"><a href="Cooked.Skeleton.html#someTxSkelRedeemer"><span class="hs-identifier hs-type">someTxSkelRedeemer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#RedeemerConstrs"><span class="hs-identifier hs-type">RedeemerConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679816604"><span class="hs-identifier hs-type">redeemer</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679816604"><span class="hs-identifier hs-type">redeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span></span><span>
</span><span id="line-435"></span><span id="someTxSkelRedeemer"><span class="annot"><span class="annottext">someTxSkelRedeemer :: forall redeemer.
RedeemerConstrs redeemer =&gt;
redeemer -&gt; TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#someTxSkelRedeemer"><span class="hs-identifier hs-var hs-var">someTxSkelRedeemer</span></a></span></span><span> </span><span id="local-6989586621679817814"><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679817814"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Redeemer -&gt; Maybe TxOutRef -&gt; TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-var">TxSkelRedeemer</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">redeemer -&gt; Redeemer
forall a. RedeemerConstrs a =&gt; a -&gt; Redeemer
</span><a href="Cooked.Skeleton.html#SomeRedeemer"><span class="hs-identifier hs-var">SomeRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679817814"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe TxOutRef
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-436"></span><span>
</span><span id="line-437"></span><span class="annot"><a href="Cooked.Skeleton.html#emptyTxSkelRedeemer"><span class="hs-identifier hs-type">emptyTxSkelRedeemer</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span>
</span><span id="line-438"></span><span id="emptyTxSkelRedeemer"><span class="annot"><span class="annottext">emptyTxSkelRedeemer :: TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#emptyTxSkelRedeemer"><span class="hs-identifier hs-var hs-var">emptyTxSkelRedeemer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Redeemer -&gt; Maybe TxOutRef -&gt; TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-var">TxSkelRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">Redeemer
</span><a href="Cooked.Skeleton.html#EmptyRedeemer"><span class="hs-identifier hs-var">EmptyRedeemer</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TxOutRef
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-439"></span><span>
</span><span id="line-440"></span><span class="hs-comment">-- Additional helper to specify a given reference input. As reference inputs are</span><span>
</span><span id="line-441"></span><span class="hs-comment">-- automatically attached during transaction generation when they contain the</span><span>
</span><span id="line-442"></span><span class="hs-comment">-- right scripts by default, there are only 3 cases where this can be useful:</span><span>
</span><span id="line-443"></span><span class="hs-comment">-- - The reliance on a reference script needs to be made explicit</span><span>
</span><span id="line-444"></span><span class="hs-comment">-- - A wrong reference script somehow needs to be attached</span><span>
</span><span id="line-445"></span><span class="hs-comment">-- - The automated attachement of reference inputs has been disabled using the</span><span>
</span><span id="line-446"></span><span class="hs-comment">-- `txOptAutoReferenceScripts` option</span><span>
</span><span id="line-447"></span><span>
</span><span id="line-448"></span><span class="annot"><a href="Cooked.Skeleton.html#withReferenceInput"><span class="hs-identifier hs-type">withReferenceInput</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span>
</span><span id="line-449"></span><span id="withReferenceInput"><span class="annot"><span class="annottext">withReferenceInput :: TxSkelRedeemer -&gt; TxOutRef -&gt; TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#withReferenceInput"><span class="hs-identifier hs-var hs-var">withReferenceInput</span></a></span></span><span> </span><span id="local-6989586621679817815"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679817815"><span class="hs-identifier hs-var">red</span></a></span></span><span> </span><span id="local-6989586621679817816"><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679817816"><span class="hs-identifier hs-var">ref</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679817815"><span class="hs-identifier hs-var">red</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cooked.Skeleton.html#txSkelReferenceInput"><span class="hs-identifier hs-var">txSkelReferenceInput</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621679817816"><span class="hs-identifier hs-type">ref</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-450"></span><span>
</span><span id="line-451"></span><span class="annot"><span class="hs-comment">-- * Description of the Governance actions (or proposal procedures)</span></span><span>
</span><span id="line-452"></span><span>
</span><span id="line-453"></span><span class="hs-comment">-- These are all the protocol parameters. They are taken from</span><span>
</span><span id="line-454"></span><span class="hs-comment">-- https://github.com/IntersectMBO/cardano-ledger/blob/c4fbc05999866fea7c0cb1b211fd5288f286b95d/eras/conway/impl/cddl-files/conway.cddl#L381-L412</span><span>
</span><span id="line-455"></span><span class="hs-comment">-- and will most likely change in future eras.</span><span>
</span><span id="line-456"></span><span class="hs-keyword">data</span><span> </span><span id="TxParameterChange"><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-var">TxParameterChange</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-457"></span><span>  </span><span class="annot"><span class="hs-comment">-- | The linear factor for the minimum fee calculation</span></span><span>
</span><span id="line-458"></span><span>  </span><span id="FeePerByte"><span class="annot"><a href="Cooked.Skeleton.html#FeePerByte"><span class="hs-identifier hs-var">FeePerByte</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-459"></span><span>  </span><span class="annot"><span class="hs-comment">-- | The constant factor for the minimum fee calculation</span></span><span>
</span><span id="line-460"></span><span>  </span><span id="FeeFixed"><span class="annot"><a href="Cooked.Skeleton.html#FeeFixed"><span class="hs-identifier hs-var">FeeFixed</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-461"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Maximal block body size</span></span><span>
</span><span id="line-462"></span><span>  </span><span id="MaxBlockBodySize"><span class="annot"><a href="Cooked.Skeleton.html#MaxBlockBodySize"><span class="hs-identifier hs-var">MaxBlockBodySize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-463"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Maximal transaction size</span></span><span>
</span><span id="line-464"></span><span>  </span><span id="MaxTxSize"><span class="annot"><a href="Cooked.Skeleton.html#MaxTxSize"><span class="hs-identifier hs-var">MaxTxSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-465"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Maximal block header size</span></span><span>
</span><span id="line-466"></span><span>  </span><span id="MaxBlockHeaderSize"><span class="annot"><a href="Cooked.Skeleton.html#MaxBlockHeaderSize"><span class="hs-identifier hs-var">MaxBlockHeaderSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-467"></span><span>  </span><span class="annot"><span class="hs-comment">-- | The amount of a key registration deposit</span></span><span>
</span><span id="line-468"></span><span>  </span><span id="KeyDeposit"><span class="annot"><a href="Cooked.Skeleton.html#KeyDeposit"><span class="hs-identifier hs-var">KeyDeposit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-469"></span><span>  </span><span class="annot"><span class="hs-comment">-- | The amount of a pool registration deposit</span></span><span>
</span><span id="line-470"></span><span>  </span><span id="PoolDeposit"><span class="annot"><a href="Cooked.Skeleton.html#PoolDeposit"><span class="hs-identifier hs-var">PoolDeposit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-471"></span><span>  </span><span class="hs-comment">-- | Maximum number of epochs in the future a pool retirement is allowed to</span><span>
</span><span id="line-472"></span><span>  </span><span class="hs-comment">-- be scheduled future for.</span><span>
</span><span id="line-473"></span><span>  </span><span id="PoolRetirementMaxEpoch"><span class="annot"><a href="Cooked.Skeleton.html#PoolRetirementMaxEpoch"><span class="hs-identifier hs-var">PoolRetirementMaxEpoch</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-474"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Desired number of pools</span></span><span>
</span><span id="line-475"></span><span>  </span><span id="PoolNumber"><span class="annot"><a href="Cooked.Skeleton.html#PoolNumber"><span class="hs-identifier hs-var">PoolNumber</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-476"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Pool influence</span></span><span>
</span><span id="line-477"></span><span>  </span><span id="PoolInfluence"><span class="annot"><a href="Cooked.Skeleton.html#PoolInfluence"><span class="hs-identifier hs-var">PoolInfluence</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-478"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Monetary expansion</span></span><span>
</span><span id="line-479"></span><span>  </span><span id="MonetaryExpansion"><span class="annot"><a href="Cooked.Skeleton.html#MonetaryExpansion"><span class="hs-identifier hs-var">MonetaryExpansion</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-480"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Treasury expansion</span></span><span>
</span><span id="line-481"></span><span>  </span><span id="TreasuryCut"><span class="annot"><a href="Cooked.Skeleton.html#TreasuryCut"><span class="hs-identifier hs-var">TreasuryCut</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-482"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Minimum Stake Pool Cost</span></span><span>
</span><span id="line-483"></span><span>  </span><span id="MinPoolCost"><span class="annot"><a href="Cooked.Skeleton.html#MinPoolCost"><span class="hs-identifier hs-var">MinPoolCost</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-484"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Cost in lovelace per byte of UTxO storage</span></span><span>
</span><span id="line-485"></span><span>  </span><span id="CoinsPerUTxOByte"><span class="annot"><a href="Cooked.Skeleton.html#CoinsPerUTxOByte"><span class="hs-identifier hs-var">CoinsPerUTxOByte</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-486"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Cost models for non-native script languages</span></span><span>
</span><span id="line-487"></span><span>  </span><span id="CostModels"><span class="annot"><a href="Cooked.Skeleton.html#CostModels"><span class="hs-identifier hs-var">CostModels</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-488"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="cmPlutusV1Costs"><span class="annot"><span class="annottext">TxParameterChange -&gt; [Integer]
</span><a href="Cooked.Skeleton.html#cmPlutusV1Costs"><span class="hs-identifier hs-var hs-var">cmPlutusV1Costs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-489"></span><span>      </span><span id="cmPlutusV2Costs"><span class="annot"><span class="annottext">TxParameterChange -&gt; [Integer]
</span><a href="Cooked.Skeleton.html#cmPlutusV2Costs"><span class="hs-identifier hs-var hs-var">cmPlutusV2Costs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-490"></span><span>      </span><span id="cmPlutusV3Costs"><span class="annot"><span class="annottext">TxParameterChange -&gt; [Integer]
</span><a href="Cooked.Skeleton.html#cmPlutusV3Costs"><span class="hs-identifier hs-var hs-var">cmPlutusV3Costs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">]</span><span>
</span><span id="line-491"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-492"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-493"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Prices of execution units</span></span><span>
</span><span id="line-494"></span><span>  </span><span id="Prices"><span class="annot"><a href="Cooked.Skeleton.html#Prices"><span class="hs-identifier hs-var">Prices</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-495"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="pMemoryCost"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#pMemoryCost"><span class="hs-identifier hs-var hs-var">pMemoryCost</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span class="hs-special">,</span><span>
</span><span id="line-496"></span><span>      </span><span id="pStepCost"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#pStepCost"><span class="hs-identifier hs-var hs-var">pStepCost</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span>
</span><span id="line-497"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-498"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-499"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Max total script execution resources units allowed per tx</span></span><span>
</span><span id="line-500"></span><span>  </span><span id="MaxTxExUnits"><span class="annot"><a href="Cooked.Skeleton.html#MaxTxExUnits"><span class="hs-identifier hs-var">MaxTxExUnits</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-501"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="mteuMemory"><span class="annot"><span class="annottext">TxParameterChange -&gt; Integer
</span><a href="Cooked.Skeleton.html#mteuMemory"><span class="hs-identifier hs-var hs-var">mteuMemory</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">,</span><span>
</span><span id="line-502"></span><span>      </span><span id="mteuSteps"><span class="annot"><span class="annottext">TxParameterChange -&gt; Integer
</span><a href="Cooked.Skeleton.html#mteuSteps"><span class="hs-identifier hs-var hs-var">mteuSteps</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span>
</span><span id="line-503"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-504"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-505"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Max total script execution resources units allowed per block</span></span><span>
</span><span id="line-506"></span><span>  </span><span id="MaxBlockExUnits"><span class="annot"><a href="Cooked.Skeleton.html#MaxBlockExUnits"><span class="hs-identifier hs-var">MaxBlockExUnits</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-507"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="mbeuMemory"><span class="annot"><span class="annottext">TxParameterChange -&gt; Integer
</span><a href="Cooked.Skeleton.html#mbeuMemory"><span class="hs-identifier hs-var hs-var">mbeuMemory</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">,</span><span>
</span><span id="line-508"></span><span>      </span><span id="mbeuSteps"><span class="annot"><span class="annottext">TxParameterChange -&gt; Integer
</span><a href="Cooked.Skeleton.html#mbeuSteps"><span class="hs-identifier hs-var hs-var">mbeuSteps</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span>
</span><span id="line-509"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-510"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-511"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Max size of a Value in an output</span></span><span>
</span><span id="line-512"></span><span>  </span><span id="MaxValSize"><span class="annot"><a href="Cooked.Skeleton.html#MaxValSize"><span class="hs-identifier hs-var">MaxValSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-513"></span><span>  </span><span class="hs-comment">-- | Percentage of the txfee which must be provided as collateral when</span><span>
</span><span id="line-514"></span><span>  </span><span class="hs-comment">-- including non-native scripts.</span><span>
</span><span id="line-515"></span><span>  </span><span id="CollateralPercentage"><span class="annot"><a href="Cooked.Skeleton.html#CollateralPercentage"><span class="hs-identifier hs-var">CollateralPercentage</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-516"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Maximum number of collateral inputs allowed in a transaction</span></span><span>
</span><span id="line-517"></span><span>  </span><span id="MaxCollateralInputs"><span class="annot"><a href="Cooked.Skeleton.html#MaxCollateralInputs"><span class="hs-identifier hs-var">MaxCollateralInputs</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-518"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Thresholds for pool votes</span></span><span>
</span><span id="line-519"></span><span>  </span><span id="PoolVotingThresholds"><span class="annot"><a href="Cooked.Skeleton.html#PoolVotingThresholds"><span class="hs-identifier hs-var">PoolVotingThresholds</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-520"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="pvtMotionNoConfidence"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#pvtMotionNoConfidence"><span class="hs-identifier hs-var hs-var">pvtMotionNoConfidence</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span class="hs-special">,</span><span>
</span><span id="line-521"></span><span>      </span><span id="pvtCommitteeNormal"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#pvtCommitteeNormal"><span class="hs-identifier hs-var hs-var">pvtCommitteeNormal</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span class="hs-special">,</span><span>
</span><span id="line-522"></span><span>      </span><span id="pvtCommitteeNoConfidence"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#pvtCommitteeNoConfidence"><span class="hs-identifier hs-var hs-var">pvtCommitteeNoConfidence</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span class="hs-special">,</span><span>
</span><span id="line-523"></span><span>      </span><span id="pvtHardFork"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#pvtHardFork"><span class="hs-identifier hs-var hs-var">pvtHardFork</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span class="hs-special">,</span><span>
</span><span id="line-524"></span><span>      </span><span id="pvtSecurityGroup"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#pvtSecurityGroup"><span class="hs-identifier hs-var hs-var">pvtSecurityGroup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span>
</span><span id="line-525"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-526"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-527"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Thresholds for DRep votes</span></span><span>
</span><span id="line-528"></span><span>  </span><span id="DRepVotingThresholds"><span class="annot"><a href="Cooked.Skeleton.html#DRepVotingThresholds"><span class="hs-identifier hs-var">DRepVotingThresholds</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-529"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="drvtMotionNoConfidence"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#drvtMotionNoConfidence"><span class="hs-identifier hs-var hs-var">drvtMotionNoConfidence</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span class="hs-special">,</span><span>
</span><span id="line-530"></span><span>      </span><span id="drvtCommitteeNormal"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#drvtCommitteeNormal"><span class="hs-identifier hs-var hs-var">drvtCommitteeNormal</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span class="hs-special">,</span><span>
</span><span id="line-531"></span><span>      </span><span id="drvtCommitteeNoConfidence"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#drvtCommitteeNoConfidence"><span class="hs-identifier hs-var hs-var">drvtCommitteeNoConfidence</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span class="hs-special">,</span><span>
</span><span id="line-532"></span><span>      </span><span id="drvtUpdateConstitution"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#drvtUpdateConstitution"><span class="hs-identifier hs-var hs-var">drvtUpdateConstitution</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span class="hs-special">,</span><span>
</span><span id="line-533"></span><span>      </span><span id="drvtHardForkInitialization"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#drvtHardForkInitialization"><span class="hs-identifier hs-var hs-var">drvtHardForkInitialization</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span class="hs-special">,</span><span>
</span><span id="line-534"></span><span>      </span><span id="drvtNetworkGroup"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#drvtNetworkGroup"><span class="hs-identifier hs-var hs-var">drvtNetworkGroup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span class="hs-special">,</span><span>
</span><span id="line-535"></span><span>      </span><span id="drvtEconomicGroup"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#drvtEconomicGroup"><span class="hs-identifier hs-var hs-var">drvtEconomicGroup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span class="hs-special">,</span><span>
</span><span id="line-536"></span><span>      </span><span id="drvtTechnicalGroup"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#drvtTechnicalGroup"><span class="hs-identifier hs-var hs-var">drvtTechnicalGroup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span class="hs-special">,</span><span>
</span><span id="line-537"></span><span>      </span><span id="drvtGovernanceGroup"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#drvtGovernanceGroup"><span class="hs-identifier hs-var hs-var">drvtGovernanceGroup</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span class="hs-special">,</span><span>
</span><span id="line-538"></span><span>      </span><span id="drvtTreasuryWithdrawal"><span class="annot"><span class="annottext">TxParameterChange -&gt; Rational
</span><a href="Cooked.Skeleton.html#drvtTreasuryWithdrawal"><span class="hs-identifier hs-var hs-var">drvtTreasuryWithdrawal</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Rational</span></span><span>
</span><span id="line-539"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-540"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-541"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Minimum size of the Constitutional Committee</span></span><span>
</span><span id="line-542"></span><span>  </span><span id="CommitteeMinSize"><span class="annot"><a href="Cooked.Skeleton.html#CommitteeMinSize"><span class="hs-identifier hs-var">CommitteeMinSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-543"></span><span>  </span><span class="annot"><span class="hs-comment">-- | The Constitutional Committee Term limit in number of Slots</span></span><span>
</span><span id="line-544"></span><span>  </span><span id="CommitteeMaxTermLength"><span class="annot"><a href="Cooked.Skeleton.html#CommitteeMaxTermLength"><span class="hs-identifier hs-var">CommitteeMaxTermLength</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-545"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Gov action lifetime in number of Epochs</span></span><span>
</span><span id="line-546"></span><span>  </span><span id="GovActionLifetime"><span class="annot"><a href="Cooked.Skeleton.html#GovActionLifetime"><span class="hs-identifier hs-var">GovActionLifetime</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-547"></span><span>  </span><span class="annot"><span class="hs-comment">-- | The amount of the Gov Action deposit</span></span><span>
</span><span id="line-548"></span><span>  </span><span id="GovActionDeposit"><span class="annot"><a href="Cooked.Skeleton.html#GovActionDeposit"><span class="hs-identifier hs-var">GovActionDeposit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-549"></span><span>  </span><span class="annot"><span class="hs-comment">-- | The amount of a DRep registration deposit</span></span><span>
</span><span id="line-550"></span><span>  </span><span id="DRepRegistrationDeposit"><span class="annot"><a href="Cooked.Skeleton.html#DRepRegistrationDeposit"><span class="hs-identifier hs-var">DRepRegistrationDeposit</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-551"></span><span>  </span><span class="hs-comment">-- | The number of Epochs that a DRep can perform no activity without losing</span><span>
</span><span id="line-552"></span><span>  </span><span class="hs-comment">-- their @Active@ status.</span><span>
</span><span id="line-553"></span><span>  </span><span id="DRepActivity"><span class="annot"><a href="Cooked.Skeleton.html#DRepActivity"><span class="hs-identifier hs-var">DRepActivity</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span>
</span><span id="line-554"></span><span>  </span><span class="hs-comment">-- Reference scripts fee for the minimum fee calculation</span><span>
</span><span id="line-555"></span><span>  </span><span class="hs-comment">-- will exist later on MinFeeRefScriptCostPerByte :: Integer -&gt; TxParameterChange</span><span>
</span><span id="line-556"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679817871"><span id="local-6989586621679817950"><span id="local-6989586621679817954"><span class="annot"><span class="annottext">Int -&gt; TxParameterChange -&gt; ShowS
[TxParameterChange] -&gt; ShowS
TxParameterChange -&gt; String
(Int -&gt; TxParameterChange -&gt; ShowS)
-&gt; (TxParameterChange -&gt; String)
-&gt; ([TxParameterChange] -&gt; ShowS)
-&gt; Show TxParameterChange
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; TxParameterChange -&gt; ShowS
showsPrec :: Int -&gt; TxParameterChange -&gt; ShowS
$cshow :: TxParameterChange -&gt; String
show :: TxParameterChange -&gt; String
$cshowList :: [TxParameterChange] -&gt; ShowS
showList :: [TxParameterChange] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679817957"><span id="local-6989586621679818007"><span class="annot"><span class="annottext">TxParameterChange -&gt; TxParameterChange -&gt; Bool
(TxParameterChange -&gt; TxParameterChange -&gt; Bool)
-&gt; (TxParameterChange -&gt; TxParameterChange -&gt; Bool)
-&gt; Eq TxParameterChange
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TxParameterChange -&gt; TxParameterChange -&gt; Bool
== :: TxParameterChange -&gt; TxParameterChange -&gt; Bool
$c/= :: TxParameterChange -&gt; TxParameterChange -&gt; Bool
/= :: TxParameterChange -&gt; TxParameterChange -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-557"></span><span>
</span><span id="line-558"></span><span class="hs-keyword">data</span><span> </span><span id="TxGovAction"><span class="annot"><a href="Cooked.Skeleton.html#TxGovAction"><span class="hs-identifier hs-var">TxGovAction</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-559"></span><span>  </span><span class="hs-comment">-- If several parameter changes are of the same kind, only the last</span><span>
</span><span id="line-560"></span><span>  </span><span class="hs-comment">-- one will take effect</span><span>
</span><span id="line-561"></span><span>  </span><span id="TxGovActionParameterChange"><span class="annot"><a href="Cooked.Skeleton.html#TxGovActionParameterChange"><span class="hs-identifier hs-var">TxGovActionParameterChange</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Skeleton.html#TxParameterChange"><span class="hs-identifier hs-type">TxParameterChange</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxGovAction"><span class="hs-identifier hs-type">TxGovAction</span></a></span><span>
</span><span id="line-562"></span><span>  </span><span id="TxGovActionHardForkInitiation"><span class="annot"><a href="Cooked.Skeleton.html#TxGovActionHardForkInitiation"><span class="hs-identifier hs-var">TxGovActionHardForkInitiation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ProtocolVersion</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxGovAction"><span class="hs-identifier hs-type">TxGovAction</span></a></span><span>
</span><span id="line-563"></span><span>  </span><span id="TxGovActionTreasuryWithdrawals"><span class="annot"><a href="Cooked.Skeleton.html#TxGovActionTreasuryWithdrawals"><span class="hs-identifier hs-var">TxGovActionTreasuryWithdrawals</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Credential</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Lovelace</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxGovAction"><span class="hs-identifier hs-type">TxGovAction</span></a></span><span>
</span><span id="line-564"></span><span>  </span><span id="TxGovActionNoConfidence"><span class="annot"><a href="Cooked.Skeleton.html#TxGovActionNoConfidence"><span class="hs-identifier hs-var">TxGovActionNoConfidence</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxGovAction"><span class="hs-identifier hs-type">TxGovAction</span></a></span><span>
</span><span id="line-565"></span><span>  </span><span id="TxGovActionUpdateCommittee"><span class="annot"><a href="Cooked.Skeleton.html#TxGovActionUpdateCommittee"><span class="hs-identifier hs-var">TxGovActionUpdateCommittee</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Api.ColdCommitteeCredential</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ColdCommitteeCredential</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Rational</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxGovAction"><span class="hs-identifier hs-type">TxGovAction</span></a></span><span>
</span><span id="line-566"></span><span>  </span><span id="TxGovActionNewConstitution"><span class="annot"><a href="Cooked.Skeleton.html#TxGovActionNewConstitution"><span class="hs-identifier hs-var">TxGovActionNewConstitution</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Constitution</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxGovAction"><span class="hs-identifier hs-type">TxGovAction</span></a></span><span>
</span><span id="line-567"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679818017"><span id="local-6989586621679818039"><span id="local-6989586621679818043"><span class="annot"><span class="annottext">Int -&gt; TxGovAction -&gt; ShowS
[TxGovAction] -&gt; ShowS
TxGovAction -&gt; String
(Int -&gt; TxGovAction -&gt; ShowS)
-&gt; (TxGovAction -&gt; String)
-&gt; ([TxGovAction] -&gt; ShowS)
-&gt; Show TxGovAction
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; TxGovAction -&gt; ShowS
showsPrec :: Int -&gt; TxGovAction -&gt; ShowS
$cshow :: TxGovAction -&gt; String
show :: TxGovAction -&gt; String
$cshowList :: [TxGovAction] -&gt; ShowS
showList :: [TxGovAction] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679818049"><span id="local-6989586621679818066"><span class="annot"><span class="annottext">TxGovAction -&gt; TxGovAction -&gt; Bool
(TxGovAction -&gt; TxGovAction -&gt; Bool)
-&gt; (TxGovAction -&gt; TxGovAction -&gt; Bool) -&gt; Eq TxGovAction
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TxGovAction -&gt; TxGovAction -&gt; Bool
== :: TxGovAction -&gt; TxGovAction -&gt; Bool
$c/= :: TxGovAction -&gt; TxGovAction -&gt; Bool
/= :: TxGovAction -&gt; TxGovAction -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-568"></span><span>
</span><span id="line-569"></span><span class="hs-keyword">data</span><span> </span><span id="TxSkelProposal"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelProposal"><span class="hs-identifier hs-var">TxSkelProposal</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-570"></span><span>  </span><span id="TxSkelProposal"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelProposal"><span class="hs-identifier hs-var">TxSkelProposal</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-571"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-comment">-- | Whatever credential will get back the deposit</span></span><span>
</span><span id="line-572"></span><span>      </span><span id="txSkelProposalAddress"><span class="annot"><span class="annottext">TxSkelProposal -&gt; Address
</span><a href="Cooked.Skeleton.html#txSkelProposalAddress"><span class="hs-identifier hs-var hs-var">txSkelProposalAddress</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Address</span></span><span class="hs-special">,</span><span>
</span><span id="line-573"></span><span>      </span><span class="annot"><span class="hs-comment">-- | The proposed action</span></span><span>
</span><span id="line-574"></span><span>      </span><span id="txSkelProposalAction"><span class="annot"><span class="annottext">TxSkelProposal -&gt; TxGovAction
</span><a href="Cooked.Skeleton.html#txSkelProposalAction"><span class="hs-identifier hs-var hs-var">txSkelProposalAction</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxGovAction"><span class="hs-identifier hs-type">TxGovAction</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-575"></span><span>      </span><span class="hs-comment">-- | An optional script (typically the constitution script) to witness the</span><span>
</span><span id="line-576"></span><span>      </span><span class="hs-comment">-- proposal and validate it. Only parameter changes and treasury</span><span>
</span><span id="line-577"></span><span>      </span><span class="hs-comment">-- withdrawals can be subject to such a validation and transactions will</span><span>
</span><span id="line-578"></span><span>      </span><span class="hs-comment">-- not pass validation phase 1 if other actions are given a witness.</span><span>
</span><span id="line-579"></span><span>      </span><span id="txSkelProposalWitness"><span class="annot"><span class="annottext">TxSkelProposal -&gt; Maybe (Versioned Script, TxSkelRedeemer)
</span><a href="Cooked.Skeleton.html#txSkelProposalWitness"><span class="hs-identifier hs-var hs-var">txSkelProposalWitness</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-580"></span><span>      </span><span class="hs-comment">-- | An optional anchor to be given as additional data. It should</span><span>
</span><span id="line-581"></span><span>      </span><span class="hs-comment">-- correspond to the URL of a web page</span><span>
</span><span id="line-582"></span><span>      </span><span id="txSkelProposalAnchor"><span class="annot"><span class="annottext">TxSkelProposal -&gt; Maybe String
</span><a href="Cooked.Skeleton.html#txSkelProposalAnchor"><span class="hs-identifier hs-var hs-var">txSkelProposalAnchor</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span>
</span><span id="line-583"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-584"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelProposal"><span class="hs-identifier hs-type">TxSkelProposal</span></a></span><span>
</span><span id="line-585"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679818078"><span id="local-6989586621679818088"><span id="local-6989586621679818092"><span class="annot"><span class="annottext">Int -&gt; TxSkelProposal -&gt; ShowS
[TxSkelProposal] -&gt; ShowS
TxSkelProposal -&gt; String
(Int -&gt; TxSkelProposal -&gt; ShowS)
-&gt; (TxSkelProposal -&gt; String)
-&gt; ([TxSkelProposal] -&gt; ShowS)
-&gt; Show TxSkelProposal
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; TxSkelProposal -&gt; ShowS
showsPrec :: Int -&gt; TxSkelProposal -&gt; ShowS
$cshow :: TxSkelProposal -&gt; String
show :: TxSkelProposal -&gt; String
$cshowList :: [TxSkelProposal] -&gt; ShowS
showList :: [TxSkelProposal] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679818102"><span id="local-6989586621679818111"><span class="annot"><span class="annottext">TxSkelProposal -&gt; TxSkelProposal -&gt; Bool
(TxSkelProposal -&gt; TxSkelProposal -&gt; Bool)
-&gt; (TxSkelProposal -&gt; TxSkelProposal -&gt; Bool) -&gt; Eq TxSkelProposal
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TxSkelProposal -&gt; TxSkelProposal -&gt; Bool
== :: TxSkelProposal -&gt; TxSkelProposal -&gt; Bool
$c/= :: TxSkelProposal -&gt; TxSkelProposal -&gt; Bool
/= :: TxSkelProposal -&gt; TxSkelProposal -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-586"></span><span>
</span><span id="line-587"></span><span id="txSkelProposalAddressL"><span id="txSkelProposalActionL"><span id="txSkelProposalWitnessL"><span id="txSkelProposalAnchorL"><span class="hs-identifier">makeLensesFor</span><span>
</span><span id="line-588"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelProposalAddress&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelProposalAddressL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-589"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelProposalAction&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelProposalActionL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-590"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelProposalWitness&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelProposalWitnessL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-591"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelProposalAnchor&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelProposalAnchorL&quot;</span><span class="hs-special">)</span><span>
</span><span id="line-592"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-593"></span><span>  </span><span class="hs-special">''</span><span class="hs-identifier">TxSkelProposal</span></span></span></span></span><span>
</span><span id="line-594"></span><span>
</span><span id="line-595"></span><span id="local-6989586621679816630"><span class="annot"><a href="Cooked.Skeleton.html#simpleTxSkelProposal"><span class="hs-identifier hs-type">simpleTxSkelProposal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Conversion.ToAddress.html#ToAddress"><span class="hs-identifier hs-type">ToAddress</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679816630"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679816630"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxGovAction"><span class="hs-identifier hs-type">TxGovAction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelProposal"><span class="hs-identifier hs-type">TxSkelProposal</span></a></span></span><span>
</span><span id="line-596"></span><span id="simpleTxSkelProposal"><span class="annot"><span class="annottext">simpleTxSkelProposal :: forall a. ToAddress a =&gt; a -&gt; TxGovAction -&gt; TxSkelProposal
</span><a href="Cooked.Skeleton.html#simpleTxSkelProposal"><span class="hs-identifier hs-var hs-var">simpleTxSkelProposal</span></a></span></span><span> </span><span id="local-6989586621679818159"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818159"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679818160"><span class="annot"><span class="annottext">TxGovAction
</span><a href="#local-6989586621679818160"><span class="hs-identifier hs-var">govAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Address
-&gt; TxGovAction
-&gt; Maybe (Versioned Script, TxSkelRedeemer)
-&gt; Maybe String
-&gt; TxSkelProposal
</span><a href="Cooked.Skeleton.html#TxSkelProposal"><span class="hs-identifier hs-var">TxSkelProposal</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; Address
forall a. ToAddress a =&gt; a -&gt; Address
</span><a href="Cooked.Conversion.ToAddress.html#toAddress"><span class="hs-identifier hs-var">toAddress</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818159"><span class="hs-identifier hs-var">a</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxGovAction
</span><a href="#local-6989586621679818160"><span class="hs-identifier hs-var">govAction</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Versioned Script, TxSkelRedeemer)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Maybe String
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-597"></span><span>
</span><span id="line-598"></span><span id="local-6989586621679816634"><span class="annot"><a href="Cooked.Skeleton.html#withWitness"><span class="hs-identifier hs-type">withWitness</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Conversion.ToVersionedScript.html#ToVersionedScript"><span class="hs-identifier hs-type">ToVersionedScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679816634"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelProposal"><span class="hs-identifier hs-type">TxSkelProposal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679816634"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelProposal"><span class="hs-identifier hs-type">TxSkelProposal</span></a></span></span><span>
</span><span id="line-599"></span><span id="withWitness"><span class="annot"><span class="annottext">withWitness :: forall a.
ToVersionedScript a =&gt;
TxSkelProposal -&gt; (a, TxSkelRedeemer) -&gt; TxSkelProposal
</span><a href="Cooked.Skeleton.html#withWitness"><span class="hs-identifier hs-var hs-var">withWitness</span></a></span></span><span> </span><span id="local-6989586621679818164"><span class="annot"><span class="annottext">TxSkelProposal
</span><a href="#local-6989586621679818164"><span class="hs-identifier hs-var">prop</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679818165"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818165"><span class="hs-identifier hs-var">s</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679818166"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679818166"><span class="hs-identifier hs-var">red</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelProposal
</span><a href="#local-6989586621679818164"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cooked.Skeleton.html#txSkelProposalWitness"><span class="hs-identifier hs-var">txSkelProposalWitness</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Conversion.ToVersionedScript.html#toVersionedScript"><span class="hs-identifier hs-type">toVersionedScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818165"><span class="hs-identifier hs-type">s</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621679818166"><span class="hs-identifier hs-type">red</span></a></span><span class="hs-special">)</span><span class="hs-special">}</span><span>
</span><span id="line-600"></span><span>
</span><span id="line-601"></span><span class="annot"><a href="Cooked.Skeleton.html#withAnchor"><span class="hs-identifier hs-type">withAnchor</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelProposal"><span class="hs-identifier hs-type">TxSkelProposal</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelProposal"><span class="hs-identifier hs-type">TxSkelProposal</span></a></span><span>
</span><span id="line-602"></span><span id="withAnchor"><span class="annot"><span class="annottext">withAnchor :: TxSkelProposal -&gt; String -&gt; TxSkelProposal
</span><a href="Cooked.Skeleton.html#withAnchor"><span class="hs-identifier hs-var hs-var">withAnchor</span></a></span></span><span> </span><span id="local-6989586621679818168"><span class="annot"><span class="annottext">TxSkelProposal
</span><a href="#local-6989586621679818168"><span class="hs-identifier hs-var">prop</span></a></span></span><span> </span><span id="local-6989586621679818169"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679818169"><span class="hs-identifier hs-var">url</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelProposal
</span><a href="#local-6989586621679818168"><span class="hs-identifier hs-var">prop</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cooked.Skeleton.html#txSkelProposalAnchor"><span class="hs-identifier hs-var">txSkelProposalAnchor</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621679818169"><span class="hs-identifier hs-type">url</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-603"></span><span>
</span><span id="line-604"></span><span class="annot"><span class="hs-comment">-- * Description of the Withdrawals</span></span><span>
</span><span id="line-605"></span><span>
</span><span id="line-606"></span><span class="hs-comment">-- | Withdrawals associate either a script or a private key with a redeemer and</span><span>
</span><span id="line-607"></span><span class="hs-comment">-- a certain amount of ada. Note that the redeemer will be ignored in the case</span><span>
</span><span id="line-608"></span><span class="hs-comment">-- of a private key.</span><span>
</span><span id="line-609"></span><span class="hs-keyword">type</span><span> </span><span id="TxSkelWithdrawals"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelWithdrawals"><span class="hs-identifier hs-var">TxSkelWithdrawals</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-610"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span>
</span><span id="line-611"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.PubKeyHash</span></span><span class="hs-special">)</span><span>
</span><span id="line-612"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Ada</span></span><span class="hs-special">)</span><span>
</span><span id="line-613"></span><span>
</span><span id="line-614"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelWithdrawnValue"><span class="hs-identifier hs-type">txSkelWithdrawnValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span>
</span><span id="line-615"></span><span id="txSkelWithdrawnValue"><span class="annot"><span class="annottext">txSkelWithdrawnValue :: TxSkel -&gt; Value
</span><a href="Cooked.Skeleton.html#txSkelWithdrawnValue"><span class="hs-identifier hs-var hs-var">txSkelWithdrawnValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Value] -&gt; Value
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span> </span><span class="annot"><span class="annottext">([Value] -&gt; Value) -&gt; (TxSkel -&gt; [Value]) -&gt; TxSkel -&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Ada -&gt; Value
forall a. ToValue a =&gt; a -&gt; Value
</span><a href="Cooked.Conversion.ToValue.html#toValue"><span class="hs-identifier hs-var">toValue</span></a></span><span> </span><span class="annot"><span class="annottext">(Ada -&gt; Value)
-&gt; ((Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
    -&gt; Ada)
-&gt; (Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
-&gt; Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TxSkelRedeemer, Ada) -&gt; Ada
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((TxSkelRedeemer, Ada) -&gt; Ada)
-&gt; ((Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
    -&gt; (TxSkelRedeemer, Ada))
-&gt; (Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
-&gt; Ada
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
-&gt; (TxSkelRedeemer, Ada)
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
 -&gt; Value)
-&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
-&gt; [Value]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
 -&gt; [Value])
-&gt; (TxSkel
    -&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))])
-&gt; TxSkel
-&gt; [Value]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
-&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">(Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
 -&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))])
-&gt; (TxSkel
    -&gt; Map
         (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada))
-&gt; TxSkel
-&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkel
-&gt; Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
</span><a href="Cooked.Skeleton.html#txSkelWithdrawals"><span class="hs-identifier hs-var">txSkelWithdrawals</span></a></span><span>
</span><span id="line-616"></span><span>
</span><span id="line-617"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelWithdrawalsScripts"><span class="hs-identifier hs-type">txSkelWithdrawalsScripts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">]</span><span>
</span><span id="line-618"></span><span id="txSkelWithdrawalsScripts"><span class="annot"><span class="annottext">txSkelWithdrawalsScripts :: TxSkel -&gt; [Versioned Script]
</span><a href="Cooked.Skeleton.html#txSkelWithdrawalsScripts"><span class="hs-identifier hs-var hs-var">txSkelWithdrawalsScripts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">([Versioned Script], [PubKeyHash]) -&gt; [Versioned Script]
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">(([Versioned Script], [PubKeyHash]) -&gt; [Versioned Script])
-&gt; (TxSkel -&gt; ([Versioned Script], [PubKeyHash]))
-&gt; TxSkel
-&gt; [Versioned Script]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[Either (Versioned Script) PubKeyHash]
-&gt; ([Versioned Script], [PubKeyHash])
forall a b. [Either a b] -&gt; ([a], [b])
</span><span class="hs-identifier hs-var">partitionEithers</span></span><span> </span><span class="annot"><span class="annottext">([Either (Versioned Script) PubKeyHash]
 -&gt; ([Versioned Script], [PubKeyHash]))
-&gt; (TxSkel -&gt; [Either (Versioned Script) PubKeyHash])
-&gt; TxSkel
-&gt; ([Versioned Script], [PubKeyHash])
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
-&gt; Either (Versioned Script) PubKeyHash
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))
 -&gt; Either (Versioned Script) PubKeyHash)
-&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
-&gt; [Either (Versioned Script) PubKeyHash]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
 -&gt; [Either (Versioned Script) PubKeyHash])
-&gt; (TxSkel
    -&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))])
-&gt; TxSkel
-&gt; [Either (Versioned Script) PubKeyHash]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
-&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">(Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
 -&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))])
-&gt; (TxSkel
    -&gt; Map
         (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada))
-&gt; TxSkel
-&gt; [(Either (Versioned Script) PubKeyHash, (TxSkelRedeemer, Ada))]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkel
-&gt; Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
</span><a href="Cooked.Skeleton.html#txSkelWithdrawals"><span class="hs-identifier hs-var">txSkelWithdrawals</span></a></span><span>
</span><span id="line-619"></span><span>
</span><span id="line-620"></span><span id="local-6989586621679816652"><span class="annot"><a href="Cooked.Skeleton.html#pkWithdrawal"><span class="hs-identifier hs-type">pkWithdrawal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Conversion.ToPubKeyHash.html#ToPubKeyHash"><span class="hs-identifier hs-type">ToPubKeyHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679816652"><span class="hs-identifier hs-type">pkh</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679816652"><span class="hs-identifier hs-type">pkh</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Ada</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelWithdrawals"><span class="hs-identifier hs-type">TxSkelWithdrawals</span></a></span></span><span>
</span><span id="line-621"></span><span id="pkWithdrawal"><span class="annot"><span class="annottext">pkWithdrawal :: forall pkh.
ToPubKeyHash pkh =&gt;
pkh
-&gt; Ada
-&gt; Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
</span><a href="Cooked.Skeleton.html#pkWithdrawal"><span class="hs-identifier hs-var hs-var">pkWithdrawal</span></a></span></span><span> </span><span id="local-6989586621679818179"><span class="annot"><span class="annottext">pkh
</span><a href="#local-6989586621679818179"><span class="hs-identifier hs-var">pkh</span></a></span></span><span> </span><span id="local-6989586621679818180"><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621679818180"><span class="hs-identifier hs-var">amount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either (Versioned Script) PubKeyHash
-&gt; (TxSkelRedeemer, Ada)
-&gt; Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PubKeyHash -&gt; Either (Versioned Script) PubKeyHash
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(PubKeyHash -&gt; Either (Versioned Script) PubKeyHash)
-&gt; PubKeyHash -&gt; Either (Versioned Script) PubKeyHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">pkh -&gt; PubKeyHash
forall a. ToPubKeyHash a =&gt; a -&gt; PubKeyHash
</span><a href="Cooked.Conversion.ToPubKeyHash.html#toPubKeyHash"><span class="hs-identifier hs-var">toPubKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">pkh
</span><a href="#local-6989586621679818179"><span class="hs-identifier hs-var">pkh</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#emptyTxSkelRedeemer"><span class="hs-identifier hs-var">emptyTxSkelRedeemer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621679818180"><span class="hs-identifier hs-var">amount</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-622"></span><span>
</span><span id="line-623"></span><span id="local-6989586621679816663"><span class="annot"><a href="Cooked.Skeleton.html#scriptWithdrawal"><span class="hs-identifier hs-type">scriptWithdrawal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Conversion.ToVersionedScript.html#ToVersionedScript"><span class="hs-identifier hs-type">ToVersionedScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679816663"><span class="hs-identifier hs-type">script</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679816663"><span class="hs-identifier hs-type">script</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Ada</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelWithdrawals"><span class="hs-identifier hs-type">TxSkelWithdrawals</span></a></span></span><span>
</span><span id="line-624"></span><span id="scriptWithdrawal"><span class="annot"><span class="annottext">scriptWithdrawal :: forall script.
ToVersionedScript script =&gt;
script
-&gt; TxSkelRedeemer
-&gt; Ada
-&gt; Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
</span><a href="Cooked.Skeleton.html#scriptWithdrawal"><span class="hs-identifier hs-var hs-var">scriptWithdrawal</span></a></span></span><span> </span><span id="local-6989586621679818185"><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679818185"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span id="local-6989586621679818186"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679818186"><span class="hs-identifier hs-var">red</span></a></span></span><span> </span><span id="local-6989586621679818187"><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621679818187"><span class="hs-identifier hs-var">amount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either (Versioned Script) PubKeyHash
-&gt; (TxSkelRedeemer, Ada)
-&gt; Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Versioned Script -&gt; Either (Versioned Script) PubKeyHash
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(Versioned Script -&gt; Either (Versioned Script) PubKeyHash)
-&gt; Versioned Script -&gt; Either (Versioned Script) PubKeyHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">script -&gt; Versioned Script
forall a. ToVersionedScript a =&gt; a -&gt; Versioned Script
</span><a href="Cooked.Conversion.ToVersionedScript.html#toVersionedScript"><span class="hs-identifier hs-var">toVersionedScript</span></a></span><span> </span><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679818185"><span class="hs-identifier hs-var">script</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679818186"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Ada
</span><a href="#local-6989586621679818187"><span class="hs-identifier hs-var">amount</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-625"></span><span>
</span><span id="line-626"></span><span class="annot"><span class="hs-comment">-- * Description of the Minting</span></span><span>
</span><span id="line-627"></span><span>
</span><span id="line-628"></span><span class="hs-comment">-- | A description of what a transaction mints. For every policy, there can only</span><span>
</span><span id="line-629"></span><span class="hs-comment">-- be one 'TxSkelRedeemer', and if there is, there must be some token names, each</span><span>
</span><span id="line-630"></span><span class="hs-comment">-- with a non-zero amount of tokens.</span><span>
</span><span id="line-631"></span><span class="hs-comment">--</span><span>
</span><span id="line-632"></span><span class="hs-comment">-- You'll probably not construct this by hand, but use 'txSkelMintsFromList'.</span><span>
</span><span id="line-633"></span><span class="hs-keyword">type</span><span> </span><span id="TxSkelMints"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-var">TxSkelMints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-634"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span>
</span><span id="line-635"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.MintingPolicy</span></span><span class="hs-special">)</span><span>
</span><span id="line-636"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NEMap</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TokenName</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonZero</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-637"></span><span>
</span><span id="line-638"></span><span class="hs-comment">-- | Combining 'TxSkelMints' in a sensible way. In particular, this means that</span><span>
</span><span id="line-639"></span><span class="hs-comment">--</span><span>
</span><span id="line-640"></span><span class="hs-comment">-- &gt; Map.fromList [(pol, (red, NEMap.fromList [(tName, 1)]))]</span><span>
</span><span id="line-641"></span><span class="hs-comment">--</span><span>
</span><span id="line-642"></span><span class="hs-comment">-- and</span><span>
</span><span id="line-643"></span><span class="hs-comment">--</span><span>
</span><span id="line-644"></span><span class="hs-comment">-- &gt; Map.fromList [(pol, (red', NEMap.fromList [(tName, -1)]))]</span><span>
</span><span id="line-645"></span><span class="hs-comment">--</span><span>
</span><span id="line-646"></span><span class="hs-comment">-- will combine to become the empty 'TxSkelMints' (and similar examples, where</span><span>
</span><span id="line-647"></span><span class="hs-comment">-- the values add up to zero, see the comment at the definition of</span><span>
</span><span id="line-648"></span><span class="hs-comment">-- 'addToTxSkelMints').</span><span>
</span><span id="line-649"></span><span class="hs-comment">--</span><span>
</span><span id="line-650"></span><span class="hs-comment">-- In every case, if you add mints with a different redeemer for the same</span><span>
</span><span id="line-651"></span><span class="hs-comment">-- policy, the redeemer used in the right argument takes precedence.</span><span>
</span><span id="line-652"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPING</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span id="local-6989586621679818190"><span id="local-6989586621679818194"><span class="annot"><span class="hs-identifier hs-type">Semigroup</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-653"></span><span>  </span><span id="local-6989586621679818200"><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679818200"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679818201"><span class="annot"><span class="annottext">&lt;&gt; :: TxSkelMints -&gt; TxSkelMints -&gt; TxSkelMints
</span><span class="hs-operator hs-var hs-var hs-var hs-var">&lt;&gt;</span></span></span><span> </span><span id="local-6989586621679818202"><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679818202"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TxSkelMints
 -&gt; (Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)
 -&gt; TxSkelMints)
-&gt; TxSkelMints
-&gt; [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
-&gt; TxSkelMints
forall b a. (b -&gt; a -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldl</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">((Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)
 -&gt; TxSkelMints -&gt; TxSkelMints)
-&gt; TxSkelMints
-&gt; (Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)
-&gt; TxSkelMints
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)
-&gt; TxSkelMints -&gt; TxSkelMints
</span><a href="Cooked.Skeleton.html#addToTxSkelMints"><span class="hs-identifier hs-var">addToTxSkelMints</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679818200"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelMints
-&gt; [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
</span><a href="Cooked.Skeleton.html#txSkelMintsToList"><span class="hs-identifier hs-var">txSkelMintsToList</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679818202"><span class="hs-identifier hs-var">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-654"></span><span>
</span><span id="line-655"></span><span class="hs-keyword">instance</span><span> </span><span class="hs-pragma">{-# OVERLAPPING</span><span> </span><span class="hs-pragma">#-}</span><span> </span><span id="local-6989586621679818209"><span id="local-6989586621679818212"><span class="annot"><span class="hs-identifier hs-type">Monoid</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-656"></span><span>  </span><span id="local-6989586621679818215"><span class="annot"><span class="annottext">mempty :: TxSkelMints
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">mempty</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-657"></span><span>
</span><span id="line-658"></span><span class="hs-comment">-- | Add a new entry to a 'TxSkelMints'. There are a few wrinkles:</span><span>
</span><span id="line-659"></span><span class="hs-comment">--</span><span>
</span><span id="line-660"></span><span class="hs-comment">-- (1) If for a given policy, redeemer, and token name, there are @n@ tokens in</span><span>
</span><span id="line-661"></span><span class="hs-comment">-- the argument 'TxSkelMints', and you add @-n@ tokens, the corresponding entry</span><span>
</span><span id="line-662"></span><span class="hs-comment">-- in the &quot;inner map&quot; of the policy will disappear (obviously, because all of</span><span>
</span><span id="line-663"></span><span class="hs-comment">-- its values have to be non-zero). If that also means that the inner map</span><span>
</span><span id="line-664"></span><span class="hs-comment">-- becomes empty, the policy will disappear from the 'TxSkelMints' altogether.</span><span>
</span><span id="line-665"></span><span class="hs-comment">--</span><span>
</span><span id="line-666"></span><span class="hs-comment">-- (2) If a policy is already present on the argument 'TxSkelMints' with a</span><span>
</span><span id="line-667"></span><span class="hs-comment">-- redeemer @a@, and you add a mint with a different redeemer @b@, the old</span><span>
</span><span id="line-668"></span><span class="hs-comment">-- redeemer is thrown away. The values associated with the token names of that</span><span>
</span><span id="line-669"></span><span class="hs-comment">-- policy are added as described above, though. This means that any pre-existing</span><span>
</span><span id="line-670"></span><span class="hs-comment">-- values will be minted with a new redeemer.</span><span>
</span><span id="line-671"></span><span class="hs-comment">--</span><span>
</span><span id="line-672"></span><span class="hs-comment">-- If, for some reason, you really want to generate a 'TxSkelMints' that has</span><span>
</span><span id="line-673"></span><span class="hs-comment">-- both a negative and a positive entry of the same asset class and redeemer,</span><span>
</span><span id="line-674"></span><span class="hs-comment">-- you'll have to do so manually. Note, however, that even if you do so, NO</span><span>
</span><span id="line-675"></span><span class="hs-comment">-- VALIDATOR OR MINTING POLICY WILL EVER GET TO SEE A TRANSACTION WITH SUCH</span><span>
</span><span id="line-676"></span><span class="hs-comment">-- CONFLICTING INFORMATION. This is not a design decision/limitation of</span><span>
</span><span id="line-677"></span><span class="hs-comment">-- cooked-validators: The Cardano API 'TxBodyContent' type, that we're</span><span>
</span><span id="line-678"></span><span class="hs-comment">-- translating everything into eventually, stores minting information as a</span><span>
</span><span id="line-679"></span><span class="hs-comment">-- minted value together with a map from policy IDs to witnesses (which</span><span>
</span><span id="line-680"></span><span class="hs-comment">-- represent the used redeemers). That means that we can only store _one_</span><span>
</span><span id="line-681"></span><span class="hs-comment">-- redeemer per minting policy, and no conflicting mints of the same asset</span><span>
</span><span id="line-682"></span><span class="hs-comment">-- class, since they'll just cancel.</span><span>
</span><span id="line-683"></span><span class="annot"><a href="Cooked.Skeleton.html#addToTxSkelMints"><span class="hs-identifier hs-type">addToTxSkelMints</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-684"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.MintingPolicy</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TokenName</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-685"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-686"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span><span>
</span><span id="line-687"></span><span id="addToTxSkelMints"><span class="annot"><span class="annottext">addToTxSkelMints :: (Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)
-&gt; TxSkelMints -&gt; TxSkelMints
</span><a href="Cooked.Skeleton.html#addToTxSkelMints"><span class="hs-identifier hs-var hs-var">addToTxSkelMints</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679818216"><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679818216"><span class="hs-identifier hs-var">pol</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679818217"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679818217"><span class="hs-identifier hs-var">red</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679818218"><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679818218"><span class="hs-identifier hs-var">tName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679818219"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679818219"><span class="hs-identifier hs-var">amount</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679818220"><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679818220"><span class="hs-identifier hs-var">mints</span></a></span></span><span>
</span><span id="line-688"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679818219"><span class="hs-identifier hs-var">amount</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679818220"><span class="hs-identifier hs-var">mints</span></a></span><span>
</span><span id="line-689"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679818220"><span class="hs-identifier hs-var">mints</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
-&gt; Versioned MintingPolicy
-&gt; Maybe (TxSkelRedeemer, NEMap TokenName (NonZero Integer))
forall k a. Ord k =&gt; Map k a -&gt; k -&gt; Maybe a
</span><span class="hs-operator hs-var">Map.!?</span></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679818216"><span class="hs-identifier hs-var">pol</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-690"></span><span>      </span><span class="annot"><span class="annottext">Maybe (TxSkelRedeemer, NEMap TokenName (NonZero Integer))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-691"></span><span>        </span><span class="hs-comment">-- The policy isn't yet in the given 'TxSkelMints', so we can just add a</span><span>
</span><span id="line-692"></span><span>        </span><span class="hs-comment">-- new entry:</span><span>
</span><span id="line-693"></span><span>        </span><span class="annot"><span class="annottext">Versioned MintingPolicy
-&gt; (TxSkelRedeemer, NEMap TokenName (NonZero Integer))
-&gt; TxSkelMints
-&gt; TxSkelMints
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679818216"><span class="hs-identifier hs-var">pol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679818217"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TokenName -&gt; NonZero Integer -&gt; NEMap TokenName (NonZero Integer)
forall k a. k -&gt; a -&gt; NEMap k a
</span><span class="hs-identifier hs-var">NEMap.singleton</span></span><span> </span><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679818218"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; NonZero Integer
forall a. a -&gt; NonZero a
</span><span class="hs-identifier hs-var">NonZero</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679818219"><span class="hs-identifier hs-var">amount</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679818220"><span class="hs-identifier hs-var">mints</span></a></span><span>
</span><span id="line-694"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679818225"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679818225"><span class="hs-identifier hs-var">_oldRed</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679818226"><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679818226"><span class="hs-identifier hs-var">innerMap</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-695"></span><span>        </span><span class="hs-comment">-- Ignore the old redeemer: If it's the same as the new one, nothing</span><span>
</span><span id="line-696"></span><span>        </span><span class="hs-comment">-- will change, if not, the new redeemer will be kept.</span><span>
</span><span id="line-697"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679818226"><span class="hs-identifier hs-var">innerMap</span></a></span><span> </span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
-&gt; TokenName -&gt; Maybe (NonZero Integer)
forall k a. Ord k =&gt; NEMap k a -&gt; k -&gt; Maybe a
</span><span class="hs-operator hs-var">NEMap.!?</span></span><span> </span><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679818218"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-698"></span><span>          </span><span class="annot"><span class="annottext">Maybe (NonZero Integer)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-699"></span><span>            </span><span class="hs-comment">-- The given token name has not yet occurred for the given</span><span>
</span><span id="line-700"></span><span>            </span><span class="hs-comment">-- policy. This means that we can just add the new tokens to the</span><span>
</span><span id="line-701"></span><span>            </span><span class="hs-comment">-- inner map:</span><span>
</span><span id="line-702"></span><span>            </span><span class="annot"><span class="annottext">Versioned MintingPolicy
-&gt; (TxSkelRedeemer, NEMap TokenName (NonZero Integer))
-&gt; TxSkelMints
-&gt; TxSkelMints
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679818216"><span class="hs-identifier hs-var">pol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679818217"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TokenName
-&gt; NonZero Integer
-&gt; NEMap TokenName (NonZero Integer)
-&gt; NEMap TokenName (NonZero Integer)
forall k a. Ord k =&gt; k -&gt; a -&gt; NEMap k a -&gt; NEMap k a
</span><span class="hs-identifier hs-var">NEMap.insert</span></span><span> </span><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679818218"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; NonZero Integer
forall a. a -&gt; NonZero a
</span><span class="hs-identifier hs-var">NonZero</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679818219"><span class="hs-identifier hs-var">amount</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679818226"><span class="hs-identifier hs-var">innerMap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679818220"><span class="hs-identifier hs-var">mints</span></a></span><span>
</span><span id="line-703"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NonZero</span></span><span> </span><span id="local-6989586621679818229"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679818229"><span class="hs-identifier hs-var">oldAmount</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-704"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679818230"><span class="annot"><span class="annottext">newAmount :: Integer
</span><a href="#local-6989586621679818230"><span class="hs-identifier hs-var hs-var">newAmount</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679818229"><span class="hs-identifier hs-var">oldAmount</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Integer
forall a. Num a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">+</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679818219"><span class="hs-identifier hs-var">amount</span></a></span><span>
</span><span id="line-705"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679818230"><span class="hs-identifier hs-var">newAmount</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Integer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">/=</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><span class="hs-number">0</span></span><span>
</span><span id="line-706"></span><span>                  </span><span class="hs-keyword">then</span><span> </span><span class="hs-comment">-- If the sum of the old amount of tokens and the</span><span>
</span><span id="line-707"></span><span>                  </span><span class="hs-comment">-- additional tokens is non-zero, we can just update the</span><span>
</span><span id="line-708"></span><span>                  </span><span class="hs-comment">-- amount in the inner map:</span><span>
</span><span id="line-709"></span><span>                    </span><span class="annot"><span class="annottext">Versioned MintingPolicy
-&gt; (TxSkelRedeemer, NEMap TokenName (NonZero Integer))
-&gt; TxSkelMints
-&gt; TxSkelMints
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679818216"><span class="hs-identifier hs-var">pol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679818217"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TokenName
-&gt; NonZero Integer
-&gt; NEMap TokenName (NonZero Integer)
-&gt; NEMap TokenName (NonZero Integer)
forall k a. Ord k =&gt; k -&gt; a -&gt; NEMap k a -&gt; NEMap k a
</span><span class="hs-identifier hs-var">NEMap.insert</span></span><span> </span><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679818218"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Integer -&gt; NonZero Integer
forall a. a -&gt; NonZero a
</span><span class="hs-identifier hs-var">NonZero</span></span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679818230"><span class="hs-identifier hs-var">newAmount</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679818226"><span class="hs-identifier hs-var">innerMap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679818220"><span class="hs-identifier hs-var">mints</span></a></span><span>
</span><span id="line-710"></span><span>                  </span><span class="hs-keyword">else</span><span> </span><span class="hs-comment">-- If the sum is zero, we'll have to delete the token</span><span>
</span><span id="line-711"></span><span>                  </span><span class="hs-comment">-- name from the inner map. If that yields a completely empty</span><span>
</span><span id="line-712"></span><span>                  </span><span class="hs-comment">-- inner map, we'll have to remove the entry altogether:</span><span>
</span><span id="line-713"></span><span>                  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Map TokenName (NonZero Integer)
-&gt; Maybe (NEMap TokenName (NonZero Integer))
forall k a. Map k a -&gt; Maybe (NEMap k a)
</span><span class="hs-identifier hs-var">NEMap.nonEmptyMap</span></span><span> </span><span class="annot"><span class="annottext">(Map TokenName (NonZero Integer)
 -&gt; Maybe (NEMap TokenName (NonZero Integer)))
-&gt; Map TokenName (NonZero Integer)
-&gt; Maybe (NEMap TokenName (NonZero Integer))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TokenName
-&gt; NEMap TokenName (NonZero Integer)
-&gt; Map TokenName (NonZero Integer)
forall k a. Ord k =&gt; k -&gt; NEMap k a -&gt; Map k a
</span><span class="hs-identifier hs-var">NEMap.delete</span></span><span> </span><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679818218"><span class="hs-identifier hs-var">tName</span></a></span><span> </span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679818226"><span class="hs-identifier hs-var">innerMap</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-714"></span><span>                    </span><span class="annot"><span class="annottext">Maybe (NEMap TokenName (NonZero Integer))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy -&gt; TxSkelMints -&gt; TxSkelMints
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.delete</span></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679818216"><span class="hs-identifier hs-var">pol</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679818220"><span class="hs-identifier hs-var">mints</span></a></span><span>
</span><span id="line-715"></span><span>                    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679818236"><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679818236"><span class="hs-identifier hs-var">newInnerMap</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
-&gt; (TxSkelRedeemer, NEMap TokenName (NonZero Integer))
-&gt; TxSkelMints
-&gt; TxSkelMints
forall k a. Ord k =&gt; k -&gt; a -&gt; Map k a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.insert</span></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679818216"><span class="hs-identifier hs-var">pol</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679818217"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679818236"><span class="hs-identifier hs-var">newInnerMap</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679818220"><span class="hs-identifier hs-var">mints</span></a></span><span>
</span><span id="line-716"></span><span>
</span><span id="line-717"></span><span class="hs-comment">-- | Convert from 'TxSkelMints' to a list of tuples describing eveything that's</span><span>
</span><span id="line-718"></span><span class="hs-comment">-- being minted.</span><span>
</span><span id="line-719"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsToList"><span class="hs-identifier hs-type">txSkelMintsToList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.MintingPolicy</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TokenName</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-720"></span><span id="txSkelMintsToList"><span class="annot"><span class="annottext">txSkelMintsToList :: TxSkelMints
-&gt; [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
</span><a href="Cooked.Skeleton.html#txSkelMintsToList"><span class="hs-identifier hs-var hs-var">txSkelMintsToList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-721"></span><span>  </span><span class="annot"><span class="annottext">((Versioned MintingPolicy,
  (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))
 -&gt; [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)])
-&gt; [(Versioned MintingPolicy,
     (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))]
-&gt; [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span>
</span><span id="line-722"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679818238"><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679818238"><span class="hs-identifier hs-var">p</span></a></span></span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679818239"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679818239"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679818240"><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679818240"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-723"></span><span>        </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679818241"><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679818241"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonZero</span></span><span> </span><span id="local-6989586621679818242"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679818242"><span class="hs-identifier hs-var">n</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679818238"><span class="hs-identifier hs-var">p</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679818239"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679818241"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679818242"><span class="hs-identifier hs-var">n</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-724"></span><span>          </span><span class="annot"><span class="annottext">((TokenName, NonZero Integer)
 -&gt; (Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer))
-&gt; [(TokenName, NonZero Integer)]
-&gt; [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (TokenName, NonZero Integer)
-&gt; [(TokenName, NonZero Integer)]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NEList.toList</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
-&gt; NonEmpty (TokenName, NonZero Integer)
forall k a. NEMap k a -&gt; NonEmpty (k, a)
</span><span class="hs-identifier hs-var">NEMap.toList</span></span><span> </span><span class="annot"><span class="annottext">NEMap TokenName (NonZero Integer)
</span><a href="#local-6989586621679818240"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-725"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-726"></span><span>    </span><span class="annot"><span class="annottext">([(Versioned MintingPolicy,
   (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))]
 -&gt; [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)])
-&gt; (TxSkelMints
    -&gt; [(Versioned MintingPolicy,
         (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))])
-&gt; TxSkelMints
-&gt; [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
-&gt; [(Versioned MintingPolicy,
     (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span>
</span><span id="line-727"></span><span>
</span><span id="line-728"></span><span class="hs-comment">-- | Smart constructor for 'TxSkelMints'. This function relies on</span><span>
</span><span id="line-729"></span><span class="hs-comment">-- 'addToTxSkelMints'. So, some non-empty lists (where all amounts for a given</span><span>
</span><span id="line-730"></span><span class="hs-comment">-- asset class an redeemer add up to zero) might be translated into the empty</span><span>
</span><span id="line-731"></span><span class="hs-comment">-- 'TxSkelMints'.</span><span>
</span><span id="line-732"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsFromList"><span class="hs-identifier hs-type">txSkelMintsFromList</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.MintingPolicy</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TokenName</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span><span>
</span><span id="line-733"></span><span id="txSkelMintsFromList"><span class="annot"><span class="annottext">txSkelMintsFromList :: [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
-&gt; TxSkelMints
</span><a href="Cooked.Skeleton.html#txSkelMintsFromList"><span class="hs-identifier hs-var hs-var">txSkelMintsFromList</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)
 -&gt; TxSkelMints -&gt; TxSkelMints)
-&gt; TxSkelMints
-&gt; [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
-&gt; TxSkelMints
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="annot"><span class="annottext">(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)
-&gt; TxSkelMints -&gt; TxSkelMints
</span><a href="Cooked.Skeleton.html#addToTxSkelMints"><span class="hs-identifier hs-var">addToTxSkelMints</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-734"></span><span>
</span><span id="line-735"></span><span class="hs-comment">-- | Another smart constructor for 'TxSkelMints', where the redeemer and minting</span><span>
</span><span id="line-736"></span><span class="hs-comment">-- policies are not duplicated.</span><span>
</span><span id="line-737"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsFromList%27"><span class="hs-identifier hs-type">txSkelMintsFromList'</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.MintingPolicy</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Api.TokenName</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Integer</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span><span>
</span><span id="line-738"></span><span id="txSkelMintsFromList%27"><span class="annot"><span class="annottext">txSkelMintsFromList' :: [(Versioned MintingPolicy, TxSkelRedeemer, [(TokenName, Integer)])]
-&gt; TxSkelMints
</span><a href="Cooked.Skeleton.html#txSkelMintsFromList%27"><span class="hs-identifier hs-var hs-var">txSkelMintsFromList'</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
-&gt; TxSkelMints
</span><a href="Cooked.Skeleton.html#txSkelMintsFromList"><span class="hs-identifier hs-var">txSkelMintsFromList</span></a></span><span> </span><span class="annot"><span class="annottext">([(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
 -&gt; TxSkelMints)
-&gt; ([(Versioned MintingPolicy, TxSkelRedeemer,
      [(TokenName, Integer)])]
    -&gt; [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)])
-&gt; [(Versioned MintingPolicy, TxSkelRedeemer,
     [(TokenName, Integer)])]
-&gt; TxSkelMints
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((Versioned MintingPolicy, TxSkelRedeemer, [(TokenName, Integer)])
 -&gt; [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)])
-&gt; [(Versioned MintingPolicy, TxSkelRedeemer,
     [(TokenName, Integer)])]
-&gt; [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
forall (t :: * -&gt; *) a b. Foldable t =&gt; (a -&gt; [b]) -&gt; t a -&gt; [b]
</span><span class="hs-identifier hs-var">concatMap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679818246"><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679818246"><span class="hs-identifier hs-var">mp</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679818247"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679818247"><span class="hs-identifier hs-var">r</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679818248"><span class="annot"><span class="annottext">[(TokenName, Integer)]
</span><a href="#local-6989586621679818248"><span class="hs-identifier hs-var">m</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679818249"><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679818249"><span class="hs-identifier hs-var">tn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679818250"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679818250"><span class="hs-identifier hs-var">i</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679818246"><span class="hs-identifier hs-var">mp</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679818247"><span class="hs-identifier hs-var">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679818249"><span class="hs-identifier hs-var">tn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679818250"><span class="hs-identifier hs-var">i</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((TokenName, Integer)
 -&gt; (Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer))
-&gt; [(TokenName, Integer)]
-&gt; [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[(TokenName, Integer)]
</span><a href="#local-6989586621679818248"><span class="hs-identifier hs-var">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-739"></span><span>
</span><span id="line-740"></span><span class="annot"><span class="hs-comment">-- | The value described by a 'TxSkelMints'</span></span><span>
</span><span id="line-741"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelMintsValue"><span class="hs-identifier hs-type">txSkelMintsValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span>
</span><span id="line-742"></span><span id="txSkelMintsValue"><span class="annot"><span class="annottext">txSkelMintsValue :: TxSkelMints -&gt; Value
</span><a href="Cooked.Skeleton.html#txSkelMintsValue"><span class="hs-identifier hs-var hs-var">txSkelMintsValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-743"></span><span>  </span><span class="annot"><span class="annottext">Optic'
  A_Fold
  NoIx
  TxSkelMints
  (Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)
-&gt; ((Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)
    -&gt; Value)
-&gt; TxSkelMints
-&gt; Value
forall k m (is :: IxList) s a.
(Is k A_Fold, Monoid m) =&gt;
Optic' k is s a -&gt; (a -&gt; m) -&gt; s -&gt; m
</span><span class="hs-identifier hs-var">foldMapOf</span></span><span>
</span><span id="line-744"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TxSkelMints
 -&gt; [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)])
-&gt; Getter
     TxSkelMints
     [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
forall s a. (s -&gt; a) -&gt; Getter s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
-&gt; [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
</span><a href="Cooked.Skeleton.html#txSkelMintsToList"><span class="hs-identifier hs-var">txSkelMintsToList</span></a></span><span> </span><span class="annot"><span class="annottext">Getter
  TxSkelMints
  [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
-&gt; Optic
     A_Fold
     NoIx
     [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
     [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
     (Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)
     (Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)
-&gt; Optic'
     A_Fold
     NoIx
     TxSkelMints
     (Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic
  A_Fold
  NoIx
  [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
  [(Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)]
  (Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)
  (Versioned MintingPolicy, TxSkelRedeemer, TokenName, Integer)
forall (f :: * -&gt; *) a. Foldable f =&gt; Fold (f a) a
</span><span class="hs-identifier hs-var">folded</span></span><span class="hs-special">)</span><span>
</span><span id="line-745"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679818255"><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679818255"><span class="hs-identifier hs-var">policy</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679818256"><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679818256"><span class="hs-identifier hs-var">tName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679818257"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679818257"><span class="hs-identifier hs-var">amount</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-746"></span><span>        </span><span class="annot"><span class="annottext">AssetClass -&gt; Integer -&gt; Value
</span><span class="hs-identifier hs-var">Script.assetClassValue</span></span><span>
</span><span id="line-747"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">CurrencySymbol -&gt; TokenName -&gt; AssetClass
</span><span class="hs-identifier hs-var">Script.assetClass</span></span><span>
</span><span id="line-748"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Versioned MintingPolicy -&gt; CurrencySymbol
</span><span class="hs-identifier hs-var">Script.scriptCurrencySymbol</span></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679818255"><span class="hs-identifier hs-var">policy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-749"></span><span>              </span><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679818256"><span class="hs-identifier hs-var">tName</span></a></span><span>
</span><span id="line-750"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-751"></span><span>          </span><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679818257"><span class="hs-identifier hs-var">amount</span></a></span><span>
</span><span id="line-752"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-753"></span><span>
</span><span id="line-754"></span><span class="annot"><span class="hs-comment">-- * Transaction outputs</span></span><span>
</span><span id="line-755"></span><span>
</span><span id="line-756"></span><span class="hs-keyword">class</span><span> </span><span id="IsTxSkelOutAllowedOwner"><span class="annot"><a href="Cooked.Skeleton.html#IsTxSkelOutAllowedOwner"><span class="hs-identifier hs-var">IsTxSkelOutAllowedOwner</span></a></span></span><span> </span><span id="local-6989586621679816726"><span class="annot"><a href="#local-6989586621679816726"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-757"></span><span>  </span><span id="toPKHOrValidator"><span class="annot"><a href="Cooked.Skeleton.html#toPKHOrValidator"><span class="hs-identifier hs-type">toPKHOrValidator</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679816726"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.PubKeyHash</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Validator</span></span><span class="hs-special">)</span><span>
</span><span id="line-758"></span><span>
</span><span id="line-759"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#IsTxSkelOutAllowedOwner"><span class="hs-identifier hs-type">IsTxSkelOutAllowedOwner</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.PubKeyHash</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-760"></span><span>  </span><span id="local-6989586621679818265"><span class="annot"><span class="annottext">toPKHOrValidator :: PubKeyHash -&gt; Either PubKeyHash (Versioned Validator)
</span><a href="Cooked.Skeleton.html#toPKHOrValidator"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPKHOrValidator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PubKeyHash -&gt; Either PubKeyHash (Versioned Validator)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span>
</span><span id="line-761"></span><span>
</span><span id="line-762"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679816729"><span class="annot"><a href="Cooked.Skeleton.html#IsTxSkelOutAllowedOwner"><span class="hs-identifier hs-type">IsTxSkelOutAllowedOwner</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.TypedValidator</span></span><span> </span><span class="annot"><a href="#local-6989586621679816729"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-763"></span><span>  </span><span id="local-6989586621679818268"><span class="annot"><span class="annottext">toPKHOrValidator :: TypedValidator a -&gt; Either PubKeyHash (Versioned Validator)
</span><a href="Cooked.Skeleton.html#toPKHOrValidator"><span class="hs-identifier hs-var hs-var hs-var hs-var">toPKHOrValidator</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Versioned Validator -&gt; Either PubKeyHash (Versioned Validator)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(Versioned Validator -&gt; Either PubKeyHash (Versioned Validator))
-&gt; (TypedValidator a -&gt; Versioned Validator)
-&gt; TypedValidator a
-&gt; Either PubKeyHash (Versioned Validator)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TypedValidator a -&gt; Versioned Validator
forall a. TypedValidator a -&gt; Versioned Validator
</span><span class="hs-identifier hs-var">Script.tvValidator</span></span><span>
</span><span id="line-764"></span><span>
</span><span id="line-765"></span><span class="hs-comment">-- | Transaction outputs. The 'Pays' constructor is really general, and you'll</span><span>
</span><span id="line-766"></span><span class="hs-comment">-- probably want to use one of the smart constructors like 'paysScript' or</span><span>
</span><span id="line-767"></span><span class="hs-comment">-- 'paysPK' in most cases.</span><span>
</span><span id="line-768"></span><span class="hs-keyword">data</span><span> </span><span id="TxSkelOut"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-var">TxSkelOut</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-769"></span><span>  </span><span id="local-6989586621679818271"><span id="Pays"><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-770"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679818271"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- This is needed only for the 'Show' instance of 'TxSkel', which</span><span>
</span><span id="line-771"></span><span>    </span><span class="hs-comment">-- in turn is only needed in tests.</span><span>
</span><span id="line-772"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679818271"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-773"></span><span>      </span><span class="annot"><a href="Cooked.Output.html#IsTxInfoOutput"><span class="hs-identifier hs-type">IsTxInfoOutput</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818271"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-774"></span><span>      </span><span class="annot"><a href="Cooked.Skeleton.html#IsTxSkelOutAllowedOwner"><span class="hs-identifier hs-type">IsTxSkelOutAllowedOwner</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#OwnerType"><span class="hs-identifier hs-type">OwnerType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818271"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-775"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#OwnerType"><span class="hs-identifier hs-type">OwnerType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818271"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-776"></span><span>      </span><span class="annot"><a href="Cooked.Conversion.ToCredential.html#ToCredential"><span class="hs-identifier hs-type">ToCredential</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#OwnerType"><span class="hs-identifier hs-type">OwnerType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818271"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-777"></span><span>      </span><span class="annot"><a href="Cooked.Output.html#DatumType"><span class="hs-identifier hs-type">DatumType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818271"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-778"></span><span>      </span><span class="annot"><a href="Cooked.Output.html#ValueType"><span class="hs-identifier hs-type">ValueType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818271"><span class="hs-identifier hs-type">o</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">~</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- needed for the 'txSkelOutValueL'</span><span>
</span><span id="line-779"></span><span>      </span><span class="annot"><a href="Cooked.Conversion.ToVersionedScript.html#ToVersionedScript"><span class="hs-identifier hs-type">ToVersionedScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#ReferenceScriptType"><span class="hs-identifier hs-type">ReferenceScriptType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818271"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-780"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#OwnerType"><span class="hs-identifier hs-type">OwnerType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818271"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-781"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#ReferenceScriptType"><span class="hs-identifier hs-type">ReferenceScriptType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818271"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-782"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#ReferenceScriptType"><span class="hs-identifier hs-type">ReferenceScriptType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818271"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-783"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-784"></span><span>    </span><span class="hs-special">{</span><span id="producedOutput"><span class="annot"><span class="annottext">()
</span><a href="Cooked.Skeleton.html#producedOutput"><span class="hs-identifier hs-var hs-var">producedOutput</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679818271"><span class="hs-identifier hs-type">o</span></a></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-785"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-786"></span><span>
</span><span id="line-787"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679818275"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-788"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679818293"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818293"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621679818294"><span class="annot"><span class="annottext">== :: TxSkelOut -&gt; TxSkelOut -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679818309"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818309"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">o -&gt; TypeRep o
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818293"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep o -&gt; TypeRep o -&gt; Maybe (o :~~: o)
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-operator hs-var">`eqTypeRep`</span></span><span> </span><span class="annot"><span class="annottext">o -&gt; TypeRep o
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818309"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-789"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">o :~~: o
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">o -&gt; TxOut
forall o. IsTxInfoOutput o =&gt; o -&gt; TxOut
</span><a href="Cooked.Output.html#outputTxOut"><span class="hs-identifier hs-var">outputTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818293"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; TxOut -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">o -&gt; TxOut
forall o. IsTxInfoOutput o =&gt; o -&gt; TxOut
</span><a href="Cooked.Output.html#outputTxOut"><span class="hs-identifier hs-var">outputTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818309"><span class="hs-identifier hs-var">b</span></a></span><span>
</span><span id="line-790"></span><span>    </span><span class="annot"><span class="annottext">Maybe (o :~~: o)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-791"></span><span>
</span><span id="line-792"></span><span id="local-6989586621679818318"><span id="local-6989586621679818320"><span id="local-6989586621679818324"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span></span></span><span>
</span><span id="line-793"></span><span>
</span><span id="line-794"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutDatumL"><span class="hs-identifier hs-type">txSkelOutDatumL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span>
</span><span id="line-795"></span><span id="txSkelOutDatumL"><span class="annot"><span class="annottext">txSkelOutDatumL :: Lens' TxSkelOut TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#txSkelOutDatumL"><span class="hs-identifier hs-var hs-var">txSkelOutDatumL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-796"></span><span>  </span><span class="annot"><span class="annottext">(TxSkelOut -&gt; TxSkelOutDatum)
-&gt; (TxSkelOut -&gt; TxSkelOutDatum -&gt; TxSkelOut)
-&gt; Lens' TxSkelOut TxSkelOutDatum
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span>
</span><span id="line-797"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679818343"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818343"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818343"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o TxSkelOutDatum -&gt; TxSkelOutDatum
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Lens' o (DatumType o)
Optic' A_Lens NoIx o TxSkelOutDatum
forall o. IsAbstractOutput o =&gt; Lens' o (DatumType o)
</span><a href="Cooked.Output.html#outputDatumL"><span class="hs-identifier hs-var">outputDatumL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-798"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679818380"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818380"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679818381"><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679818381"><span class="hs-identifier hs-var">newDatum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">o -&gt; TxSkelOut
forall a.
(Show a, Typeable a, IsTxInfoOutput a,
 IsTxSkelOutAllowedOwner (OwnerType a), Typeable (OwnerType a),
 ToCredential (OwnerType a), DatumType a ~ TxSkelOutDatum,
 ValueType a ~ Value, ToVersionedScript (ReferenceScriptType a),
 Show (OwnerType a), Show (ReferenceScriptType a),
 Typeable (ReferenceScriptType a)) =&gt;
a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(o -&gt; TxSkelOut) -&gt; o -&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818380"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; (o -&gt; o) -&gt; o
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">Lens' o (DatumType o)
Optic A_Lens NoIx o o TxSkelOutDatum TxSkelOutDatum
forall o. IsAbstractOutput o =&gt; Lens' o (DatumType o)
</span><a href="Cooked.Output.html#outputDatumL"><span class="hs-identifier hs-var">outputDatumL</span></a></span><span> </span><span class="annot"><span class="annottext">Optic A_Lens NoIx o o TxSkelOutDatum TxSkelOutDatum
-&gt; TxSkelOutDatum -&gt; o -&gt; o
forall k (is :: IxList) s t a b.
Is k A_Setter =&gt;
Optic k is s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679818381"><span class="hs-identifier hs-var">newDatum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-799"></span><span>
</span><span id="line-800"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutValueL"><span class="hs-identifier hs-type">txSkelOutValueL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span>
</span><span id="line-801"></span><span id="txSkelOutValueL"><span class="annot"><span class="annottext">txSkelOutValueL :: Lens' TxSkelOut Value
</span><a href="Cooked.Skeleton.html#txSkelOutValueL"><span class="hs-identifier hs-var hs-var">txSkelOutValueL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-802"></span><span>  </span><span class="annot"><span class="annottext">(TxSkelOut -&gt; Value)
-&gt; (TxSkelOut -&gt; Value -&gt; TxSkelOut) -&gt; Lens' TxSkelOut Value
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span>
</span><span id="line-803"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679818402"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818402"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">o -&gt; Value
forall o. (IsAbstractOutput o, ToValue (ValueType o)) =&gt; o -&gt; Value
</span><a href="Cooked.Output.html#outputValue"><span class="hs-identifier hs-var">outputValue</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818402"><span class="hs-identifier hs-var">output</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-804"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679818437"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818437"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679818438"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679818438"><span class="hs-identifier hs-var">newValue</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">o -&gt; TxSkelOut
forall a.
(Show a, Typeable a, IsTxInfoOutput a,
 IsTxSkelOutAllowedOwner (OwnerType a), Typeable (OwnerType a),
 ToCredential (OwnerType a), DatumType a ~ TxSkelOutDatum,
 ValueType a ~ Value, ToVersionedScript (ReferenceScriptType a),
 Show (OwnerType a), Show (ReferenceScriptType a),
 Typeable (ReferenceScriptType a)) =&gt;
a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(o -&gt; TxSkelOut) -&gt; o -&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818437"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; (o -&gt; o) -&gt; o
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">Optic A_Lens NoIx o o Value Value
Lens' o (ValueType o)
forall o. IsAbstractOutput o =&gt; Lens' o (ValueType o)
</span><a href="Cooked.Output.html#outputValueL"><span class="hs-identifier hs-var">outputValueL</span></a></span><span> </span><span class="annot"><span class="annottext">Optic A_Lens NoIx o o Value Value -&gt; Value -&gt; o -&gt; o
forall k (is :: IxList) s t a b.
Is k A_Setter =&gt;
Optic k is s t a b -&gt; b -&gt; s -&gt; t
</span><span class="hs-operator hs-var">.~</span></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679818438"><span class="hs-identifier hs-var">newValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-805"></span><span>
</span><span id="line-806"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutValue"><span class="hs-identifier hs-type">txSkelOutValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span>
</span><span id="line-807"></span><span id="txSkelOutValue"><span class="annot"><span class="annottext">txSkelOutValue :: TxSkelOut -&gt; Value
</span><a href="Cooked.Skeleton.html#txSkelOutValue"><span class="hs-identifier hs-var hs-var">txSkelOutValue</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelOut -&gt; Lens' TxSkelOut Value -&gt; Value
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Lens' TxSkelOut Value
</span><a href="Cooked.Skeleton.html#txSkelOutValueL"><span class="hs-identifier hs-var">txSkelOutValueL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-808"></span><span>
</span><span id="line-809"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutValidator"><span class="hs-identifier hs-type">txSkelOutValidator</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Validator</span></span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span id="txSkelOutValidator"><span class="annot"><span class="annottext">txSkelOutValidator :: TxSkelOut -&gt; Maybe (Versioned Validator)
</span><a href="Cooked.Skeleton.html#txSkelOutValidator"><span class="hs-identifier hs-var hs-var">txSkelOutValidator</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679818456"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818456"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either PubKeyHash (Versioned Validator)
-&gt; Maybe (Versioned Validator)
forall a b. Either a b -&gt; Maybe b
</span><span class="hs-identifier hs-var">rightToMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">OwnerType o -&gt; Either PubKeyHash (Versioned Validator)
forall a.
IsTxSkelOutAllowedOwner a =&gt;
a -&gt; Either PubKeyHash (Versioned Validator)
</span><a href="Cooked.Skeleton.html#toPKHOrValidator"><span class="hs-identifier hs-var">toPKHOrValidator</span></a></span><span> </span><span class="annot"><span class="annottext">(OwnerType o -&gt; Either PubKeyHash (Versioned Validator))
-&gt; OwnerType o -&gt; Either PubKeyHash (Versioned Validator)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818456"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o (OwnerType o) -&gt; OwnerType o
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (OwnerType o)
forall o. IsAbstractOutput o =&gt; Lens' o (OwnerType o)
</span><a href="Cooked.Output.html#outputOwnerL"><span class="hs-identifier hs-var">outputOwnerL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-811"></span><span>
</span><span id="line-812"></span><span class="hs-keyword">type</span><span> </span><span id="TxSkelOutDatumConstrs"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumConstrs"><span class="hs-identifier hs-var">TxSkelOutDatumConstrs</span></a></span></span><span> </span><span id="local-6989586621679818459"><span class="annot"><a href="#local-6989586621679818459"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679818459"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818459"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="annot"><a href="#local-6989586621679818459"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679818459"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679818459"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-813"></span><span>
</span><span id="line-814"></span><span class="hs-comment">-- | On transaction outputs, we have the options to use</span><span>
</span><span id="line-815"></span><span class="hs-comment">--</span><span>
</span><span id="line-816"></span><span class="hs-comment">-- 1. no datum</span><span>
</span><span id="line-817"></span><span class="hs-comment">-- 2. only a datum hash</span><span>
</span><span id="line-818"></span><span class="hs-comment">-- 3. a &quot;normal&quot; datum</span><span>
</span><span id="line-819"></span><span class="hs-comment">-- 4. an inline datum</span><span>
</span><span id="line-820"></span><span class="hs-comment">--</span><span>
</span><span id="line-821"></span><span class="hs-comment">-- These four options are also what the type 'TxSkelOutDatum' records. The</span><span>
</span><span id="line-822"></span><span class="hs-comment">-- following table explains their differences.</span><span>
</span><span id="line-823"></span><span class="hs-comment">--</span><span>
</span><span id="line-824"></span><span class="hs-comment">-- +------------------------+------------------+---------------------+-----------------------+</span><span>
</span><span id="line-825"></span><span class="hs-comment">-- |                        | datum stored in  |                     | 'Api.OutputDatum'     |</span><span>
</span><span id="line-826"></span><span class="hs-comment">-- |                        | in the simulated | datum resolved      | constructor           |</span><span>
</span><span id="line-827"></span><span class="hs-comment">-- |                        | chain state      | on the 'txInfoData' | seen by the validator |</span><span>
</span><span id="line-828"></span><span class="hs-comment">-- +========================+==================+=====================+=======================+</span><span>
</span><span id="line-829"></span><span class="hs-comment">-- | 'TxSkelOutNoDatum'     | no               | no                  | 'Api.NoOutputDatum'   |</span><span>
</span><span id="line-830"></span><span class="hs-comment">-- +------------------------+------------------+---------------------+-----------------------+</span><span>
</span><span id="line-831"></span><span class="hs-comment">-- | 'TxSkelOutDatumHash'   | yes              | no                  | 'Api.OutputDatumHash' |</span><span>
</span><span id="line-832"></span><span class="hs-comment">-- +------------------------+------------------+---------------------+-----------------------+</span><span>
</span><span id="line-833"></span><span class="hs-comment">-- | 'TxSkelOutDatum'       | yes              | yes                 | 'Api.OutputDatumHash' |</span><span>
</span><span id="line-834"></span><span class="hs-comment">-- +------------------------+------------------+---------------------+-----------------------+</span><span>
</span><span id="line-835"></span><span class="hs-comment">-- | 'TxSkelOutInlineDatum' | yes              | no                  | 'Api.OutputDatum'     |</span><span>
</span><span id="line-836"></span><span class="hs-comment">-- +------------------------+------------------+---------------------+-----------------------+</span><span>
</span><span id="line-837"></span><span class="hs-comment">--</span><span>
</span><span id="line-838"></span><span class="hs-comment">-- That is:</span><span>
</span><span id="line-839"></span><span class="hs-comment">--</span><span>
</span><span id="line-840"></span><span class="hs-comment">-- - Whenever there is a datum, we'll store it in the state of our simulated</span><span>
</span><span id="line-841"></span><span class="hs-comment">--   chain. This will make it possible to retrieve it later, using functions</span><span>
</span><span id="line-842"></span><span class="hs-comment">--   such as 'datumFromHash'.</span><span>
</span><span id="line-843"></span><span class="hs-comment">--</span><span>
</span><span id="line-844"></span><span class="hs-comment">-- - Both of the 'TxSkelOutDatumHash' and 'TxSkelOutDatum' constructors will</span><span>
</span><span id="line-845"></span><span class="hs-comment">--   create an output that scripts see on the 'txInfo' as having a datum</span><span>
</span><span id="line-846"></span><span class="hs-comment">--   hash. The difference is whether that hash will be resolvable using</span><span>
</span><span id="line-847"></span><span class="hs-comment">--   validator functions like 'findDatum'.</span><span>
</span><span id="line-848"></span><span class="hs-keyword">data</span><span> </span><span id="TxSkelOutDatum"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-var">TxSkelOutDatum</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-849"></span><span>  </span><span class="annot"><span class="hs-comment">-- | use no datum</span></span><span>
</span><span id="line-850"></span><span>  </span><span id="TxSkelOutNoDatum"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span>
</span><span id="line-851"></span><span>  </span><span class="annot"><span class="hs-comment">-- | only include the hash on the transaction</span></span><span>
</span><span id="line-852"></span><span>  </span><span id="local-6989586621679818467"><span id="TxSkelOutDatumHash"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-var">TxSkelOutDatumHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumConstrs"><span class="hs-identifier hs-type">TxSkelOutDatumConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818467"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679818467"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span><span>
</span><span id="line-853"></span><span>  </span><span class="hs-comment">-- | use a 'Api.OutputDatumHash' on the transaction output, but generate the</span><span>
</span><span id="line-854"></span><span>  </span><span class="hs-comment">-- transaction in such a way that the complete datum is included in the</span><span>
</span><span id="line-855"></span><span>  </span><span class="hs-comment">-- 'txInfoData' seen by validators</span><span>
</span><span id="line-856"></span><span>  </span><span id="local-6989586621679818468"><span id="TxSkelOutDatum"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-var">TxSkelOutDatum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumConstrs"><span class="hs-identifier hs-type">TxSkelOutDatumConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818468"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679818468"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span><span>
</span><span id="line-857"></span><span>  </span><span class="annot"><span class="hs-comment">-- | use an inline datum</span></span><span>
</span><span id="line-858"></span><span>  </span><span id="local-6989586621679818469"><span id="TxSkelOutInlineDatum"><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-var">TxSkelOutInlineDatum</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumConstrs"><span class="hs-identifier hs-type">TxSkelOutDatumConstrs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818469"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679818469"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span><span>
</span><span id="line-859"></span><span>
</span><span id="line-860"></span><span id="local-6989586621679818471"><span id="local-6989586621679818473"><span id="local-6989586621679818477"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span></span></span><span>
</span><span id="line-861"></span><span>
</span><span id="line-862"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679818481"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-863"></span><span>  </span><span id="local-6989586621679818487"><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679818487"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span id="local-6989586621679818488"><span class="annot"><span class="annottext">== :: TxSkelOutDatum -&gt; TxSkelOutDatum -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span id="local-6989586621679818489"><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679818489"><span class="hs-identifier hs-var">y</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; TxSkelOutDatum -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679818487"><span class="hs-identifier hs-var">x</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679818489"><span class="hs-identifier hs-var">y</span></a></span><span> </span><span class="annot"><span class="annottext">Ordering -&gt; Ordering -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-864"></span><span>
</span><span id="line-865"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679818494"><span id="local-6989586621679818497"><span id="local-6989586621679818500"><span id="local-6989586621679818503"><span id="local-6989586621679818506"><span id="local-6989586621679818509"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-866"></span><span>  </span><span id="local-6989586621679818511"><span class="annot"><span class="annottext">compare :: TxSkelOutDatum -&gt; TxSkelOutDatum -&gt; Ordering
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">compare</span></span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span>
</span><span id="line-867"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span id="local-6989586621679818515"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818515"><span class="hs-identifier hs-var">d1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span id="local-6989586621679818525"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818525"><span class="hs-identifier hs-var">d2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-868"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">SomeTypeRep -&gt; SomeTypeRep -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeRep a -&gt; SomeTypeRep
forall k (a :: k). TypeRep a -&gt; SomeTypeRep
</span><span class="hs-identifier hs-var">SomeTypeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TypeRep a
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818515"><span class="hs-identifier hs-var">d1</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TypeRep a -&gt; SomeTypeRep
forall k (a :: k). TypeRep a -&gt; SomeTypeRep
</span><span class="hs-identifier hs-var">SomeTypeRep</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TypeRep a
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818525"><span class="hs-identifier hs-var">d2</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-869"></span><span>      </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-870"></span><span>      </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-871"></span><span>      </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">EQ</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">a -&gt; TypeRep a
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818515"><span class="hs-identifier hs-var">d1</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep a -&gt; TypeRep a -&gt; Maybe (a :~~: a)
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-operator hs-var">`eqTypeRep`</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TypeRep a
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818525"><span class="hs-identifier hs-var">d2</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-872"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">a :~~: a
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; BuiltinData -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818515"><span class="hs-identifier hs-var">d1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818525"><span class="hs-identifier hs-var">d2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-873"></span><span>        </span><span class="annot"><span class="annottext">Maybe (a :~~: a)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Ordering
forall a. HasCallStack =&gt; String -&gt; a
</span><span class="hs-identifier hs-var">error</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;This branch cannot happen: un-equal type representations that compare to EQ&quot;</span></span><span>
</span><span id="line-874"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679818534"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818534"><span class="hs-identifier hs-var">d1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679818539"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818539"><span class="hs-identifier hs-var">d2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-875"></span><span>    </span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; TxSkelOutDatum -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall a. TxSkelOutDatumConstrs a =&gt; a -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-var">TxSkelOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818534"><span class="hs-identifier hs-var">d1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall a. TxSkelOutDatumConstrs a =&gt; a -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-var">TxSkelOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818539"><span class="hs-identifier hs-var">d2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-876"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-type">TxSkelOutInlineDatum</span></a></span><span> </span><span id="local-6989586621679818541"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818541"><span class="hs-identifier hs-var">d1</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-type">TxSkelOutInlineDatum</span></a></span><span> </span><span id="local-6989586621679818546"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818546"><span class="hs-identifier hs-var">d2</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-877"></span><span>    </span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; TxSkelOutDatum -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall a. TxSkelOutDatumConstrs a =&gt; a -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-var">TxSkelOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818541"><span class="hs-identifier hs-var">d1</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall a. TxSkelOutDatumConstrs a =&gt; a -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-var">TxSkelOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818546"><span class="hs-identifier hs-var">d2</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-878"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-879"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-880"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-881"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-type">TxSkelOutInlineDatum</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-882"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-883"></span><span>
</span><span id="line-884"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Cooked.Conversion.ToOutputDatum.html#ToOutputDatum"><span class="hs-identifier hs-type">ToOutputDatum</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-885"></span><span>  </span><span id="local-6989586621679818555"><span class="annot"><span class="annottext">toOutputDatum :: TxSkelOutDatum -&gt; OutputDatum
</span><a href="#local-6989586621679818555"><span class="hs-identifier hs-var hs-var hs-var hs-var">toOutputDatum</span></a></span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">OutputDatum
</span><span class="hs-identifier hs-var">Api.NoOutputDatum</span></span><span>
</span><span id="line-886"></span><span>  </span><span class="annot"><a href="Cooked.Conversion.ToOutputDatum.html#toOutputDatum"><span class="hs-identifier hs-var">toOutputDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span id="local-6989586621679818560"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818560"><span class="hs-identifier hs-var">datum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DatumHash -&gt; OutputDatum
</span><span class="hs-identifier hs-var">Api.OutputDatumHash</span></span><span> </span><span class="annot"><span class="annottext">(DatumHash -&gt; OutputDatum) -&gt; (a -&gt; DatumHash) -&gt; a -&gt; OutputDatum
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Datum -&gt; DatumHash
</span><span class="hs-identifier hs-var">Script.datumHash</span></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; DatumHash) -&gt; (a -&gt; Datum) -&gt; a -&gt; DatumHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><span class="hs-identifier hs-var">Api.Datum</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; (a -&gt; BuiltinData) -&gt; a -&gt; Datum
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; OutputDatum) -&gt; a -&gt; OutputDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818560"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-887"></span><span>  </span><span class="annot"><a href="Cooked.Conversion.ToOutputDatum.html#toOutputDatum"><span class="hs-identifier hs-var">toOutputDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679818566"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818566"><span class="hs-identifier hs-var">datum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DatumHash -&gt; OutputDatum
</span><span class="hs-identifier hs-var">Api.OutputDatumHash</span></span><span> </span><span class="annot"><span class="annottext">(DatumHash -&gt; OutputDatum) -&gt; (a -&gt; DatumHash) -&gt; a -&gt; OutputDatum
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Datum -&gt; DatumHash
</span><span class="hs-identifier hs-var">Script.datumHash</span></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; DatumHash) -&gt; (a -&gt; Datum) -&gt; a -&gt; DatumHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><span class="hs-identifier hs-var">Api.Datum</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; (a -&gt; BuiltinData) -&gt; a -&gt; Datum
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; OutputDatum) -&gt; a -&gt; OutputDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818566"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-888"></span><span>  </span><span class="annot"><a href="Cooked.Conversion.ToOutputDatum.html#toOutputDatum"><span class="hs-identifier hs-var">toOutputDatum</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-type">TxSkelOutInlineDatum</span></a></span><span> </span><span id="local-6989586621679818570"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818570"><span class="hs-identifier hs-var">datum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Datum -&gt; OutputDatum
</span><span class="hs-identifier hs-var">Api.OutputDatum</span></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; OutputDatum) -&gt; (a -&gt; Datum) -&gt; a -&gt; OutputDatum
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><span class="hs-identifier hs-var">Api.Datum</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; (a -&gt; BuiltinData) -&gt; a -&gt; Datum
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; OutputDatum) -&gt; a -&gt; OutputDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818570"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-889"></span><span>
</span><span id="line-890"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutUntypedDatum"><span class="hs-identifier hs-type">txSkelOutUntypedDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Datum</span></span><span>
</span><span id="line-891"></span><span id="txSkelOutUntypedDatum"><span class="annot"><span class="annottext">txSkelOutUntypedDatum :: TxSkelOutDatum -&gt; Maybe Datum
</span><a href="Cooked.Skeleton.html#txSkelOutUntypedDatum"><span class="hs-identifier hs-var hs-var">txSkelOutUntypedDatum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-892"></span><span>  </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe Datum
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-893"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span id="local-6989586621679818574"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818574"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Datum -&gt; Maybe Datum
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><span class="hs-identifier hs-var">Api.Datum</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; BuiltinData -&gt; Datum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818574"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-894"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679818578"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818578"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Datum -&gt; Maybe Datum
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><span class="hs-identifier hs-var">Api.Datum</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; BuiltinData -&gt; Datum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818578"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-895"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-type">TxSkelOutInlineDatum</span></a></span><span> </span><span id="local-6989586621679818582"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818582"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Datum -&gt; Maybe Datum
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><span class="hs-identifier hs-var">Api.Datum</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; BuiltinData -&gt; Datum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.toBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818582"><span class="hs-identifier hs-var">x</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-896"></span><span>
</span><span id="line-897"></span><span id="local-6989586621679816788"><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutTypedDatum"><span class="hs-identifier hs-type">txSkelOutTypedDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Api.FromData</span></span><span> </span><span class="annot"><a href="#local-6989586621679816788"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621679816788"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-898"></span><span id="txSkelOutTypedDatum"><span class="annot"><span class="annottext">txSkelOutTypedDatum :: forall a. FromData a =&gt; TxSkelOutDatum -&gt; Maybe a
</span><a href="Cooked.Skeleton.html#txSkelOutTypedDatum"><span class="hs-identifier hs-var hs-var">txSkelOutTypedDatum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Maybe a
forall a. FromData a =&gt; BuiltinData -&gt; Maybe a
</span><span class="hs-identifier hs-var">Api.fromBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Maybe a)
-&gt; (Datum -&gt; BuiltinData) -&gt; Datum -&gt; Maybe a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Datum -&gt; BuiltinData
</span><span class="hs-identifier hs-var">Api.getDatum</span></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; Maybe a)
-&gt; (TxSkelOutDatum -&gt; Maybe Datum) -&gt; TxSkelOutDatum -&gt; Maybe a
forall (m :: * -&gt; *) b c a.
Monad m =&gt;
(b -&gt; m c) -&gt; (a -&gt; m b) -&gt; a -&gt; m c
</span><span class="hs-operator hs-var">&lt;=&lt;</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; Maybe Datum
</span><a href="Cooked.Skeleton.html#txSkelOutUntypedDatum"><span class="hs-identifier hs-var">txSkelOutUntypedDatum</span></a></span><span>
</span><span id="line-899"></span><span>
</span><span id="line-900"></span><span class="annot"><span class="hs-comment">-- ** Smart constructors for transaction outputs</span></span><span>
</span><span id="line-901"></span><span>
</span><span id="line-902"></span><span class="annot"><span class="hs-comment">-- | Pay a certain value to a public key.</span></span><span>
</span><span id="line-903"></span><span id="local-6989586621679816796"><span class="annot"><a href="Cooked.Skeleton.html#paysPK"><span class="hs-identifier hs-type">paysPK</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Conversion.ToPubKeyHash.html#ToPubKeyHash"><span class="hs-identifier hs-type">ToPubKeyHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679816796"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679816796"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-904"></span><span id="paysPK"><span class="annot"><span class="annottext">paysPK :: forall a. ToPubKeyHash a =&gt; a -&gt; Value -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#paysPK"><span class="hs-identifier hs-var hs-var">paysPK</span></a></span></span><span> </span><span id="local-6989586621679818637"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818637"><span class="hs-identifier hs-var">pkh</span></a></span></span><span> </span><span id="local-6989586621679818638"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679818638"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-905"></span><span>  </span><span class="annot"><span class="annottext">ConcreteOutput PubKeyHash TxSkelOutDatum Value (Versioned Script)
-&gt; TxSkelOut
forall a.
(Show a, Typeable a, IsTxInfoOutput a,
 IsTxSkelOutAllowedOwner (OwnerType a), Typeable (OwnerType a),
 ToCredential (OwnerType a), DatumType a ~ TxSkelOutDatum,
 ValueType a ~ Value, ToVersionedScript (ReferenceScriptType a),
 Show (OwnerType a), Show (ReferenceScriptType a),
 Typeable (ReferenceScriptType a)) =&gt;
a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span>
</span><span id="line-906"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">PubKeyHash
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe (Versioned Script)
-&gt; ConcreteOutput
     PubKeyHash TxSkelOutDatum Value (Versioned Script)
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-907"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">a -&gt; PubKeyHash
forall a. ToPubKeyHash a =&gt; a -&gt; PubKeyHash
</span><a href="Cooked.Conversion.ToPubKeyHash.html#toPubKeyHash"><span class="hs-identifier hs-var">toPubKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818637"><span class="hs-identifier hs-var">pkh</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-908"></span><span>        </span><span class="annot"><span class="annottext">Maybe StakingCredential
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-909"></span><span>        </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span>
</span><span id="line-910"></span><span>        </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679818638"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-911"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-912"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-913"></span><span>
</span><span id="line-914"></span><span class="hs-comment">-- | Pays a script a certain value with a certain datum hash, using the</span><span>
</span><span id="line-915"></span><span class="hs-comment">-- 'TxSkelOutDatum' constructor. The resolved datum is provided in the body of</span><span>
</span><span id="line-916"></span><span class="hs-comment">-- the transaction that issues the payment.</span><span>
</span><span id="line-917"></span><span id="local-6989586621679816812"><span class="annot"><a href="Cooked.Skeleton.html#paysScript"><span class="hs-identifier hs-type">paysScript</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-918"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679816812"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-919"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679816812"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-920"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679816812"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-921"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679816812"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-922"></span><span>    </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679816812"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-923"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679816812"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-924"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-925"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Script.TypedValidator</span></span><span> </span><span class="annot"><a href="#local-6989586621679816812"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-926"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679816812"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-927"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-928"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-929"></span><span id="paysScript"><span class="annot"><span class="annottext">paysScript :: forall a.
(ToData (DatumType a), Show (DatumType a), Typeable (DatumType a),
 Eq (DatumType a), PrettyCooked (DatumType a), Typeable a) =&gt;
TypedValidator a -&gt; DatumType a -&gt; Value -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#paysScript"><span class="hs-identifier hs-var hs-var">paysScript</span></a></span></span><span> </span><span id="local-6989586621679818687"><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679818687"><span class="hs-identifier hs-var">validator</span></a></span></span><span> </span><span id="local-6989586621679818688"><span class="annot"><span class="annottext">DatumType a
</span><a href="#local-6989586621679818688"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span id="local-6989586621679818689"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679818689"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-930"></span><span>  </span><span class="annot"><span class="annottext">ConcreteOutput
  (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
-&gt; TxSkelOut
forall a.
(Show a, Typeable a, IsTxInfoOutput a,
 IsTxSkelOutAllowedOwner (OwnerType a), Typeable (OwnerType a),
 ToCredential (OwnerType a), DatumType a ~ TxSkelOutDatum,
 ValueType a ~ Value, ToVersionedScript (ReferenceScriptType a),
 Show (OwnerType a), Show (ReferenceScriptType a),
 Typeable (ReferenceScriptType a)) =&gt;
a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span>
</span><span id="line-931"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TypedValidator a
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe (Versioned Script)
-&gt; ConcreteOutput
     (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-932"></span><span>        </span><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679818687"><span class="hs-identifier hs-var">validator</span></a></span><span>
</span><span id="line-933"></span><span>        </span><span class="annot"><span class="annottext">Maybe StakingCredential
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-934"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatumType a -&gt; TxSkelOutDatum
forall a. TxSkelOutDatumConstrs a =&gt; a -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-var">TxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="annottext">DatumType a
</span><a href="#local-6989586621679818688"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-935"></span><span>        </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679818689"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-936"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-937"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-938"></span><span>
</span><span id="line-939"></span><span class="annot"><span class="hs-comment">-- | Pays a script a certain value with a certain inlined datum.</span></span><span>
</span><span id="line-940"></span><span id="local-6989586621679818690"><span class="annot"><a href="Cooked.Skeleton.html#paysScriptInlineDatum"><span class="hs-identifier hs-type">paysScriptInlineDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-941"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679818690"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-942"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679818690"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-943"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679818690"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-944"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679818690"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-945"></span><span>    </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679818690"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-946"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679818690"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-947"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-948"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Script.TypedValidator</span></span><span> </span><span class="annot"><a href="#local-6989586621679818690"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-949"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679818690"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-950"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-951"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-952"></span><span id="paysScriptInlineDatum"><span class="annot"><span class="annottext">paysScriptInlineDatum :: forall a.
(ToData (DatumType a), Show (DatumType a), Typeable (DatumType a),
 Eq (DatumType a), PrettyCooked (DatumType a), Typeable a) =&gt;
TypedValidator a -&gt; DatumType a -&gt; Value -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#paysScriptInlineDatum"><span class="hs-identifier hs-var hs-var">paysScriptInlineDatum</span></a></span></span><span> </span><span id="local-6989586621679818736"><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679818736"><span class="hs-identifier hs-var">validator</span></a></span></span><span> </span><span id="local-6989586621679818737"><span class="annot"><span class="annottext">DatumType a
</span><a href="#local-6989586621679818737"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span id="local-6989586621679818738"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679818738"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-953"></span><span>  </span><span class="annot"><span class="annottext">ConcreteOutput
  (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
-&gt; TxSkelOut
forall a.
(Show a, Typeable a, IsTxInfoOutput a,
 IsTxSkelOutAllowedOwner (OwnerType a), Typeable (OwnerType a),
 ToCredential (OwnerType a), DatumType a ~ TxSkelOutDatum,
 ValueType a ~ Value, ToVersionedScript (ReferenceScriptType a),
 Show (OwnerType a), Show (ReferenceScriptType a),
 Typeable (ReferenceScriptType a)) =&gt;
a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span>
</span><span id="line-954"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TypedValidator a
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe (Versioned Script)
-&gt; ConcreteOutput
     (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-955"></span><span>        </span><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679818736"><span class="hs-identifier hs-var">validator</span></a></span><span>
</span><span id="line-956"></span><span>        </span><span class="annot"><span class="annottext">Maybe StakingCredential
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-957"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatumType a -&gt; TxSkelOutDatum
forall a. TxSkelOutDatumConstrs a =&gt; a -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-var">TxSkelOutInlineDatum</span></a></span><span> </span><span class="annot"><span class="annottext">DatumType a
</span><a href="#local-6989586621679818737"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-958"></span><span>        </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679818738"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-959"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-960"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-961"></span><span>
</span><span id="line-962"></span><span class="hs-comment">-- | Pays a script a certain value with a certain hashed datum, whose resolved</span><span>
</span><span id="line-963"></span><span class="hs-comment">-- datum is not provided in the transaction body that issues the payment (as</span><span>
</span><span id="line-964"></span><span class="hs-comment">-- opposed to &quot;paysScript&quot;).</span><span>
</span><span id="line-965"></span><span id="local-6989586621679818739"><span class="annot"><a href="Cooked.Skeleton.html#paysScriptUnresolvedDatumHash"><span class="hs-identifier hs-type">paysScriptUnresolvedDatumHash</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-966"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679818739"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-967"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679818739"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-968"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679818739"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-969"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679818739"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-970"></span><span>    </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679818739"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-971"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679818739"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-972"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-973"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Script.TypedValidator</span></span><span> </span><span class="annot"><a href="#local-6989586621679818739"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-974"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Script.DatumType</span></span><span> </span><span class="annot"><a href="#local-6989586621679818739"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-975"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-976"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-977"></span><span id="paysScriptUnresolvedDatumHash"><span class="annot"><span class="annottext">paysScriptUnresolvedDatumHash :: forall a.
(ToData (DatumType a), Show (DatumType a), Typeable (DatumType a),
 Eq (DatumType a), PrettyCooked (DatumType a), Typeable a) =&gt;
TypedValidator a -&gt; DatumType a -&gt; Value -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#paysScriptUnresolvedDatumHash"><span class="hs-identifier hs-var hs-var">paysScriptUnresolvedDatumHash</span></a></span></span><span> </span><span id="local-6989586621679818785"><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679818785"><span class="hs-identifier hs-var">validator</span></a></span></span><span> </span><span id="local-6989586621679818786"><span class="annot"><span class="annottext">DatumType a
</span><a href="#local-6989586621679818786"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span id="local-6989586621679818787"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679818787"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-978"></span><span>  </span><span class="annot"><span class="annottext">ConcreteOutput
  (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
-&gt; TxSkelOut
forall a.
(Show a, Typeable a, IsTxInfoOutput a,
 IsTxSkelOutAllowedOwner (OwnerType a), Typeable (OwnerType a),
 ToCredential (OwnerType a), DatumType a ~ TxSkelOutDatum,
 ValueType a ~ Value, ToVersionedScript (ReferenceScriptType a),
 Show (OwnerType a), Show (ReferenceScriptType a),
 Typeable (ReferenceScriptType a)) =&gt;
a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span>
</span><span id="line-979"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TypedValidator a
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe (Versioned Script)
-&gt; ConcreteOutput
     (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-980"></span><span>        </span><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679818785"><span class="hs-identifier hs-var">validator</span></a></span><span>
</span><span id="line-981"></span><span>        </span><span class="annot"><span class="annottext">Maybe StakingCredential
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-982"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DatumType a -&gt; TxSkelOutDatum
forall a. TxSkelOutDatumConstrs a =&gt; a -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-var">TxSkelOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">DatumType a
</span><a href="#local-6989586621679818786"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-983"></span><span>        </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679818787"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-984"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-985"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-986"></span><span>
</span><span id="line-987"></span><span class="hs-comment">-- | Pays a script a certain value without any datum. Intended to be used with</span><span>
</span><span id="line-988"></span><span class="hs-comment">-- 'withDatum', 'withUnresolvedDatumHash', or 'withInlineDatum' to try a datum whose type</span><span>
</span><span id="line-989"></span><span class="hs-comment">-- does not match the validator's.</span><span>
</span><span id="line-990"></span><span id="local-6989586621679816819"><span class="annot"><a href="Cooked.Skeleton.html#paysScriptNoDatum"><span class="hs-identifier hs-type">paysScriptNoDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679816819"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.TypedValidator</span></span><span> </span><span class="annot"><a href="#local-6989586621679816819"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-991"></span><span id="paysScriptNoDatum"><span class="annot"><span class="annottext">paysScriptNoDatum :: forall a. Typeable a =&gt; TypedValidator a -&gt; Value -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#paysScriptNoDatum"><span class="hs-identifier hs-var hs-var">paysScriptNoDatum</span></a></span></span><span> </span><span id="local-6989586621679818827"><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679818827"><span class="hs-identifier hs-var">validator</span></a></span></span><span> </span><span id="local-6989586621679818828"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679818828"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-992"></span><span>  </span><span class="annot"><span class="annottext">ConcreteOutput
  (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
-&gt; TxSkelOut
forall a.
(Show a, Typeable a, IsTxInfoOutput a,
 IsTxSkelOutAllowedOwner (OwnerType a), Typeable (OwnerType a),
 ToCredential (OwnerType a), DatumType a ~ TxSkelOutDatum,
 ValueType a ~ Value, ToVersionedScript (ReferenceScriptType a),
 Show (OwnerType a), Show (ReferenceScriptType a),
 Typeable (ReferenceScriptType a)) =&gt;
a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span>
</span><span id="line-993"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TypedValidator a
-&gt; Maybe StakingCredential
-&gt; TxSkelOutDatum
-&gt; Value
-&gt; Maybe (Versioned Script)
-&gt; ConcreteOutput
     (TypedValidator a) TxSkelOutDatum Value (Versioned Script)
forall ownerType datumType valueType referenceScriptType.
ownerType
-&gt; Maybe StakingCredential
-&gt; datumType
-&gt; valueType
-&gt; Maybe referenceScriptType
-&gt; ConcreteOutput ownerType datumType valueType referenceScriptType
</span><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-var">ConcreteOutput</span></a></span><span>
</span><span id="line-994"></span><span>        </span><span class="annot"><span class="annottext">TypedValidator a
</span><a href="#local-6989586621679818827"><span class="hs-identifier hs-var">validator</span></a></span><span>
</span><span id="line-995"></span><span>        </span><span class="annot"><span class="annottext">Maybe StakingCredential
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-996"></span><span>        </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span>
</span><span id="line-997"></span><span>        </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679818828"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-998"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-999"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1000"></span><span>
</span><span id="line-1001"></span><span class="hs-comment">-- | Set the datum in a payment to the given datum (whose type may not fit the</span><span>
</span><span id="line-1002"></span><span class="hs-comment">-- typed validator in case of a script).</span><span>
</span><span id="line-1003"></span><span id="local-6989586621679816821"><span class="annot"><a href="Cooked.Skeleton.html#withDatum"><span class="hs-identifier hs-type">withDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="annot"><a href="#local-6989586621679816821"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679816821"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679816821"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679816821"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679816821"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679816821"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-1004"></span><span id="withDatum"><span class="annot"><span class="annottext">withDatum :: forall a.
(ToData a, Show a, Typeable a, Eq a, PrettyCooked a) =&gt;
TxSkelOut -&gt; a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#withDatum"><span class="hs-identifier hs-var hs-var">withDatum</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679818881"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818881"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679818882"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818882"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConcreteOutput
  (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall a.
(Show a, Typeable a, IsTxInfoOutput a,
 IsTxSkelOutAllowedOwner (OwnerType a), Typeable (OwnerType a),
 ToCredential (OwnerType a), DatumType a ~ TxSkelOutDatum,
 ValueType a ~ Value, ToVersionedScript (ReferenceScriptType a),
 Show (OwnerType a), Show (ReferenceScriptType a),
 Typeable (ReferenceScriptType a)) =&gt;
a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(ConcreteOutput
   (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
 -&gt; TxSkelOut)
-&gt; ConcreteOutput
     (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
-&gt; ConcreteOutput
     (OwnerType o) (DatumType o) (ValueType o) (ReferenceScriptType o)
forall out.
IsAbstractOutput out =&gt;
out
-&gt; ConcreteOutput
     (OwnerType out)
     (DatumType out)
     (ValueType out)
     (ReferenceScriptType out)
</span><a href="Cooked.Output.html#fromAbstractOutput"><span class="hs-identifier hs-var">fromAbstractOutput</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818881"><span class="hs-identifier hs-var">output</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cooked.Output.html#concreteOutputDatum"><span class="hs-identifier hs-var">concreteOutputDatum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818882"><span class="hs-identifier hs-type">datum</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-1005"></span><span>
</span><span id="line-1006"></span><span class="hs-comment">-- | Set the datum in a payment to the given inlined datum (whose type may not</span><span>
</span><span id="line-1007"></span><span class="hs-comment">-- fit the typed validator in case of a script).</span><span>
</span><span id="line-1008"></span><span id="local-6989586621679818885"><span class="annot"><a href="Cooked.Skeleton.html#withInlineDatum"><span class="hs-identifier hs-type">withInlineDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="annot"><a href="#local-6989586621679818885"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679818885"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679818885"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679818885"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818885"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679818885"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-1009"></span><span id="withInlineDatum"><span class="annot"><span class="annottext">withInlineDatum :: forall a.
(ToData a, Show a, Typeable a, Eq a, PrettyCooked a) =&gt;
TxSkelOut -&gt; a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#withInlineDatum"><span class="hs-identifier hs-var hs-var">withInlineDatum</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679818938"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818938"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679818939"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818939"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConcreteOutput
  (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall a.
(Show a, Typeable a, IsTxInfoOutput a,
 IsTxSkelOutAllowedOwner (OwnerType a), Typeable (OwnerType a),
 ToCredential (OwnerType a), DatumType a ~ TxSkelOutDatum,
 ValueType a ~ Value, ToVersionedScript (ReferenceScriptType a),
 Show (OwnerType a), Show (ReferenceScriptType a),
 Typeable (ReferenceScriptType a)) =&gt;
a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(ConcreteOutput
   (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
 -&gt; TxSkelOut)
-&gt; ConcreteOutput
     (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
-&gt; ConcreteOutput
     (OwnerType o) (DatumType o) (ValueType o) (ReferenceScriptType o)
forall out.
IsAbstractOutput out =&gt;
out
-&gt; ConcreteOutput
     (OwnerType out)
     (DatumType out)
     (ValueType out)
     (ReferenceScriptType out)
</span><a href="Cooked.Output.html#fromAbstractOutput"><span class="hs-identifier hs-var">fromAbstractOutput</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818938"><span class="hs-identifier hs-var">output</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cooked.Output.html#concreteOutputDatum"><span class="hs-identifier hs-var">concreteOutputDatum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-type">TxSkelOutInlineDatum</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818939"><span class="hs-identifier hs-type">datum</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-1010"></span><span>
</span><span id="line-1011"></span><span class="hs-comment">-- | Set the datum in a payment to the given hashed (not resolved in the</span><span>
</span><span id="line-1012"></span><span class="hs-comment">-- transaction) datum (whose type may not fit the typed validator in case of a</span><span>
</span><span id="line-1013"></span><span class="hs-comment">-- script).</span><span>
</span><span id="line-1014"></span><span id="local-6989586621679818940"><span class="annot"><a href="Cooked.Skeleton.html#withUnresolvedDatumHash"><span class="hs-identifier hs-type">withUnresolvedDatumHash</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Api.ToData</span></span><span> </span><span class="annot"><a href="#local-6989586621679818940"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679818940"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679818940"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">PlutusTx.Eq</span></span><span> </span><span class="annot"><a href="#local-6989586621679818940"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Pretty.Class.html#PrettyCooked"><span class="hs-identifier hs-type">PrettyCooked</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818940"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679818940"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-1015"></span><span id="withUnresolvedDatumHash"><span class="annot"><span class="annottext">withUnresolvedDatumHash :: forall a.
(ToData a, Show a, Typeable a, Eq a, PrettyCooked a) =&gt;
TxSkelOut -&gt; a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#withUnresolvedDatumHash"><span class="hs-identifier hs-var hs-var">withUnresolvedDatumHash</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679818993"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818993"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679818994"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679818994"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConcreteOutput
  (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall a.
(Show a, Typeable a, IsTxInfoOutput a,
 IsTxSkelOutAllowedOwner (OwnerType a), Typeable (OwnerType a),
 ToCredential (OwnerType a), DatumType a ~ TxSkelOutDatum,
 ValueType a ~ Value, ToVersionedScript (ReferenceScriptType a),
 Show (OwnerType a), Show (ReferenceScriptType a),
 Typeable (ReferenceScriptType a)) =&gt;
a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(ConcreteOutput
   (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
 -&gt; TxSkelOut)
-&gt; ConcreteOutput
     (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
-&gt; ConcreteOutput
     (OwnerType o) (DatumType o) (ValueType o) (ReferenceScriptType o)
forall out.
IsAbstractOutput out =&gt;
out
-&gt; ConcreteOutput
     (OwnerType out)
     (DatumType out)
     (ValueType out)
     (ReferenceScriptType out)
</span><a href="Cooked.Output.html#fromAbstractOutput"><span class="hs-identifier hs-var">fromAbstractOutput</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679818993"><span class="hs-identifier hs-var">output</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cooked.Output.html#concreteOutputDatum"><span class="hs-identifier hs-var">concreteOutputDatum</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679818994"><span class="hs-identifier hs-type">datum</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-1016"></span><span>
</span><span id="line-1017"></span><span class="hs-comment">-- | Add a reference script to a transaction output (or replace it if there is</span><span>
</span><span id="line-1018"></span><span class="hs-comment">-- already one)</span><span>
</span><span id="line-1019"></span><span id="local-6989586621679816829"><span class="annot"><a href="Cooked.Skeleton.html#withReferenceScript"><span class="hs-identifier hs-type">withReferenceScript</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679816829"><span class="hs-identifier hs-type">script</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Conversion.ToVersionedScript.html#ToVersionedScript"><span class="hs-identifier hs-type">ToVersionedScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679816829"><span class="hs-identifier hs-type">script</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679816829"><span class="hs-identifier hs-type">script</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Conversion.ToScriptHash.html#ToScriptHash"><span class="hs-identifier hs-type">ToScriptHash</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679816829"><span class="hs-identifier hs-type">script</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679816829"><span class="hs-identifier hs-type">script</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span></span><span>
</span><span id="line-1020"></span><span id="withReferenceScript"><span class="annot"><span class="annottext">withReferenceScript :: forall script.
(Show script, ToVersionedScript script, Typeable script,
 ToScriptHash script) =&gt;
TxSkelOut -&gt; script -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#withReferenceScript"><span class="hs-identifier hs-var hs-var">withReferenceScript</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679819044"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679819044"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679819045"><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679819045"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConcreteOutput (OwnerType o) TxSkelOutDatum Value script
-&gt; TxSkelOut
forall a.
(Show a, Typeable a, IsTxInfoOutput a,
 IsTxSkelOutAllowedOwner (OwnerType a), Typeable (OwnerType a),
 ToCredential (OwnerType a), DatumType a ~ TxSkelOutDatum,
 ValueType a ~ Value, ToVersionedScript (ReferenceScriptType a),
 Show (OwnerType a), Show (ReferenceScriptType a),
 Typeable (ReferenceScriptType a)) =&gt;
a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(ConcreteOutput (OwnerType o) TxSkelOutDatum Value script
 -&gt; TxSkelOut)
-&gt; ConcreteOutput (OwnerType o) TxSkelOutDatum Value script
-&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
-&gt; ConcreteOutput
     (OwnerType o) (DatumType o) (ValueType o) (ReferenceScriptType o)
forall out.
IsAbstractOutput out =&gt;
out
-&gt; ConcreteOutput
     (OwnerType out)
     (DatumType out)
     (ValueType out)
     (ReferenceScriptType out)
</span><a href="Cooked.Output.html#fromAbstractOutput"><span class="hs-identifier hs-var">fromAbstractOutput</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679819044"><span class="hs-identifier hs-var">output</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cooked.Output.html#concreteOutputReferenceScript"><span class="hs-identifier hs-var">concreteOutputReferenceScript</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621679819045"><span class="hs-identifier hs-type">script</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-1021"></span><span>
</span><span id="line-1022"></span><span class="hs-comment">-- | Add a staking credential to a transaction output (or replace it if there is</span><span>
</span><span id="line-1023"></span><span class="hs-comment">-- already one)</span><span>
</span><span id="line-1024"></span><span class="annot"><a href="Cooked.Skeleton.html#withStakingCredential"><span class="hs-identifier hs-type">withStakingCredential</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.StakingCredential</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span>
</span><span id="line-1025"></span><span id="withStakingCredential"><span class="annot"><span class="annottext">withStakingCredential :: TxSkelOut -&gt; StakingCredential -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#withStakingCredential"><span class="hs-identifier hs-var hs-var">withStakingCredential</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679819093"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679819093"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679819094"><span class="annot"><span class="annottext">StakingCredential
</span><a href="#local-6989586621679819094"><span class="hs-identifier hs-var">stakingCredential</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ConcreteOutput
  (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall a.
(Show a, Typeable a, IsTxInfoOutput a,
 IsTxSkelOutAllowedOwner (OwnerType a), Typeable (OwnerType a),
 ToCredential (OwnerType a), DatumType a ~ TxSkelOutDatum,
 ValueType a ~ Value, ToVersionedScript (ReferenceScriptType a),
 Show (OwnerType a), Show (ReferenceScriptType a),
 Typeable (ReferenceScriptType a)) =&gt;
a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(ConcreteOutput
   (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
 -&gt; TxSkelOut)
-&gt; ConcreteOutput
     (OwnerType o) TxSkelOutDatum Value (ReferenceScriptType o)
-&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
-&gt; ConcreteOutput
     (OwnerType o) (DatumType o) (ValueType o) (ReferenceScriptType o)
forall out.
IsAbstractOutput out =&gt;
out
-&gt; ConcreteOutput
     (OwnerType out)
     (DatumType out)
     (ValueType out)
     (ReferenceScriptType out)
</span><a href="Cooked.Output.html#fromAbstractOutput"><span class="hs-identifier hs-var">fromAbstractOutput</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679819093"><span class="hs-identifier hs-var">output</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cooked.Output.html#concreteOutputStakingCredential"><span class="hs-identifier hs-var">concreteOutputStakingCredential</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="#local-6989586621679819094"><span class="hs-identifier hs-type">stakingCredential</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-1026"></span><span>
</span><span id="line-1027"></span><span class="annot"><span class="hs-comment">-- * Transaction skeletons</span></span><span>
</span><span id="line-1028"></span><span>
</span><span id="line-1029"></span><span class="hs-keyword">data</span><span> </span><span id="TxSkel"><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-var">TxSkel</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-1030"></span><span>  </span><span id="TxSkel"><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-var">TxSkel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1031"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | Labels do not influence the transaction generation at all; they are</span><span>
</span><span id="line-1032"></span><span>      </span><span class="hs-comment">-- pretty-printed whenever cooked-validators prints a transaction, and can</span><span>
</span><span id="line-1033"></span><span>      </span><span class="hs-comment">-- therefore make the output more informative (and greppable).</span><span>
</span><span id="line-1034"></span><span>      </span><span id="txSkelLabel"><span class="annot"><span class="annottext">TxSkel -&gt; Set TxLabel
</span><a href="Cooked.Skeleton.html#txSkelLabel"><span class="hs-identifier hs-var hs-var">txSkelLabel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxLabel"><span class="hs-identifier hs-type">TxLabel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1035"></span><span>      </span><span class="annot"><span class="hs-comment">-- | Some options that control transaction generation.</span></span><span>
</span><span id="line-1036"></span><span>      </span><span id="txSkelOpts"><span class="annot"><span class="annottext">TxSkel -&gt; TxOpts
</span><a href="Cooked.Skeleton.html#txSkelOpts"><span class="hs-identifier hs-var hs-var">txSkelOpts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxOpts"><span class="hs-identifier hs-type">TxOpts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1037"></span><span>      </span><span class="hs-comment">-- | Any value minted or burned by the transaction. You'll probably want</span><span>
</span><span id="line-1038"></span><span>      </span><span class="hs-comment">-- to use 'txSkelMintsFromList' to construct this.</span><span>
</span><span id="line-1039"></span><span>      </span><span id="txSkelMints"><span class="annot"><span class="annottext">TxSkel -&gt; TxSkelMints
</span><a href="Cooked.Skeleton.html#txSkelMints"><span class="hs-identifier hs-var hs-var">txSkelMints</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1040"></span><span>      </span><span class="hs-comment">-- | The wallets signing the transaction. This list must contain at least</span><span>
</span><span id="line-1041"></span><span>      </span><span class="hs-comment">-- one element. By default, the first signer will pay for fees and</span><span>
</span><span id="line-1042"></span><span>      </span><span class="hs-comment">-- balancing. You can change that with 'txOptBalanceWallet'.</span><span>
</span><span id="line-1043"></span><span>      </span><span id="txSkelSigners"><span class="annot"><span class="annottext">TxSkel -&gt; [Wallet]
</span><a href="Cooked.Skeleton.html#txSkelSigners"><span class="hs-identifier hs-var hs-var">txSkelSigners</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1044"></span><span>      </span><span id="txSkelValidityRange"><span class="annot"><span class="annottext">TxSkel -&gt; SlotRange
</span><a href="Cooked.Skeleton.html#txSkelValidityRange"><span class="hs-identifier hs-var hs-var">txSkelValidityRange</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Ledger.SlotRange</span></span><span class="hs-special">,</span><span>
</span><span id="line-1045"></span><span>      </span><span class="hs-comment">-- | To each 'TxOutRef' the transaction should consume, add a redeemer</span><span>
</span><span id="line-1046"></span><span>      </span><span class="hs-comment">-- specifying how to spend it. You must make sure that</span><span>
</span><span id="line-1047"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1048"></span><span>      </span><span class="hs-comment">-- - On 'TxOutRef's referencing UTxOs belonging to public keys, you use</span><span>
</span><span id="line-1049"></span><span>      </span><span class="hs-comment">--   the 'emptyTxSkelRedeemer' smart constructor.</span><span>
</span><span id="line-1050"></span><span>      </span><span class="hs-comment">--</span><span>
</span><span id="line-1051"></span><span>      </span><span class="hs-comment">-- - On 'TxOutRef's referencing UTxOs belonging to scripts, you must make</span><span>
</span><span id="line-1052"></span><span>      </span><span class="hs-comment">--   sure that the type of the redeemer is appropriate for the script.</span><span>
</span><span id="line-1053"></span><span>      </span><span id="txSkelIns"><span class="annot"><span class="annottext">TxSkel -&gt; Map TxOutRef TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#txSkelIns"><span class="hs-identifier hs-var hs-var">txSkelIns</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1054"></span><span>      </span><span class="annot"><span class="hs-comment">-- | All outputs referenced by the transaction.</span></span><span>
</span><span id="line-1055"></span><span>      </span><span id="txSkelInsReference"><span class="annot"><span class="annottext">TxSkel -&gt; Set TxOutRef
</span><a href="Cooked.Skeleton.html#txSkelInsReference"><span class="hs-identifier hs-var hs-var">txSkelInsReference</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Set</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span class="hs-special">,</span><span>
</span><span id="line-1056"></span><span>      </span><span class="hs-comment">-- | The outputs of the transaction. These will occur in exactly this</span><span>
</span><span id="line-1057"></span><span>      </span><span class="hs-comment">-- order on the transaction.</span><span>
</span><span id="line-1058"></span><span>      </span><span id="txSkelOuts"><span class="annot"><span class="annottext">TxSkel -&gt; [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOuts"><span class="hs-identifier hs-var hs-var">txSkelOuts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1059"></span><span>      </span><span class="hs-comment">-- | Possible proposals issued in this transaction to be voted on and</span><span>
</span><span id="line-1060"></span><span>      </span><span class="hs-comment">-- possible enacted later on.</span><span>
</span><span id="line-1061"></span><span>      </span><span id="txSkelProposals"><span class="annot"><span class="annottext">TxSkel -&gt; [TxSkelProposal]
</span><a href="Cooked.Skeleton.html#txSkelProposals"><span class="hs-identifier hs-var hs-var">txSkelProposals</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelProposal"><span class="hs-identifier hs-type">TxSkelProposal</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1062"></span><span>      </span><span class="annot"><span class="hs-comment">-- | Withdrawals performed by the transaction</span></span><span>
</span><span id="line-1063"></span><span>      </span><span id="txSkelWithdrawals"><span class="annot"><span class="annottext">TxSkel
-&gt; Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
</span><a href="Cooked.Skeleton.html#txSkelWithdrawals"><span class="hs-identifier hs-var hs-var">txSkelWithdrawals</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelWithdrawals"><span class="hs-identifier hs-type">TxSkelWithdrawals</span></a></span><span>
</span><span id="line-1064"></span><span>    </span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1065"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span>
</span><span id="line-1066"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679819107"><span id="local-6989586621679819132"><span id="local-6989586621679819136"><span class="annot"><span class="annottext">Int -&gt; TxSkel -&gt; ShowS
[TxSkel] -&gt; ShowS
TxSkel -&gt; String
(Int -&gt; TxSkel -&gt; ShowS)
-&gt; (TxSkel -&gt; String) -&gt; ([TxSkel] -&gt; ShowS) -&gt; Show TxSkel
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; TxSkel -&gt; ShowS
showsPrec :: Int -&gt; TxSkel -&gt; ShowS
$cshow :: TxSkel -&gt; String
show :: TxSkel -&gt; String
$cshowList :: [TxSkel] -&gt; ShowS
showList :: [TxSkel] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679819155"><span id="local-6989586621679819180"><span class="annot"><span class="annottext">TxSkel -&gt; TxSkel -&gt; Bool
(TxSkel -&gt; TxSkel -&gt; Bool)
-&gt; (TxSkel -&gt; TxSkel -&gt; Bool) -&gt; Eq TxSkel
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: TxSkel -&gt; TxSkel -&gt; Bool
== :: TxSkel -&gt; TxSkel -&gt; Bool
$c/= :: TxSkel -&gt; TxSkel -&gt; Bool
/= :: TxSkel -&gt; TxSkel -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-1067"></span><span>
</span><span id="line-1068"></span><span id="txSkelProposalsL"><span id="txSkelLabelL"><span id="txSkelOptsL"><span id="txSkelMintsL"><span id="txSkelValidityRangeL"><span id="txSkelSignersL"><span id="txSkelInsL"><span id="txSkelInsReferenceL"><span id="txSkelOutsL"><span id="txSkelWithdrawalsL"><span class="hs-identifier">makeLensesFor</span><span>
</span><span id="line-1069"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelLabel&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelLabelL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1070"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelOpts&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelOptsL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1071"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelMints&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelMintsL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1072"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelValidityRange&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelValidityRangeL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1073"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelSigners&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelSignersL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1074"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelIns&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelInsL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1075"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelInsReference&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelInsReferenceL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1076"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelOuts&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelOutsL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1077"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelProposals&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelProposalsL&quot;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-1078"></span><span>    </span><span class="hs-special">(</span><span class="hs-string">&quot;txSkelWithdrawals&quot;</span><span class="hs-special">,</span><span> </span><span class="hs-string">&quot;txSkelWithdrawalsL&quot;</span><span class="hs-special">)</span><span>
</span><span id="line-1079"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-1080"></span><span>  </span><span class="hs-special">''</span><span class="hs-identifier">TxSkel</span></span></span></span></span></span></span></span></span></span></span><span>
</span><span id="line-1081"></span><span>
</span><span id="line-1082"></span><span class="annot"><span class="hs-comment">-- | A convenience template of an empty transaction skeleton.</span></span><span>
</span><span id="line-1083"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelTemplate"><span class="hs-identifier hs-type">txSkelTemplate</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span>
</span><span id="line-1084"></span><span id="txSkelTemplate"><span class="annot"><span class="annottext">txSkelTemplate :: TxSkel
</span><a href="Cooked.Skeleton.html#txSkelTemplate"><span class="hs-identifier hs-var hs-var">txSkelTemplate</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1085"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span>
</span><span id="line-1086"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">txSkelLabel :: Set TxLabel
</span><a href="Cooked.Skeleton.html#txSkelLabel"><span class="hs-identifier hs-var">txSkelLabel</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set TxLabel
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">,</span><span>
</span><span id="line-1087"></span><span>      </span><span class="annot"><span class="annottext">txSkelOpts :: TxOpts
</span><a href="Cooked.Skeleton.html#txSkelOpts"><span class="hs-identifier hs-var">txSkelOpts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxOpts
forall a. Default a =&gt; a
</span><span class="hs-identifier hs-var">def</span></span><span class="hs-special">,</span><span>
</span><span id="line-1088"></span><span>      </span><span class="annot"><span class="annottext">txSkelMints :: TxSkelMints
</span><a href="Cooked.Skeleton.html#txSkelMints"><span class="hs-identifier hs-var">txSkelMints</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span class="hs-special">,</span><span>
</span><span id="line-1089"></span><span>      </span><span class="annot"><span class="annottext">txSkelValidityRange :: SlotRange
</span><a href="Cooked.Skeleton.html#txSkelValidityRange"><span class="hs-identifier hs-var">txSkelValidityRange</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SlotRange
forall a. Interval a
</span><span class="hs-identifier hs-var">Api.always</span></span><span class="hs-special">,</span><span>
</span><span id="line-1090"></span><span>      </span><span class="annot"><span class="annottext">txSkelSigners :: [Wallet]
</span><a href="Cooked.Skeleton.html#txSkelSigners"><span class="hs-identifier hs-var">txSkelSigners</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1091"></span><span>      </span><span class="annot"><span class="annottext">txSkelIns :: Map TxOutRef TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#txSkelIns"><span class="hs-identifier hs-var">txSkelIns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxSkelRedeemer
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span class="hs-special">,</span><span>
</span><span id="line-1092"></span><span>      </span><span class="annot"><span class="annottext">txSkelInsReference :: Set TxOutRef
</span><a href="Cooked.Skeleton.html#txSkelInsReference"><span class="hs-identifier hs-var">txSkelInsReference</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set TxOutRef
forall a. Set a
</span><span class="hs-identifier hs-var">Set.empty</span></span><span class="hs-special">,</span><span>
</span><span id="line-1093"></span><span>      </span><span class="annot"><span class="annottext">txSkelOuts :: [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOuts"><span class="hs-identifier hs-var">txSkelOuts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1094"></span><span>      </span><span class="annot"><span class="annottext">txSkelProposals :: [TxSkelProposal]
</span><a href="Cooked.Skeleton.html#txSkelProposals"><span class="hs-identifier hs-var">txSkelProposals</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-1095"></span><span>      </span><span class="annot"><span class="annottext">txSkelWithdrawals :: Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
</span><a href="Cooked.Skeleton.html#txSkelWithdrawals"><span class="hs-identifier hs-var">txSkelWithdrawals</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-1096"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-1097"></span><span>
</span><span id="line-1098"></span><span class="hs-comment">-- | The missing information on a 'TxSkel' that can only be resolved by querying</span><span>
</span><span id="line-1099"></span><span class="hs-comment">-- the state of the blockchain.</span><span>
</span><span id="line-1100"></span><span class="hs-keyword">data</span><span> </span><span id="SkelContext"><span class="annot"><a href="Cooked.Skeleton.html#SkelContext"><span class="hs-identifier hs-var">SkelContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SkelContext"><span class="annot"><a href="Cooked.Skeleton.html#SkelContext"><span class="hs-identifier hs-var">SkelContext</span></a></span></span><span>
</span><span id="line-1101"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="skelContextTxOuts"><span class="annot"><span class="annottext">SkelContext -&gt; Map TxOutRef TxOut
</span><a href="Cooked.Skeleton.html#skelContextTxOuts"><span class="hs-identifier hs-var hs-var">skelContextTxOuts</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.TxOut</span></span><span class="hs-special">,</span><span>
</span><span id="line-1102"></span><span>    </span><span id="skelContextTxSkelOutDatums"><span class="annot"><span class="annottext">SkelContext -&gt; Map DatumHash TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#skelContextTxSkelOutDatums"><span class="hs-identifier hs-var hs-var">skelContextTxSkelOutDatums</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.DatumHash</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span>
</span><span id="line-1103"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-1104"></span><span>
</span><span id="line-1105"></span><span class="annot"><span class="hs-comment">-- | Returns the full value contained in the skeleton outputs</span></span><span>
</span><span id="line-1106"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelValueInOutputs"><span class="hs-identifier hs-type">txSkelValueInOutputs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span>
</span><span id="line-1107"></span><span id="txSkelValueInOutputs"><span class="annot"><span class="annottext">txSkelValueInOutputs :: TxSkel -&gt; Value
</span><a href="Cooked.Skeleton.html#txSkelValueInOutputs"><span class="hs-identifier hs-var hs-var">txSkelValueInOutputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Optic' A_Fold NoIx TxSkel Value -&gt; TxSkel -&gt; Value
forall k a (is :: IxList) s.
(Is k A_Fold, Monoid a) =&gt;
Optic' k is s a -&gt; s -&gt; a
</span><span class="hs-identifier hs-var">foldOf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Lens' TxSkel [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOutsL"><span class="hs-identifier hs-var">txSkelOutsL</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' TxSkel [TxSkelOut]
-&gt; Optic A_Fold NoIx [TxSkelOut] [TxSkelOut] TxSkelOut TxSkelOut
-&gt; Optic A_Fold NoIx TxSkel TxSkel TxSkelOut TxSkelOut
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic A_Fold NoIx [TxSkelOut] [TxSkelOut] TxSkelOut TxSkelOut
forall (f :: * -&gt; *) a. Foldable f =&gt; Fold (f a) a
</span><span class="hs-identifier hs-var">folded</span></span><span> </span><span class="annot"><span class="annottext">Optic A_Fold NoIx TxSkel TxSkel TxSkelOut TxSkelOut
-&gt; Lens' TxSkelOut Value -&gt; Optic' A_Fold NoIx TxSkel Value
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Lens' TxSkelOut Value
</span><a href="Cooked.Skeleton.html#txSkelOutValueL"><span class="hs-identifier hs-var">txSkelOutValueL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1108"></span><span>
</span><span id="line-1109"></span><span class="hs-comment">-- | Return all data on transaction outputs. This can contain duplicates, which</span><span>
</span><span id="line-1110"></span><span class="hs-comment">-- is intended.</span><span>
</span><span id="line-1111"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelDataInOutputs"><span class="hs-identifier hs-type">txSkelDataInOutputs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Api.DatumHash</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-1112"></span><span id="txSkelDataInOutputs"><span class="annot"><span class="annottext">txSkelDataInOutputs :: TxSkel -&gt; [(DatumHash, TxSkelOutDatum)]
</span><a href="Cooked.Skeleton.html#txSkelDataInOutputs"><span class="hs-identifier hs-var hs-var">txSkelDataInOutputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1113"></span><span>  </span><span class="annot"><span class="annottext">Optic' A_Fold NoIx TxSkel TxSkelOutDatum
-&gt; (TxSkelOutDatum -&gt; [(DatumHash, TxSkelOutDatum)])
-&gt; TxSkel
-&gt; [(DatumHash, TxSkelOutDatum)]
forall k m (is :: IxList) s a.
(Is k A_Fold, Monoid m) =&gt;
Optic' k is s a -&gt; (a -&gt; m) -&gt; s -&gt; m
</span><span class="hs-identifier hs-var">foldMapOf</span></span><span>
</span><span id="line-1114"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Lens' TxSkel [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOutsL"><span class="hs-identifier hs-var">txSkelOutsL</span></a></span><span>
</span><span id="line-1115"></span><span>        </span><span class="annot"><span class="annottext">Lens' TxSkel [TxSkelOut]
-&gt; Optic A_Fold NoIx [TxSkelOut] [TxSkelOut] TxSkelOut TxSkelOut
-&gt; Optic A_Fold NoIx TxSkel TxSkel TxSkelOut TxSkelOut
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Optic A_Fold NoIx [TxSkelOut] [TxSkelOut] TxSkelOut TxSkelOut
forall (f :: * -&gt; *) a. Foldable f =&gt; Fold (f a) a
</span><span class="hs-identifier hs-var">folded</span></span><span>
</span><span id="line-1116"></span><span>        </span><span class="annot"><span class="annottext">Optic A_Fold NoIx TxSkel TxSkel TxSkelOut TxSkelOut
-&gt; Lens' TxSkelOut TxSkelOutDatum
-&gt; Optic' A_Fold NoIx TxSkel TxSkelOutDatum
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">Lens' TxSkelOut TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#txSkelOutDatumL"><span class="hs-identifier hs-var">txSkelOutDatumL</span></a></span><span>
</span><span id="line-1117"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1118"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679819356"><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679819356"><span class="hs-identifier hs-var">txSkelOutDatum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1119"></span><span>        </span><span class="annot"><span class="annottext">[(DatumHash, TxSkelOutDatum)]
-&gt; (Datum -&gt; [(DatumHash, TxSkelOutDatum)])
-&gt; Maybe Datum
-&gt; [(DatumHash, TxSkelOutDatum)]
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span>
</span><span id="line-1120"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-1121"></span><span>          </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679819358"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679819358"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Datum -&gt; DatumHash
</span><span class="hs-identifier hs-var">Script.datumHash</span></span><span> </span><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679819358"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679819356"><span class="hs-identifier hs-var">txSkelOutDatum</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-1122"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; Maybe Datum
</span><a href="Cooked.Skeleton.html#txSkelOutUntypedDatum"><span class="hs-identifier hs-var">txSkelOutUntypedDatum</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="#local-6989586621679819356"><span class="hs-identifier hs-var">txSkelOutDatum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1123"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1124"></span><span>
</span><span id="line-1125"></span><span class="annot"><span class="hs-comment">-- | All validators which will receive transaction outputs</span></span><span>
</span><span id="line-1126"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelValidatorsInOutputs"><span class="hs-identifier hs-type">txSkelValidatorsInOutputs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.ValidatorHash</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Validator</span></span><span class="hs-special">)</span><span>
</span><span id="line-1127"></span><span id="txSkelValidatorsInOutputs"><span class="annot"><span class="annottext">txSkelValidatorsInOutputs :: TxSkel -&gt; Map ValidatorHash (Versioned Validator)
</span><a href="Cooked.Skeleton.html#txSkelValidatorsInOutputs"><span class="hs-identifier hs-var hs-var">txSkelValidatorsInOutputs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1128"></span><span>  </span><span class="annot"><span class="annottext">[(ValidatorHash, Versioned Validator)]
-&gt; Map ValidatorHash (Versioned Validator)
forall k a. Ord k =&gt; [(k, a)] -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.fromList</span></span><span>
</span><span id="line-1129"></span><span>    </span><span class="annot"><span class="annottext">([(ValidatorHash, Versioned Validator)]
 -&gt; Map ValidatorHash (Versioned Validator))
-&gt; (TxSkel -&gt; [(ValidatorHash, Versioned Validator)])
-&gt; TxSkel
-&gt; Map ValidatorHash (Versioned Validator)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TxSkelOut -&gt; Maybe (ValidatorHash, Versioned Validator))
-&gt; [TxSkelOut] -&gt; [(ValidatorHash, Versioned Validator)]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Versioned Validator -&gt; (ValidatorHash, Versioned Validator))
-&gt; Maybe (Versioned Validator)
-&gt; Maybe (ValidatorHash, Versioned Validator)
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621679819361"><span class="annot"><span class="annottext">Versioned Validator
</span><a href="#local-6989586621679819361"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Versioned Validator -&gt; ValidatorHash
</span><span class="hs-identifier hs-var">Script.validatorHash</span></span><span> </span><span class="annot"><span class="annottext">Versioned Validator
</span><a href="#local-6989586621679819361"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Versioned Validator
</span><a href="#local-6989586621679819361"><span class="hs-identifier hs-var">val</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Maybe (Versioned Validator)
 -&gt; Maybe (ValidatorHash, Versioned Validator))
-&gt; (TxSkelOut -&gt; Maybe (Versioned Validator))
-&gt; TxSkelOut
-&gt; Maybe (ValidatorHash, Versioned Validator)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOut -&gt; Maybe (Versioned Validator)
</span><a href="Cooked.Skeleton.html#txSkelOutValidator"><span class="hs-identifier hs-var">txSkelOutValidator</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1130"></span><span>    </span><span class="annot"><span class="annottext">([TxSkelOut] -&gt; [(ValidatorHash, Versioned Validator)])
-&gt; (TxSkel -&gt; [TxSkelOut])
-&gt; TxSkel
-&gt; [(ValidatorHash, Versioned Validator)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOuts"><span class="hs-identifier hs-var">txSkelOuts</span></a></span><span>
</span><span id="line-1131"></span><span>
</span><span id="line-1132"></span><span class="annot"><span class="hs-comment">-- | All validators in the reference script field of transaction outputs</span></span><span>
</span><span id="line-1133"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelReferenceScripts"><span class="hs-identifier hs-type">txSkelReferenceScripts</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Map</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.ValidatorHash</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Validator</span></span><span class="hs-special">)</span><span>
</span><span id="line-1134"></span><span id="txSkelReferenceScripts"><span class="annot"><span class="annottext">txSkelReferenceScripts :: TxSkel -&gt; Map ValidatorHash (Versioned Validator)
</span><a href="Cooked.Skeleton.html#txSkelReferenceScripts"><span class="hs-identifier hs-var hs-var">txSkelReferenceScripts</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1135"></span><span>  </span><span class="annot"><span class="annottext">[Map ValidatorHash (Versioned Validator)]
-&gt; Map ValidatorHash (Versioned Validator)
forall a. Monoid a =&gt; [a] -&gt; a
</span><span class="hs-identifier hs-var">mconcat</span></span><span>
</span><span id="line-1136"></span><span>    </span><span class="annot"><span class="annottext">([Map ValidatorHash (Versioned Validator)]
 -&gt; Map ValidatorHash (Versioned Validator))
-&gt; (TxSkel -&gt; [Map ValidatorHash (Versioned Validator)])
-&gt; TxSkel
-&gt; Map ValidatorHash (Versioned Validator)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TxSkelOut -&gt; Map ValidatorHash (Versioned Validator))
-&gt; [TxSkelOut] -&gt; [Map ValidatorHash (Versioned Validator)]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span>
</span><span id="line-1137"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679819380"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679819380"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1138"></span><span>          </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679819380"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o
-&gt; Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
-&gt; Maybe (ReferenceScriptType o)
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
forall o.
IsAbstractOutput o =&gt;
Lens' o (Maybe (ReferenceScriptType o))
</span><a href="Cooked.Output.html#outputReferenceScriptL"><span class="hs-identifier hs-var">outputReferenceScriptL</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1139"></span><span>            </span><span class="annot"><span class="annottext">Maybe (ReferenceScriptType o)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Map ValidatorHash (Versioned Validator)
forall k a. Map k a
</span><span class="hs-identifier hs-var">Map.empty</span></span><span>
</span><span id="line-1140"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679819382"><span class="annot"><span class="annottext">ReferenceScriptType o
</span><a href="#local-6989586621679819382"><span class="hs-identifier hs-var">x</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1141"></span><span>              </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679819383"><span class="annot"><span class="annottext">vScript :: Versioned Script
</span><a href="#local-6989586621679819383"><span class="hs-identifier hs-var">vScript</span></a></span></span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span id="local-6989586621679819385"><span class="annot"><span class="annottext">Script
</span><a href="#local-6989586621679819385"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span id="local-6989586621679819386"><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621679819386"><span class="hs-identifier hs-var">version</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReferenceScriptType o -&gt; Versioned Script
forall a. ToVersionedScript a =&gt; a -&gt; Versioned Script
</span><a href="Cooked.Conversion.ToVersionedScript.html#toVersionedScript"><span class="hs-identifier hs-var">toVersionedScript</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceScriptType o
</span><a href="#local-6989586621679819382"><span class="hs-identifier hs-var">x</span></a></span><span>
</span><span id="line-1142"></span><span>                  </span><span class="annot"><span class="hs-identifier hs-type">Script.ScriptHash</span></span><span> </span><span id="local-6989586621679819388"><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621679819388"><span class="hs-identifier hs-var">hash</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Versioned Script -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><a href="Cooked.Conversion.ToScriptHash.html#toScriptHash"><span class="hs-identifier hs-var">toScriptHash</span></a></span><span> </span><span class="annot"><span class="annottext">Versioned Script
</span><a href="#local-6989586621679819383"><span class="hs-identifier hs-var">vScript</span></a></span><span>
</span><span id="line-1143"></span><span>               </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">ValidatorHash
-&gt; Versioned Validator -&gt; Map ValidatorHash (Versioned Validator)
forall k a. k -&gt; a -&gt; Map k a
</span><span class="hs-identifier hs-var">Map.singleton</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinByteString -&gt; ValidatorHash
</span><span class="hs-identifier hs-var">Script.ValidatorHash</span></span><span> </span><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621679819388"><span class="hs-identifier hs-var">hash</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Versioned Validator -&gt; Map ValidatorHash (Versioned Validator))
-&gt; Versioned Validator -&gt; Map ValidatorHash (Versioned Validator)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Validator -&gt; Language -&gt; Versioned Validator
forall script. script -&gt; Language -&gt; Versioned script
</span><span class="hs-identifier hs-var">Script.Versioned</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Script -&gt; Validator
</span><span class="hs-identifier hs-var">Script.Validator</span></span><span> </span><span class="annot"><span class="annottext">Script
</span><a href="#local-6989586621679819385"><span class="hs-identifier hs-var">script</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621679819386"><span class="hs-identifier hs-var">version</span></a></span><span>
</span><span id="line-1144"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-1145"></span><span>    </span><span class="annot"><span class="annottext">([TxSkelOut] -&gt; [Map ValidatorHash (Versioned Validator)])
-&gt; (TxSkel -&gt; [TxSkelOut])
-&gt; TxSkel
-&gt; [Map ValidatorHash (Versioned Validator)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOuts"><span class="hs-identifier hs-var">txSkelOuts</span></a></span><span>
</span><span id="line-1146"></span><span>
</span><span id="line-1147"></span><span class="annot"><span class="hs-comment">-- | All `TxOutRefs` in reference inputs</span></span><span>
</span><span id="line-1148"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelReferenceTxOutRefs"><span class="hs-identifier hs-type">txSkelReferenceTxOutRefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span class="hs-special">]</span><span>
</span><span id="line-1149"></span><span id="txSkelReferenceTxOutRefs"><span class="annot"><span class="annottext">txSkelReferenceTxOutRefs :: TxSkel -&gt; [TxOutRef]
</span><a href="Cooked.Skeleton.html#txSkelReferenceTxOutRefs"><span class="hs-identifier hs-var hs-var">txSkelReferenceTxOutRefs</span></a></span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679819392"><span id="local-6989586621679819393"><span id="local-6989586621679819394"><span id="local-6989586621679819395"><span id="local-6989586621679819396"><span id="local-6989586621679819397"><span id="local-6989586621679819398"><span id="local-6989586621679819399"><span id="local-6989586621679819400"><span id="local-6989586621679819401"><span class="annot"><span class="annottext">[Wallet]
[TxSkelProposal]
[TxSkelOut]
Set TxOutRef
Set TxLabel
Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
Map TxOutRef TxSkelRedeemer
TxSkelMints
SlotRange
TxOpts
txSkelWithdrawals :: TxSkel
-&gt; Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
txSkelLabel :: TxSkel -&gt; Set TxLabel
txSkelOpts :: TxSkel -&gt; TxOpts
txSkelMints :: TxSkel -&gt; TxSkelMints
txSkelSigners :: TxSkel -&gt; [Wallet]
txSkelValidityRange :: TxSkel -&gt; SlotRange
txSkelIns :: TxSkel -&gt; Map TxOutRef TxSkelRedeemer
txSkelInsReference :: TxSkel -&gt; Set TxOutRef
txSkelOuts :: TxSkel -&gt; [TxSkelOut]
txSkelProposals :: TxSkel -&gt; [TxSkelProposal]
txSkelLabel :: Set TxLabel
txSkelOpts :: TxOpts
txSkelMints :: TxSkelMints
txSkelSigners :: [Wallet]
txSkelValidityRange :: SlotRange
txSkelIns :: Map TxOutRef TxSkelRedeemer
txSkelInsReference :: Set TxOutRef
txSkelOuts :: [TxSkelOut]
txSkelProposals :: [TxSkelProposal]
txSkelWithdrawals :: Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
</span><a href="Cooked.Skeleton.html#txSkelWithdrawals"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1150"></span><span>  </span><span class="hs-comment">-- direct reference inputs</span><span>
</span><span id="line-1151"></span><span>  </span><span class="annot"><span class="annottext">Set TxOutRef -&gt; [TxOutRef]
forall a. Set a -&gt; [a]
</span><span class="hs-identifier hs-var">Set.toList</span></span><span> </span><span class="annot"><span class="annottext">Set TxOutRef
</span><a href="#local-6989586621679819398"><span class="hs-identifier hs-var">txSkelInsReference</span></a></span><span>
</span><span id="line-1152"></span><span>    </span><span class="hs-comment">-- reference inputs in inputs redeemers</span><span>
</span><span id="line-1153"></span><span>    </span><span class="annot"><span class="annottext">[TxOutRef] -&gt; [TxOutRef] -&gt; [TxOutRef]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(TxSkelRedeemer -&gt; Maybe TxOutRef)
-&gt; [TxSkelRedeemer] -&gt; [TxOutRef]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer -&gt; Maybe TxOutRef
</span><a href="Cooked.Skeleton.html#txSkelReferenceInput"><span class="hs-identifier hs-var">txSkelReferenceInput</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map TxOutRef TxSkelRedeemer -&gt; [TxSkelRedeemer]
forall k a. Map k a -&gt; [a]
</span><span class="hs-identifier hs-var">Map.elems</span></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxSkelRedeemer
</span><a href="#local-6989586621679819397"><span class="hs-identifier hs-var">txSkelIns</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1154"></span><span>    </span><span class="hs-comment">-- reference inputs in proposals redeemers</span><span>
</span><span id="line-1155"></span><span>    </span><span class="annot"><span class="annottext">[TxOutRef] -&gt; [TxOutRef] -&gt; [TxOutRef]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">((Versioned Script, TxSkelRedeemer) -&gt; Maybe TxOutRef)
-&gt; [(Versioned Script, TxSkelRedeemer)] -&gt; [TxOutRef]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelRedeemer -&gt; Maybe TxOutRef
</span><a href="Cooked.Skeleton.html#txSkelReferenceInput"><span class="hs-identifier hs-var">txSkelReferenceInput</span></a></span><span> </span><span class="annot"><span class="annottext">(TxSkelRedeemer -&gt; Maybe TxOutRef)
-&gt; ((Versioned Script, TxSkelRedeemer) -&gt; TxSkelRedeemer)
-&gt; (Versioned Script, TxSkelRedeemer)
-&gt; Maybe TxOutRef
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Versioned Script, TxSkelRedeemer) -&gt; TxSkelRedeemer
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TxSkelProposal -&gt; Maybe (Versioned Script, TxSkelRedeemer))
-&gt; [TxSkelProposal] -&gt; [(Versioned Script, TxSkelRedeemer)]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="annot"><span class="annottext">TxSkelProposal -&gt; Maybe (Versioned Script, TxSkelRedeemer)
</span><a href="Cooked.Skeleton.html#txSkelProposalWitness"><span class="hs-identifier hs-var">txSkelProposalWitness</span></a></span><span> </span><span class="annot"><span class="annottext">[TxSkelProposal]
</span><a href="#local-6989586621679819400"><span class="hs-identifier hs-var">txSkelProposals</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1156"></span><span>    </span><span class="hs-comment">-- reference inputs in mints redeemers</span><span>
</span><span id="line-1157"></span><span>    </span><span class="annot"><span class="annottext">[TxOutRef] -&gt; [TxOutRef] -&gt; [TxOutRef]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">((Versioned MintingPolicy,
  (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))
 -&gt; Maybe TxOutRef)
-&gt; [(Versioned MintingPolicy,
     (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))]
-&gt; [TxOutRef]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">mapMaybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelRedeemer -&gt; Maybe TxOutRef
</span><a href="Cooked.Skeleton.html#txSkelReferenceInput"><span class="hs-identifier hs-var">txSkelReferenceInput</span></a></span><span> </span><span class="annot"><span class="annottext">(TxSkelRedeemer -&gt; Maybe TxOutRef)
-&gt; ((Versioned MintingPolicy,
     (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))
    -&gt; TxSkelRedeemer)
-&gt; (Versioned MintingPolicy,
    (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))
-&gt; Maybe TxOutRef
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(TxSkelRedeemer, NEMap TokenName (NonZero Integer))
-&gt; TxSkelRedeemer
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((TxSkelRedeemer, NEMap TokenName (NonZero Integer))
 -&gt; TxSkelRedeemer)
-&gt; ((Versioned MintingPolicy,
     (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))
    -&gt; (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))
-&gt; (Versioned MintingPolicy,
    (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))
-&gt; TxSkelRedeemer
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(Versioned MintingPolicy,
 (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))
-&gt; (TxSkelRedeemer, NEMap TokenName (NonZero Integer))
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkelMints
-&gt; [(Versioned MintingPolicy,
     (TxSkelRedeemer, NEMap TokenName (NonZero Integer)))]
forall k a. Map k a -&gt; [(k, a)]
</span><span class="hs-identifier hs-var">Map.toList</span></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679819394"><span class="hs-identifier hs-var">txSkelMints</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-1158"></span><span>
</span><span id="line-1159"></span><span class="hs-comment">-- | All `TxOutRefs` known by a given transaction skeleton. This includes</span><span>
</span><span id="line-1160"></span><span class="hs-comment">-- TxOutRef`s used as inputs of the skeleton and `TxOutRef`s used as reference</span><span>
</span><span id="line-1161"></span><span class="hs-comment">-- inputs of the skeleton.  This does not include additional possible</span><span>
</span><span id="line-1162"></span><span class="hs-comment">-- `TxOutRef`s used for balancing and additional `TxOutRef`s used as collateral</span><span>
</span><span id="line-1163"></span><span class="hs-comment">-- inputs, as they are not part of the skeleton.</span><span>
</span><span id="line-1164"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelKnownTxOutRefs"><span class="hs-identifier hs-type">txSkelKnownTxOutRefs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Api.TxOutRef</span></span><span class="hs-special">]</span><span>
</span><span id="line-1165"></span><span id="txSkelKnownTxOutRefs"><span class="annot"><span class="annottext">txSkelKnownTxOutRefs :: TxSkel -&gt; [TxOutRef]
</span><a href="Cooked.Skeleton.html#txSkelKnownTxOutRefs"><span class="hs-identifier hs-var hs-var">txSkelKnownTxOutRefs</span></a></span></span><span> </span><span id="local-6989586621679819404"><span class="annot"><span class="annottext">skel :: TxSkel
</span><a href="#local-6989586621679819404"><span class="hs-identifier hs-var">skel</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679819405"><span id="local-6989586621679819406"><span id="local-6989586621679819407"><span id="local-6989586621679819408"><span id="local-6989586621679819409"><span id="local-6989586621679819410"><span id="local-6989586621679819411"><span id="local-6989586621679819412"><span id="local-6989586621679819413"><span id="local-6989586621679819414"><span class="annot"><span class="annottext">[Wallet]
[TxSkelProposal]
[TxSkelOut]
Set TxOutRef
Set TxLabel
Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
Map TxOutRef TxSkelRedeemer
TxSkelMints
SlotRange
TxOpts
txSkelWithdrawals :: TxSkel
-&gt; Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
txSkelLabel :: TxSkel -&gt; Set TxLabel
txSkelOpts :: TxSkel -&gt; TxOpts
txSkelMints :: TxSkel -&gt; TxSkelMints
txSkelSigners :: TxSkel -&gt; [Wallet]
txSkelValidityRange :: TxSkel -&gt; SlotRange
txSkelIns :: TxSkel -&gt; Map TxOutRef TxSkelRedeemer
txSkelInsReference :: TxSkel -&gt; Set TxOutRef
txSkelOuts :: TxSkel -&gt; [TxSkelOut]
txSkelProposals :: TxSkel -&gt; [TxSkelProposal]
txSkelLabel :: Set TxLabel
txSkelOpts :: TxOpts
txSkelMints :: TxSkelMints
txSkelSigners :: [Wallet]
txSkelValidityRange :: SlotRange
txSkelIns :: Map TxOutRef TxSkelRedeemer
txSkelInsReference :: Set TxOutRef
txSkelOuts :: [TxSkelOut]
txSkelProposals :: [TxSkelProposal]
txSkelWithdrawals :: Map (Either (Versioned Script) PubKeyHash) (TxSkelRedeemer, Ada)
</span><a href="Cooked.Skeleton.html#txSkelWithdrawals"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; [TxOutRef]
</span><a href="Cooked.Skeleton.html#txSkelReferenceTxOutRefs"><span class="hs-identifier hs-var">txSkelReferenceTxOutRefs</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel
</span><a href="#local-6989586621679819404"><span class="hs-identifier hs-var">skel</span></a></span><span> </span><span class="annot"><span class="annottext">[TxOutRef] -&gt; [TxOutRef] -&gt; [TxOutRef]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxSkelRedeemer -&gt; [TxOutRef]
forall k a. Map k a -&gt; [k]
</span><span class="hs-identifier hs-var">Map.keys</span></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxSkelRedeemer
</span><a href="#local-6989586621679819410"><span class="hs-identifier hs-var">txSkelIns</span></a></span><span>
</span><span id="line-1166"></span><span>
</span><span id="line-1167"></span><span class="annot"><span class="hs-comment">-- * Various Optics on 'TxSkels' and all the other types defined here</span></span><span>
</span><span id="line-1168"></span><span>
</span><span id="line-1169"></span><span class="annot"><span class="hs-comment">-- | Decide if a transaction output has a certain owner and datum type.</span></span><span>
</span><span id="line-1170"></span><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutOwnerTypeP"><span class="hs-identifier hs-type">txSkelOutOwnerTypeP</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1171"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679816886"><span class="annot"><a href="#local-6989586621679816886"><span class="hs-identifier hs-type">ownerType</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-1172"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cooked.Conversion.ToCredential.html#ToCredential"><span class="hs-identifier hs-type">ToCredential</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679816886"><span class="hs-identifier hs-type">ownerType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1173"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="#local-6989586621679816886"><span class="hs-identifier hs-type">ownerType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1174"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.html#IsTxSkelOutAllowedOwner"><span class="hs-identifier hs-type">IsTxSkelOutAllowedOwner</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679816886"><span class="hs-identifier hs-type">ownerType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-1175"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679816886"><span class="hs-identifier hs-type">ownerType</span></a></span><span>
</span><span id="line-1176"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1177"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Prism'</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Output.html#ConcreteOutput"><span class="hs-identifier hs-type">ConcreteOutput</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679816886"><span class="hs-identifier hs-type">ownerType</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Value</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-1178"></span><span id="txSkelOutOwnerTypeP"><span class="annot"><span class="annottext">txSkelOutOwnerTypeP :: forall ownerType.
(ToCredential ownerType, Show ownerType,
 IsTxSkelOutAllowedOwner ownerType, Typeable ownerType) =&gt;
Prism'
  TxSkelOut
  (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script))
</span><a href="Cooked.Skeleton.html#txSkelOutOwnerTypeP"><span class="hs-identifier hs-var hs-var">txSkelOutOwnerTypeP</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1179"></span><span>  </span><span class="annot"><span class="annottext">(ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script)
 -&gt; TxSkelOut)
-&gt; (TxSkelOut
    -&gt; Maybe
         (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script)))
-&gt; Prism
     TxSkelOut
     TxSkelOut
     (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script))
     (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script))
forall b s a. (b -&gt; s) -&gt; (s -&gt; Maybe a) -&gt; Prism s s a b
</span><span class="hs-identifier hs-var">prism'</span></span><span>
</span><span id="line-1180"></span><span>    </span><span class="annot"><span class="annottext">ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script)
-&gt; TxSkelOut
forall a.
(Show a, Typeable a, IsTxInfoOutput a,
 IsTxSkelOutAllowedOwner (OwnerType a), Typeable (OwnerType a),
 ToCredential (OwnerType a), DatumType a ~ TxSkelOutDatum,
 ValueType a ~ Value, ToVersionedScript (ReferenceScriptType a),
 Show (OwnerType a), Show (ReferenceScriptType a),
 Typeable (ReferenceScriptType a)) =&gt;
a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span>
</span><span id="line-1181"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679819473"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679819473"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1182"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">OwnerType o -&gt; TypeRep (OwnerType o)
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679819473"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o (OwnerType o) -&gt; OwnerType o
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (OwnerType o)
forall o. IsAbstractOutput o =&gt; Lens' o (OwnerType o)
</span><a href="Cooked.Output.html#outputOwnerL"><span class="hs-identifier hs-var">outputOwnerL</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TypeRep (OwnerType o)
-&gt; TypeRep ownerType -&gt; Maybe (OwnerType o :~~: ownerType)
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-operator hs-var">`eqTypeRep`</span></span><span> </span><span class="annot"><span class="annottext">forall a. Typeable a =&gt; TypeRep a
forall {k} (a :: k). Typeable a =&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeRep</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679816886"><span class="hs-identifier hs-type">ownerType</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1183"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">OwnerType o :~~: ownerType
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1184"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679819481"><span class="annot"><span class="annottext">cOut :: ConcreteOutput
  (OwnerType o) (DatumType o) (ValueType o) (ReferenceScriptType o)
</span><a href="#local-6989586621679819481"><span class="hs-identifier hs-var hs-var">cOut</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">o
-&gt; ConcreteOutput
     (OwnerType o) (DatumType o) (ValueType o) (ReferenceScriptType o)
forall out.
IsAbstractOutput out =&gt;
out
-&gt; ConcreteOutput
     (OwnerType out)
     (DatumType out)
     (ValueType out)
     (ReferenceScriptType out)
</span><a href="Cooked.Output.html#fromAbstractOutput"><span class="hs-identifier hs-var">fromAbstractOutput</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679819473"><span class="hs-identifier hs-var">output</span></a></span><span>
</span><span id="line-1185"></span><span>             </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script)
-&gt; Maybe
     (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script))
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script)
 -&gt; Maybe
      (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script)))
-&gt; ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script)
-&gt; Maybe
     (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ConcreteOutput
  (OwnerType o) (DatumType o) (ValueType o) (ReferenceScriptType o)
</span><a href="#local-6989586621679819481"><span class="hs-identifier hs-var">cOut</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="Cooked.Output.html#concreteOutputReferenceScript"><span class="hs-identifier hs-var">concreteOutputReferenceScript</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Cooked.Conversion.ToVersionedScript.html#toVersionedScript"><span class="hs-identifier hs-type">toVersionedScript</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Cooked.Output.html#concreteOutputReferenceScript"><span class="hs-identifier hs-var">concreteOutputReferenceScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679819481"><span class="hs-identifier hs-type">cOut</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-1186"></span><span>          </span><span class="annot"><span class="annottext">Maybe (OwnerType o :~~: ownerType)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe
  (ConcreteOutput ownerType TxSkelOutDatum Value (Versioned Script))
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-1187"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1188"></span><span>
</span><span id="line-1189"></span><span id="local-6989586621679816900"><span class="annot"><a href="Cooked.Skeleton.html#txSkelOutputDatumTypeAT"><span class="hs-identifier hs-type">txSkelOutputDatumTypeAT</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-1190"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Api.FromData</span></span><span> </span><span class="annot"><a href="#local-6989586621679816900"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679816900"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-1191"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">AffineTraversal'</span></span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679816900"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-1192"></span><span id="txSkelOutputDatumTypeAT"><span class="annot"><span class="annottext">txSkelOutputDatumTypeAT :: forall a. (FromData a, Typeable a) =&gt; AffineTraversal' TxSkelOut a
</span><a href="Cooked.Skeleton.html#txSkelOutputDatumTypeAT"><span class="hs-identifier hs-var hs-var">txSkelOutputDatumTypeAT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-1193"></span><span>  </span><span class="annot"><span class="annottext">(TxSkelOut -&gt; Either TxSkelOut a)
-&gt; (TxSkelOut -&gt; a -&gt; TxSkelOut)
-&gt; AffineTraversal TxSkelOut TxSkelOut a a
forall s t a b.
(s -&gt; Either t a) -&gt; (s -&gt; b -&gt; t) -&gt; AffineTraversal s t a b
</span><span class="hs-identifier hs-var">atraversal</span></span><span>
</span><span id="line-1194"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679819486"><span class="annot"><span class="annottext">TxSkelOut
</span><a href="#local-6989586621679819486"><span class="hs-identifier hs-var">txSkelOut</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxSkelOut -&gt; Maybe Datum
</span><a href="#local-6989586621679819487"><span class="hs-identifier hs-var">txSkelOutDatumComplete</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelOut
</span><a href="#local-6989586621679819486"><span class="hs-identifier hs-var">txSkelOut</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1195"></span><span>        </span><span class="annot"><span class="annottext">Maybe Datum
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxSkelOut -&gt; Either TxSkelOut a
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOut
</span><a href="#local-6989586621679819486"><span class="hs-identifier hs-var">txSkelOut</span></a></span><span>
</span><span id="line-1196"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Api.Datum</span></span><span> </span><span id="local-6989586621679819488"><span class="annot"><span class="annottext">BuiltinData
</span><a href="#local-6989586621679819488"><span class="hs-identifier hs-var">datum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Maybe a
forall a. FromData a =&gt; BuiltinData -&gt; Maybe a
</span><span class="hs-identifier hs-var">Api.fromBuiltinData</span></span><span> </span><span class="annot"><span class="annottext">BuiltinData
</span><a href="#local-6989586621679819488"><span class="hs-identifier hs-var">datum</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1197"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679819489"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679819489"><span class="hs-identifier hs-var">tyDatum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; Either TxSkelOut a
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679819489"><span class="hs-identifier hs-var">tyDatum</span></a></span><span>
</span><span id="line-1198"></span><span>          </span><span class="annot"><span class="annottext">Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxSkelOut -&gt; Either TxSkelOut a
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">TxSkelOut
</span><a href="#local-6989586621679819486"><span class="hs-identifier hs-var">txSkelOut</span></a></span><span>
</span><span id="line-1199"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1200"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679819523"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679819523"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679819524"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679819524"><span class="hs-identifier hs-var">newTyDatum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-1201"></span><span>        </span><span class="annot"><span class="annottext">o -&gt; TxSkelOut
forall a.
(Show a, Typeable a, IsTxInfoOutput a,
 IsTxSkelOutAllowedOwner (OwnerType a), Typeable (OwnerType a),
 ToCredential (OwnerType a), DatumType a ~ TxSkelOutDatum,
 ValueType a ~ Value, ToVersionedScript (ReferenceScriptType a),
 Show (OwnerType a), Show (ReferenceScriptType a),
 Typeable (ReferenceScriptType a)) =&gt;
a -&gt; TxSkelOut
</span><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-var">Pays</span></a></span><span> </span><span class="annot"><span class="annottext">(o -&gt; TxSkelOut) -&gt; o -&gt; TxSkelOut
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-1202"></span><span>          </span><span class="annot"><span class="annottext">Optic A_Lens NoIx o o TxSkelOutDatum TxSkelOutDatum
-&gt; (TxSkelOutDatum -&gt; TxSkelOutDatum) -&gt; o -&gt; o
forall k (is :: IxList) s t a b.
Is k A_Setter =&gt;
Optic k is s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><span class="hs-identifier hs-var">over</span></span><span>
</span><span id="line-1203"></span><span>            </span><span class="annot"><span class="annottext">Lens' o (DatumType o)
Optic A_Lens NoIx o o TxSkelOutDatum TxSkelOutDatum
forall o. IsAbstractOutput o =&gt; Lens' o (DatumType o)
</span><a href="Cooked.Output.html#outputDatumL"><span class="hs-identifier hs-var">outputDatumL</span></a></span><span>
</span><span id="line-1204"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-1205"></span><span>                </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span>
</span><span id="line-1206"></span><span>                </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679819531"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679819531"><span class="hs-identifier hs-var">tyDatum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall a. TxSkelOutDatumConstrs a =&gt; a -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-var">TxSkelOutDatum</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; TxSkelOutDatum) -&gt; a -&gt; TxSkelOutDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall b a. (Typeable b, Typeable a) =&gt; b -&gt; a -&gt; b
</span><a href="#local-6989586621679819532"><span class="hs-identifier hs-var">replaceDatumOnCorrectType</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679819531"><span class="hs-identifier hs-var">tyDatum</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679819524"><span class="hs-identifier hs-var">newTyDatum</span></a></span><span>
</span><span id="line-1207"></span><span>                </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span id="local-6989586621679819538"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679819538"><span class="hs-identifier hs-var">tyDatum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall a. TxSkelOutDatumConstrs a =&gt; a -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-var">TxSkelOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; TxSkelOutDatum) -&gt; a -&gt; TxSkelOutDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall b a. (Typeable b, Typeable a) =&gt; b -&gt; a -&gt; b
</span><a href="#local-6989586621679819532"><span class="hs-identifier hs-var">replaceDatumOnCorrectType</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679819538"><span class="hs-identifier hs-var">tyDatum</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679819524"><span class="hs-identifier hs-var">newTyDatum</span></a></span><span>
</span><span id="line-1208"></span><span>                </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-type">TxSkelOutInlineDatum</span></a></span><span> </span><span id="local-6989586621679819544"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679819544"><span class="hs-identifier hs-var">tyDatum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; TxSkelOutDatum
forall a. TxSkelOutDatumConstrs a =&gt; a -&gt; TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-var">TxSkelOutInlineDatum</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; TxSkelOutDatum) -&gt; a -&gt; TxSkelOutDatum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; a
forall b a. (Typeable b, Typeable a) =&gt; b -&gt; a -&gt; b
</span><a href="#local-6989586621679819532"><span class="hs-identifier hs-var">replaceDatumOnCorrectType</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679819544"><span class="hs-identifier hs-var">tyDatum</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679819524"><span class="hs-identifier hs-var">newTyDatum</span></a></span><span>
</span><span id="line-1209"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-1210"></span><span>            </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679819523"><span class="hs-identifier hs-var">output</span></a></span><span>
</span><span id="line-1211"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-1212"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-1213"></span><span>    </span><span id="local-6989586621679816916"><span id="local-6989586621679816917"><span class="annot"><a href="#local-6989586621679819532"><span class="hs-identifier hs-type">replaceDatumOnCorrectType</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679816916"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679816917"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679816916"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679816917"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679816916"><span class="hs-identifier hs-type">b</span></a></span></span></span><span>
</span><span id="line-1214"></span><span>    </span><span id="local-6989586621679819532"><span class="annot"><span class="annottext">replaceDatumOnCorrectType :: forall b a. (Typeable b, Typeable a) =&gt; b -&gt; a -&gt; b
</span><a href="#local-6989586621679819532"><span class="hs-identifier hs-var hs-var">replaceDatumOnCorrectType</span></a></span></span><span> </span><span id="local-6989586621679819549"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679819549"><span class="hs-identifier hs-var">old</span></a></span></span><span> </span><span id="local-6989586621679819550"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679819550"><span class="hs-identifier hs-var">new</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">b -&gt; TypeRep b
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679819549"><span class="hs-identifier hs-var">old</span></a></span><span> </span><span class="annot"><span class="annottext">TypeRep b -&gt; TypeRep a -&gt; Maybe (b :~~: a)
forall k1 k2 (a :: k1) (b :: k2).
TypeRep a -&gt; TypeRep b -&gt; Maybe (a :~~: b)
</span><span class="hs-operator hs-var">`eqTypeRep`</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; TypeRep a
forall a. Typeable a =&gt; a -&gt; TypeRep a
</span><span class="hs-identifier hs-var">typeOf</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679819550"><span class="hs-identifier hs-var">new</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-1215"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">b :~~: a
</span><span class="hs-identifier hs-var">HRefl</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b
a
</span><a href="#local-6989586621679819550"><span class="hs-identifier hs-var">new</span></a></span><span>
</span><span id="line-1216"></span><span>      </span><span class="annot"><span class="annottext">Maybe (b :~~: a)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621679819549"><span class="hs-identifier hs-var">old</span></a></span><span>
</span><span id="line-1217"></span><span>
</span><span id="line-1218"></span><span>    </span><span class="annot"><a href="#local-6989586621679819487"><span class="hs-identifier hs-type">txSkelOutDatumComplete</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Datum</span></span><span>
</span><span id="line-1219"></span><span>    </span><span id="local-6989586621679819487"><span class="annot"><span class="annottext">txSkelOutDatumComplete :: TxSkelOut -&gt; Maybe Datum
</span><a href="#local-6989586621679819487"><span class="hs-identifier hs-var hs-var">txSkelOutDatumComplete</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679819569"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679819569"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkelOutDatum -&gt; Maybe Datum
</span><a href="Cooked.Skeleton.html#txSkelOutUntypedDatum"><span class="hs-identifier hs-var">txSkelOutUntypedDatum</span></a></span><span> </span><span class="annot"><span class="annottext">(TxSkelOutDatum -&gt; Maybe Datum) -&gt; TxSkelOutDatum -&gt; Maybe Datum
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679819569"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o TxSkelOutDatum -&gt; TxSkelOutDatum
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><span class="hs-operator hs-var">^.</span></span><span> </span><span class="annot"><span class="annottext">Lens' o (DatumType o)
Optic' A_Lens NoIx o TxSkelOutDatum
forall o. IsAbstractOutput o =&gt; Lens' o (DatumType o)
</span><a href="Cooked.Output.html#outputDatumL"><span class="hs-identifier hs-var">outputDatumL</span></a></span><span>
</span><span id="line-1220"></span></pre></body></html>