<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- | This module exposes the notion of user used everywhere in our</span><span>
</span><span id="line-2"></span><span class="hs-comment">-- 'Cooked.Skeleton.TxSkel'. A user can either be a script or a pubkey, and</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- might be used in a redemption or an allocation setting. All of this is</span><span>
</span><span id="line-4"></span><span class="hs-comment">-- grouped under a single data type. Typically, users should rarely be created</span><span>
</span><span id="line-5"></span><span class="hs-comment">-- by hands, and instead, smart constructors adapted to the user's location in</span><span>
</span><span id="line-6"></span><span class="hs-comment">-- the skeleton should be used.</span><span>
</span><span id="line-7"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cooked.Skeleton.User</span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-comment">-- * Aliases</span></span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#VScript"><span class="hs-identifier">VScript</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#ToVScript"><span class="hs-identifier">ToVScript</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier">toVScript</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Data types</span></span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserMode"><span class="hs-identifier">UserMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserKind"><span class="hs-identifier">UserKind</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier">User</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#Peer"><span class="hs-identifier">Peer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><span class="hs-comment">-- * Optics</span></span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#userHashG"><span class="hs-identifier">userHashG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#userCredentialG"><span class="hs-identifier">userCredentialG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#userTxSkelRedeemerAT"><span class="hs-identifier">userTxSkelRedeemerAT</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#userVScriptAT"><span class="hs-identifier">userVScriptAT</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#userScriptHashAF"><span class="hs-identifier">userScriptHashAF</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#userPubKeyHashAT"><span class="hs-identifier">userPubKeyHashAT</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#userPubKeyHashI"><span class="hs-identifier">userPubKeyHashI</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#userVScriptL"><span class="hs-identifier">userVScriptL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#userScriptHashG"><span class="hs-identifier">userScriptHashG</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#userTxSkelRedeemerL"><span class="hs-identifier">userTxSkelRedeemerL</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#userEitherScriptP"><span class="hs-identifier">userEitherScriptP</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#userEitherPubKeyP"><span class="hs-identifier">userEitherPubKeyP</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#userTypedAF"><span class="hs-identifier">userTypedAF</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#userTypedScriptAT"><span class="hs-identifier">userTypedScriptAT</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Cooked.Skeleton.User.html#userTypedPubKeyAT"><span class="hs-identifier">userTypedPubKeyAT</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">where</span><span>
</span><span id="line-37"></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Families.html"><span class="hs-identifier">Cooked.Skeleton.Families</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Redeemer.html"><span class="hs-identifier">Cooked.Skeleton.Redeemer</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Kind</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Typeable</span></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Optics.Core</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.Script.Utils.Address</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Script</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Plutus.Script.Utils.Scripts</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Script</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">PlutusLedgerApi.V3</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Api</span></span><span>
</span><span id="line-46"></span><span>
</span><span id="line-47"></span><span class="annot"><span class="hs-comment">-- * Handy aliases around versioned scripts</span></span><span>
</span><span id="line-48"></span><span>
</span><span id="line-49"></span><span class="annot"><span class="hs-comment">-- | 'VScript' is a convenient alias as we have versioned scripts everywhere.</span></span><span>
</span><span id="line-50"></span><span class="hs-keyword">type</span><span> </span><span id="VScript"><span class="annot"><a href="Cooked.Skeleton.User.html#VScript"><span class="hs-identifier hs-var">VScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Versioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="annot"><span class="hs-comment">-- | The 'ToVScript' alias will come in handy when dealing with constrains.</span></span><span>
</span><span id="line-53"></span><span class="hs-keyword">type</span><span> </span><span id="ToVScript"><span class="annot"><a href="Cooked.Skeleton.User.html#ToVScript"><span class="hs-identifier hs-var">ToVScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.ToVersioned</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.Script</span></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-comment">-- | The 'toVScript' alias will come in handy to default the type parameter of</span><span>
</span><span id="line-56"></span><span class="hs-comment">-- 'Script.toVersioned' to 'Script.Script'.</span><span>
</span><span id="line-57"></span><span id="local-6989586621679865417"><span class="annot"><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-type">toVScript</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#ToVScript"><span class="hs-identifier hs-type">ToVScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865417"><span class="hs-identifier hs-type">script</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679865417"><span class="hs-identifier hs-type">script</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#VScript"><span class="hs-identifier hs-type">VScript</span></a></span></span><span>
</span><span id="line-58"></span><span id="toVScript"><span class="annot"><span class="annottext">toVScript :: forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var hs-var">toVScript</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">script -&gt; VScript
forall s a. ToVersioned s a =&gt; a -&gt; Versioned s
</span><span class="hs-identifier hs-var">Script.toVersioned</span></span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="annot"><span class="hs-comment">-- * A depiction of user kinds and modes</span></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="hs-comment">-- | The 'UserMode' corresponds to the way the user will be used in our</span><span>
</span><span id="line-63"></span><span class="hs-comment">-- 'Cooked.Skeleton.TxSkel' which can either be for allocation (allocation a</span><span>
</span><span id="line-64"></span><span class="hs-comment">-- certain entity to a user) or for redemption (using this user as a witness in</span><span>
</span><span id="line-65"></span><span class="hs-comment">-- a transaction).</span><span>
</span><span id="line-66"></span><span class="hs-keyword">data</span><span> </span><span id="UserMode"><span class="annot"><a href="Cooked.Skeleton.User.html#UserMode"><span class="hs-identifier hs-var">UserMode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Allocation"><span class="annot"><a href="Cooked.Skeleton.User.html#Allocation"><span class="hs-identifier hs-var">Allocation</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Redemption"><span class="annot"><a href="Cooked.Skeleton.User.html#Redemption"><span class="hs-identifier hs-var">Redemption</span></a></span></span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679865695"><span id="local-6989586621679865697"><span class="annot"><span class="annottext">UserMode -&gt; UserMode -&gt; Bool
(UserMode -&gt; UserMode -&gt; Bool)
-&gt; (UserMode -&gt; UserMode -&gt; Bool) -&gt; Eq UserMode
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: UserMode -&gt; UserMode -&gt; Bool
== :: UserMode -&gt; UserMode -&gt; Bool
$c/= :: UserMode -&gt; UserMode -&gt; Bool
/= :: UserMode -&gt; UserMode -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679865702"><span id="local-6989586621679865704"><span id="local-6989586621679865708"><span class="annot"><span class="annottext">Int -&gt; UserMode -&gt; ShowS
[UserMode] -&gt; ShowS
UserMode -&gt; String
(Int -&gt; UserMode -&gt; ShowS)
-&gt; (UserMode -&gt; String) -&gt; ([UserMode] -&gt; ShowS) -&gt; Show UserMode
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; UserMode -&gt; ShowS
showsPrec :: Int -&gt; UserMode -&gt; ShowS
$cshow :: UserMode -&gt; String
show :: UserMode -&gt; String
$cshowList :: [UserMode] -&gt; ShowS
showList :: [UserMode] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="hs-comment">-- | The 'UserKind' corresponds to the requirement on the type of users. Some</span><span>
</span><span id="line-70"></span><span class="hs-comment">-- elements will require specifically a script and some others a pubkey.</span><span>
</span><span id="line-71"></span><span class="hs-keyword">data</span><span> </span><span id="UserKind"><span class="annot"><a href="Cooked.Skeleton.User.html#UserKind"><span class="hs-identifier hs-var">UserKind</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="IsScript"><span class="annot"><a href="Cooked.Skeleton.User.html#IsScript"><span class="hs-identifier hs-var">IsScript</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="IsPubKey"><span class="annot"><a href="Cooked.Skeleton.User.html#IsPubKey"><span class="hs-identifier hs-var">IsPubKey</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="IsEither"><span class="annot"><a href="Cooked.Skeleton.User.html#IsEither"><span class="hs-identifier hs-var">IsEither</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="IsNone"><span class="annot"><a href="Cooked.Skeleton.User.html#IsNone"><span class="hs-identifier hs-var">IsNone</span></a></span></span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679865713"><span id="local-6989586621679865715"><span class="annot"><span class="annottext">UserKind -&gt; UserKind -&gt; Bool
(UserKind -&gt; UserKind -&gt; Bool)
-&gt; (UserKind -&gt; UserKind -&gt; Bool) -&gt; Eq UserKind
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: UserKind -&gt; UserKind -&gt; Bool
== :: UserKind -&gt; UserKind -&gt; Bool
$c/= :: UserKind -&gt; UserKind -&gt; Bool
/= :: UserKind -&gt; UserKind -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679865719"><span id="local-6989586621679865721"><span id="local-6989586621679865725"><span class="annot"><span class="annottext">Int -&gt; UserKind -&gt; ShowS
[UserKind] -&gt; ShowS
UserKind -&gt; String
(Int -&gt; UserKind -&gt; ShowS)
-&gt; (UserKind -&gt; String) -&gt; ([UserKind] -&gt; ShowS) -&gt; Show UserKind
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; UserKind -&gt; ShowS
showsPrec :: Int -&gt; UserKind -&gt; ShowS
$cshow :: UserKind -&gt; String
show :: UserKind -&gt; String
$cshowList :: [UserKind] -&gt; ShowS
showList :: [UserKind] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="annot"><span class="hs-comment">-- * Users, with their kind and mode</span></span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="hs-comment">-- | Building users. The type exposes the mode for which the user has been</span><span>
</span><span id="line-77"></span><span class="hs-comment">-- built, and the requirements on the kind of the user.</span><span>
</span><span id="line-78"></span><span class="hs-keyword">data</span><span> </span><span id="User"><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-var">User</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserKind"><span class="hs-identifier hs-type">UserKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserMode"><span class="hs-identifier hs-type">UserMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Type</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-comment">-- | A pubkey user. This can be used whenever a pubkey is needed, and for</span><span>
</span><span id="line-80"></span><span>  </span><span class="hs-comment">-- either of the possible modes.</span><span>
</span><span id="line-81"></span><span>  </span><span id="UserPubKey"><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-var">UserPubKey</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679865728"><span class="annot"><a href="#local-6989586621679865728"><span class="hs-identifier hs-type">pkh</span></a></span></span><span> </span><span id="local-6989586621679865579"><span class="annot"><a href="#local-6989586621679865579"><span class="hs-identifier hs-type">kind</span></a></span></span><span> </span><span id="local-6989586621679865580"><span class="annot"><a href="#local-6989586621679865580"><span class="hs-identifier hs-type">mode</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679865579"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Families.html#%2208"><span class="hs-operator hs-type">&#8712;</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Skeleton.User.html#IsPubKey"><span class="hs-identifier hs-type">IsPubKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#IsEither"><span class="hs-identifier hs-type">IsEither</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Script.ToPubKeyHash</span></span><span> </span><span class="annot"><a href="#local-6989586621679865728"><span class="hs-identifier hs-type">pkh</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679865728"><span class="hs-identifier hs-type">pkh</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679865728"><span class="hs-identifier hs-type">pkh</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865579"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865580"><span class="hs-identifier hs-type">mode</span></a></span><span>
</span><span id="line-82"></span><span>  </span><span class="hs-comment">-- | A script user. This can be used whenever a script is needed, but only for</span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-comment">-- the allocation mode.</span><span>
</span><span id="line-84"></span><span>  </span><span id="UserScript"><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-var">UserScript</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679865730"><span class="annot"><a href="#local-6989586621679865730"><span class="hs-identifier hs-type">script</span></a></span></span><span> </span><span id="local-6989586621679865569"><span class="annot"><a href="#local-6989586621679865569"><span class="hs-identifier hs-type">kind</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679865569"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Families.html#%2208"><span class="hs-operator hs-type">&#8712;</span></a></span><span> </span><span class="hs-special">'</span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Skeleton.User.html#IsScript"><span class="hs-identifier hs-type">IsScript</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#IsEither"><span class="hs-identifier hs-type">IsEither</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#ToVScript"><span class="hs-identifier hs-type">ToVScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865730"><span class="hs-identifier hs-type">script</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679865730"><span class="hs-identifier hs-type">script</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679865730"><span class="hs-identifier hs-type">script</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865569"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#Allocation"><span class="hs-identifier hs-type">Allocation</span></a></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-comment">-- | A script user with an associated redeemer. This can be used whenever a</span><span>
</span><span id="line-86"></span><span>  </span><span class="hs-comment">-- script is needed for redemption mode.</span><span>
</span><span id="line-87"></span><span>  </span><span id="UserRedeemedScript"><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-var">UserRedeemedScript</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679865732"><span class="annot"><a href="#local-6989586621679865732"><span class="hs-identifier hs-type">script</span></a></span></span><span> </span><span id="local-6989586621679865572"><span class="annot"><a href="#local-6989586621679865572"><span class="hs-identifier hs-type">kind</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621679865572"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.Families.html#%2208"><span class="hs-operator hs-type">&#8712;</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Cooked.Skeleton.User.html#IsScript"><span class="hs-identifier hs-type">IsScript</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#IsEither"><span class="hs-identifier hs-type">IsEither</span></a></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#ToVScript"><span class="hs-identifier hs-type">ToVScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865732"><span class="hs-identifier hs-type">script</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679865732"><span class="hs-identifier hs-type">script</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621679865732"><span class="hs-identifier hs-type">script</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Redeemer.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865572"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#Redemption"><span class="hs-identifier hs-type">Redemption</span></a></span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span class="annot"><span class="hs-comment">-- | An alias for 'User IsPubKey Allocation'</span></span><span>
</span><span id="line-90"></span><span class="hs-keyword">type</span><span> </span><span id="Peer"><span class="annot"><a href="Cooked.Skeleton.User.html#Peer"><span class="hs-identifier hs-var">Peer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#IsPubKey"><span class="hs-identifier hs-type">IsPubKey</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#Allocation"><span class="hs-identifier hs-type">Allocation</span></a></span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679865433"><span id="local-6989586621679865434"><span id="local-6989586621679865734"><span id="local-6989586621679865739"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865433"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865434"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-93"></span><span>  </span><span id="local-6989586621679865741"><span class="annot"><span class="annottext">show :: User kind mode -&gt; String
</span><a href="#local-6989586621679865741"><span class="hs-identifier hs-var hs-var hs-var hs-var">show</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">pkh -&gt; PubKeyHash
forall a. ToPubKeyHash a =&gt; a -&gt; PubKeyHash
</span><span class="hs-identifier hs-var">Script.toPubKeyHash</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865755"><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679865755"><span class="hs-identifier hs-var">pkh</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UserPubKey &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">PubKeyHash -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679865755"><span class="hs-identifier hs-var">pkh</span></a></span><span>
</span><span id="line-94"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865770"><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679865770"><span class="hs-identifier hs-var">vScript</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UserScript &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VScript -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><span class="hs-identifier hs-var">Script.toScriptHash</span></span><span> </span><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679865770"><span class="hs-identifier hs-var">vScript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865788"><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679865788"><span class="hs-identifier hs-var">vScript</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679865789"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679865789"><span class="hs-identifier hs-var">red</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;UserRedeemedScript &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VScript -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><span class="hs-identifier hs-var">Script.toScriptHash</span></span><span> </span><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679865788"><span class="hs-identifier hs-var">vScript</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679865789"><span class="hs-identifier hs-var">red</span></a></span><span>
</span><span id="line-96"></span><span>
</span><span id="line-97"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679865462"><span id="local-6989586621679865463"><span id="local-6989586621679865792"><span class="annot"><span class="hs-identifier hs-type">Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865462"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865463"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-98"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">pkh -&gt; PubKeyHash
forall a. ToPubKeyHash a =&gt; a -&gt; PubKeyHash
</span><span class="hs-identifier hs-var">Script.toPubKeyHash</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865799"><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679865799"><span class="hs-identifier hs-var">pkh</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span id="local-6989586621679865800"><span class="annot"><span class="annottext">== :: User kind mode -&gt; User kind mode -&gt; Bool
</span><span class="hs-operator hs-var hs-var hs-var hs-var">==</span></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">pkh -&gt; PubKeyHash
forall a. ToPubKeyHash a =&gt; a -&gt; PubKeyHash
</span><span class="hs-identifier hs-var">Script.toPubKeyHash</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865807"><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679865807"><span class="hs-identifier hs-var">pkh'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-99"></span><span>    </span><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679865799"><span class="hs-identifier hs-var">pkh</span></a></span><span> </span><span class="annot"><span class="annottext">PubKeyHash -&gt; PubKeyHash -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679865807"><span class="hs-identifier hs-var">pkh'</span></a></span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VScript -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><span class="hs-identifier hs-var">Script.toScriptHash</span></span><span> </span><span class="annot"><span class="annottext">(VScript -&gt; ScriptHash)
-&gt; (script -&gt; VScript) -&gt; script -&gt; ScriptHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865816"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865816"><span class="hs-identifier hs-var">sHash</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VScript -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><span class="hs-identifier hs-var">Script.toScriptHash</span></span><span> </span><span class="annot"><span class="annottext">(VScript -&gt; ScriptHash)
-&gt; (script -&gt; VScript) -&gt; script -&gt; ScriptHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865825"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865825"><span class="hs-identifier hs-var">sHash'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865816"><span class="hs-identifier hs-var">sHash</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ScriptHash -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865825"><span class="hs-identifier hs-var">sHash'</span></a></span><span>
</span><span id="line-102"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VScript -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><span class="hs-identifier hs-var">Script.toScriptHash</span></span><span> </span><span class="annot"><span class="annottext">(VScript -&gt; ScriptHash)
-&gt; (script -&gt; VScript) -&gt; script -&gt; ScriptHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865833"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865833"><span class="hs-identifier hs-var">sHash</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679865834"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679865834"><span class="hs-identifier hs-var">red</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VScript -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><span class="hs-identifier hs-var">Script.toScriptHash</span></span><span> </span><span class="annot"><span class="annottext">(VScript -&gt; ScriptHash)
-&gt; (script -&gt; VScript) -&gt; script -&gt; ScriptHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865844"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865844"><span class="hs-identifier hs-var">sHash'</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679865845"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679865845"><span class="hs-identifier hs-var">red'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-103"></span><span>    </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865833"><span class="hs-identifier hs-var">sHash</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ScriptHash -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865844"><span class="hs-identifier hs-var">sHash'</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679865834"><span class="hs-identifier hs-var">red</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer -&gt; TxSkelRedeemer -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679865845"><span class="hs-identifier hs-var">red'</span></a></span><span>
</span><span id="line-104"></span><span>  </span><span class="annot"><span class="annottext">User kind mode
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">User kind mode
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679865476"><span id="local-6989586621679865477"><span id="local-6989586621679865851"><span id="local-6989586621679865855"><span id="local-6989586621679865858"><span id="local-6989586621679865861"><span id="local-6989586621679865864"><span id="local-6989586621679865867"><span class="annot"><span class="hs-identifier hs-type">Ord</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865476"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865477"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span></span></span></span></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-107"></span><span>  </span><span id="local-6989586621679865870"><span class="annot"><span class="annottext">compare :: User kind mode -&gt; User kind mode -&gt; Ordering
</span><a href="#local-6989586621679865870"><span class="hs-identifier hs-var hs-var hs-var hs-var">compare</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-108"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">LT</span></span><span>
</span><span id="line-109"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-110"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="hs-special">{</span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Ordering
</span><span class="hs-identifier hs-var">GT</span></span><span>
</span><span id="line-111"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">pkh -&gt; PubKeyHash
forall a. ToPubKeyHash a =&gt; a -&gt; PubKeyHash
</span><span class="hs-identifier hs-var">Script.toPubKeyHash</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865904"><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679865904"><span class="hs-identifier hs-var">pkh</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">pkh -&gt; PubKeyHash
forall a. ToPubKeyHash a =&gt; a -&gt; PubKeyHash
</span><span class="hs-identifier hs-var">Script.toPubKeyHash</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865911"><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679865911"><span class="hs-identifier hs-var">pkh'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PubKeyHash -&gt; PubKeyHash -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679865904"><span class="hs-identifier hs-var">pkh</span></a></span><span> </span><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679865911"><span class="hs-identifier hs-var">pkh'</span></a></span><span>
</span><span id="line-112"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VScript -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><span class="hs-identifier hs-var">Script.toScriptHash</span></span><span> </span><span class="annot"><span class="annottext">(VScript -&gt; ScriptHash)
-&gt; (script -&gt; VScript) -&gt; script -&gt; ScriptHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865919"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865919"><span class="hs-identifier hs-var">sh</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VScript -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><span class="hs-identifier hs-var">Script.toScriptHash</span></span><span> </span><span class="annot"><span class="annottext">(VScript -&gt; ScriptHash)
-&gt; (script -&gt; VScript) -&gt; script -&gt; ScriptHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865928"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865928"><span class="hs-identifier hs-var">sh'</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ScriptHash -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865919"><span class="hs-identifier hs-var">sh</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865928"><span class="hs-identifier hs-var">sh'</span></a></span><span>
</span><span id="line-113"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VScript -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><span class="hs-identifier hs-var">Script.toScriptHash</span></span><span> </span><span class="annot"><span class="annottext">(VScript -&gt; ScriptHash)
-&gt; (script -&gt; VScript) -&gt; script -&gt; ScriptHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865936"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865936"><span class="hs-identifier hs-var">sh</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679865937"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679865937"><span class="hs-identifier hs-var">red</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VScript -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><span class="hs-identifier hs-var">Script.toScriptHash</span></span><span> </span><span class="annot"><span class="annottext">(VScript -&gt; ScriptHash)
-&gt; (script -&gt; VScript) -&gt; script -&gt; ScriptHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865949"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865949"><span class="hs-identifier hs-var">sh'</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679865950"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679865950"><span class="hs-identifier hs-var">red'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><span class="annottext">(ScriptHash, TxSkelRedeemer)
-&gt; (ScriptHash, TxSkelRedeemer) -&gt; Ordering
forall a. Ord a =&gt; a -&gt; a -&gt; Ordering
</span><span class="hs-identifier hs-var">compare</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865936"><span class="hs-identifier hs-var">sh</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679865937"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679865949"><span class="hs-identifier hs-var">sh'</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679865950"><span class="hs-identifier hs-var">red'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-115"></span><span>
</span><span id="line-116"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679865495"><span class="annot"><span class="hs-identifier hs-type">Script.ToPubKeyHash</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#IsPubKey"><span class="hs-identifier hs-type">IsPubKey</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865495"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-117"></span><span>  </span><span id="local-6989586621679865956"><span class="annot"><span class="annottext">toPubKeyHash :: User 'IsPubKey mode -&gt; PubKeyHash
</span><span class="hs-identifier hs-var hs-var hs-var hs-var">toPubKeyHash</span></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Optic' An_Iso NoIx (User 'IsPubKey mode) PubKeyHash
-&gt; User 'IsPubKey mode -&gt; PubKeyHash
forall k (is :: IxList) s a.
Is k A_Getter =&gt;
Optic' k is s a -&gt; s -&gt; a
</span><span class="hs-identifier hs-var">view</span></span><span> </span><span class="annot"><span class="annottext">Optic' An_Iso NoIx (User 'IsPubKey mode) PubKeyHash
forall (mode :: UserMode). Iso' (User 'IsPubKey mode) PubKeyHash
</span><a href="Cooked.Skeleton.User.html#userPubKeyHashI"><span class="hs-identifier hs-var">userPubKeyHashI</span></a></span><span>
</span><span id="line-118"></span><span>
</span><span id="line-119"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679865513"><span id="local-6989586621679865514"><span class="annot"><span class="hs-identifier hs-type">Script.ToCredential</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865513"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865514"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-120"></span><span>  </span><span id="local-6989586621679865961"><span class="annot"><span class="annottext">toCredential :: User kind mode -&gt; Credential
</span><a href="#local-6989586621679865961"><span class="hs-identifier hs-var hs-var hs-var hs-var">toCredential</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">pkh -&gt; PubKeyHash
forall a. ToPubKeyHash a =&gt; a -&gt; PubKeyHash
</span><span class="hs-identifier hs-var">Script.toPubKeyHash</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865969"><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679865969"><span class="hs-identifier hs-var">pkh</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">PubKeyHash -&gt; Credential
forall a. ToCredential a =&gt; a -&gt; Credential
</span><span class="hs-identifier hs-var">Script.toCredential</span></span><span> </span><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679865969"><span class="hs-identifier hs-var">pkh</span></a></span><span>
</span><span id="line-121"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toCredential</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865978"><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679865978"><span class="hs-identifier hs-var">vScript</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VScript -&gt; Credential
forall a. ToCredential a =&gt; a -&gt; Credential
</span><span class="hs-identifier hs-var">Script.toCredential</span></span><span> </span><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679865978"><span class="hs-identifier hs-var">vScript</span></a></span><span>
</span><span id="line-122"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">toCredential</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679865986"><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679865986"><span class="hs-identifier hs-var">vScript</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">VScript -&gt; Credential
forall a. ToCredential a =&gt; a -&gt; Credential
</span><span class="hs-identifier hs-var">Script.toCredential</span></span><span> </span><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679865986"><span class="hs-identifier hs-var">vScript</span></a></span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621679865524"><span id="local-6989586621679865525"><span class="annot"><span class="hs-identifier hs-type">Script.ToAddress</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865524"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865525"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-125"></span><span>  </span><span id="local-6989586621679865991"><span class="annot"><span class="annottext">toAddress :: User kind mode -&gt; Address
</span><a href="#local-6989586621679865991"><span class="hs-identifier hs-var hs-var hs-var hs-var">toAddress</span></a></span></span><span> </span><span id="local-6989586621679865993"><span class="annot"><span class="annottext">User kind mode
</span><a href="#local-6989586621679865993"><span class="hs-identifier hs-var">user</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Credential -&gt; Maybe StakingCredential -&gt; Address
</span><span class="hs-identifier hs-var">Api.Address</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">User kind mode -&gt; Credential
forall a. ToCredential a =&gt; a -&gt; Credential
</span><span class="hs-identifier hs-var">Script.toCredential</span></span><span> </span><span class="annot"><span class="annottext">User kind mode
</span><a href="#local-6989586621679865993"><span class="hs-identifier hs-var">user</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe StakingCredential
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span class="annot"><span class="hs-comment">-- * Optics on various possible families of users</span></span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="annot"><span class="hs-comment">-- | Retrieves the hash of the script or pubkey represented by this user</span></span><span>
</span><span id="line-130"></span><span class="annot"><a href="Cooked.Skeleton.User.html#userHashG"><span class="hs-identifier hs-type">userHashG</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679865527"><span class="annot"><a href="#local-6989586621679865527"><span class="hs-identifier hs-type">kind</span></a></span></span><span> </span><span id="local-6989586621679865528"><span class="annot"><a href="#local-6989586621679865528"><span class="hs-identifier hs-type">mode</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Getter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865527"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865528"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.BuiltinByteString</span></span><span>
</span><span id="line-131"></span><span id="userHashG"><span class="annot"><span class="annottext">userHashG :: forall (kind :: UserKind) (mode :: UserMode).
Getter (User kind mode) BuiltinByteString
</span><a href="Cooked.Skeleton.User.html#userHashG"><span class="hs-identifier hs-var hs-var">userHashG</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-132"></span><span>  </span><span class="annot"><span class="annottext">(User kind mode -&gt; BuiltinByteString)
-&gt; Getter (User kind mode) BuiltinByteString
forall s a. (s -&gt; a) -&gt; Getter s a
</span><span class="hs-identifier hs-var">to</span></span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-134"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">pkh -&gt; PubKeyHash
forall a. ToPubKeyHash a =&gt; a -&gt; PubKeyHash
</span><span class="hs-identifier hs-var">Script.toPubKeyHash</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.PubKeyHash</span></span><span> </span><span id="local-6989586621679866001"><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621679866001"><span class="hs-identifier hs-var">hs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621679866001"><span class="hs-identifier hs-var">hs</span></a></span><span>
</span><span id="line-135"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VScript -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><span class="hs-identifier hs-var">Script.toScriptHash</span></span><span> </span><span class="annot"><span class="annottext">(VScript -&gt; ScriptHash)
-&gt; (script -&gt; VScript) -&gt; script -&gt; ScriptHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ScriptHash</span></span><span> </span><span id="local-6989586621679866010"><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621679866010"><span class="hs-identifier hs-var">hs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621679866010"><span class="hs-identifier hs-var">hs</span></a></span><span>
</span><span id="line-136"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VScript -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><span class="hs-identifier hs-var">Script.toScriptHash</span></span><span> </span><span class="annot"><span class="annottext">(VScript -&gt; ScriptHash)
-&gt; (script -&gt; VScript) -&gt; script -&gt; ScriptHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ScriptHash</span></span><span> </span><span id="local-6989586621679866018"><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621679866018"><span class="hs-identifier hs-var">hs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BuiltinByteString
</span><a href="#local-6989586621679866018"><span class="hs-identifier hs-var">hs</span></a></span><span>
</span><span id="line-137"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="annot"><span class="hs-comment">-- | Retrieves a possible typed user from a 'User'</span></span><span>
</span><span id="line-140"></span><span class="annot"><a href="Cooked.Skeleton.User.html#userTypedAF"><span class="hs-identifier hs-type">userTypedAF</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679865538"><span class="annot"><a href="#local-6989586621679865538"><span class="hs-identifier hs-type">user</span></a></span></span><span> </span><span id="local-6989586621679865539"><span class="annot"><a href="#local-6989586621679865539"><span class="hs-identifier hs-type">kind</span></a></span></span><span> </span><span id="local-6989586621679865540"><span class="annot"><a href="#local-6989586621679865540"><span class="hs-identifier hs-type">mode</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679865538"><span class="hs-identifier hs-type">user</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AffineFold</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865539"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865540"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679865538"><span class="hs-identifier hs-type">user</span></a></span><span>
</span><span id="line-141"></span><span id="userTypedAF"><span class="annot"><span class="annottext">userTypedAF :: forall user (kind :: UserKind) (mode :: UserMode).
Typeable user =&gt;
AffineFold (User kind mode) user
</span><a href="Cooked.Skeleton.User.html#userTypedAF"><span class="hs-identifier hs-var hs-var">userTypedAF</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-142"></span><span>  </span><span class="annot"><span class="annottext">(User kind mode -&gt; Maybe user) -&gt; AffineFold (User kind mode) user
forall s a. (s -&gt; Maybe a) -&gt; AffineFold s a
</span><span class="hs-identifier hs-var">afolding</span></span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-144"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621679866026"><span class="annot"><a href="#local-6989586621679866026"><span class="hs-identifier hs-type hs-type">user'</span></a></span></span><span> </span><span id="local-6989586621679866027"><span class="annot"><span class="annottext">pkh
</span><a href="#local-6989586621679866027"><span class="hs-identifier hs-var">pkh</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">user :~: pkh
</span><span class="hs-identifier hs-var">Refl</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k) (b :: k).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
forall a b. (Typeable a, Typeable b) =&gt; Maybe (a :~: b)
</span><span class="hs-identifier hs-var">eqT</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679865538"><span class="hs-identifier hs-type">user</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679866026"><span class="hs-identifier hs-type">user'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">user -&gt; Maybe user
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">user
pkh
</span><a href="#local-6989586621679866027"><span class="hs-identifier hs-var">pkh</span></a></span><span>
</span><span id="line-145"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621679866037"><span class="annot"><a href="#local-6989586621679866037"><span class="hs-identifier hs-type hs-type">user'</span></a></span></span><span> </span><span id="local-6989586621679866038"><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866038"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">user :~: script
</span><span class="hs-identifier hs-var">Refl</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k) (b :: k).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
forall a b. (Typeable a, Typeable b) =&gt; Maybe (a :~: b)
</span><span class="hs-identifier hs-var">eqT</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679865538"><span class="hs-identifier hs-type">user</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679866037"><span class="hs-identifier hs-type">user'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">user -&gt; Maybe user
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">user
script
</span><a href="#local-6989586621679866038"><span class="hs-identifier hs-var">script</span></a></span><span>
</span><span id="line-146"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621679866046"><span class="annot"><a href="#local-6989586621679866046"><span class="hs-identifier hs-type hs-type">user'</span></a></span></span><span> </span><span id="local-6989586621679866047"><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866047"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">user :~: script
</span><span class="hs-identifier hs-var">Refl</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k) (b :: k).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
forall a b. (Typeable a, Typeable b) =&gt; Maybe (a :~: b)
</span><span class="hs-identifier hs-var">eqT</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679865538"><span class="hs-identifier hs-type">user</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679866046"><span class="hs-identifier hs-type">user'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">user -&gt; Maybe user
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">user
script
</span><a href="#local-6989586621679866047"><span class="hs-identifier hs-var">script</span></a></span><span>
</span><span id="line-147"></span><span>        </span><span class="annot"><span class="annottext">User kind mode
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe user
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-148"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="annot"><span class="hs-comment">-- | Focuses on a possible typed script in this 'User'</span></span><span>
</span><span id="line-151"></span><span class="annot"><a href="Cooked.Skeleton.User.html#userTypedScriptAT"><span class="hs-identifier hs-type">userTypedScriptAT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679865554"><span class="annot"><a href="#local-6989586621679865554"><span class="hs-identifier hs-type">userScript</span></a></span></span><span> </span><span id="local-6989586621679865555"><span class="annot"><a href="#local-6989586621679865555"><span class="hs-identifier hs-type">mode</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#ToVScript"><span class="hs-identifier hs-type">ToVScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865554"><span class="hs-identifier hs-type">userScript</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679865554"><span class="hs-identifier hs-type">userScript</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AffineTraversal'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#IsScript"><span class="hs-identifier hs-type">IsScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865555"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679865554"><span class="hs-identifier hs-type">userScript</span></a></span><span>
</span><span id="line-152"></span><span id="userTypedScriptAT"><span class="annot"><span class="annottext">userTypedScriptAT :: forall userScript (mode :: UserMode).
(ToVScript userScript, Typeable userScript) =&gt;
AffineTraversal' (User 'IsScript mode) userScript
</span><a href="Cooked.Skeleton.User.html#userTypedScriptAT"><span class="hs-identifier hs-var hs-var">userTypedScriptAT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-153"></span><span>  </span><span class="annot"><span class="annottext">(User 'IsScript mode -&gt; Either (User 'IsScript mode) userScript)
-&gt; (User 'IsScript mode -&gt; userScript -&gt; User 'IsScript mode)
-&gt; AffineTraversal
     (User 'IsScript mode) (User 'IsScript mode) userScript userScript
forall s t a b.
(s -&gt; Either t a) -&gt; (s -&gt; b -&gt; t) -&gt; AffineTraversal s t a b
</span><span class="hs-identifier hs-var">atraversal</span></span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679866052"><span class="annot"><span class="annottext">User 'IsScript mode
</span><a href="#local-6989586621679866052"><span class="hs-identifier hs-var">user</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">User 'IsScript mode
</span><a href="#local-6989586621679866052"><span class="hs-identifier hs-var">user</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-155"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621679866059"><span class="annot"><a href="#local-6989586621679866059"><span class="hs-identifier hs-type hs-type">userScript'</span></a></span></span><span> </span><span id="local-6989586621679866060"><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866060"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">userScript :~: script
</span><span class="hs-identifier hs-var">Refl</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k) (b :: k).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
forall a b. (Typeable a, Typeable b) =&gt; Maybe (a :~: b)
</span><span class="hs-identifier hs-var">eqT</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679865554"><span class="hs-identifier hs-type">userScript</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679866059"><span class="hs-identifier hs-type">userScript'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">userScript -&gt; Either (User 'IsScript mode) userScript
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">userScript
script
</span><a href="#local-6989586621679866060"><span class="hs-identifier hs-var">script</span></a></span><span>
</span><span id="line-156"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621679866068"><span class="annot"><a href="#local-6989586621679866068"><span class="hs-identifier hs-type hs-type">userScript'</span></a></span></span><span> </span><span id="local-6989586621679866069"><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866069"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">userScript :~: script
</span><span class="hs-identifier hs-var">Refl</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k) (b :: k).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
forall a b. (Typeable a, Typeable b) =&gt; Maybe (a :~: b)
</span><span class="hs-identifier hs-var">eqT</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679865554"><span class="hs-identifier hs-type">userScript</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679866068"><span class="hs-identifier hs-type">userScript'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">userScript -&gt; Either (User 'IsScript mode) userScript
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">userScript
script
</span><a href="#local-6989586621679866069"><span class="hs-identifier hs-var">script</span></a></span><span>
</span><span id="line-157"></span><span>        </span><span class="annot"><span class="annottext">User 'IsScript mode
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">User 'IsScript mode -&gt; Either (User 'IsScript mode) userScript
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">User 'IsScript mode
</span><a href="#local-6989586621679866052"><span class="hs-identifier hs-var">user</span></a></span><span>
</span><span id="line-158"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-159"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-160"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="annot"><span class="annottext">script
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">userScript -&gt; User 'IsScript mode
userScript -&gt; User 'IsScript 'Allocation
forall pkh (kind :: UserKind).
(kind &#8712; '[ 'IsScript, 'IsEither], ToVScript pkh, Typeable pkh) =&gt;
pkh -&gt; User kind 'Allocation
</span><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-var">UserScript</span></a></span><span>
</span><span id="line-161"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="annot"><span class="annottext">script
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679866087"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679866087"><span class="hs-identifier hs-var">red</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">userScript -&gt; TxSkelRedeemer -&gt; User 'IsScript 'Redemption
forall pkh (kind :: UserKind).
(kind &#8712; '[ 'IsScript, 'IsEither], ToVScript pkh, Typeable pkh) =&gt;
pkh -&gt; TxSkelRedeemer -&gt; User kind 'Redemption
</span><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-operator hs-var">`UserRedeemedScript`</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679866087"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span class="annot"><span class="hs-comment">-- | Focuses on a possible typed pubkey in this 'User'</span></span><span>
</span><span id="line-165"></span><span class="annot"><a href="Cooked.Skeleton.User.html#userTypedPubKeyAT"><span class="hs-identifier hs-type">userTypedPubKeyAT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621679865573"><span class="annot"><a href="#local-6989586621679865573"><span class="hs-identifier hs-type">userPK</span></a></span></span><span> </span><span id="local-6989586621679865574"><span class="annot"><a href="#local-6989586621679865574"><span class="hs-identifier hs-type">mode</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Script.ToPubKeyHash</span></span><span> </span><span class="annot"><a href="#local-6989586621679865573"><span class="hs-identifier hs-type">userPK</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Typeable</span></span><span> </span><span class="annot"><a href="#local-6989586621679865573"><span class="hs-identifier hs-type">userPK</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AffineTraversal'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#IsPubKey"><span class="hs-identifier hs-type">IsPubKey</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865574"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621679865573"><span class="hs-identifier hs-type">userPK</span></a></span><span>
</span><span id="line-166"></span><span id="userTypedPubKeyAT"><span class="annot"><span class="annottext">userTypedPubKeyAT :: forall userPK (mode :: UserMode).
(ToPubKeyHash userPK, Typeable userPK) =&gt;
AffineTraversal' (User 'IsPubKey mode) userPK
</span><a href="Cooked.Skeleton.User.html#userTypedPubKeyAT"><span class="hs-identifier hs-var hs-var">userTypedPubKeyAT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-167"></span><span>  </span><span class="annot"><span class="annottext">(User 'IsPubKey mode -&gt; Either (User 'IsPubKey mode) userPK)
-&gt; (User 'IsPubKey mode -&gt; userPK -&gt; User 'IsPubKey mode)
-&gt; AffineTraversal
     (User 'IsPubKey mode) (User 'IsPubKey mode) userPK userPK
forall s t a b.
(s -&gt; Either t a) -&gt; (s -&gt; b -&gt; t) -&gt; AffineTraversal s t a b
</span><span class="hs-identifier hs-var">atraversal</span></span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679866090"><span class="annot"><span class="annottext">User 'IsPubKey mode
</span><a href="#local-6989586621679866090"><span class="hs-identifier hs-var">user</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">User 'IsPubKey mode
</span><a href="#local-6989586621679866090"><span class="hs-identifier hs-var">user</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-169"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="hs-glyph">@</span><span id="local-6989586621679866096"><span class="annot"><a href="#local-6989586621679866096"><span class="hs-identifier hs-type hs-type">userPK'</span></a></span></span><span> </span><span id="local-6989586621679866097"><span class="annot"><span class="annottext">pkh
</span><a href="#local-6989586621679866097"><span class="hs-identifier hs-var">pkh</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="annottext">userPK :~: pkh
</span><span class="hs-identifier hs-var">Refl</span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">forall {k} (a :: k) (b :: k).
(Typeable a, Typeable b) =&gt;
Maybe (a :~: b)
forall a b. (Typeable a, Typeable b) =&gt; Maybe (a :~: b)
</span><span class="hs-identifier hs-var">eqT</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679865573"><span class="hs-identifier hs-type">userPK</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621679866096"><span class="hs-identifier hs-type">userPK'</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">userPK -&gt; Either (User 'IsPubKey mode) userPK
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">userPK
pkh
</span><a href="#local-6989586621679866097"><span class="hs-identifier hs-var">pkh</span></a></span><span>
</span><span id="line-170"></span><span>        </span><span class="annot"><span class="annottext">User 'IsPubKey mode
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">User 'IsPubKey mode -&gt; Either (User 'IsPubKey mode) userPK
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">User 'IsPubKey mode
</span><a href="#local-6989586621679866090"><span class="hs-identifier hs-var">user</span></a></span><span>
</span><span id="line-171"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-172"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="annot"><span class="annottext">pkh
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">userPK -&gt; User 'IsPubKey mode
forall pkh (kind :: UserKind) (mode :: UserMode).
(kind &#8712; '[ 'IsPubKey, 'IsEither], ToPubKeyHash pkh,
 Typeable pkh) =&gt;
pkh -&gt; User kind mode
</span><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-var">UserPubKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span class="annot"><span class="hs-comment">-- | Builds a @User IsEither@ from a @User IsScript@</span></span><span>
</span><span id="line-175"></span><span id="local-6989586621679865581"><span class="annot"><a href="Cooked.Skeleton.User.html#userEitherScriptP"><span class="hs-identifier hs-type">userEitherScriptP</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Prism'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#IsEither"><span class="hs-identifier hs-type">IsEither</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865581"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#IsScript"><span class="hs-identifier hs-type">IsScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865581"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-176"></span><span id="userEitherScriptP"><span class="annot"><span class="annottext">userEitherScriptP :: forall (mode :: UserMode).
Prism' (User 'IsEither mode) (User 'IsScript mode)
</span><a href="Cooked.Skeleton.User.html#userEitherScriptP"><span class="hs-identifier hs-var hs-var">userEitherScriptP</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><span class="annottext">(User 'IsScript mode -&gt; User 'IsEither mode)
-&gt; (User 'IsEither mode
    -&gt; Either (User 'IsEither mode) (User 'IsScript mode))
-&gt; Prism
     (User 'IsEither mode)
     (User 'IsEither mode)
     (User 'IsScript mode)
     (User 'IsScript mode)
forall b t s a. (b -&gt; t) -&gt; (s -&gt; Either t a) -&gt; Prism s t a b
</span><span class="hs-identifier hs-var">prism</span></span><span>
</span><span id="line-178"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-179"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span id="local-6989586621679866115"><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866115"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">script -&gt; User 'IsEither 'Allocation
forall pkh (kind :: UserKind).
(kind &#8712; '[ 'IsScript, 'IsEither], ToVScript pkh, Typeable pkh) =&gt;
pkh -&gt; User kind 'Allocation
</span><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-var">UserScript</span></a></span><span> </span><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866115"><span class="hs-identifier hs-var">script</span></a></span><span>
</span><span id="line-180"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span id="local-6989586621679866124"><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866124"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span id="local-6989586621679866125"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679866125"><span class="hs-identifier hs-var">red</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">script -&gt; TxSkelRedeemer -&gt; User 'IsEither 'Redemption
forall pkh (kind :: UserKind).
(kind &#8712; '[ 'IsScript, 'IsEither], ToVScript pkh, Typeable pkh) =&gt;
pkh -&gt; TxSkelRedeemer -&gt; User kind 'Redemption
</span><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-var">UserRedeemedScript</span></a></span><span> </span><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866124"><span class="hs-identifier hs-var">script</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679866125"><span class="hs-identifier hs-var">red</span></a></span><span>
</span><span id="line-181"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-182"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-183"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span id="local-6989586621679866134"><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866134"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">User 'IsScript mode
-&gt; Either (User 'IsEither mode) (User 'IsScript mode)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">script -&gt; User 'IsScript 'Allocation
forall pkh (kind :: UserKind).
(kind &#8712; '[ 'IsScript, 'IsEither], ToVScript pkh, Typeable pkh) =&gt;
pkh -&gt; User kind 'Allocation
</span><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-var">UserScript</span></a></span><span> </span><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866134"><span class="hs-identifier hs-var">script</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span id="local-6989586621679866143"><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866143"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span id="local-6989586621679866144"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679866144"><span class="hs-identifier hs-var">red</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">User 'IsScript mode
-&gt; Either (User 'IsEither mode) (User 'IsScript mode)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">script -&gt; TxSkelRedeemer -&gt; User 'IsScript 'Redemption
forall pkh (kind :: UserKind).
(kind &#8712; '[ 'IsScript, 'IsEither], ToVScript pkh, Typeable pkh) =&gt;
pkh -&gt; TxSkelRedeemer -&gt; User kind 'Redemption
</span><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-var">UserRedeemedScript</span></a></span><span> </span><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866143"><span class="hs-identifier hs-var">script</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679866144"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>        </span><span id="local-6989586621679866145"><span class="annot"><span class="annottext">User 'IsEither mode
</span><a href="#local-6989586621679866145"><span class="hs-identifier hs-var">user</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">User 'IsEither mode
-&gt; Either (User 'IsEither mode) (User 'IsScript mode)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">User 'IsEither mode
</span><a href="#local-6989586621679866145"><span class="hs-identifier hs-var">user</span></a></span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>
</span><span id="line-188"></span><span class="annot"><span class="hs-comment">-- | Builds a @User IsEither@ from a @User IsPubKey@</span></span><span>
</span><span id="line-189"></span><span id="local-6989586621679865593"><span class="annot"><a href="Cooked.Skeleton.User.html#userEitherPubKeyP"><span class="hs-identifier hs-type">userEitherPubKeyP</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Prism'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#IsEither"><span class="hs-identifier hs-type">IsEither</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865593"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#IsPubKey"><span class="hs-identifier hs-type">IsPubKey</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865593"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-190"></span><span id="userEitherPubKeyP"><span class="annot"><span class="annottext">userEitherPubKeyP :: forall (mode :: UserMode).
Prism' (User 'IsEither mode) (User 'IsPubKey mode)
</span><a href="Cooked.Skeleton.User.html#userEitherPubKeyP"><span class="hs-identifier hs-var hs-var">userEitherPubKeyP</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-191"></span><span>  </span><span class="annot"><span class="annottext">(User 'IsPubKey mode -&gt; User 'IsEither mode)
-&gt; (User 'IsEither mode
    -&gt; Either (User 'IsEither mode) (User 'IsPubKey mode))
-&gt; Prism
     (User 'IsEither mode)
     (User 'IsEither mode)
     (User 'IsPubKey mode)
     (User 'IsPubKey mode)
forall b t s a. (b -&gt; t) -&gt; (s -&gt; Either t a) -&gt; Prism s t a b
</span><span class="hs-identifier hs-var">prism</span></span><span>
</span><span id="line-192"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span id="local-6989586621679866153"><span class="annot"><span class="annottext">pkh
</span><a href="#local-6989586621679866153"><span class="hs-identifier hs-var">pkh</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">pkh -&gt; User 'IsEither mode
forall pkh (kind :: UserKind) (mode :: UserMode).
(kind &#8712; '[ 'IsPubKey, 'IsEither], ToPubKeyHash pkh,
 Typeable pkh) =&gt;
pkh -&gt; User kind mode
</span><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-var">UserPubKey</span></a></span><span> </span><span class="annot"><span class="annottext">pkh
</span><a href="#local-6989586621679866153"><span class="hs-identifier hs-var">pkh</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-194"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span id="local-6989586621679866161"><span class="annot"><span class="annottext">pkh
</span><a href="#local-6989586621679866161"><span class="hs-identifier hs-var">pkh</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">User 'IsPubKey mode
-&gt; Either (User 'IsEither mode) (User 'IsPubKey mode)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">pkh -&gt; User 'IsPubKey mode
forall pkh (kind :: UserKind) (mode :: UserMode).
(kind &#8712; '[ 'IsPubKey, 'IsEither], ToPubKeyHash pkh,
 Typeable pkh) =&gt;
pkh -&gt; User kind mode
</span><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-var">UserPubKey</span></a></span><span> </span><span class="annot"><span class="annottext">pkh
</span><a href="#local-6989586621679866161"><span class="hs-identifier hs-var">pkh</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-195"></span><span>        </span><span id="local-6989586621679866162"><span class="annot"><span class="annottext">User 'IsEither mode
</span><a href="#local-6989586621679866162"><span class="hs-identifier hs-var">user</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">User 'IsEither mode
-&gt; Either (User 'IsEither mode) (User 'IsPubKey mode)
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">User 'IsEither mode
</span><a href="#local-6989586621679866162"><span class="hs-identifier hs-var">user</span></a></span><span>
</span><span id="line-196"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>
</span><span id="line-198"></span><span class="annot"><span class="hs-comment">-- | Extracts the 'Api.Credential' from a 'User'</span></span><span>
</span><span id="line-199"></span><span id="local-6989586621679865597"><span id="local-6989586621679865598"><span class="annot"><a href="Cooked.Skeleton.User.html#userCredentialG"><span class="hs-identifier hs-type">userCredentialG</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Getter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865597"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865598"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.Credential</span></span></span></span><span>
</span><span id="line-200"></span><span id="userCredentialG"><span class="annot"><span class="annottext">userCredentialG :: forall (kind :: UserKind) (mode :: UserMode).
Getter (User kind mode) Credential
</span><a href="Cooked.Skeleton.User.html#userCredentialG"><span class="hs-identifier hs-var hs-var">userCredentialG</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(User kind mode -&gt; Credential)
-&gt; Getter (User kind mode) Credential
forall s a. (s -&gt; a) -&gt; Getter s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">User kind mode -&gt; Credential
forall a. ToCredential a =&gt; a -&gt; Credential
</span><span class="hs-identifier hs-var">Script.toCredential</span></span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="annot"><span class="hs-comment">-- | Focusing on the possible 'TxSkelRedeemer' of this 'User'</span></span><span>
</span><span id="line-203"></span><span id="local-6989586621679865601"><span id="local-6989586621679865602"><span class="annot"><a href="Cooked.Skeleton.User.html#userTxSkelRedeemerAT"><span class="hs-identifier hs-type">userTxSkelRedeemerAT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AffineTraversal'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865601"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865602"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Redeemer.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span></span></span><span>
</span><span id="line-204"></span><span id="userTxSkelRedeemerAT"><span class="annot"><span class="annottext">userTxSkelRedeemerAT :: forall (kind :: UserKind) (mode :: UserMode).
AffineTraversal' (User kind mode) TxSkelRedeemer
</span><a href="Cooked.Skeleton.User.html#userTxSkelRedeemerAT"><span class="hs-identifier hs-var hs-var">userTxSkelRedeemerAT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-205"></span><span>  </span><span class="annot"><span class="annottext">(User kind mode -&gt; Either (User kind mode) TxSkelRedeemer)
-&gt; (User kind mode -&gt; TxSkelRedeemer -&gt; User kind mode)
-&gt; AffineTraversal
     (User kind mode) (User kind mode) TxSkelRedeemer TxSkelRedeemer
forall s t a b.
(s -&gt; Either t a) -&gt; (s -&gt; b -&gt; t) -&gt; AffineTraversal s t a b
</span><span class="hs-identifier hs-var">atraversal</span></span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-207"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="annot"><span class="annottext">script
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679866169"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679866169"><span class="hs-identifier hs-var">red</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer -&gt; Either (User kind mode) TxSkelRedeemer
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679866169"><span class="hs-identifier hs-var">red</span></a></span><span>
</span><span id="line-208"></span><span>        </span><span id="local-6989586621679866170"><span class="annot"><span class="annottext">User kind mode
</span><a href="#local-6989586621679866170"><span class="hs-identifier hs-var">user</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">User kind mode -&gt; Either (User kind mode) TxSkelRedeemer
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">User kind mode
</span><a href="#local-6989586621679866170"><span class="hs-identifier hs-var">user</span></a></span><span>
</span><span id="line-209"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-210"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-211"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span id="local-6989586621679866178"><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866178"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">script -&gt; TxSkelRedeemer -&gt; User kind 'Redemption
forall pkh (kind :: UserKind).
(kind &#8712; '[ 'IsScript, 'IsEither], ToVScript pkh, Typeable pkh) =&gt;
pkh -&gt; TxSkelRedeemer -&gt; User kind 'Redemption
</span><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-var">UserRedeemedScript</span></a></span><span> </span><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866178"><span class="hs-identifier hs-var">script</span></a></span><span>
</span><span id="line-212"></span><span>        </span><span id="local-6989586621679866179"><span class="annot"><span class="annottext">User kind mode
</span><a href="#local-6989586621679866179"><span class="hs-identifier hs-var">user</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">User kind mode -&gt; TxSkelRedeemer -&gt; User kind mode
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">User kind mode
</span><a href="#local-6989586621679866179"><span class="hs-identifier hs-var">user</span></a></span><span>
</span><span id="line-213"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="annot"><span class="hs-comment">-- | Focusing on the possible 'VScript' of this 'User'</span></span><span>
</span><span id="line-216"></span><span id="local-6989586621679865609"><span id="local-6989586621679865610"><span class="annot"><a href="Cooked.Skeleton.User.html#userVScriptAT"><span class="hs-identifier hs-type">userVScriptAT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AffineTraversal'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865609"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865610"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#VScript"><span class="hs-identifier hs-type">VScript</span></a></span></span></span><span>
</span><span id="line-217"></span><span id="userVScriptAT"><span class="annot"><span class="annottext">userVScriptAT :: forall (kind :: UserKind) (mode :: UserMode).
AffineTraversal' (User kind mode) VScript
</span><a href="Cooked.Skeleton.User.html#userVScriptAT"><span class="hs-identifier hs-var hs-var">userVScriptAT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-218"></span><span>  </span><span class="annot"><span class="annottext">(User kind mode -&gt; Either (User kind mode) VScript)
-&gt; (User kind mode -&gt; VScript -&gt; User kind mode)
-&gt; AffineTraversal
     (User kind mode) (User kind mode) VScript VScript
forall s t a b.
(s -&gt; Either t a) -&gt; (s -&gt; b -&gt; t) -&gt; AffineTraversal s t a b
</span><span class="hs-identifier hs-var">atraversal</span></span><span>
</span><span id="line-219"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-220"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679866186"><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679866186"><span class="hs-identifier hs-var">vScript</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VScript -&gt; Either (User kind mode) VScript
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679866186"><span class="hs-identifier hs-var">vScript</span></a></span><span>
</span><span id="line-221"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679866192"><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679866192"><span class="hs-identifier hs-var">vScript</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VScript -&gt; Either (User kind mode) VScript
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679866192"><span class="hs-identifier hs-var">vScript</span></a></span><span>
</span><span id="line-222"></span><span>        </span><span id="local-6989586621679866193"><span class="annot"><span class="annottext">User kind mode
</span><a href="#local-6989586621679866193"><span class="hs-identifier hs-var">user</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">User kind mode -&gt; Either (User kind mode) VScript
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">User kind mode
</span><a href="#local-6989586621679866193"><span class="hs-identifier hs-var">user</span></a></span><span>
</span><span id="line-223"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-225"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="annot"><span class="annottext">script
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VScript -&gt; User kind mode
VScript -&gt; User kind 'Allocation
forall pkh (kind :: UserKind).
(kind &#8712; '[ 'IsScript, 'IsEither], ToVScript pkh, Typeable pkh) =&gt;
pkh -&gt; User kind 'Allocation
</span><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-var">UserScript</span></a></span><span>
</span><span id="line-226"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="annot"><span class="annottext">script
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679866213"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679866213"><span class="hs-identifier hs-var">red</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VScript -&gt; TxSkelRedeemer -&gt; User kind 'Redemption
forall pkh (kind :: UserKind).
(kind &#8712; '[ 'IsScript, 'IsEither], ToVScript pkh, Typeable pkh) =&gt;
pkh -&gt; TxSkelRedeemer -&gt; User kind 'Redemption
</span><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-operator hs-var">`UserRedeemedScript`</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679866213"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-227"></span><span>        </span><span id="local-6989586621679866214"><span class="annot"><span class="annottext">User kind mode
</span><a href="#local-6989586621679866214"><span class="hs-identifier hs-var">user</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">User kind mode -&gt; VScript -&gt; User kind mode
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">User kind mode
</span><a href="#local-6989586621679866214"><span class="hs-identifier hs-var">user</span></a></span><span>
</span><span id="line-228"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="annot"><span class="hs-comment">-- | Focusing on the possible 'Api.ScriptHash' of this 'User'</span></span><span>
</span><span id="line-231"></span><span id="local-6989586621679865618"><span id="local-6989586621679865619"><span class="annot"><a href="Cooked.Skeleton.User.html#userScriptHashAF"><span class="hs-identifier hs-type">userScriptHashAF</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AffineFold</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865618"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865619"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ScriptHash</span></span></span></span><span>
</span><span id="line-232"></span><span id="userScriptHashAF"><span class="annot"><span class="annottext">userScriptHashAF :: forall (kind :: UserKind) (mode :: UserMode).
AffineFold (User kind mode) ScriptHash
</span><a href="Cooked.Skeleton.User.html#userScriptHashAF"><span class="hs-identifier hs-var hs-var">userScriptHashAF</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AffineTraversal' (User kind mode) VScript
forall (kind :: UserKind) (mode :: UserMode).
AffineTraversal' (User kind mode) VScript
</span><a href="Cooked.Skeleton.User.html#userVScriptAT"><span class="hs-identifier hs-var">userVScriptAT</span></a></span><span> </span><span class="annot"><span class="annottext">AffineTraversal' (User kind mode) VScript
-&gt; Optic A_Getter NoIx VScript VScript ScriptHash ScriptHash
-&gt; Optic
     An_AffineFold
     NoIx
     (User kind mode)
     (User kind mode)
     ScriptHash
     ScriptHash
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">(VScript -&gt; ScriptHash)
-&gt; Optic A_Getter NoIx VScript VScript ScriptHash ScriptHash
forall s a. (s -&gt; a) -&gt; Getter s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">VScript -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><span class="hs-identifier hs-var">Script.toScriptHash</span></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="annot"><span class="hs-comment">-- | Focusing on the possible 'Api.PubKeyHash' of this 'User'</span></span><span>
</span><span id="line-235"></span><span id="local-6989586621679865642"><span id="local-6989586621679865643"><span class="annot"><a href="Cooked.Skeleton.User.html#userPubKeyHashAT"><span class="hs-identifier hs-type">userPubKeyHashAT</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">AffineTraversal'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865642"><span class="hs-identifier hs-type">kind</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865643"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.PubKeyHash</span></span></span></span><span>
</span><span id="line-236"></span><span id="userPubKeyHashAT"><span class="annot"><span class="annottext">userPubKeyHashAT :: forall (kind :: UserKind) (mode :: UserMode).
AffineTraversal' (User kind mode) PubKeyHash
</span><a href="Cooked.Skeleton.User.html#userPubKeyHashAT"><span class="hs-identifier hs-var hs-var">userPubKeyHashAT</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-237"></span><span>  </span><span class="annot"><span class="annottext">(User kind mode -&gt; Either (User kind mode) PubKeyHash)
-&gt; (User kind mode -&gt; PubKeyHash -&gt; User kind mode)
-&gt; AffineTraversal
     (User kind mode) (User kind mode) PubKeyHash PubKeyHash
forall s t a b.
(s -&gt; Either t a) -&gt; (s -&gt; b -&gt; t) -&gt; AffineTraversal s t a b
</span><span class="hs-identifier hs-var">atraversal</span></span><span>
</span><span id="line-238"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-239"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">pkh -&gt; PubKeyHash
forall a. ToPubKeyHash a =&gt; a -&gt; PubKeyHash
</span><span class="hs-identifier hs-var">Script.toPubKeyHash</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679866228"><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679866228"><span class="hs-identifier hs-var">pkh</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PubKeyHash -&gt; Either (User kind mode) PubKeyHash
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679866228"><span class="hs-identifier hs-var">pkh</span></a></span><span>
</span><span id="line-240"></span><span>        </span><span id="local-6989586621679866229"><span class="annot"><span class="annottext">User kind mode
</span><a href="#local-6989586621679866229"><span class="hs-identifier hs-var">user</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">User kind mode -&gt; Either (User kind mode) PubKeyHash
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">User kind mode
</span><a href="#local-6989586621679866229"><span class="hs-identifier hs-var">user</span></a></span><span>
</span><span id="line-241"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-243"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="annot"><span class="annottext">pkh
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PubKeyHash -&gt; User kind mode
forall pkh (kind :: UserKind) (mode :: UserMode).
(kind &#8712; '[ 'IsPubKey, 'IsEither], ToPubKeyHash pkh,
 Typeable pkh) =&gt;
pkh -&gt; User kind mode
</span><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-var">UserPubKey</span></a></span><span>
</span><span id="line-244"></span><span>        </span><span id="local-6989586621679866237"><span class="annot"><span class="annottext">User kind mode
</span><a href="#local-6989586621679866237"><span class="hs-identifier hs-var">user</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">User kind mode -&gt; PubKeyHash -&gt; User kind mode
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">User kind mode
</span><a href="#local-6989586621679866237"><span class="hs-identifier hs-var">user</span></a></span><span>
</span><span id="line-245"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="annot"><span class="hs-comment">-- | An isomorphism between users required to be pubkeys and 'Api.PubKeyHash'</span></span><span>
</span><span id="line-248"></span><span id="local-6989586621679865506"><span class="annot"><a href="Cooked.Skeleton.User.html#userPubKeyHashI"><span class="hs-identifier hs-type">userPubKeyHashI</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Iso'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#IsPubKey"><span class="hs-identifier hs-type">IsPubKey</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865506"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.PubKeyHash</span></span></span><span>
</span><span id="line-249"></span><span id="userPubKeyHashI"><span class="annot"><span class="annottext">userPubKeyHashI :: forall (mode :: UserMode). Iso' (User 'IsPubKey mode) PubKeyHash
</span><a href="Cooked.Skeleton.User.html#userPubKeyHashI"><span class="hs-identifier hs-var hs-var">userPubKeyHashI</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-250"></span><span>  </span><span class="annot"><span class="annottext">(User 'IsPubKey mode -&gt; PubKeyHash)
-&gt; (PubKeyHash -&gt; User 'IsPubKey mode)
-&gt; Iso
     (User 'IsPubKey mode) (User 'IsPubKey mode) PubKeyHash PubKeyHash
forall s a b t. (s -&gt; a) -&gt; (b -&gt; t) -&gt; Iso s t a b
</span><span class="hs-identifier hs-var">iso</span></span><span>
</span><span id="line-251"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-type">UserPubKey</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">pkh -&gt; PubKeyHash
forall a. ToPubKeyHash a =&gt; a -&gt; PubKeyHash
</span><span class="hs-identifier hs-var">Script.toPubKeyHash</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679866247"><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679866247"><span class="hs-identifier hs-var">pkh</span></a></span></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">PubKeyHash
</span><a href="#local-6989586621679866247"><span class="hs-identifier hs-var">pkh</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>    </span><span class="annot"><span class="annottext">PubKeyHash -&gt; User 'IsPubKey mode
forall pkh (kind :: UserKind) (mode :: UserMode).
(kind &#8712; '[ 'IsPubKey, 'IsEither], ToPubKeyHash pkh,
 Typeable pkh) =&gt;
pkh -&gt; User kind mode
</span><a href="Cooked.Skeleton.User.html#UserPubKey"><span class="hs-identifier hs-var">UserPubKey</span></a></span><span>
</span><span id="line-253"></span><span>
</span><span id="line-254"></span><span class="annot"><span class="hs-comment">-- | Focusing on the 'VScript' from a script</span></span><span>
</span><span id="line-255"></span><span id="local-6989586621679865655"><span class="annot"><a href="Cooked.Skeleton.User.html#userVScriptL"><span class="hs-identifier hs-type">userVScriptL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#IsScript"><span class="hs-identifier hs-type">IsScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865655"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#VScript"><span class="hs-identifier hs-type">VScript</span></a></span></span><span>
</span><span id="line-256"></span><span id="userVScriptL"><span class="annot"><span class="annottext">userVScriptL :: forall (mode :: UserMode). Lens' (User 'IsScript mode) VScript
</span><a href="Cooked.Skeleton.User.html#userVScriptL"><span class="hs-identifier hs-var hs-var">userVScriptL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-257"></span><span>  </span><span class="annot"><span class="annottext">(User 'IsScript mode -&gt; VScript)
-&gt; (User 'IsScript mode -&gt; VScript -&gt; User 'IsScript mode)
-&gt; Lens (User 'IsScript mode) (User 'IsScript mode) VScript VScript
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span>
</span><span id="line-258"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-259"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679866254"><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679866254"><span class="hs-identifier hs-var">vScript</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679866254"><span class="hs-identifier hs-var">vScript</span></a></span><span>
</span><span id="line-260"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">script -&gt; VScript
forall script. ToVScript script =&gt; script -&gt; VScript
</span><a href="Cooked.Skeleton.User.html#toVScript"><span class="hs-identifier hs-var">toVScript</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span id="local-6989586621679866260"><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679866260"><span class="hs-identifier hs-var">vScript</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VScript
</span><a href="#local-6989586621679866260"><span class="hs-identifier hs-var">vScript</span></a></span><span>
</span><span id="line-261"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-263"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-type">UserScript</span></a></span><span> </span><span class="annot"><span class="annottext">script
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">VScript -&gt; User 'IsScript mode
VScript -&gt; User 'IsScript 'Allocation
forall pkh (kind :: UserKind).
(kind &#8712; '[ 'IsScript, 'IsEither], ToVScript pkh, Typeable pkh) =&gt;
pkh -&gt; User kind 'Allocation
</span><a href="Cooked.Skeleton.User.html#UserScript"><span class="hs-identifier hs-var">UserScript</span></a></span><span>
</span><span id="line-264"></span><span>        </span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="annot"><span class="annottext">script
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679866281"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679866281"><span class="hs-identifier hs-var">red</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VScript -&gt; TxSkelRedeemer -&gt; User 'IsScript 'Redemption
forall pkh (kind :: UserKind).
(kind &#8712; '[ 'IsScript, 'IsEither], ToVScript pkh, Typeable pkh) =&gt;
pkh -&gt; TxSkelRedeemer -&gt; User kind 'Redemption
</span><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-operator hs-var">`UserRedeemedScript`</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679866281"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-265"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span class="annot"><span class="hs-comment">-- | Focusing on the 'Api.ScriptHash' from a script</span></span><span>
</span><span id="line-268"></span><span id="local-6989586621679865667"><span class="annot"><a href="Cooked.Skeleton.User.html#userScriptHashG"><span class="hs-identifier hs-type">userScriptHashG</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Getter</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#IsScript"><span class="hs-identifier hs-type">IsScript</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679865667"><span class="hs-identifier hs-type">mode</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Api.ScriptHash</span></span></span><span>
</span><span id="line-269"></span><span id="userScriptHashG"><span class="annot"><span class="annottext">userScriptHashG :: forall (mode :: UserMode). Getter (User 'IsScript mode) ScriptHash
</span><a href="Cooked.Skeleton.User.html#userScriptHashG"><span class="hs-identifier hs-var hs-var">userScriptHashG</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Lens' (User 'IsScript mode) VScript
forall (mode :: UserMode). Lens' (User 'IsScript mode) VScript
</span><a href="Cooked.Skeleton.User.html#userVScriptL"><span class="hs-identifier hs-var">userVScriptL</span></a></span><span> </span><span class="annot"><span class="annottext">Lens' (User 'IsScript mode) VScript
-&gt; Optic A_Getter NoIx VScript VScript ScriptHash ScriptHash
-&gt; Optic
     A_Getter
     NoIx
     (User 'IsScript mode)
     (User 'IsScript mode)
     ScriptHash
     ScriptHash
forall k l m (is :: IxList) (js :: IxList) (ks :: IxList) s t u v a
       b.
(JoinKinds k l m, AppendIndices is js ks) =&gt;
Optic k is s t u v -&gt; Optic l js u v a b -&gt; Optic m ks s t a b
</span><span class="hs-operator hs-var">%</span></span><span> </span><span class="annot"><span class="annottext">(VScript -&gt; ScriptHash)
-&gt; Optic A_Getter NoIx VScript VScript ScriptHash ScriptHash
forall s a. (s -&gt; a) -&gt; Getter s a
</span><span class="hs-identifier hs-var">to</span></span><span> </span><span class="annot"><span class="annottext">VScript -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><span class="hs-identifier hs-var">Script.toScriptHash</span></span><span>
</span><span id="line-270"></span><span>
</span><span id="line-271"></span><span class="annot"><span class="hs-comment">-- | Focus on the 'TxSkelRedeemer' from a script being redeemed</span></span><span>
</span><span id="line-272"></span><span class="annot"><a href="Cooked.Skeleton.User.html#userTxSkelRedeemerL"><span class="hs-identifier hs-type">userTxSkelRedeemerL</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Lens'</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#User"><span class="hs-identifier hs-type">User</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#IsScript"><span class="hs-identifier hs-type">IsScript</span></a></span><span> </span><span class="annot"><a href="Cooked.Skeleton.User.html#Redemption"><span class="hs-identifier hs-type">Redemption</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Cooked.Skeleton.Redeemer.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span>
</span><span id="line-273"></span><span id="userTxSkelRedeemerL"><span class="annot"><span class="annottext">userTxSkelRedeemerL :: Lens' (User 'IsScript 'Redemption) TxSkelRedeemer
</span><a href="Cooked.Skeleton.User.html#userTxSkelRedeemerL"><span class="hs-identifier hs-var hs-var">userTxSkelRedeemerL</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-274"></span><span>  </span><span class="annot"><span class="annottext">(User 'IsScript 'Redemption -&gt; TxSkelRedeemer)
-&gt; (User 'IsScript 'Redemption
    -&gt; TxSkelRedeemer -&gt; User 'IsScript 'Redemption)
-&gt; Lens' (User 'IsScript 'Redemption) TxSkelRedeemer
forall s a b t. (s -&gt; a) -&gt; (s -&gt; b -&gt; t) -&gt; Lens s t a b
</span><span class="hs-identifier hs-var">lens</span></span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span class="annot"><span class="annottext">script
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679866293"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679866293"><span class="hs-identifier hs-var">red</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679866293"><span class="hs-identifier hs-var">red</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-276"></span><span>    </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-type">UserRedeemedScript</span></a></span><span> </span><span id="local-6989586621679866302"><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866302"><span class="hs-identifier hs-var">script</span></a></span></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">script -&gt; TxSkelRedeemer -&gt; User 'IsScript 'Redemption
forall pkh (kind :: UserKind).
(kind &#8712; '[ 'IsScript, 'IsEither], ToVScript pkh, Typeable pkh) =&gt;
pkh -&gt; TxSkelRedeemer -&gt; User kind 'Redemption
</span><a href="Cooked.Skeleton.User.html#UserRedeemedScript"><span class="hs-identifier hs-var">UserRedeemedScript</span></a></span><span> </span><span class="annot"><span class="annottext">script
</span><a href="#local-6989586621679866302"><span class="hs-identifier hs-var">script</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span></pre></body></html>