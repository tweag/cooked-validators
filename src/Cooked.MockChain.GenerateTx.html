<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE GADTs #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE LambdaCase #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE RecordWildCards #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE TupleSections #-}</span><span>
</span><span id="line-5"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-unrecognised-pragmas #-}</span><span>
</span><span id="line-6"></span><span>
</span><span id="line-7"></span><span class="hs-pragma">{-# HLINT ignore &quot;Use section&quot; #-}</span><span>
</span><span id="line-8"></span><span>
</span><span id="line-9"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Cooked.MockChain.GenerateTx</span><span>
</span><span id="line-10"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenerateTxError"><span class="hs-identifier">GenerateTxError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenTxParams"><span class="hs-identifier">GenTxParams</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#gtpCollateralIns"><span class="hs-identifier">gtpCollateralIns</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#gtpFee"><span class="hs-identifier">gtpFee</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#generateTxBodyContent"><span class="hs-identifier">generateTxBodyContent</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#txSkelOutToCardanoTxOut"><span class="hs-identifier">txSkelOutToCardanoTxOut</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#generateTx"><span class="hs-identifier">generateTx</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">where</span><span>
</span><span id="line-17"></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../Cardano.Api.html"><span class="hs-identifier">Cardano.Api</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../Cardano.Api.Shelley.html"><span class="hs-identifier">Cardano.Api.Shelley</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../Cardano.Node.Emulator.Params.html"><span class="hs-identifier">Cardano.Node.Emulator.Params</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Emulator</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../Control.Arrow.html"><span class="hs-identifier">Control.Arrow</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../Control.Monad.html"><span class="hs-identifier">Control.Monad</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Output.html"><span class="hs-identifier">Cooked.Output</span></a></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html"><span class="hs-identifier">Cooked.Skeleton</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Cooked.Wallet.html"><span class="hs-identifier">Cooked.Wallet</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../Data.Bifunctor.html"><span class="hs-identifier">Data.Bifunctor</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../Data.Default.html"><span class="hs-identifier">Data.Default</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../Data.Foldable.html"><span class="hs-identifier">Data.Foldable</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../Data.Map.html"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Data.Map.Internal.html#Map"><span class="hs-identifier">Map</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../Data.Map.html"><span class="hs-identifier">Data.Map</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Map</span></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../Data.Maybe.html"><span class="hs-identifier">Data.Maybe</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Maybe</span></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../Data.Set.html"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Data.Set.Internal.html#Set"><span class="hs-identifier">Set</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../Data.Set.html"><span class="hs-identifier">Data.Set</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../Ledger.html"><span class="hs-identifier">Ledger</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Pl</span></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Ledger.Tx.Internal.html#TxOut"><span class="hs-identifier">TxOut</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="../Plutus.Script.Utils.Scripts.html#validatorHash"><span class="hs-identifier">validatorHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../Ledger.Tx.html"><span class="hs-identifier">Ledger.Tx</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><a href="../Ledger.html"><span class="hs-identifier">Ledger</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../Ledger.Tx.CardanoAPI.html"><span class="hs-identifier">Ledger.Tx.CardanoAPI</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Pl</span></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="../Optics.Core.html"><span class="hs-identifier">Optics.Core</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../Plutus.Script.Utils.Ada.html"><span class="hs-identifier">Plutus.Script.Utils.Ada</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Pl</span></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../Plutus.V2.Ledger.Api.html"><span class="hs-identifier">Plutus.V2.Ledger.Api</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Pl</span></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="../Wallet.API.html"><span class="hs-identifier">Wallet.API</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Pl</span></span><span>
</span><span id="line-41"></span><span>
</span><span id="line-42"></span><span class="hs-keyword">data</span><span> </span><span id="GenerateTxError"><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenerateTxError"><span class="hs-identifier hs-var">GenerateTxError</span></a></span></span><span>
</span><span id="line-43"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="ToCardanoError"><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#ToCardanoError"><span class="hs-identifier hs-var">ToCardanoError</span></a></span></span><span> </span><span class="annot"><a href="../GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="../Ledger.Tx.CardanoAPI.Internal.html#ToCardanoError"><span class="hs-identifier hs-type">Pl.ToCardanoError</span></a></span><span>
</span><span id="line-44"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TxBodyError"><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#TxBodyError"><span class="hs-identifier hs-var">TxBodyError</span></a></span></span><span> </span><span class="annot"><a href="../GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.TxBody.html#TxBodyError"><span class="hs-identifier hs-type">C.TxBodyError</span></a></span><span>
</span><span id="line-45"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GenerateTxErrorGeneral"><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenerateTxErrorGeneral"><span class="hs-identifier hs-var">GenerateTxErrorGeneral</span></a></span></span><span> </span><span class="annot"><a href="../GHC.Base.html#String"><span class="hs-identifier hs-type">String</span></a></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679639874"><span id="local-6989586621679639876"><span id="local-6989586621679639878"><span class="annot"><span class="annottext">Int -&gt; GenerateTxError -&gt; ShowS
[GenerateTxError] -&gt; ShowS
GenerateTxError -&gt; String
(Int -&gt; GenerateTxError -&gt; ShowS)
-&gt; (GenerateTxError -&gt; String)
-&gt; ([GenerateTxError] -&gt; ShowS)
-&gt; Show GenerateTxError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
showList :: [GenerateTxError] -&gt; ShowS
$cshowList :: [GenerateTxError] -&gt; ShowS
show :: GenerateTxError -&gt; String
$cshow :: GenerateTxError -&gt; String
showsPrec :: Int -&gt; GenerateTxError -&gt; ShowS
$cshowsPrec :: Int -&gt; GenerateTxError -&gt; ShowS
</span><a href="../GHC.Show.html#Show"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679639869"><span id="local-6989586621679639871"><span class="annot"><span class="annottext">GenerateTxError -&gt; GenerateTxError -&gt; Bool
(GenerateTxError -&gt; GenerateTxError -&gt; Bool)
-&gt; (GenerateTxError -&gt; GenerateTxError -&gt; Bool)
-&gt; Eq GenerateTxError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
/= :: GenerateTxError -&gt; GenerateTxError -&gt; Bool
$c/= :: GenerateTxError -&gt; GenerateTxError -&gt; Bool
== :: GenerateTxError -&gt; GenerateTxError -&gt; Bool
$c== :: GenerateTxError -&gt; GenerateTxError -&gt; Bool
</span><a href="../GHC.Classes.html#Eq"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></a></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span>
</span><span id="line-48"></span><span class="hs-comment">-- | The internal (do-not-modify unless you know what you're doing) parameters</span><span>
</span><span id="line-49"></span><span class="hs-comment">-- for 'generateTxBodyContent'.</span><span>
</span><span id="line-50"></span><span class="hs-keyword">data</span><span> </span><span id="GenTxParams"><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenTxParams"><span class="hs-identifier hs-var">GenTxParams</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="GenTxParams"><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenTxParams"><span class="hs-identifier hs-var">GenTxParams</span></a></span></span><span>
</span><span id="line-51"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | The collateral UTxOs to use for the transaction.</span><span>
</span><span id="line-52"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-53"></span><span>    </span><span class="hs-comment">-- It is the duty of the caller to choose and set the collateral UTxOs.</span><span>
</span><span id="line-54"></span><span>    </span><span class="hs-comment">-- 'generateTxBodyContent' will not do it.</span><span>
</span><span id="line-55"></span><span>    </span><span id="gtpCollateralIns"><span class="annot"><span class="annottext">GenTxParams -&gt; Set TxOutRef
</span><a href="Cooked.MockChain.GenerateTx.html#gtpCollateralIns"><span class="hs-identifier hs-var hs-var">gtpCollateralIns</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../Data.Set.Internal.html#Set"><span class="hs-identifier hs-type">Set</span></a></span><span> </span><span class="annot"><a href="../Plutus.V1.Ledger.Tx.html#TxOutRef"><span class="hs-identifier hs-type">Pl.TxOutRef</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>    </span><span class="hs-comment">-- | The transaction fee (in Lovelace)</span><span>
</span><span id="line-57"></span><span>    </span><span id="gtpFee"><span class="annot"><span class="annottext">GenTxParams -&gt; Fee
</span><a href="Cooked.MockChain.GenerateTx.html#gtpFee"><span class="hs-identifier hs-var hs-var">gtpFee</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#Fee"><span class="hs-identifier hs-type">Fee</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-59"></span><span>
</span><span id="line-60"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="../Data.Default.Class.html#Default"><span class="hs-identifier hs-type">Default</span></a></span><span> </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenTxParams"><span class="hs-identifier hs-type">GenTxParams</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-61"></span><span>  </span><span id="local-6989586621679639864"><span class="annot"><span class="annottext">def :: GenTxParams
</span><a href="../Data.Default.Class.html#def"><span class="hs-identifier hs-var hs-var hs-var hs-var">def</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GenTxParams :: Set TxOutRef -&gt; Fee -&gt; GenTxParams
</span><a href="Cooked.MockChain.GenerateTx.html#GenTxParams"><span class="hs-identifier hs-type">GenTxParams</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">gtpCollateralIns :: Set TxOutRef
</span><a href="Cooked.MockChain.GenerateTx.html#gtpCollateralIns"><span class="hs-identifier hs-var">gtpCollateralIns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Set TxOutRef
forall a. Monoid a =&gt; a
</span><a href="../GHC.Base.html#mempty"><span class="hs-identifier hs-var">mempty</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">gtpFee :: Fee
</span><a href="Cooked.MockChain.GenerateTx.html#gtpFee"><span class="hs-identifier hs-var">gtpFee</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Fee
</span><span class="hs-number">0</span></span><span class="hs-special">}</span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#generateTxBodyContent"><span class="hs-identifier hs-type">generateTxBodyContent</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-comment">-- | Parameters controlling transaction generation.</span><span>
</span><span id="line-65"></span><span>  </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenTxParams"><span class="hs-identifier hs-type">GenTxParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-comment">-- | Some parameters, coming from the 'MockChain'.</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><a href="../Cardano.Node.Emulator.Params.html#Params"><span class="hs-identifier hs-type">Pl.Params</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-comment">-- | All of the currently known data on transaction inputs, also coming from the 'MockChain'.</span><span>
</span><span id="line-69"></span><span>  </span><span class="annot"><a href="../Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../Plutus.V1.Ledger.Scripts.html#DatumHash"><span class="hs-identifier hs-type">Pl.DatumHash</span></a></span><span> </span><span class="annot"><a href="../Plutus.V1.Ledger.Scripts.html#Datum"><span class="hs-identifier hs-type">Pl.Datum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-comment">-- | All of the currently known UTxOs which will be used as transaction inputs or referenced, also coming from the 'MockChain'.</span><span>
</span><span id="line-71"></span><span>  </span><span class="annot"><a href="../Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../Plutus.V1.Ledger.Tx.html#TxOutRef"><span class="hs-identifier hs-type">Pl.TxOutRef</span></a></span><span> </span><span class="annot"><a href="../Plutus.V2.Ledger.Tx.html#TxOut"><span class="hs-identifier hs-type">Pl.TxOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-72"></span><span>  </span><span class="hs-comment">-- | All of the currently known validators which protect transaction inputs, also coming from the 'MockChain'.</span><span>
</span><span id="line-73"></span><span>  </span><span class="annot"><a href="../Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../Plutus.V1.Ledger.Scripts.html#ValidatorHash"><span class="hs-identifier hs-type">Pl.ValidatorHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Plutus.Script.Utils.Scripts.html#Versioned"><span class="hs-identifier hs-type">Pl.Versioned</span></a></span><span> </span><span class="annot"><a href="../Plutus.V1.Ledger.Scripts.html#Validator"><span class="hs-identifier hs-type">Pl.Validator</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-comment">-- | The transaction skeleton to translate.</span><span>
</span><span id="line-75"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-76"></span><span>  </span><span class="annot"><a href="../Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span>
</span><span id="line-77"></span><span>    </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenerateTxError"><span class="hs-identifier hs-type">GenerateTxError</span></a></span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="../Cardano.Api.TxBody.html#TxBodyContent"><span class="hs-identifier hs-type">C.TxBodyContent</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.TxBody.html#BuildTx"><span class="hs-identifier hs-type">C.BuildTx</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Eras.html#BabbageEra"><span class="hs-identifier hs-type">C.BabbageEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span id="generateTxBodyContent"><span class="annot"><span class="annottext">generateTxBodyContent :: GenTxParams
-&gt; Params
-&gt; Map DatumHash Datum
-&gt; Map TxOutRef TxOut
-&gt; Map ValidatorHash (Versioned Validator)
-&gt; TxSkel
-&gt; Either GenerateTxError (TxBodyContent BuildTx BabbageEra)
</span><a href="Cooked.MockChain.GenerateTx.html#generateTxBodyContent"><span class="hs-identifier hs-var hs-var">generateTxBodyContent</span></a></span></span><span> </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenTxParams"><span class="hs-identifier hs-type">GenTxParams</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621679639861"><span id="local-6989586621679639862"><span class="annot"><span class="annottext">Set TxOutRef
Fee
gtpFee :: Fee
gtpCollateralIns :: Set TxOutRef
gtpFee :: GenTxParams -&gt; Fee
gtpCollateralIns :: GenTxParams -&gt; Set TxOutRef
</span><a href="#local-6989586621679639861"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span id="local-6989586621679639860"><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621679639860"><span class="hs-identifier hs-var">theParams</span></a></span></span><span> </span><span id="local-6989586621679639859"><span class="annot"><span class="annottext">Map DatumHash Datum
</span><a href="#local-6989586621679639859"><span class="hs-identifier hs-var">managedData</span></a></span></span><span> </span><span id="local-6989586621679639858"><span class="annot"><span class="annottext">Map TxOutRef TxOut
</span><a href="#local-6989586621679639858"><span class="hs-identifier hs-var">managedTxOuts</span></a></span></span><span> </span><span id="local-6989586621679639857"><span class="annot"><span class="annottext">Map ValidatorHash (Versioned Validator)
</span><a href="#local-6989586621679639857"><span class="hs-identifier hs-var">managedValidators</span></a></span></span><span> </span><span id="local-6989586621679639856"><span class="annot"><span class="annottext">TxSkel
</span><a href="#local-6989586621679639856"><span class="hs-identifier hs-var">skel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-80"></span><span>  </span><span id="local-6989586621679639855"><span class="annot"><span class="annottext">[(TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra))]
</span><a href="#local-6989586621679639855"><span class="hs-identifier hs-var">txIns</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">((TxOutRef, TxSkelRedeemer)
 -&gt; Either
      GenerateTxError
      (TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra)))
-&gt; [(TxOutRef, TxSkelRedeemer)]
-&gt; Either
     GenerateTxError
     [(TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOutRef, TxSkelRedeemer)
-&gt; Either
     GenerateTxError
     (TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra))
</span><a href="#local-6989586621679639853"><span class="hs-identifier hs-var">txSkelInToTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">([(TxOutRef, TxSkelRedeemer)]
 -&gt; Either
      GenerateTxError
      [(TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra))])
-&gt; [(TxOutRef, TxSkelRedeemer)]
-&gt; Either
     GenerateTxError
     [(TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra))]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxSkelRedeemer -&gt; [(TxOutRef, TxSkelRedeemer)]
forall k a. Map k a -&gt; [(k, a)]
</span><a href="../Data.Map.Internal.html#toList"><span class="hs-identifier hs-var">Map.toList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkel -&gt; Map TxOutRef TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#txSkelIns"><span class="hs-identifier hs-var hs-var">txSkelIns</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel
</span><a href="#local-6989586621679639856"><span class="hs-identifier hs-var">skel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span>  </span><span id="local-6989586621679639850"><span class="annot"><span class="annottext">TxInsReference BuildTx BabbageEra
</span><a href="#local-6989586621679639850"><span class="hs-identifier hs-var">txInsReference</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><span class="annottext">[TxOutRef]
-&gt; Either GenerateTxError (TxInsReference BuildTx BabbageEra)
</span><a href="#local-6989586621679639849"><span class="hs-identifier hs-var">txOutRefsToTxInsReference</span></a></span><span> </span><span class="annot"><span class="annottext">([TxOutRef]
 -&gt; Either GenerateTxError (TxInsReference BuildTx BabbageEra))
-&gt; [TxOutRef]
-&gt; Either GenerateTxError (TxInsReference BuildTx BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-83"></span><span>      </span><span class="annot"><span class="annottext">(TxSkelRedeemer -&gt; Maybe TxOutRef)
-&gt; [TxSkelRedeemer] -&gt; [TxOutRef]
forall a b. (a -&gt; Maybe b) -&gt; [a] -&gt; [b]
</span><a href="../Data.Maybe.html#mapMaybe"><span class="hs-identifier hs-var">Maybe.mapMaybe</span></a></span><span>
</span><span id="line-84"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-85"></span><span>            </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemerForReferencedScript"><span class="hs-identifier hs-type">TxSkelRedeemerForReferencedScript</span></a></span><span> </span><span id="local-6989586621679639846"><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679639846"><span class="hs-identifier hs-var">oref</span></a></span></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxOutRef -&gt; Maybe TxOutRef
forall a. a -&gt; Maybe a
</span><a href="../GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679639846"><span class="hs-identifier hs-var">oref</span></a></span><span>
</span><span id="line-86"></span><span>            </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe TxOutRef
forall a. Maybe a
</span><a href="../GHC.Maybe.html#Nothing"><span class="hs-identifier hs-var">Nothing</span></a></span><span>
</span><span id="line-87"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map TxOutRef TxSkelRedeemer -&gt; [TxSkelRedeemer]
forall k a. Map k a -&gt; [a]
</span><a href="../Data.Map.Internal.html#elems"><span class="hs-identifier hs-var">Map.elems</span></a></span><span> </span><span class="annot"><span class="annottext">(Map TxOutRef TxSkelRedeemer -&gt; [TxSkelRedeemer])
-&gt; Map TxOutRef TxSkelRedeemer -&gt; [TxSkelRedeemer]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; Map TxOutRef TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#txSkelIns"><span class="hs-identifier hs-var hs-var">txSkelIns</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel
</span><a href="#local-6989586621679639856"><span class="hs-identifier hs-var">skel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-89"></span><span>        </span><span class="annot"><span class="annottext">[TxOutRef] -&gt; [TxOutRef] -&gt; [TxOutRef]
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">Set TxOutRef -&gt; [TxOutRef]
forall a. Set a -&gt; [a]
</span><a href="../Data.Set.Internal.html#toList"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkel -&gt; Set TxOutRef
</span><a href="Cooked.Skeleton.html#txSkelInsReference"><span class="hs-identifier hs-var hs-var">txSkelInsReference</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel
</span><a href="#local-6989586621679639856"><span class="hs-identifier hs-var">skel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>  </span><span id="local-6989586621679639842"><span class="annot"><span class="annottext">TxInsCollateral BabbageEra
</span><a href="#local-6989586621679639842"><span class="hs-identifier hs-var">txInsCollateral</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[TxOutRef] -&gt; Either GenerateTxError (TxInsCollateral BabbageEra)
</span><a href="#local-6989586621679639841"><span class="hs-identifier hs-var">txOutRefsToTxSkelInsCollateral</span></a></span><span> </span><span class="annot"><span class="annottext">([TxOutRef] -&gt; Either GenerateTxError (TxInsCollateral BabbageEra))
-&gt; [TxOutRef]
-&gt; Either GenerateTxError (TxInsCollateral BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Set TxOutRef -&gt; [TxOutRef]
forall a. Set a -&gt; [a]
</span><a href="../Data.Set.Internal.html#toList"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Set TxOutRef
</span><a href="#local-6989586621679639862"><span class="hs-identifier hs-var">gtpCollateralIns</span></a></span><span>
</span><span id="line-91"></span><span>  </span><span id="local-6989586621679639840"><span class="annot"><span class="annottext">[TxOut CtxTx BabbageEra]
</span><a href="#local-6989586621679639840"><span class="hs-identifier hs-var">txOuts</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(TxSkelOut -&gt; Either GenerateTxError (TxOut CtxTx BabbageEra))
-&gt; [TxSkelOut] -&gt; Either GenerateTxError [TxOut CtxTx BabbageEra]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Params
-&gt; TxSkelOut -&gt; Either GenerateTxError (TxOut CtxTx BabbageEra)
</span><a href="Cooked.MockChain.GenerateTx.html#txSkelOutToCardanoTxOut"><span class="hs-identifier hs-var">txSkelOutToCardanoTxOut</span></a></span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621679639860"><span class="hs-identifier hs-var">theParams</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">([TxSkelOut] -&gt; Either GenerateTxError [TxOut CtxTx BabbageEra])
-&gt; [TxSkelOut] -&gt; Either GenerateTxError [TxOut CtxTx BabbageEra]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; [TxSkelOut]
</span><a href="Cooked.Skeleton.html#txSkelOuts"><span class="hs-identifier hs-var hs-var">txSkelOuts</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel
</span><a href="#local-6989586621679639856"><span class="hs-identifier hs-var">skel</span></a></span><span>
</span><span id="line-92"></span><span>  </span><span id="local-6989586621679639838"><span class="annot"><span class="annottext">(TxValidityLowerBound BabbageEra, TxValidityUpperBound BabbageEra)
</span><a href="#local-6989586621679639838"><span class="hs-identifier hs-var">txValidityRange</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-93"></span><span>    </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; GenerateTxError)
-&gt; Either
     ToCardanoError
     (TxValidityLowerBound BabbageEra, TxValidityUpperBound BabbageEra)
-&gt; Either
     GenerateTxError
     (TxValidityLowerBound BabbageEra, TxValidityUpperBound BabbageEra)
forall (a :: * -&gt; * -&gt; *) b c d.
ArrowChoice a =&gt;
a b c -&gt; a (Either b d) (Either c d)
</span><a href="../Control.Arrow.html#left"><span class="hs-identifier hs-var">left</span></a></span><span>
</span><span id="line-94"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; ToCardanoError -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#ToCardanoError"><span class="hs-identifier hs-var">ToCardanoError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;translating the transaction validity range&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>      </span><span class="annot"><span class="annottext">(Either
   ToCardanoError
   (TxValidityLowerBound BabbageEra, TxValidityUpperBound BabbageEra)
 -&gt; Either
      GenerateTxError
      (TxValidityLowerBound BabbageEra, TxValidityUpperBound BabbageEra))
-&gt; (SlotRange
    -&gt; Either
         ToCardanoError
         (TxValidityLowerBound BabbageEra, TxValidityUpperBound BabbageEra))
-&gt; SlotRange
-&gt; Either
     GenerateTxError
     (TxValidityLowerBound BabbageEra, TxValidityUpperBound BabbageEra)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">SlotRange
-&gt; Either
     ToCardanoError
     (TxValidityLowerBound BabbageEra, TxValidityUpperBound BabbageEra)
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoValidityRange"><span class="hs-identifier hs-var">Pl.toCardanoValidityRange</span></a></span><span>
</span><span id="line-96"></span><span>      </span><span class="annot"><span class="annottext">(SlotRange
 -&gt; Either
      GenerateTxError
      (TxValidityLowerBound BabbageEra, TxValidityUpperBound BabbageEra))
-&gt; SlotRange
-&gt; Either
     GenerateTxError
     (TxValidityLowerBound BabbageEra, TxValidityUpperBound BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; SlotRange
</span><a href="Cooked.Skeleton.html#txSkelValidityRange"><span class="hs-identifier hs-var hs-var">txSkelValidityRange</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel
</span><a href="#local-6989586621679639856"><span class="hs-identifier hs-var">skel</span></a></span><span>
</span><span id="line-97"></span><span>  </span><span id="local-6989586621679639833"><span class="annot"><span class="annottext">TxMintValue BuildTx BabbageEra
</span><a href="#local-6989586621679639833"><span class="hs-identifier hs-var">txMintValue</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
-&gt; Either GenerateTxError (TxMintValue BuildTx BabbageEra)
</span><a href="#local-6989586621679639832"><span class="hs-identifier hs-var">txSkelMintsToTxMintValue</span></a></span><span> </span><span class="annot"><span class="annottext">(TxSkelMints
 -&gt; Either GenerateTxError (TxMintValue BuildTx BabbageEra))
-&gt; TxSkelMints
-&gt; Either GenerateTxError (TxMintValue BuildTx BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; TxSkelMints
</span><a href="Cooked.Skeleton.html#txSkelMints"><span class="hs-identifier hs-var hs-var">txSkelMints</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel
</span><a href="#local-6989586621679639856"><span class="hs-identifier hs-var">skel</span></a></span><span>
</span><span id="line-98"></span><span>  </span><span id="local-6989586621679639830"><span class="annot"><span class="annottext">TxExtraKeyWitnesses BabbageEra
</span><a href="#local-6989586621679639830"><span class="hs-identifier hs-var">txExtraKeyWits</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-99"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679639829"><span class="annot"><span class="annottext">signers :: [Wallet]
</span><a href="#local-6989586621679639829"><span class="hs-identifier hs-var hs-var">signers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; [Wallet]
</span><a href="Cooked.Skeleton.html#txSkelSigners"><span class="hs-identifier hs-var hs-var">txSkelSigners</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel
</span><a href="#local-6989586621679639856"><span class="hs-identifier hs-var">skel</span></a></span><span>
</span><span id="line-100"></span><span>     </span><span class="hs-keyword">in</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">[Wallet] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><a href="../Data.Foldable.html#null"><span class="hs-identifier hs-var">null</span></a></span><span> </span><span class="annot"><span class="annottext">[Wallet]
</span><a href="#local-6989586621679639829"><span class="hs-identifier hs-var">signers</span></a></span><span>
</span><span id="line-101"></span><span>          </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">GenerateTxError
-&gt; Either GenerateTxError (TxExtraKeyWitnesses BabbageEra)
forall a b. a -&gt; Either a b
</span><a href="../Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(GenerateTxError
 -&gt; Either GenerateTxError (TxExtraKeyWitnesses BabbageEra))
-&gt; GenerateTxError
-&gt; Either GenerateTxError (TxExtraKeyWitnesses BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#GenerateTxErrorGeneral"><span class="hs-identifier hs-var">GenerateTxErrorGeneral</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;empty txSkelSigners. You must provide at least one signer&quot;</span></span><span>
</span><span id="line-102"></span><span>          </span><span class="hs-keyword">else</span><span>
</span><span id="line-103"></span><span>            </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; GenerateTxError)
-&gt; ([Hash PaymentKey] -&gt; TxExtraKeyWitnesses BabbageEra)
-&gt; Either ToCardanoError [Hash PaymentKey]
-&gt; Either GenerateTxError (TxExtraKeyWitnesses BabbageEra)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../Data.Bifunctor.html#bimap"><span class="hs-identifier hs-var">bimap</span></a></span><span>
</span><span id="line-104"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; ToCardanoError -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#ToCardanoError"><span class="hs-identifier hs-var">ToCardanoError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;translating the required signers&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxExtraKeyWitnessesSupportedInEra BabbageEra
-&gt; [Hash PaymentKey] -&gt; TxExtraKeyWitnesses BabbageEra
forall era.
TxExtraKeyWitnessesSupportedInEra era
-&gt; [Hash PaymentKey] -&gt; TxExtraKeyWitnesses era
</span><a href="../Cardano.Api.TxBody.html#TxExtraKeyWitnesses"><span class="hs-identifier hs-var">C.TxExtraKeyWitnesses</span></a></span><span> </span><span class="annot"><span class="annottext">TxExtraKeyWitnessesSupportedInEra BabbageEra
</span><a href="../Cardano.Api.TxBody.html#ExtraKeyWitnessesInBabbageEra"><span class="hs-identifier hs-var">C.ExtraKeyWitnessesInBabbageEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span>              </span><span class="annot"><span class="annottext">(Either ToCardanoError [Hash PaymentKey]
 -&gt; Either GenerateTxError (TxExtraKeyWitnesses BabbageEra))
-&gt; Either ToCardanoError [Hash PaymentKey]
-&gt; Either GenerateTxError (TxExtraKeyWitnesses BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">(Wallet -&gt; Either ToCardanoError (Hash PaymentKey))
-&gt; [Wallet] -&gt; Either ToCardanoError [Hash PaymentKey]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span>
</span><span id="line-107"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PaymentPubKeyHash -&gt; Either ToCardanoError (Hash PaymentKey)
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoPaymentKeyHash"><span class="hs-identifier hs-var">Pl.toCardanoPaymentKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">(PaymentPubKeyHash -&gt; Either ToCardanoError (Hash PaymentKey))
-&gt; (Wallet -&gt; PaymentPubKeyHash)
-&gt; Wallet
-&gt; Either ToCardanoError (Hash PaymentKey)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PubKeyHash -&gt; PaymentPubKeyHash
</span><a href="../Ledger.Address.html#PaymentPubKeyHash"><span class="hs-identifier hs-var">Pl.PaymentPubKeyHash</span></a></span><span> </span><span class="annot"><span class="annottext">(PubKeyHash -&gt; PaymentPubKeyHash)
-&gt; (Wallet -&gt; PubKeyHash) -&gt; Wallet -&gt; PaymentPubKeyHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet -&gt; PubKeyHash
</span><a href="Cooked.Wallet.html#walletPKHash"><span class="hs-identifier hs-var">walletPKHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-108"></span><span>                </span><span class="annot"><span class="annottext">[Wallet]
</span><a href="#local-6989586621679639829"><span class="hs-identifier hs-var">signers</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span id="local-6989586621679639820"><span class="annot"><span class="annottext">TxTotalCollateral BabbageEra
</span><a href="#local-6989586621679639820"><span class="hs-identifier hs-var">txTotalCollateral</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><span class="annottext">([Value] -&gt; TxTotalCollateral BabbageEra)
-&gt; Either GenerateTxError [Value]
-&gt; Either GenerateTxError (TxTotalCollateral BabbageEra)
forall (a :: * -&gt; * -&gt; *) b c d.
ArrowChoice a =&gt;
a b c -&gt; a (Either d b) (Either d c)
</span><a href="../Control.Arrow.html#right"><span class="hs-identifier hs-var">right</span></a></span><span>
</span><span id="line-111"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TxTotalAndReturnCollateralSupportedInEra BabbageEra
-&gt; Lovelace -&gt; TxTotalCollateral BabbageEra
forall era.
TxTotalAndReturnCollateralSupportedInEra era
-&gt; Lovelace -&gt; TxTotalCollateral era
</span><a href="../Cardano.Api.TxBody.html#TxTotalCollateral"><span class="hs-identifier hs-var">C.TxTotalCollateral</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe (TxTotalAndReturnCollateralSupportedInEra BabbageEra)
-&gt; TxTotalAndReturnCollateralSupportedInEra BabbageEra
forall a. HasCallStack =&gt; Maybe a -&gt; a
</span><a href="../Data.Maybe.html#fromJust"><span class="hs-identifier hs-var">Maybe.fromJust</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CardanoEra BabbageEra
-&gt; Maybe (TxTotalAndReturnCollateralSupportedInEra BabbageEra)
forall era.
CardanoEra era
-&gt; Maybe (TxTotalAndReturnCollateralSupportedInEra era)
</span><a href="../Cardano.Api.TxBody.html#totalAndReturnCollateralSupportedInEra"><span class="hs-identifier hs-var">C.totalAndReturnCollateralSupportedInEra</span></a></span><span> </span><span class="annot"><span class="annottext">CardanoEra BabbageEra
</span><a href="../Cardano.Api.Eras.html#BabbageEra"><span class="hs-identifier hs-var">C.BabbageEra</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>          </span><span class="annot"><span class="annottext">(Lovelace -&gt; TxTotalCollateral BabbageEra)
-&gt; ([Value] -&gt; Lovelace) -&gt; [Value] -&gt; TxTotalCollateral BabbageEra
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Lovelace
</span><a href="../Cardano.Api.Value.html#Lovelace"><span class="hs-identifier hs-var">C.Lovelace</span></a></span><span>
</span><span id="line-113"></span><span>          </span><span class="annot"><span class="annottext">(Integer -&gt; Lovelace)
-&gt; ([Value] -&gt; Integer) -&gt; [Value] -&gt; Lovelace
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Ada -&gt; Integer
</span><a href="../Plutus.Script.Utils.Ada.html#getLovelace"><span class="hs-identifier hs-var hs-var">Pl.getLovelace</span></a></span><span>
</span><span id="line-114"></span><span>          </span><span class="annot"><span class="annottext">(Ada -&gt; Integer) -&gt; ([Value] -&gt; Ada) -&gt; [Value] -&gt; Integer
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Ada
</span><a href="../Plutus.Script.Utils.Ada.html#fromValue"><span class="hs-identifier hs-var">Pl.fromValue</span></a></span><span>
</span><span id="line-115"></span><span>          </span><span class="annot"><span class="annottext">(Value -&gt; Ada) -&gt; ([Value] -&gt; Value) -&gt; [Value] -&gt; Ada
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">[Value] -&gt; Value
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../GHC.Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span>
</span><span id="line-116"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-117"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">(TxOutRef -&gt; Either GenerateTxError Value)
-&gt; [TxOutRef] -&gt; Either GenerateTxError [Value]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span>
</span><span id="line-118"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621679639811"><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679639811"><span class="hs-identifier hs-var">txOutRef</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-119"></span><span>              </span><span class="annot"><a href="../Plutus.V2.Ledger.Tx.html#TxOut"><span class="hs-identifier hs-type">Pl.TxOut</span></a></span><span> </span><span class="annot"><span class="annottext">Address
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621679639809"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679639809"><span class="hs-identifier hs-var">outValue</span></a></span></span><span> </span><span class="annot"><span class="annottext">OutputDatum
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe ScriptHash
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-120"></span><span>                </span><span class="annot"><span class="annottext">GenerateTxError -&gt; Maybe TxOut -&gt; Either GenerateTxError TxOut
forall e a. e -&gt; Maybe a -&gt; Either e a
</span><a href="#local-6989586621679639808"><span class="hs-identifier hs-var">throwOnNothing</span></a></span><span>
</span><span id="line-121"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#GenerateTxErrorGeneral"><span class="hs-identifier hs-var">GenerateTxErrorGeneral</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; GenerateTxError) -&gt; String -&gt; GenerateTxError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;computing the total collateral: Unknown TxOutRef&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><a href="../GHC.Base.html#%2B%2B"><span class="hs-operator hs-var">++</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><a href="../GHC.Show.html#show"><span class="hs-identifier hs-var">show</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679639811"><span class="hs-identifier hs-var">txOutRef</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-122"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOutRef -&gt; Map TxOutRef TxOut -&gt; Maybe TxOut
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679639811"><span class="hs-identifier hs-var">txOutRef</span></a></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxOut
</span><a href="#local-6989586621679639858"><span class="hs-identifier hs-var">managedTxOuts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>              </span><span class="annot"><span class="annottext">Value -&gt; Either GenerateTxError Value
forall a b. b -&gt; Either a b
</span><a href="../Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621679639809"><span class="hs-identifier hs-var">outValue</span></a></span><span>
</span><span id="line-124"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-125"></span><span>          </span><span class="annot"><span class="annottext">([TxOutRef] -&gt; Either GenerateTxError [Value])
-&gt; [TxOutRef] -&gt; Either GenerateTxError [Value]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Set TxOutRef -&gt; [TxOutRef]
forall a. Set a -&gt; [a]
</span><a href="../Data.Set.Internal.html#toList"><span class="hs-identifier hs-var">Set.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Set TxOutRef
</span><a href="#local-6989586621679639862"><span class="hs-identifier hs-var">gtpCollateralIns</span></a></span><span>
</span><span id="line-126"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><span class="annottext">TxBodyContent BuildTx BabbageEra
-&gt; Either GenerateTxError (TxBodyContent BuildTx BabbageEra)
forall a b. b -&gt; Either a b
</span><a href="../Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(TxBodyContent BuildTx BabbageEra
 -&gt; Either GenerateTxError (TxBodyContent BuildTx BabbageEra))
-&gt; TxBodyContent BuildTx BabbageEra
-&gt; Either GenerateTxError (TxBodyContent BuildTx BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><span class="annottext">TxBodyContent :: forall build era.
TxIns build era
-&gt; TxInsCollateral era
-&gt; TxInsReference build era
-&gt; [TxOut CtxTx era]
-&gt; TxTotalCollateral era
-&gt; TxReturnCollateral CtxTx era
-&gt; TxFee era
-&gt; (TxValidityLowerBound era, TxValidityUpperBound era)
-&gt; TxMetadataInEra era
-&gt; TxAuxScripts era
-&gt; TxExtraKeyWitnesses era
-&gt; BuildTxWith build (Maybe ProtocolParameters)
-&gt; TxWithdrawals build era
-&gt; TxCertificates build era
-&gt; TxUpdateProposal era
-&gt; TxMintValue build era
-&gt; TxScriptValidity era
-&gt; TxBodyContent build era
</span><a href="../Cardano.Api.TxBody.html#TxBodyContent"><span class="hs-identifier hs-type">C.TxBodyContent</span></a></span><span>
</span><span id="line-129"></span><span>      </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">txIns :: [(TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra))]
</span><a href="../Cardano.Api.TxBody.html#txIns"><span class="hs-identifier hs-var">C.txIns</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra))]
</span><a href="#local-6989586621679639855"><span class="hs-identifier hs-var">txIns</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-130"></span><span>        </span><span class="annot"><span class="annottext">txInsCollateral :: TxInsCollateral BabbageEra
</span><a href="../Cardano.Api.TxBody.html#txInsCollateral"><span class="hs-identifier hs-var">C.txInsCollateral</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxInsCollateral BabbageEra
</span><a href="#local-6989586621679639842"><span class="hs-identifier hs-var">txInsCollateral</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-131"></span><span>        </span><span class="annot"><span class="annottext">txInsReference :: TxInsReference BuildTx BabbageEra
</span><a href="../Cardano.Api.TxBody.html#txInsReference"><span class="hs-identifier hs-var">C.txInsReference</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxInsReference BuildTx BabbageEra
</span><a href="#local-6989586621679639850"><span class="hs-identifier hs-var">txInsReference</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-132"></span><span>        </span><span class="annot"><span class="annottext">txOuts :: [TxOut CtxTx BabbageEra]
</span><a href="../Cardano.Api.TxBody.html#txOuts"><span class="hs-identifier hs-var">C.txOuts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[TxOut CtxTx BabbageEra]
</span><a href="#local-6989586621679639840"><span class="hs-identifier hs-var">txOuts</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-133"></span><span>        </span><span class="annot"><span class="annottext">txTotalCollateral :: TxTotalCollateral BabbageEra
</span><a href="../Cardano.Api.TxBody.html#txTotalCollateral"><span class="hs-identifier hs-var">C.txTotalCollateral</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxTotalCollateral BabbageEra
</span><a href="#local-6989586621679639820"><span class="hs-identifier hs-var">txTotalCollateral</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-134"></span><span>        </span><span class="hs-comment">-- WARN For now we are not dealing with return collateral</span><span>
</span><span id="line-135"></span><span>        </span><span class="annot"><span class="annottext">txReturnCollateral :: TxReturnCollateral CtxTx BabbageEra
</span><a href="../Cardano.Api.TxBody.html#txReturnCollateral"><span class="hs-identifier hs-var">C.txReturnCollateral</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxReturnCollateral CtxTx BabbageEra
forall ctx era. TxReturnCollateral ctx era
</span><a href="../Cardano.Api.TxBody.html#TxReturnCollateralNone"><span class="hs-identifier hs-var">C.TxReturnCollateralNone</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- That's what plutus-apps does as well</span><span>
</span><span id="line-136"></span><span>        </span><span class="annot"><span class="annottext">txFee :: TxFee BabbageEra
</span><a href="../Cardano.Api.TxBody.html#txFee"><span class="hs-identifier hs-var">C.txFee</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxFeesExplicitInEra BabbageEra -&gt; Lovelace -&gt; TxFee BabbageEra
forall era. TxFeesExplicitInEra era -&gt; Lovelace -&gt; TxFee era
</span><a href="../Cardano.Api.TxBody.html#TxFeeExplicit"><span class="hs-identifier hs-var">C.TxFeeExplicit</span></a></span><span> </span><span class="annot"><span class="annottext">TxFeesExplicitInEra BabbageEra
</span><a href="../Cardano.Api.TxBody.html#TxFeesExplicitInBabbageEra"><span class="hs-identifier hs-var">C.TxFeesExplicitInBabbageEra</span></a></span><span> </span><span class="annot"><span class="annottext">(Lovelace -&gt; TxFee BabbageEra) -&gt; Lovelace -&gt; TxFee BabbageEra
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Integer -&gt; Lovelace
</span><a href="../Cardano.Api.Value.html#Lovelace"><span class="hs-identifier hs-var">C.Lovelace</span></a></span><span> </span><span class="annot"><span class="annottext">(Integer -&gt; Lovelace) -&gt; Integer -&gt; Lovelace
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Fee -&gt; Integer
</span><a href="Cooked.Skeleton.html#feeLovelace"><span class="hs-identifier hs-var hs-var">feeLovelace</span></a></span><span> </span><span class="annot"><span class="annottext">Fee
</span><a href="#local-6989586621679639861"><span class="hs-identifier hs-var">gtpFee</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-137"></span><span>        </span><span class="annot"><span class="annottext">txValidityRange :: (TxValidityLowerBound BabbageEra, TxValidityUpperBound BabbageEra)
</span><a href="../Cardano.Api.TxBody.html#txValidityRange"><span class="hs-identifier hs-var">C.txValidityRange</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TxValidityLowerBound BabbageEra, TxValidityUpperBound BabbageEra)
</span><a href="#local-6989586621679639838"><span class="hs-identifier hs-var">txValidityRange</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-138"></span><span>        </span><span class="annot"><span class="annottext">txMetadata :: TxMetadataInEra BabbageEra
</span><a href="../Cardano.Api.TxBody.html#txMetadata"><span class="hs-identifier hs-var">C.txMetadata</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMetadataInEra BabbageEra
forall era. TxMetadataInEra era
</span><a href="../Cardano.Api.TxBody.html#TxMetadataNone"><span class="hs-identifier hs-var">C.TxMetadataNone</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- That's what plutus-apps does as well</span><span>
</span><span id="line-139"></span><span>        </span><span class="annot"><span class="annottext">txAuxScripts :: TxAuxScripts BabbageEra
</span><a href="../Cardano.Api.TxBody.html#txAuxScripts"><span class="hs-identifier hs-var">C.txAuxScripts</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxAuxScripts BabbageEra
forall era. TxAuxScripts era
</span><a href="../Cardano.Api.TxBody.html#TxAuxScriptsNone"><span class="hs-identifier hs-var">C.TxAuxScriptsNone</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- That's what plutus-apps does as well</span><span>
</span><span id="line-140"></span><span>        </span><span class="annot"><span class="annottext">txExtraKeyWits :: TxExtraKeyWitnesses BabbageEra
</span><a href="#local-6989586621679639788"><span class="hs-identifier hs-var">C.txExtraKeyWits</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxExtraKeyWitnesses BabbageEra
</span><a href="#local-6989586621679639830"><span class="hs-identifier hs-var">txExtraKeyWits</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-141"></span><span>        </span><span class="annot"><span class="annottext">txProtocolParams :: BuildTxWith BuildTx (Maybe ProtocolParameters)
</span><a href="#local-6989586621679639787"><span class="hs-identifier hs-var">C.txProtocolParams</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe ProtocolParameters
-&gt; BuildTxWith BuildTx (Maybe ProtocolParameters)
forall a. a -&gt; BuildTxWith BuildTx a
</span><a href="../Cardano.Api.TxBody.html#BuildTxWith"><span class="hs-identifier hs-var">C.BuildTxWith</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe ProtocolParameters
 -&gt; BuildTxWith BuildTx (Maybe ProtocolParameters))
-&gt; (Params -&gt; Maybe ProtocolParameters)
-&gt; Params
-&gt; BuildTxWith BuildTx (Maybe ProtocolParameters)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">ProtocolParameters -&gt; Maybe ProtocolParameters
forall a. a -&gt; Maybe a
</span><a href="../GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">(ProtocolParameters -&gt; Maybe ProtocolParameters)
-&gt; (Params -&gt; ProtocolParameters)
-&gt; Params
-&gt; Maybe ProtocolParameters
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Params -&gt; ProtocolParameters
</span><a href="../Cardano.Node.Emulator.Params.html#pProtocolParams"><span class="hs-identifier hs-var">Emulator.pProtocolParams</span></a></span><span> </span><span class="annot"><span class="annottext">(Params -&gt; BuildTxWith BuildTx (Maybe ProtocolParameters))
-&gt; Params -&gt; BuildTxWith BuildTx (Maybe ProtocolParameters)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621679639860"><span class="hs-identifier hs-var">theParams</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- That's what plutus-apps does as well</span><span>
</span><span id="line-142"></span><span>        </span><span class="annot"><span class="annottext">txWithdrawals :: TxWithdrawals BuildTx BabbageEra
</span><a href="#local-6989586621679639784"><span class="hs-identifier hs-var">C.txWithdrawals</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxWithdrawals BuildTx BabbageEra
forall build era. TxWithdrawals build era
</span><a href="../Cardano.Api.TxBody.html#TxWithdrawalsNone"><span class="hs-identifier hs-var">C.TxWithdrawalsNone</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- That's what plutus-apps does as well</span><span>
</span><span id="line-143"></span><span>        </span><span class="annot"><span class="annottext">txCertificates :: TxCertificates BuildTx BabbageEra
</span><a href="#local-6989586621679639782"><span class="hs-identifier hs-var">C.txCertificates</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxCertificates BuildTx BabbageEra
forall build era. TxCertificates build era
</span><a href="../Cardano.Api.TxBody.html#TxCertificatesNone"><span class="hs-identifier hs-var">C.TxCertificatesNone</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- That's what plutus-apps does as well</span><span>
</span><span id="line-144"></span><span>        </span><span class="annot"><span class="annottext">txUpdateProposal :: TxUpdateProposal BabbageEra
</span><a href="#local-6989586621679639780"><span class="hs-identifier hs-var">C.txUpdateProposal</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxUpdateProposal BabbageEra
forall era. TxUpdateProposal era
</span><a href="../Cardano.Api.TxBody.html#TxUpdateProposalNone"><span class="hs-identifier hs-var">C.TxUpdateProposalNone</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- That's what plutus-apps does as well</span><span>
</span><span id="line-145"></span><span>        </span><span class="annot"><span class="annottext">txMintValue :: TxMintValue BuildTx BabbageEra
</span><a href="#local-6989586621679639778"><span class="hs-identifier hs-var">C.txMintValue</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxMintValue BuildTx BabbageEra
</span><a href="#local-6989586621679639833"><span class="hs-identifier hs-var">txMintValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-146"></span><span>        </span><span class="annot"><span class="annottext">txScriptValidity :: TxScriptValidity BabbageEra
</span><a href="#local-6989586621679639777"><span class="hs-identifier hs-var">C.txScriptValidity</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxScriptValidity BabbageEra
forall era. TxScriptValidity era
</span><a href="../Cardano.Api.TxBody.html#TxScriptValidityNone"><span class="hs-identifier hs-var">C.TxScriptValidityNone</span></a></span><span> </span><span class="hs-comment">-- That's what plutus-apps does as well</span><span>
</span><span id="line-147"></span><span>      </span><span class="hs-special">}</span><span>
</span><span id="line-148"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-149"></span><span>    </span><span class="hs-comment">-- Helper function to throw errors.</span><span>
</span><span id="line-150"></span><span>    </span><span id="local-6989586621679640050"><span id="local-6989586621679640051"><span class="annot"><a href="#local-6989586621679639808"><span class="hs-identifier hs-type">throwOnNothing</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="#local-6989586621679640051"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../GHC.Maybe.html#Maybe"><span class="hs-identifier hs-type">Maybe</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679640050"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679640051"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679640050"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-151"></span><span>    </span><span id="local-6989586621679639808"><span class="annot"><span class="annottext">throwOnNothing :: e -&gt; Maybe a -&gt; Either e a
</span><a href="#local-6989586621679639808"><span class="hs-identifier hs-var hs-var">throwOnNothing</span></a></span></span><span> </span><span id="local-6989586621679639775"><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679639775"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Either e a -&gt; (a -&gt; Either e a) -&gt; Maybe a -&gt; Either e a
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><a href="../Data.Maybe.html#maybe"><span class="hs-identifier hs-var">maybe</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">e -&gt; Either e a
forall a b. a -&gt; Either a b
</span><a href="../Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">e
</span><a href="#local-6989586621679639775"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a -&gt; Either e a
forall a b. b -&gt; Either a b
</span><a href="../Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span>    </span><span class="hs-comment">-- Convert a 'TxSkel' input, which consists of a 'Pl.TxOutRef' and a</span><span>
</span><span id="line-154"></span><span>    </span><span class="hs-comment">-- 'TxSkelIn', into a 'C.TxIn', together with the appropriate witness. If</span><span>
</span><span id="line-155"></span><span>    </span><span class="hs-comment">-- you add reference inputs, don't forget to also update the</span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-comment">-- 'txInsReference'!</span><span>
</span><span id="line-157"></span><span>    </span><span class="annot"><a href="#local-6989586621679639853"><span class="hs-identifier hs-type">txSkelInToTxIn</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-158"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="../Plutus.V1.Ledger.Tx.html#TxOutRef"><span class="hs-identifier hs-type">Pl.TxOutRef</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-159"></span><span>      </span><span class="annot"><a href="../Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span>
</span><span id="line-160"></span><span>        </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenerateTxError"><span class="hs-identifier hs-type">GenerateTxError</span></a></span><span>
</span><span id="line-161"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../Cardano.Api.TxIn.html#TxIn"><span class="hs-identifier hs-type">C.TxIn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-162"></span><span>          </span><span class="annot"><a href="../Cardano.Api.TxBody.html#BuildTxWith"><span class="hs-identifier hs-type">C.BuildTxWith</span></a></span><span>
</span><span id="line-163"></span><span>            </span><span class="annot"><a href="../Cardano.Api.TxBody.html#BuildTx"><span class="hs-identifier hs-type">C.BuildTx</span></a></span><span>
</span><span id="line-164"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="../Cardano.Api.Script.html#Witness"><span class="hs-identifier hs-type">C.Witness</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Script.html#WitCtxTxIn"><span class="hs-identifier hs-type">C.WitCtxTxIn</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Eras.html#BabbageEra"><span class="hs-identifier hs-type">C.BabbageEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>    </span><span id="local-6989586621679639853"><span class="annot"><span class="annottext">txSkelInToTxIn :: (TxOutRef, TxSkelRedeemer)
-&gt; Either
     GenerateTxError
     (TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra))
</span><a href="#local-6989586621679639853"><span class="hs-identifier hs-var hs-var">txSkelInToTxIn</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621679639773"><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679639773"><span class="hs-identifier hs-var">txOutRef</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679639772"><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679639772"><span class="hs-identifier hs-var">txSkelRedeemer</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-167"></span><span>      </span><span id="local-6989586621679639771"><span class="annot"><span class="annottext">Witness WitCtxTxIn BabbageEra
</span><a href="#local-6989586621679639771"><span class="hs-identifier hs-var">witness</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
-&gt; Either GenerateTxError (Witness WitCtxTxIn BabbageEra)
</span><a href="#local-6989586621679639770"><span class="hs-identifier hs-var">mkWitness</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="#local-6989586621679639772"><span class="hs-identifier hs-var">txSkelRedeemer</span></a></span><span>
</span><span id="line-168"></span><span>      </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; GenerateTxError)
-&gt; (TxIn
    -&gt; (TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra)))
-&gt; Either ToCardanoError TxIn
-&gt; Either
     GenerateTxError
     (TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra))
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../Data.Bifunctor.html#bimap"><span class="hs-identifier hs-var">bimap</span></a></span><span>
</span><span id="line-169"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; ToCardanoError -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#ToCardanoError"><span class="hs-identifier hs-var">ToCardanoError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelIntoTxIn, translating TxOutRef&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-170"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-special">,</span></span><span class="annot"><span class="annottext">Witness WitCtxTxIn BabbageEra
-&gt; BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra)
forall a. a -&gt; BuildTxWith BuildTx a
</span><a href="../Cardano.Api.TxBody.html#BuildTxWith"><span class="hs-identifier hs-var">C.BuildTxWith</span></a></span><span> </span><span class="annot"><span class="annottext">Witness WitCtxTxIn BabbageEra
</span><a href="#local-6989586621679639771"><span class="hs-identifier hs-var">witness</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-171"></span><span>        </span><span class="annot"><span class="annottext">(Either ToCardanoError TxIn
 -&gt; Either
      GenerateTxError
      (TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra)))
-&gt; Either ToCardanoError TxIn
-&gt; Either
     GenerateTxError
     (TxIn, BuildTxWith BuildTx (Witness WitCtxTxIn BabbageEra))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef -&gt; Either ToCardanoError TxIn
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoTxIn"><span class="hs-identifier hs-var">Pl.toCardanoTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679639773"><span class="hs-identifier hs-var">txOutRef</span></a></span><span>
</span><span id="line-172"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-173"></span><span>        </span><span class="annot"><a href="#local-6989586621679639768"><span class="hs-identifier hs-type">resolveScriptOutputOwnerAndDatum</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-174"></span><span>          </span><span class="annot"><a href="../Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span>
</span><span id="line-175"></span><span>            </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenerateTxError"><span class="hs-identifier hs-type">GenerateTxError</span></a></span><span>
</span><span id="line-176"></span><span>            </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="../Plutus.V1.Ledger.Scripts.html#ValidatorHash"><span class="hs-identifier hs-type">Pl.ValidatorHash</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-177"></span><span>              </span><span class="annot"><a href="../Plutus.Script.Utils.Scripts.html#Versioned"><span class="hs-identifier hs-type">Pl.Versioned</span></a></span><span> </span><span class="annot"><a href="../Plutus.V1.Ledger.Scripts.html#Validator"><span class="hs-identifier hs-type">Pl.Validator</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-178"></span><span>              </span><span class="annot"><a href="../Cardano.Api.Script.html#ScriptDatum"><span class="hs-identifier hs-type">C.ScriptDatum</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Script.html#WitCtxTxIn"><span class="hs-identifier hs-type">C.WitCtxTxIn</span></a></span><span>
</span><span id="line-179"></span><span>            </span><span class="hs-special">)</span><span>
</span><span id="line-180"></span><span>        </span><span id="local-6989586621679639768"><span class="annot"><span class="annottext">resolveScriptOutputOwnerAndDatum :: Either
  GenerateTxError
  (ValidatorHash, Versioned Validator, ScriptDatum WitCtxTxIn)
</span><a href="#local-6989586621679639768"><span class="hs-identifier hs-var hs-var">resolveScriptOutputOwnerAndDatum</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-181"></span><span>          </span><span id="local-6989586621679639767"><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621679639767"><span class="hs-identifier hs-var">txOut</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-182"></span><span>            </span><span class="annot"><span class="annottext">GenerateTxError -&gt; Maybe TxOut -&gt; Either GenerateTxError TxOut
forall e a. e -&gt; Maybe a -&gt; Either e a
</span><a href="#local-6989586621679639808"><span class="hs-identifier hs-var">throwOnNothing</span></a></span><span>
</span><span id="line-183"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#GenerateTxErrorGeneral"><span class="hs-identifier hs-var">GenerateTxErrorGeneral</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelInToTxIn: Unknown txOutRef&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOutRef -&gt; Map TxOutRef TxOut -&gt; Maybe TxOut
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679639773"><span class="hs-identifier hs-var">txOutRef</span></a></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxOut
</span><a href="#local-6989586621679639858"><span class="hs-identifier hs-var">managedTxOuts</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-185"></span><span>          </span><span id="local-6989586621679639766"><span class="annot"><span class="annottext">ValidatorHash
</span><a href="#local-6989586621679639766"><span class="hs-identifier hs-var">validatorHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-186"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; Address
forall o.
(IsAbstractOutput o, ToCredential (OwnerType o)) =&gt;
o -&gt; Address
</span><a href="Cooked.Output.html#outputAddress"><span class="hs-identifier hs-var">outputAddress</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621679639767"><span class="hs-identifier hs-var">txOut</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-187"></span><span>              </span><span class="hs-special">(</span><span class="annot"><a href="../Plutus.V1.Ledger.Address.html#Address"><span class="hs-identifier hs-type">Pl.Address</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Plutus.V1.Ledger.Credential.html#ScriptCredential"><span class="hs-identifier hs-type">Pl.ScriptCredential</span></a></span><span> </span><span id="local-6989586621679639762"><span class="annot"><span class="annottext">ValidatorHash
</span><a href="#local-6989586621679639762"><span class="hs-identifier hs-var">validatorHash</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe StakingCredential
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ValidatorHash -&gt; Either GenerateTxError ValidatorHash
forall a b. b -&gt; Either a b
</span><a href="../Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">ValidatorHash
</span><a href="#local-6989586621679639762"><span class="hs-identifier hs-var">validatorHash</span></a></span><span>
</span><span id="line-188"></span><span>              </span><span class="annot"><span class="annottext">Address
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenerateTxError -&gt; Either GenerateTxError ValidatorHash
forall a b. a -&gt; Either a b
</span><a href="../Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#GenerateTxErrorGeneral"><span class="hs-identifier hs-var">GenerateTxErrorGeneral</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelInToTxIn: Output is not a script output&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-189"></span><span>          </span><span id="local-6989586621679639761"><span class="annot"><span class="annottext">Versioned Validator
</span><a href="#local-6989586621679639761"><span class="hs-identifier hs-var">validator</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-190"></span><span>            </span><span class="annot"><span class="annottext">GenerateTxError
-&gt; Maybe (Versioned Validator)
-&gt; Either GenerateTxError (Versioned Validator)
forall e a. e -&gt; Maybe a -&gt; Either e a
</span><a href="#local-6989586621679639808"><span class="hs-identifier hs-var">throwOnNothing</span></a></span><span>
</span><span id="line-191"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#GenerateTxErrorGeneral"><span class="hs-identifier hs-var">GenerateTxErrorGeneral</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelInToTxIn: Unknown validator&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ValidatorHash
-&gt; Map ValidatorHash (Versioned Validator)
-&gt; Maybe (Versioned Validator)
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">ValidatorHash
</span><a href="#local-6989586621679639766"><span class="hs-identifier hs-var">validatorHash</span></a></span><span> </span><span class="annot"><span class="annottext">Map ValidatorHash (Versioned Validator)
</span><a href="#local-6989586621679639857"><span class="hs-identifier hs-var">managedValidators</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>          </span><span id="local-6989586621679639760"><span class="annot"><span class="annottext">ScriptDatum WitCtxTxIn
</span><a href="#local-6989586621679639760"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-194"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">TxOut -&gt; OutputDatum
forall o.
(IsAbstractOutput o, ToOutputDatum (DatumType o)) =&gt;
o -&gt; OutputDatum
</span><a href="Cooked.Output.html#outputOutputDatum"><span class="hs-identifier hs-var">outputOutputDatum</span></a></span><span> </span><span class="annot"><span class="annottext">TxOut
</span><a href="#local-6989586621679639767"><span class="hs-identifier hs-var">txOut</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-195"></span><span>              </span><span class="annot"><span class="annottext">OutputDatum
</span><a href="../Plutus.V2.Ledger.Tx.html#NoOutputDatum"><span class="hs-identifier hs-var">Pl.NoOutputDatum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GenerateTxError -&gt; Either GenerateTxError (ScriptDatum WitCtxTxIn)
forall a b. a -&gt; Either a b
</span><a href="../Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#GenerateTxErrorGeneral"><span class="hs-identifier hs-var">GenerateTxErrorGeneral</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelInToTxIn: No datum found on script output&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-196"></span><span>              </span><span class="annot"><a href="../Plutus.V2.Ledger.Tx.html#OutputDatum"><span class="hs-identifier hs-type">Pl.OutputDatum</span></a></span><span> </span><span id="local-6989586621679639756"><span class="annot"><span class="annottext">Datum
</span><a href="#local-6989586621679639756"><span class="hs-identifier hs-var">_datum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ScriptDatum WitCtxTxIn
-&gt; Either GenerateTxError (ScriptDatum WitCtxTxIn)
forall a b. b -&gt; Either a b
</span><a href="../Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptDatum WitCtxTxIn
</span><a href="../Cardano.Api.Script.html#InlineScriptDatum"><span class="hs-identifier hs-var">C.InlineScriptDatum</span></a></span><span>
</span><span id="line-197"></span><span>              </span><span class="annot"><a href="../Plutus.V2.Ledger.Tx.html#OutputDatumHash"><span class="hs-identifier hs-type">Pl.OutputDatumHash</span></a></span><span> </span><span id="local-6989586621679639753"><span class="annot"><span class="annottext">DatumHash
</span><a href="#local-6989586621679639753"><span class="hs-identifier hs-var">datumHash</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-198"></span><span>                </span><span class="annot"><span class="annottext">GenerateTxError
-&gt; Maybe (ScriptDatum WitCtxTxIn)
-&gt; Either GenerateTxError (ScriptDatum WitCtxTxIn)
forall e a. e -&gt; Maybe a -&gt; Either e a
</span><a href="#local-6989586621679639808"><span class="hs-identifier hs-var">throwOnNothing</span></a></span><span>
</span><span id="line-199"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#GenerateTxErrorGeneral"><span class="hs-identifier hs-var">GenerateTxErrorGeneral</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelInToTxIn: Datum hash could not be resolved&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptData -&gt; ScriptDatum WitCtxTxIn
</span><a href="../Cardano.Api.Script.html#ScriptDatumForTxIn"><span class="hs-identifier hs-var">C.ScriptDatumForTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">(ScriptData -&gt; ScriptDatum WitCtxTxIn)
-&gt; (Datum -&gt; ScriptData) -&gt; Datum -&gt; ScriptDatum WitCtxTxIn
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; ScriptData
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoScriptData"><span class="hs-identifier hs-var">Pl.toCardanoScriptData</span></a></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; ScriptData)
-&gt; (Datum -&gt; BuiltinData) -&gt; Datum -&gt; ScriptData
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Datum -&gt; BuiltinData
</span><a href="../Plutus.V1.Ledger.Scripts.html#getDatum"><span class="hs-identifier hs-var hs-var">Pl.getDatum</span></a></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; ScriptDatum WitCtxTxIn)
-&gt; Maybe Datum -&gt; Maybe (ScriptDatum WitCtxTxIn)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">DatumHash -&gt; Map DatumHash Datum -&gt; Maybe Datum
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">DatumHash
</span><a href="#local-6989586621679639753"><span class="hs-identifier hs-var">datumHash</span></a></span><span> </span><span class="annot"><span class="annottext">Map DatumHash Datum
</span><a href="#local-6989586621679639859"><span class="hs-identifier hs-var">managedData</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>          </span><span class="annot"><span class="annottext">(ValidatorHash, Versioned Validator, ScriptDatum WitCtxTxIn)
-&gt; Either
     GenerateTxError
     (ValidatorHash, Versioned Validator, ScriptDatum WitCtxTxIn)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ValidatorHash
</span><a href="#local-6989586621679639766"><span class="hs-identifier hs-var">validatorHash</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Versioned Validator
</span><a href="#local-6989586621679639761"><span class="hs-identifier hs-var">validator</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ScriptDatum WitCtxTxIn
</span><a href="#local-6989586621679639760"><span class="hs-identifier hs-var">datum</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-202"></span><span>
</span><span id="line-203"></span><span>        </span><span class="annot"><a href="#local-6989586621679639770"><span class="hs-identifier hs-type">mkWitness</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemer"><span class="hs-identifier hs-type">TxSkelRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenerateTxError"><span class="hs-identifier hs-type">GenerateTxError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Cardano.Api.Script.html#Witness"><span class="hs-identifier hs-type">C.Witness</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Script.html#WitCtxTxIn"><span class="hs-identifier hs-type">C.WitCtxTxIn</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Eras.html#BabbageEra"><span class="hs-identifier hs-type">C.BabbageEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-204"></span><span>        </span><span id="local-6989586621679639770"><span class="annot"><span class="annottext">mkWitness :: TxSkelRedeemer
-&gt; Either GenerateTxError (Witness WitCtxTxIn BabbageEra)
</span><a href="#local-6989586621679639770"><span class="hs-identifier hs-var hs-var">mkWitness</span></a></span></span><span> </span><span class="annot"><span class="annottext">TxSkelRedeemer
</span><a href="Cooked.Skeleton.html#TxSkelNoRedeemerForPK"><span class="hs-identifier hs-var">TxSkelNoRedeemerForPK</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Witness WitCtxTxIn BabbageEra
-&gt; Either GenerateTxError (Witness WitCtxTxIn BabbageEra)
forall a b. b -&gt; Either a b
</span><a href="../Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(Witness WitCtxTxIn BabbageEra
 -&gt; Either GenerateTxError (Witness WitCtxTxIn BabbageEra))
-&gt; Witness WitCtxTxIn BabbageEra
-&gt; Either GenerateTxError (Witness WitCtxTxIn BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">KeyWitnessInCtx WitCtxTxIn -&gt; Witness WitCtxTxIn BabbageEra
forall witctx era. KeyWitnessInCtx witctx -&gt; Witness witctx era
</span><a href="../Cardano.Api.Script.html#KeyWitness"><span class="hs-identifier hs-var">C.KeyWitness</span></a></span><span> </span><span class="annot"><span class="annottext">KeyWitnessInCtx WitCtxTxIn
</span><a href="../Cardano.Api.Script.html#KeyWitnessForSpending"><span class="hs-identifier hs-var">C.KeyWitnessForSpending</span></a></span><span>
</span><span id="line-205"></span><span>        </span><span class="annot"><a href="#local-6989586621679639770"><span class="hs-identifier hs-var">mkWitness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemerForReferencedScript"><span class="hs-identifier hs-type">TxSkelRedeemerForReferencedScript</span></a></span><span> </span><span id="local-6989586621679639745"><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679639745"><span class="hs-identifier hs-var">validatorOref</span></a></span></span><span> </span><span id="local-6989586621679639744"><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679639744"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-206"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679639743"><span class="annot"><span class="annottext">ValidatorHash
</span><a href="#local-6989586621679639743"><span class="hs-identifier hs-var">validatorHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679639742"><span class="annot"><span class="annottext">Versioned Validator
</span><a href="#local-6989586621679639742"><span class="hs-identifier hs-var">validator</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679639741"><span class="annot"><span class="annottext">ScriptDatum WitCtxTxIn
</span><a href="#local-6989586621679639741"><span class="hs-identifier hs-var">datum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either
  GenerateTxError
  (ValidatorHash, Versioned Validator, ScriptDatum WitCtxTxIn)
</span><a href="#local-6989586621679639768"><span class="hs-identifier hs-var">resolveScriptOutputOwnerAndDatum</span></a></span><span>
</span><span id="line-207"></span><span>          </span><span id="local-6989586621679639740"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679639740"><span class="hs-identifier hs-var">scriptHashAtOref</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-208"></span><span>            </span><span class="hs-comment">-- In our own MockChainT implementation, this error should never</span><span>
</span><span id="line-209"></span><span>            </span><span class="hs-comment">-- been thrown, because we collect the 'managedTxOuts' using</span><span>
</span><span id="line-210"></span><span>            </span><span class="hs-comment">-- (eventually) 'lookupUtxos', which will already fail on</span><span>
</span><span id="line-211"></span><span>            </span><span class="hs-comment">-- un-resolvable 'TxOutRef's.</span><span>
</span><span id="line-212"></span><span>            </span><span class="annot"><span class="annottext">GenerateTxError
-&gt; Maybe ScriptHash -&gt; Either GenerateTxError ScriptHash
forall e a. e -&gt; Maybe a -&gt; Either e a
</span><a href="#local-6989586621679639808"><span class="hs-identifier hs-var">throwOnNothing</span></a></span><span>
</span><span id="line-213"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#GenerateTxErrorGeneral"><span class="hs-identifier hs-var">GenerateTxErrorGeneral</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelInToTxIn: Can't resolve reference script outref. This might mean that you either never created or accidentally consumed the UTxO where the reference script is stored&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>              </span><span class="annot"><span class="annottext">(Maybe ScriptHash -&gt; Either GenerateTxError ScriptHash)
-&gt; Maybe ScriptHash -&gt; Either GenerateTxError ScriptHash
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef -&gt; Map TxOutRef TxOut -&gt; Maybe TxOut
forall k a. Ord k =&gt; k -&gt; Map k a -&gt; Maybe a
</span><a href="../Data.Map.Internal.html#lookup"><span class="hs-identifier hs-var">Map.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679639745"><span class="hs-identifier hs-var">validatorOref</span></a></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxOut
</span><a href="#local-6989586621679639858"><span class="hs-identifier hs-var">managedTxOuts</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe TxOut -&gt; (TxOut -&gt; Maybe ScriptHash) -&gt; Maybe ScriptHash
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><a href="../GHC.Base.html#%3E%3E%3D"><span class="hs-operator hs-var">&gt;&gt;=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOut
-&gt; Optic' A_Lens NoIx TxOut (Maybe ScriptHash) -&gt; Maybe ScriptHash
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><a href="../Optics.Operators.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx TxOut (Maybe ScriptHash)
forall o.
IsAbstractOutput o =&gt;
Lens' o (Maybe (ReferenceScriptType o))
</span><a href="Cooked.Output.html#outputReferenceScriptL"><span class="hs-identifier hs-var">outputReferenceScriptL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-215"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; Either GenerateTxError () -&gt; Either GenerateTxError ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><a href="../GHC.Base.html#when"><span class="hs-identifier hs-var">when</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679639740"><span class="hs-identifier hs-var">scriptHashAtOref</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash -&gt; ScriptHash -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../GHC.Classes.html#%2F%3D"><span class="hs-operator hs-var">/=</span></a></span><span> </span><span class="annot"><span class="annottext">ValidatorHash -&gt; ScriptHash
forall a. ToScriptHash a =&gt; a -&gt; ScriptHash
</span><a href="Cooked.Output.html#toScriptHash"><span class="hs-identifier hs-var">toScriptHash</span></a></span><span> </span><span class="annot"><span class="annottext">ValidatorHash
</span><a href="#local-6989586621679639743"><span class="hs-identifier hs-var">validatorHash</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either GenerateTxError () -&gt; Either GenerateTxError ())
-&gt; Either GenerateTxError () -&gt; Either GenerateTxError ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-216"></span><span>            </span><span class="annot"><span class="annottext">GenerateTxError -&gt; Either GenerateTxError ()
forall a b. a -&gt; Either a b
</span><a href="../Data.Either.html#Left"><span class="hs-identifier hs-var">Left</span></a></span><span> </span><span class="annot"><span class="annottext">(GenerateTxError -&gt; Either GenerateTxError ())
-&gt; GenerateTxError -&gt; Either GenerateTxError ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-217"></span><span>              </span><span class="annot"><span class="annottext">String -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#GenerateTxErrorGeneral"><span class="hs-identifier hs-var">GenerateTxErrorGeneral</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelInToTxIn: Wrong reference script hash. Are you using the correct TxOutRef on your TxSkelRedeemerForReferencedScript?&quot;</span></span><span>
</span><span id="line-218"></span><span>          </span><span id="local-6989586621679639734"><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679639734"><span class="hs-identifier hs-var">validatorTxIn</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-219"></span><span>            </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; GenerateTxError)
-&gt; Either ToCardanoError TxIn -&gt; Either GenerateTxError TxIn
forall (a :: * -&gt; * -&gt; *) b c d.
ArrowChoice a =&gt;
a b c -&gt; a (Either b d) (Either c d)
</span><a href="../Control.Arrow.html#left"><span class="hs-identifier hs-var">left</span></a></span><span>
</span><span id="line-220"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; ToCardanoError -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#ToCardanoError"><span class="hs-identifier hs-var">ToCardanoError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelIntoTxIn: translating TxOutRef where the reference script sits&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>              </span><span class="annot"><span class="annottext">(Either ToCardanoError TxIn -&gt; Either GenerateTxError TxIn)
-&gt; Either ToCardanoError TxIn -&gt; Either GenerateTxError TxIn
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef -&gt; Either ToCardanoError TxIn
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoTxIn"><span class="hs-identifier hs-var">Pl.toCardanoTxIn</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef
</span><a href="#local-6989586621679639745"><span class="hs-identifier hs-var">validatorOref</span></a></span><span>
</span><span id="line-222"></span><span>          </span><span id="local-6989586621679639733"><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679639733"><span class="hs-identifier hs-var">scriptHash</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-223"></span><span>            </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; GenerateTxError)
-&gt; Either ToCardanoError ScriptHash
-&gt; Either GenerateTxError ScriptHash
forall (a :: * -&gt; * -&gt; *) b c d.
ArrowChoice a =&gt;
a b c -&gt; a (Either b d) (Either c d)
</span><a href="../Control.Arrow.html#left"><span class="hs-identifier hs-var">left</span></a></span><span>
</span><span id="line-224"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; ToCardanoError -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#ToCardanoError"><span class="hs-identifier hs-var">ToCardanoError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelInToTxIn: could not convert script hash of referenced script&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>              </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ValidatorHash -&gt; Either ToCardanoError ScriptHash
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoScriptHash"><span class="hs-identifier hs-var">Pl.toCardanoScriptHash</span></a></span><span> </span><span class="annot"><span class="annottext">ValidatorHash
</span><a href="#local-6989586621679639743"><span class="hs-identifier hs-var">validatorHash</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-226"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679639731"><span class="annot"><span class="annottext">scriptWitnessBuilder :: ScriptDatum WitCtxTxIn
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxTxIn BabbageEra
</span><a href="#local-6989586621679639731"><span class="hs-identifier hs-var hs-var">scriptWitnessBuilder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Versioned Validator
</span><a href="#local-6989586621679639742"><span class="hs-identifier hs-var">validator</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-227"></span><span>                </span><span class="annot"><a href="../Plutus.Script.Utils.Scripts.html#Versioned"><span class="hs-identifier hs-type">Pl.Versioned</span></a></span><span> </span><span class="annot"><span class="annottext">Validator
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="../Cardano.Ledger.Alonzo.Language.html#PlutusV1"><span class="hs-identifier hs-var">Pl.PlutusV1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-228"></span><span>                  </span><span class="annot"><span class="annottext">ScriptLanguageInEra PlutusScriptV1 BabbageEra
-&gt; PlutusScriptVersion PlutusScriptV1
-&gt; PlutusScriptOrReferenceInput PlutusScriptV1
-&gt; ScriptDatum WitCtxTxIn
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxTxIn BabbageEra
forall lang era witctx.
ScriptLanguageInEra lang era
-&gt; PlutusScriptVersion lang
-&gt; PlutusScriptOrReferenceInput lang
-&gt; ScriptDatum witctx
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness witctx era
</span><a href="../Cardano.Api.Script.html#PlutusScriptWitness"><span class="hs-identifier hs-var">C.PlutusScriptWitness</span></a></span><span>
</span><span id="line-229"></span><span>                    </span><span class="annot"><span class="annottext">ScriptLanguageInEra PlutusScriptV1 BabbageEra
</span><a href="../Cardano.Api.Script.html#PlutusScriptV1InBabbage"><span class="hs-identifier hs-var">C.PlutusScriptV1InBabbage</span></a></span><span>
</span><span id="line-230"></span><span>                    </span><span class="annot"><span class="annottext">PlutusScriptVersion PlutusScriptV1
</span><a href="../Cardano.Api.Script.html#PlutusScriptV1"><span class="hs-identifier hs-var">C.PlutusScriptV1</span></a></span><span>
</span><span id="line-231"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxIn
-&gt; Maybe ScriptHash -&gt; PlutusScriptOrReferenceInput PlutusScriptV1
forall lang.
TxIn -&gt; Maybe ScriptHash -&gt; PlutusScriptOrReferenceInput lang
</span><a href="../Cardano.Api.Script.html#PReferenceScript"><span class="hs-identifier hs-var">C.PReferenceScript</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679639734"><span class="hs-identifier hs-var">validatorTxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; Maybe ScriptHash
forall a. a -&gt; Maybe a
</span><a href="../GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679639733"><span class="hs-identifier hs-var">scriptHash</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-232"></span><span>                </span><span class="annot"><a href="../Plutus.Script.Utils.Scripts.html#Versioned"><span class="hs-identifier hs-type">Pl.Versioned</span></a></span><span> </span><span class="annot"><span class="annottext">Validator
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="../Cardano.Ledger.Alonzo.Language.html#PlutusV2"><span class="hs-identifier hs-var">Pl.PlutusV2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-233"></span><span>                  </span><span class="annot"><span class="annottext">ScriptLanguageInEra PlutusScriptV2 BabbageEra
-&gt; PlutusScriptVersion PlutusScriptV2
-&gt; PlutusScriptOrReferenceInput PlutusScriptV2
-&gt; ScriptDatum WitCtxTxIn
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxTxIn BabbageEra
forall lang era witctx.
ScriptLanguageInEra lang era
-&gt; PlutusScriptVersion lang
-&gt; PlutusScriptOrReferenceInput lang
-&gt; ScriptDatum witctx
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness witctx era
</span><a href="../Cardano.Api.Script.html#PlutusScriptWitness"><span class="hs-identifier hs-var">C.PlutusScriptWitness</span></a></span><span>
</span><span id="line-234"></span><span>                    </span><span class="annot"><span class="annottext">ScriptLanguageInEra PlutusScriptV2 BabbageEra
</span><a href="../Cardano.Api.Script.html#PlutusScriptV2InBabbage"><span class="hs-identifier hs-var">C.PlutusScriptV2InBabbage</span></a></span><span>
</span><span id="line-235"></span><span>                    </span><span class="annot"><span class="annottext">PlutusScriptVersion PlutusScriptV2
</span><a href="../Cardano.Api.Script.html#PlutusScriptV2"><span class="hs-identifier hs-var">C.PlutusScriptV2</span></a></span><span>
</span><span id="line-236"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxIn
-&gt; Maybe ScriptHash -&gt; PlutusScriptOrReferenceInput PlutusScriptV2
forall lang.
TxIn -&gt; Maybe ScriptHash -&gt; PlutusScriptOrReferenceInput lang
</span><a href="../Cardano.Api.Script.html#PReferenceScript"><span class="hs-identifier hs-var">C.PReferenceScript</span></a></span><span> </span><span class="annot"><span class="annottext">TxIn
</span><a href="#local-6989586621679639734"><span class="hs-identifier hs-var">validatorTxIn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptHash -&gt; Maybe ScriptHash
forall a. a -&gt; Maybe a
</span><a href="../GHC.Maybe.html#Just"><span class="hs-identifier hs-var">Just</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptHash
</span><a href="#local-6989586621679639733"><span class="hs-identifier hs-var">scriptHash</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-237"></span><span>          </span><span class="annot"><span class="annottext">Witness WitCtxTxIn BabbageEra
-&gt; Either GenerateTxError (Witness WitCtxTxIn BabbageEra)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Witness WitCtxTxIn BabbageEra
 -&gt; Either GenerateTxError (Witness WitCtxTxIn BabbageEra))
-&gt; Witness WitCtxTxIn BabbageEra
-&gt; Either GenerateTxError (Witness WitCtxTxIn BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-238"></span><span>            </span><span class="annot"><span class="annottext">ScriptWitnessInCtx WitCtxTxIn
-&gt; ScriptWitness WitCtxTxIn BabbageEra
-&gt; Witness WitCtxTxIn BabbageEra
forall witctx era.
ScriptWitnessInCtx witctx
-&gt; ScriptWitness witctx era -&gt; Witness witctx era
</span><a href="../Cardano.Api.Script.html#ScriptWitness"><span class="hs-identifier hs-var">C.ScriptWitness</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessInCtx WitCtxTxIn
</span><a href="../Cardano.Api.Script.html#ScriptWitnessForSpending"><span class="hs-identifier hs-var">C.ScriptWitnessForSpending</span></a></span><span> </span><span class="annot"><span class="annottext">(ScriptWitness WitCtxTxIn BabbageEra
 -&gt; Witness WitCtxTxIn BabbageEra)
-&gt; ScriptWitness WitCtxTxIn BabbageEra
-&gt; Witness WitCtxTxIn BabbageEra
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-239"></span><span>              </span><span class="annot"><span class="annottext">ScriptDatum WitCtxTxIn
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxTxIn BabbageEra
</span><a href="#local-6989586621679639731"><span class="hs-identifier hs-var">scriptWitnessBuilder</span></a></span><span>
</span><span id="line-240"></span><span>                </span><span class="annot"><span class="annottext">ScriptDatum WitCtxTxIn
</span><a href="#local-6989586621679639741"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-241"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinData -&gt; ScriptData
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoScriptData"><span class="hs-identifier hs-var">Pl.toCardanoScriptData</span></a></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; ScriptData) -&gt; BuiltinData -&gt; ScriptData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><a href="../PlutusTx.IsData.Class.html#toBuiltinData"><span class="hs-identifier hs-var">Pl.toBuiltinData</span></a></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679639744"><span class="hs-identifier hs-var">redeemer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>                </span><span class="annot"><span class="annottext">ExecutionUnits
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#zeroExecutionUnits"><span class="hs-identifier hs-var">Pl.zeroExecutionUnits</span></a></span><span> </span><span class="hs-comment">-- We can't guess that yet, no?</span><span>
</span><span id="line-243"></span><span>        </span><span class="annot"><a href="#local-6989586621679639770"><span class="hs-identifier hs-var">mkWitness</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelRedeemerForScript"><span class="hs-identifier hs-type">TxSkelRedeemerForScript</span></a></span><span> </span><span id="local-6989586621679639716"><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679639716"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-244"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621679639715"><span class="annot"><span class="annottext">ValidatorHash
</span><a href="#local-6989586621679639715"><span class="hs-identifier hs-var">_validatorHash</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679639714"><span class="annot"><span class="annottext">Versioned Validator
</span><a href="#local-6989586621679639714"><span class="hs-identifier hs-var">validator</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679639713"><span class="annot"><span class="annottext">ScriptDatum WitCtxTxIn
</span><a href="#local-6989586621679639713"><span class="hs-identifier hs-var">datum</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Either
  GenerateTxError
  (ValidatorHash, Versioned Validator, ScriptDatum WitCtxTxIn)
</span><a href="#local-6989586621679639768"><span class="hs-identifier hs-var">resolveScriptOutputOwnerAndDatum</span></a></span><span>
</span><span id="line-245"></span><span>          </span><span id="local-6989586621679639712"><span class="annot"><span class="annottext">ScriptDatum WitCtxTxIn
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxTxIn BabbageEra
</span><a href="#local-6989586621679639712"><span class="hs-identifier hs-var">scriptWitnessBuilder</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-246"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Versioned Validator
</span><a href="#local-6989586621679639714"><span class="hs-identifier hs-var">validator</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-247"></span><span>              </span><span class="annot"><a href="../Plutus.Script.Utils.Scripts.html#Versioned"><span class="hs-identifier hs-type">Pl.Versioned</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Plutus.V1.Ledger.Scripts.html#Validator"><span class="hs-identifier hs-type">Pl.Validator</span></a></span><span> </span><span id="local-6989586621679639710"><span class="annot"><span class="annottext">Script
</span><a href="#local-6989586621679639710"><span class="hs-identifier hs-var">script</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="../Cardano.Ledger.Alonzo.Language.html#PlutusV1"><span class="hs-identifier hs-var">Pl.PlutusV1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-248"></span><span>                </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; GenerateTxError)
-&gt; (PlutusScript PlutusScriptV1
    -&gt; ScriptDatum WitCtxTxIn
    -&gt; ScriptData
    -&gt; ExecutionUnits
    -&gt; ScriptWitness WitCtxTxIn BabbageEra)
-&gt; Either ToCardanoError (PlutusScript PlutusScriptV1)
-&gt; Either
     GenerateTxError
     (ScriptDatum WitCtxTxIn
      -&gt; ScriptData
      -&gt; ExecutionUnits
      -&gt; ScriptWitness WitCtxTxIn BabbageEra)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../Data.Bifunctor.html#bimap"><span class="hs-identifier hs-var">bimap</span></a></span><span>
</span><span id="line-249"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; ToCardanoError -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#ToCardanoError"><span class="hs-identifier hs-var">ToCardanoError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelIntoTxIn, translating to Cardano API PlutusV1 script&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-250"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptLanguageInEra PlutusScriptV1 BabbageEra
-&gt; PlutusScriptVersion PlutusScriptV1
-&gt; PlutusScriptOrReferenceInput PlutusScriptV1
-&gt; ScriptDatum WitCtxTxIn
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxTxIn BabbageEra
forall lang era witctx.
ScriptLanguageInEra lang era
-&gt; PlutusScriptVersion lang
-&gt; PlutusScriptOrReferenceInput lang
-&gt; ScriptDatum witctx
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness witctx era
</span><a href="../Cardano.Api.Script.html#PlutusScriptWitness"><span class="hs-identifier hs-var">C.PlutusScriptWitness</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptLanguageInEra PlutusScriptV1 BabbageEra
</span><a href="../Cardano.Api.Script.html#PlutusScriptV1InBabbage"><span class="hs-identifier hs-var">C.PlutusScriptV1InBabbage</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScriptVersion PlutusScriptV1
</span><a href="../Cardano.Api.Script.html#PlutusScriptV1"><span class="hs-identifier hs-var">C.PlutusScriptV1</span></a></span><span> </span><span class="annot"><span class="annottext">(PlutusScriptOrReferenceInput PlutusScriptV1
 -&gt; ScriptDatum WitCtxTxIn
 -&gt; ScriptData
 -&gt; ExecutionUnits
 -&gt; ScriptWitness WitCtxTxIn BabbageEra)
-&gt; (PlutusScript PlutusScriptV1
    -&gt; PlutusScriptOrReferenceInput PlutusScriptV1)
-&gt; PlutusScript PlutusScriptV1
-&gt; ScriptDatum WitCtxTxIn
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxTxIn BabbageEra
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScript PlutusScriptV1
-&gt; PlutusScriptOrReferenceInput PlutusScriptV1
forall lang. PlutusScript lang -&gt; PlutusScriptOrReferenceInput lang
</span><a href="../Cardano.Api.Script.html#PScript"><span class="hs-identifier hs-var">C.PScript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-251"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AsType (PlutusScript PlutusScriptV1)
-&gt; Script -&gt; Either ToCardanoError (PlutusScript PlutusScriptV1)
forall plutusScript.
SerialiseAsRawBytes plutusScript =&gt;
AsType plutusScript -&gt; Script -&gt; Either ToCardanoError plutusScript
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoPlutusScript"><span class="hs-identifier hs-var">Pl.toCardanoPlutusScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AsType PlutusScriptV1 -&gt; AsType (PlutusScript PlutusScriptV1)
forall lang. AsType lang -&gt; AsType (PlutusScript lang)
</span><a href="../Cardano.Api.Script.html#AsPlutusScript"><span class="hs-identifier hs-var">C.AsPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">AsType PlutusScriptV1
</span><a href="../Cardano.Api.Script.html#AsPlutusScriptV1"><span class="hs-identifier hs-var">C.AsPlutusScriptV1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Script
</span><a href="#local-6989586621679639710"><span class="hs-identifier hs-var">script</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>              </span><span class="annot"><a href="../Plutus.Script.Utils.Scripts.html#Versioned"><span class="hs-identifier hs-type">Pl.Versioned</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Plutus.V1.Ledger.Scripts.html#Validator"><span class="hs-identifier hs-type">Pl.Validator</span></a></span><span> </span><span id="local-6989586621679639705"><span class="annot"><span class="annottext">Script
</span><a href="#local-6989586621679639705"><span class="hs-identifier hs-var">script</span></a></span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="../Cardano.Ledger.Alonzo.Language.html#PlutusV2"><span class="hs-identifier hs-var">Pl.PlutusV2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-253"></span><span>                </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; GenerateTxError)
-&gt; (PlutusScript PlutusScriptV2
    -&gt; ScriptDatum WitCtxTxIn
    -&gt; ScriptData
    -&gt; ExecutionUnits
    -&gt; ScriptWitness WitCtxTxIn BabbageEra)
-&gt; Either ToCardanoError (PlutusScript PlutusScriptV2)
-&gt; Either
     GenerateTxError
     (ScriptDatum WitCtxTxIn
      -&gt; ScriptData
      -&gt; ExecutionUnits
      -&gt; ScriptWitness WitCtxTxIn BabbageEra)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../Data.Bifunctor.html#bimap"><span class="hs-identifier hs-var">bimap</span></a></span><span>
</span><span id="line-254"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; ToCardanoError -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#ToCardanoError"><span class="hs-identifier hs-var">ToCardanoError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelIntoTxIn, translating to Cardano API PlutusV2 script&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-255"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptLanguageInEra PlutusScriptV2 BabbageEra
-&gt; PlutusScriptVersion PlutusScriptV2
-&gt; PlutusScriptOrReferenceInput PlutusScriptV2
-&gt; ScriptDatum WitCtxTxIn
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxTxIn BabbageEra
forall lang era witctx.
ScriptLanguageInEra lang era
-&gt; PlutusScriptVersion lang
-&gt; PlutusScriptOrReferenceInput lang
-&gt; ScriptDatum witctx
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness witctx era
</span><a href="../Cardano.Api.Script.html#PlutusScriptWitness"><span class="hs-identifier hs-var">C.PlutusScriptWitness</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptLanguageInEra PlutusScriptV2 BabbageEra
</span><a href="../Cardano.Api.Script.html#PlutusScriptV2InBabbage"><span class="hs-identifier hs-var">C.PlutusScriptV2InBabbage</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScriptVersion PlutusScriptV2
</span><a href="../Cardano.Api.Script.html#PlutusScriptV2"><span class="hs-identifier hs-var">C.PlutusScriptV2</span></a></span><span> </span><span class="annot"><span class="annottext">(PlutusScriptOrReferenceInput PlutusScriptV2
 -&gt; ScriptDatum WitCtxTxIn
 -&gt; ScriptData
 -&gt; ExecutionUnits
 -&gt; ScriptWitness WitCtxTxIn BabbageEra)
-&gt; (PlutusScript PlutusScriptV2
    -&gt; PlutusScriptOrReferenceInput PlutusScriptV2)
-&gt; PlutusScript PlutusScriptV2
-&gt; ScriptDatum WitCtxTxIn
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxTxIn BabbageEra
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScript PlutusScriptV2
-&gt; PlutusScriptOrReferenceInput PlutusScriptV2
forall lang. PlutusScript lang -&gt; PlutusScriptOrReferenceInput lang
</span><a href="../Cardano.Api.Script.html#PScript"><span class="hs-identifier hs-var">C.PScript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-256"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AsType (PlutusScript PlutusScriptV2)
-&gt; Script -&gt; Either ToCardanoError (PlutusScript PlutusScriptV2)
forall plutusScript.
SerialiseAsRawBytes plutusScript =&gt;
AsType plutusScript -&gt; Script -&gt; Either ToCardanoError plutusScript
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoPlutusScript"><span class="hs-identifier hs-var">Pl.toCardanoPlutusScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AsType PlutusScriptV2 -&gt; AsType (PlutusScript PlutusScriptV2)
forall lang. AsType lang -&gt; AsType (PlutusScript lang)
</span><a href="../Cardano.Api.Script.html#AsPlutusScript"><span class="hs-identifier hs-var">C.AsPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">AsType PlutusScriptV2
</span><a href="../Cardano.Api.Script.html#AsPlutusScriptV2"><span class="hs-identifier hs-var">C.AsPlutusScriptV2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Script
</span><a href="#local-6989586621679639705"><span class="hs-identifier hs-var">script</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-257"></span><span>          </span><span class="annot"><span class="annottext">Witness WitCtxTxIn BabbageEra
-&gt; Either GenerateTxError (Witness WitCtxTxIn BabbageEra)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Witness WitCtxTxIn BabbageEra
 -&gt; Either GenerateTxError (Witness WitCtxTxIn BabbageEra))
-&gt; Witness WitCtxTxIn BabbageEra
-&gt; Either GenerateTxError (Witness WitCtxTxIn BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-258"></span><span>            </span><span class="annot"><span class="annottext">ScriptWitnessInCtx WitCtxTxIn
-&gt; ScriptWitness WitCtxTxIn BabbageEra
-&gt; Witness WitCtxTxIn BabbageEra
forall witctx era.
ScriptWitnessInCtx witctx
-&gt; ScriptWitness witctx era -&gt; Witness witctx era
</span><a href="../Cardano.Api.Script.html#ScriptWitness"><span class="hs-identifier hs-var">C.ScriptWitness</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptWitnessInCtx WitCtxTxIn
</span><a href="../Cardano.Api.Script.html#ScriptWitnessForSpending"><span class="hs-identifier hs-var">C.ScriptWitnessForSpending</span></a></span><span> </span><span class="annot"><span class="annottext">(ScriptWitness WitCtxTxIn BabbageEra
 -&gt; Witness WitCtxTxIn BabbageEra)
-&gt; ScriptWitness WitCtxTxIn BabbageEra
-&gt; Witness WitCtxTxIn BabbageEra
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-259"></span><span>              </span><span class="annot"><span class="annottext">ScriptDatum WitCtxTxIn
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxTxIn BabbageEra
</span><a href="#local-6989586621679639712"><span class="hs-identifier hs-var">scriptWitnessBuilder</span></a></span><span>
</span><span id="line-260"></span><span>                </span><span class="annot"><span class="annottext">ScriptDatum WitCtxTxIn
</span><a href="#local-6989586621679639713"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-261"></span><span>                </span><span class="hs-special">(</span><span class="annot"><span class="annottext">BuiltinData -&gt; ScriptData
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoScriptData"><span class="hs-identifier hs-var">Pl.toCardanoScriptData</span></a></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; ScriptData) -&gt; BuiltinData -&gt; ScriptData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><a href="../PlutusTx.IsData.Class.html#toBuiltinData"><span class="hs-identifier hs-var">Pl.toBuiltinData</span></a></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679639716"><span class="hs-identifier hs-var">redeemer</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-262"></span><span>                </span><span class="annot"><span class="annottext">ExecutionUnits
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#zeroExecutionUnits"><span class="hs-identifier hs-var">Pl.zeroExecutionUnits</span></a></span><span> </span><span class="hs-comment">-- We can't guess that yet, no?</span><span>
</span><span id="line-263"></span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-comment">-- Convert a list of 'Pl.TxOutRef' into a 'C.TxInsReference'</span><span>
</span><span id="line-265"></span><span>    </span><span class="annot"><a href="#local-6989586621679639849"><span class="hs-identifier hs-type">txOutRefsToTxInsReference</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../Plutus.V1.Ledger.Tx.html#TxOutRef"><span class="hs-identifier hs-type">Pl.TxOutRef</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenerateTxError"><span class="hs-identifier hs-type">GenerateTxError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Cardano.Api.TxBody.html#TxInsReference"><span class="hs-identifier hs-type">C.TxInsReference</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.TxBody.html#BuildTx"><span class="hs-identifier hs-type">C.BuildTx</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Eras.html#BabbageEra"><span class="hs-identifier hs-type">C.BabbageEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-266"></span><span>    </span><span id="local-6989586621679639849"><span class="annot"><span class="annottext">txOutRefsToTxInsReference :: [TxOutRef]
-&gt; Either GenerateTxError (TxInsReference BuildTx BabbageEra)
</span><a href="#local-6989586621679639849"><span class="hs-identifier hs-var hs-var">txOutRefsToTxInsReference</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-267"></span><span>      </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; GenerateTxError)
-&gt; ([TxIn] -&gt; TxInsReference BuildTx BabbageEra)
-&gt; Either ToCardanoError [TxIn]
-&gt; Either GenerateTxError (TxInsReference BuildTx BabbageEra)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../Data.Bifunctor.html#bimap"><span class="hs-identifier hs-var">bimap</span></a></span><span>
</span><span id="line-268"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; ToCardanoError -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#ToCardanoError"><span class="hs-identifier hs-var">ToCardanoError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txOutRefsToTxInsReference&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-269"></span><span>        </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-270"></span><span>            </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxInsReference BuildTx BabbageEra
forall build era. TxInsReference build era
</span><a href="../Cardano.Api.TxBody.html#TxInsReferenceNone"><span class="hs-identifier hs-var">C.TxInsReferenceNone</span></a></span><span>
</span><span id="line-271"></span><span>            </span><span id="local-6989586621679639702"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621679639702"><span class="hs-identifier hs-var">txIns</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">ReferenceTxInsScriptsInlineDatumsSupportedInEra BabbageEra
-&gt; [TxIn] -&gt; TxInsReference BuildTx BabbageEra
forall era build.
ReferenceTxInsScriptsInlineDatumsSupportedInEra era
-&gt; [TxIn] -&gt; TxInsReference build era
</span><a href="../Cardano.Api.TxBody.html#TxInsReference"><span class="hs-identifier hs-var">C.TxInsReference</span></a></span><span> </span><span class="annot"><span class="annottext">ReferenceTxInsScriptsInlineDatumsSupportedInEra BabbageEra
</span><a href="../Cardano.Api.Script.html#ReferenceTxInsScriptsInlineDatumsInBabbageEra"><span class="hs-identifier hs-var">C.ReferenceTxInsScriptsInlineDatumsInBabbageEra</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621679639702"><span class="hs-identifier hs-var">txIns</span></a></span><span>
</span><span id="line-272"></span><span>        </span><span class="hs-special">)</span><span>
</span><span id="line-273"></span><span>        </span><span class="annot"><span class="annottext">(Either ToCardanoError [TxIn]
 -&gt; Either GenerateTxError (TxInsReference BuildTx BabbageEra))
-&gt; ([TxOutRef] -&gt; Either ToCardanoError [TxIn])
-&gt; [TxOutRef]
-&gt; Either GenerateTxError (TxInsReference BuildTx BabbageEra)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOutRef -&gt; Either ToCardanoError TxIn)
-&gt; [TxOutRef] -&gt; Either ToCardanoError [TxIn]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef -&gt; Either ToCardanoError TxIn
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoTxIn"><span class="hs-identifier hs-var">Pl.toCardanoTxIn</span></a></span><span>
</span><span id="line-274"></span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-comment">-- Convert a list of 'Pl.TxOutRef' into a 'C.TxInsCollateral'</span><span>
</span><span id="line-276"></span><span>    </span><span class="annot"><a href="#local-6989586621679639841"><span class="hs-identifier hs-type">txOutRefsToTxSkelInsCollateral</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="../Plutus.V1.Ledger.Tx.html#TxOutRef"><span class="hs-identifier hs-type">Pl.TxOutRef</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenerateTxError"><span class="hs-identifier hs-type">GenerateTxError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Cardano.Api.TxBody.html#TxInsCollateral"><span class="hs-identifier hs-type">C.TxInsCollateral</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Eras.html#BabbageEra"><span class="hs-identifier hs-type">C.BabbageEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-277"></span><span>    </span><span id="local-6989586621679639841"><span class="annot"><span class="annottext">txOutRefsToTxSkelInsCollateral :: [TxOutRef] -&gt; Either GenerateTxError (TxInsCollateral BabbageEra)
</span><a href="#local-6989586621679639841"><span class="hs-identifier hs-var hs-var">txOutRefsToTxSkelInsCollateral</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-278"></span><span>      </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; GenerateTxError)
-&gt; Either ToCardanoError (TxInsCollateral BabbageEra)
-&gt; Either GenerateTxError (TxInsCollateral BabbageEra)
forall (a :: * -&gt; * -&gt; *) b c d.
ArrowChoice a =&gt;
a b c -&gt; a (Either b d) (Either c d)
</span><a href="../Control.Arrow.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; ToCardanoError -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#ToCardanoError"><span class="hs-identifier hs-var">ToCardanoError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txOutRefsToTxInCollateral&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>        </span><span class="annot"><span class="annottext">(Either ToCardanoError (TxInsCollateral BabbageEra)
 -&gt; Either GenerateTxError (TxInsCollateral BabbageEra))
-&gt; ([TxOutRef]
    -&gt; Either ToCardanoError (TxInsCollateral BabbageEra))
-&gt; [TxOutRef]
-&gt; Either GenerateTxError (TxInsCollateral BabbageEra)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">([TxIn] -&gt; TxInsCollateral BabbageEra)
-&gt; Either ToCardanoError [TxIn]
-&gt; Either ToCardanoError (TxInsCollateral BabbageEra)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../GHC.Base.html#fmap"><span class="hs-identifier hs-var">fmap</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn] -&gt; TxInsCollateral BabbageEra
</span><a href="#local-6989586621679639699"><span class="hs-identifier hs-var">toTxInsCollateral</span></a></span><span>
</span><span id="line-280"></span><span>        </span><span class="annot"><span class="annottext">(Either ToCardanoError [TxIn]
 -&gt; Either ToCardanoError (TxInsCollateral BabbageEra))
-&gt; ([TxOutRef] -&gt; Either ToCardanoError [TxIn])
-&gt; [TxOutRef]
-&gt; Either ToCardanoError (TxInsCollateral BabbageEra)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOutRef -&gt; Either ToCardanoError TxIn)
-&gt; [TxOutRef] -&gt; Either ToCardanoError [TxIn]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutRef -&gt; Either ToCardanoError TxIn
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoTxIn"><span class="hs-identifier hs-var">Pl.toCardanoTxIn</span></a></span><span>
</span><span id="line-281"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-282"></span><span>        </span><span id="local-6989586621679639699"><span class="annot"><span class="annottext">toTxInsCollateral :: [TxIn] -&gt; TxInsCollateral BabbageEra
</span><a href="#local-6989586621679639699"><span class="hs-identifier hs-var hs-var">toTxInsCollateral</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxInsCollateral BabbageEra
forall era. TxInsCollateral era
</span><a href="../Cardano.Api.TxBody.html#TxInsCollateralNone"><span class="hs-identifier hs-var">C.TxInsCollateralNone</span></a></span><span>
</span><span id="line-283"></span><span>        </span><span class="annot"><a href="#local-6989586621679639699"><span class="hs-identifier hs-var">toTxInsCollateral</span></a></span><span> </span><span id="local-6989586621679639697"><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621679639697"><span class="hs-identifier hs-var">ins</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CollateralSupportedInEra BabbageEra
-&gt; [TxIn] -&gt; TxInsCollateral BabbageEra
forall era.
CollateralSupportedInEra era -&gt; [TxIn] -&gt; TxInsCollateral era
</span><a href="../Cardano.Api.TxBody.html#TxInsCollateral"><span class="hs-identifier hs-var">C.TxInsCollateral</span></a></span><span> </span><span class="annot"><span class="annottext">CollateralSupportedInEra BabbageEra
</span><a href="../Cardano.Api.TxBody.html#CollateralInBabbageEra"><span class="hs-identifier hs-var">C.CollateralInBabbageEra</span></a></span><span> </span><span class="annot"><span class="annottext">[TxIn]
</span><a href="#local-6989586621679639697"><span class="hs-identifier hs-var">ins</span></a></span><span>
</span><span id="line-284"></span><span>
</span><span id="line-285"></span><span>    </span><span class="hs-comment">-- Convert the 'TxSkelMints' into a 'TxMintValue'</span><span>
</span><span id="line-286"></span><span>    </span><span class="annot"><a href="#local-6989586621679639832"><span class="hs-identifier hs-type">txSkelMintsToTxMintValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelMints"><span class="hs-identifier hs-type">TxSkelMints</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenerateTxError"><span class="hs-identifier hs-type">GenerateTxError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Cardano.Api.TxBody.html#TxMintValue"><span class="hs-identifier hs-type">C.TxMintValue</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.TxBody.html#BuildTx"><span class="hs-identifier hs-type">C.BuildTx</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Eras.html#BabbageEra"><span class="hs-identifier hs-type">C.BabbageEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>    </span><span id="local-6989586621679639832"><span class="annot"><span class="annottext">txSkelMintsToTxMintValue :: TxSkelMints
-&gt; Either GenerateTxError (TxMintValue BuildTx BabbageEra)
</span><a href="#local-6989586621679639832"><span class="hs-identifier hs-var hs-var">txSkelMintsToTxMintValue</span></a></span></span><span> </span><span id="local-6989586621679639694"><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679639694"><span class="hs-identifier hs-var">mints</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-288"></span><span>      </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679639694"><span class="hs-identifier hs-var">mints</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelMints -&gt; TxSkelMints -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><a href="../GHC.Classes.html#%3D%3D"><span class="hs-operator hs-var">==</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
forall k a. Map k a
</span><a href="../Data.Map.Internal.html#empty"><span class="hs-identifier hs-var">Map.empty</span></a></span><span>
</span><span id="line-289"></span><span>        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">TxMintValue BuildTx BabbageEra
-&gt; Either GenerateTxError (TxMintValue BuildTx BabbageEra)
forall a b. b -&gt; Either a b
</span><a href="../Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">TxMintValue BuildTx BabbageEra
forall build era. TxMintValue build era
</span><a href="../Cardano.Api.TxBody.html#TxMintNone"><span class="hs-identifier hs-var">C.TxMintNone</span></a></span><span>
</span><span id="line-290"></span><span>        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">MultiAssetSupportedInEra BabbageEra
-&gt; Value
-&gt; BuildTxWith
     BuildTx (Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
-&gt; TxMintValue BuildTx BabbageEra
forall era build.
MultiAssetSupportedInEra era
-&gt; Value
-&gt; BuildTxWith build (Map PolicyId (ScriptWitness WitCtxMint era))
-&gt; TxMintValue build era
</span><a href="../Cardano.Api.TxBody.html#TxMintValue"><span class="hs-identifier hs-var">C.TxMintValue</span></a></span><span> </span><span class="annot"><span class="annottext">MultiAssetSupportedInEra BabbageEra
</span><a href="../Cardano.Api.TxBody.html#MultiAssetInBabbageEra"><span class="hs-identifier hs-var">C.MultiAssetInBabbageEra</span></a></span><span> </span><span class="annot"><span class="annottext">(Value
 -&gt; BuildTxWith
      BuildTx (Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
 -&gt; TxMintValue BuildTx BabbageEra)
-&gt; Either GenerateTxError Value
-&gt; Either
     GenerateTxError
     (BuildTxWith
        BuildTx (Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
      -&gt; TxMintValue BuildTx BabbageEra)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Either GenerateTxError Value
</span><a href="#local-6989586621679639689"><span class="hs-identifier hs-var">mintVal</span></a></span><span> </span><span class="annot"><span class="annottext">Either
  GenerateTxError
  (BuildTxWith
     BuildTx (Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
   -&gt; TxMintValue BuildTx BabbageEra)
-&gt; Either
     GenerateTxError
     (BuildTxWith
        BuildTx (Map PolicyId (ScriptWitness WitCtxMint BabbageEra)))
-&gt; Either GenerateTxError (TxMintValue BuildTx BabbageEra)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Map PolicyId (ScriptWitness WitCtxMint BabbageEra)
-&gt; BuildTxWith
     BuildTx (Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
forall a. a -&gt; BuildTxWith BuildTx a
</span><a href="../Cardano.Api.TxBody.html#BuildTxWith"><span class="hs-identifier hs-var">C.BuildTxWith</span></a></span><span> </span><span class="annot"><span class="annottext">(Map PolicyId (ScriptWitness WitCtxMint BabbageEra)
 -&gt; BuildTxWith
      BuildTx (Map PolicyId (ScriptWitness WitCtxMint BabbageEra)))
-&gt; Either
     GenerateTxError
     (Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
-&gt; Either
     GenerateTxError
     (BuildTxWith
        BuildTx (Map PolicyId (ScriptWitness WitCtxMint BabbageEra)))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Either
  GenerateTxError
  (Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
</span><a href="#local-6989586621679639688"><span class="hs-identifier hs-var">witnessMap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-292"></span><span>        </span><span class="annot"><a href="#local-6989586621679639689"><span class="hs-identifier hs-type">mintVal</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenerateTxError"><span class="hs-identifier hs-type">GenerateTxError</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Value.html#Value"><span class="hs-identifier hs-type">C.Value</span></a></span><span>
</span><span id="line-293"></span><span>        </span><span id="local-6989586621679639689"><span class="annot"><span class="annottext">mintVal :: Either GenerateTxError Value
</span><a href="#local-6989586621679639689"><span class="hs-identifier hs-var hs-var">mintVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-294"></span><span>          </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; GenerateTxError)
-&gt; Either ToCardanoError Value -&gt; Either GenerateTxError Value
forall (a :: * -&gt; * -&gt; *) b c d.
ArrowChoice a =&gt;
a b c -&gt; a (Either b d) (Either c d)
</span><a href="../Control.Arrow.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; ToCardanoError -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#ToCardanoError"><span class="hs-identifier hs-var">ToCardanoError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelMintsToTxMintValue, translating minted value&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-295"></span><span>            </span><span class="annot"><span class="annottext">(Either ToCardanoError Value -&gt; Either GenerateTxError Value)
-&gt; (TxSkelMints -&gt; Either ToCardanoError Value)
-&gt; TxSkelMints
-&gt; Either GenerateTxError Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Either ToCardanoError Value
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoValue"><span class="hs-identifier hs-var">Pl.toCardanoValue</span></a></span><span>
</span><span id="line-296"></span><span>            </span><span class="annot"><span class="annottext">(Value -&gt; Either ToCardanoError Value)
-&gt; (TxSkelMints -&gt; Value)
-&gt; TxSkelMints
-&gt; Either ToCardanoError Value
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelMints -&gt; Value
</span><a href="Cooked.Skeleton.html#txSkelMintsValue"><span class="hs-identifier hs-var">txSkelMintsValue</span></a></span><span>
</span><span id="line-297"></span><span>            </span><span class="annot"><span class="annottext">(TxSkelMints -&gt; Either GenerateTxError Value)
-&gt; TxSkelMints -&gt; Either GenerateTxError Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679639694"><span class="hs-identifier hs-var">mints</span></a></span><span>
</span><span id="line-298"></span><span>
</span><span id="line-299"></span><span>        </span><span class="annot"><a href="#local-6989586621679639688"><span class="hs-identifier hs-type">witnessMap</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenerateTxError"><span class="hs-identifier hs-type">GenerateTxError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Value.html#PolicyId"><span class="hs-identifier hs-type">C.PolicyId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Cardano.Api.Script.html#ScriptWitness"><span class="hs-identifier hs-type">C.ScriptWitness</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Script.html#WitCtxMint"><span class="hs-identifier hs-type">C.WitCtxMint</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Eras.html#BabbageEra"><span class="hs-identifier hs-type">C.BabbageEra</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-300"></span><span>        </span><span id="local-6989586621679639688"><span class="annot"><span class="annottext">witnessMap :: Either
  GenerateTxError
  (Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
</span><a href="#local-6989586621679639688"><span class="hs-identifier hs-var hs-var">witnessMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-301"></span><span>          </span><span class="annot"><span class="annottext">([Map PolicyId (ScriptWitness WitCtxMint BabbageEra)]
 -&gt; Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
-&gt; Either
     GenerateTxError
     [Map PolicyId (ScriptWitness WitCtxMint BabbageEra)]
-&gt; Either
     GenerateTxError
     (Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
forall (a :: * -&gt; * -&gt; *) b c d.
ArrowChoice a =&gt;
a b c -&gt; a (Either d b) (Either d c)
</span><a href="../Control.Arrow.html#right"><span class="hs-identifier hs-var">right</span></a></span><span> </span><span class="annot"><span class="annottext">[Map PolicyId (ScriptWitness WitCtxMint BabbageEra)]
-&gt; Map PolicyId (ScriptWitness WitCtxMint BabbageEra)
forall a. Monoid a =&gt; [a] -&gt; a
</span><a href="../GHC.Base.html#mconcat"><span class="hs-identifier hs-var">mconcat</span></a></span><span>
</span><span id="line-302"></span><span>            </span><span class="annot"><span class="annottext">(Either
   GenerateTxError
   [Map PolicyId (ScriptWitness WitCtxMint BabbageEra)]
 -&gt; Either
      GenerateTxError
      (Map PolicyId (ScriptWitness WitCtxMint BabbageEra)))
-&gt; Either
     GenerateTxError
     [Map PolicyId (ScriptWitness WitCtxMint BabbageEra)]
-&gt; Either
     GenerateTxError
     (Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">((Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)
 -&gt; Either
      GenerateTxError
      (Map PolicyId (ScriptWitness WitCtxMint BabbageEra)))
-&gt; [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
-&gt; Either
     GenerateTxError
     [Map PolicyId (ScriptWitness WitCtxMint BabbageEra)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="../Data.Traversable.html#mapM"><span class="hs-identifier hs-var">mapM</span></a></span><span>
</span><span id="line-303"></span><span>              </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621679639685"><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679639685"><span class="hs-identifier hs-var">policy</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679639684"><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679639684"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679639683"><span class="annot"><span class="annottext">TokenName
</span><a href="#local-6989586621679639683"><span class="hs-identifier hs-var">_tName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679639682"><span class="annot"><span class="annottext">Integer
</span><a href="#local-6989586621679639682"><span class="hs-identifier hs-var">_amount</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-304"></span><span>                  </span><span class="annot"><span class="annottext">PolicyId
-&gt; ScriptWitness WitCtxMint BabbageEra
-&gt; Map PolicyId (ScriptWitness WitCtxMint BabbageEra)
forall k a. k -&gt; a -&gt; Map k a
</span><a href="../Data.Map.Internal.html#singleton"><span class="hs-identifier hs-var">Map.singleton</span></a></span><span>
</span><span id="line-305"></span><span>                    </span><span class="annot"><span class="annottext">(PolicyId
 -&gt; ScriptWitness WitCtxMint BabbageEra
 -&gt; Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
-&gt; Either GenerateTxError PolicyId
-&gt; Either
     GenerateTxError
     (ScriptWitness WitCtxMint BabbageEra
      -&gt; Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; GenerateTxError)
-&gt; Either ToCardanoError PolicyId
-&gt; Either GenerateTxError PolicyId
forall (a :: * -&gt; * -&gt; *) b c d.
ArrowChoice a =&gt;
a b c -&gt; a (Either b d) (Either c d)
</span><a href="../Control.Arrow.html#left"><span class="hs-identifier hs-var">left</span></a></span><span>
</span><span id="line-306"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; ToCardanoError -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#ToCardanoError"><span class="hs-identifier hs-var">ToCardanoError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelMintsToTxMintValue, calculating the witness map&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>                      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MintingPolicyHash -&gt; Either ToCardanoError PolicyId
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoPolicyId"><span class="hs-identifier hs-var">Pl.toCardanoPolicyId</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Versioned MintingPolicy -&gt; MintingPolicyHash
</span><a href="../Plutus.Script.Utils.Scripts.html#mintingPolicyHash"><span class="hs-identifier hs-var">Pl.mintingPolicyHash</span></a></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679639685"><span class="hs-identifier hs-var">policy</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-308"></span><span>                    </span><span class="annot"><span class="annottext">Either
  GenerateTxError
  (ScriptWitness WitCtxMint BabbageEra
   -&gt; Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
-&gt; Either GenerateTxError (ScriptWitness WitCtxMint BabbageEra)
-&gt; Either
     GenerateTxError
     (Map PolicyId (ScriptWitness WitCtxMint BabbageEra))
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
-&gt; MintsRedeemer
-&gt; Either GenerateTxError (ScriptWitness WitCtxMint BabbageEra)
</span><a href="#local-6989586621679639678"><span class="hs-identifier hs-var">mkMintWitness</span></a></span><span> </span><span class="annot"><span class="annottext">Versioned MintingPolicy
</span><a href="#local-6989586621679639685"><span class="hs-identifier hs-var">policy</span></a></span><span> </span><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679639684"><span class="hs-identifier hs-var">redeemer</span></a></span><span>
</span><span id="line-309"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-310"></span><span>            </span><span class="annot"><span class="annottext">([(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
 -&gt; Either
      GenerateTxError
      [Map PolicyId (ScriptWitness WitCtxMint BabbageEra)])
-&gt; [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
-&gt; Either
     GenerateTxError
     [Map PolicyId (ScriptWitness WitCtxMint BabbageEra)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
-&gt; [(Versioned MintingPolicy, MintsRedeemer, TokenName, Integer)]
</span><a href="Cooked.Skeleton.html#txSkelMintsToList"><span class="hs-identifier hs-var">txSkelMintsToList</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkelMints
</span><a href="#local-6989586621679639694"><span class="hs-identifier hs-var">mints</span></a></span><span>
</span><span id="line-311"></span><span>
</span><span id="line-312"></span><span>        </span><span class="annot"><a href="#local-6989586621679639678"><span class="hs-identifier hs-type">mkMintWitness</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-313"></span><span>          </span><span class="annot"><a href="../Plutus.Script.Utils.Scripts.html#Versioned"><span class="hs-identifier hs-type">Pl.Versioned</span></a></span><span> </span><span class="annot"><a href="../Plutus.V1.Ledger.Scripts.html#MintingPolicy"><span class="hs-identifier hs-type">Pl.MintingPolicy</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-314"></span><span>          </span><span class="annot"><a href="Cooked.Skeleton.html#MintsRedeemer"><span class="hs-identifier hs-type">MintsRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-315"></span><span>          </span><span class="annot"><a href="../Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span>
</span><span id="line-316"></span><span>            </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenerateTxError"><span class="hs-identifier hs-type">GenerateTxError</span></a></span><span>
</span><span id="line-317"></span><span>            </span><span class="hs-special">(</span><span class="annot"><a href="../Cardano.Api.Script.html#ScriptWitness"><span class="hs-identifier hs-type">C.ScriptWitness</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Script.html#WitCtxMint"><span class="hs-identifier hs-type">C.WitCtxMint</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Eras.html#BabbageEra"><span class="hs-identifier hs-type">C.BabbageEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-318"></span><span>        </span><span id="local-6989586621679639678"><span class="annot"><span class="annottext">mkMintWitness :: Versioned MintingPolicy
-&gt; MintsRedeemer
-&gt; Either GenerateTxError (ScriptWitness WitCtxMint BabbageEra)
</span><a href="#local-6989586621679639678"><span class="hs-identifier hs-var hs-var">mkMintWitness</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Plutus.Script.Utils.Scripts.html#Versioned"><span class="hs-identifier hs-type">Pl.Versioned</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Plutus.V1.Ledger.Scripts.html#MintingPolicy"><span class="hs-identifier hs-type">Pl.MintingPolicy</span></a></span><span> </span><span id="local-6989586621679639675"><span class="annot"><span class="annottext">Script
</span><a href="#local-6989586621679639675"><span class="hs-identifier hs-var">script</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679639674"><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621679639674"><span class="hs-identifier hs-var">version</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621679639673"><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679639673"><span class="hs-identifier hs-var">redeemer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-319"></span><span>          </span><span id="local-6989586621679639672"><span class="annot"><span class="annottext">ScriptDatum WitCtxMint
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxMint BabbageEra
</span><a href="#local-6989586621679639672"><span class="hs-identifier hs-var">scriptWitnessBuilder</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-320"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Language
</span><a href="#local-6989586621679639674"><span class="hs-identifier hs-var">version</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-321"></span><span>              </span><span class="annot"><span class="annottext">Language
</span><a href="../Cardano.Ledger.Alonzo.Language.html#PlutusV1"><span class="hs-identifier hs-var">Pl.PlutusV1</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-322"></span><span>                </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; GenerateTxError)
-&gt; (PlutusScript PlutusScriptV1
    -&gt; ScriptDatum WitCtxMint
    -&gt; ScriptData
    -&gt; ExecutionUnits
    -&gt; ScriptWitness WitCtxMint BabbageEra)
-&gt; Either ToCardanoError (PlutusScript PlutusScriptV1)
-&gt; Either
     GenerateTxError
     (ScriptDatum WitCtxMint
      -&gt; ScriptData
      -&gt; ExecutionUnits
      -&gt; ScriptWitness WitCtxMint BabbageEra)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../Data.Bifunctor.html#bimap"><span class="hs-identifier hs-var">bimap</span></a></span><span>
</span><span id="line-323"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; ToCardanoError -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#ToCardanoError"><span class="hs-identifier hs-var">ToCardanoError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelMintsToTxMintValue, translating to Cardano API PlutusV1 script&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-324"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptLanguageInEra PlutusScriptV1 BabbageEra
-&gt; PlutusScriptVersion PlutusScriptV1
-&gt; PlutusScriptOrReferenceInput PlutusScriptV1
-&gt; ScriptDatum WitCtxMint
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxMint BabbageEra
forall lang era witctx.
ScriptLanguageInEra lang era
-&gt; PlutusScriptVersion lang
-&gt; PlutusScriptOrReferenceInput lang
-&gt; ScriptDatum witctx
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness witctx era
</span><a href="../Cardano.Api.Script.html#PlutusScriptWitness"><span class="hs-identifier hs-var">C.PlutusScriptWitness</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptLanguageInEra PlutusScriptV1 BabbageEra
</span><a href="../Cardano.Api.Script.html#PlutusScriptV1InBabbage"><span class="hs-identifier hs-var">C.PlutusScriptV1InBabbage</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScriptVersion PlutusScriptV1
</span><a href="../Cardano.Api.Script.html#PlutusScriptV1"><span class="hs-identifier hs-var">C.PlutusScriptV1</span></a></span><span> </span><span class="annot"><span class="annottext">(PlutusScriptOrReferenceInput PlutusScriptV1
 -&gt; ScriptDatum WitCtxMint
 -&gt; ScriptData
 -&gt; ExecutionUnits
 -&gt; ScriptWitness WitCtxMint BabbageEra)
-&gt; (PlutusScript PlutusScriptV1
    -&gt; PlutusScriptOrReferenceInput PlutusScriptV1)
-&gt; PlutusScript PlutusScriptV1
-&gt; ScriptDatum WitCtxMint
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxMint BabbageEra
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScript PlutusScriptV1
-&gt; PlutusScriptOrReferenceInput PlutusScriptV1
forall lang. PlutusScript lang -&gt; PlutusScriptOrReferenceInput lang
</span><a href="../Cardano.Api.Script.html#PScript"><span class="hs-identifier hs-var">C.PScript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-325"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AsType (PlutusScript PlutusScriptV1)
-&gt; Script -&gt; Either ToCardanoError (PlutusScript PlutusScriptV1)
forall plutusScript.
SerialiseAsRawBytes plutusScript =&gt;
AsType plutusScript -&gt; Script -&gt; Either ToCardanoError plutusScript
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoPlutusScript"><span class="hs-identifier hs-var">Pl.toCardanoPlutusScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AsType PlutusScriptV1 -&gt; AsType (PlutusScript PlutusScriptV1)
forall lang. AsType lang -&gt; AsType (PlutusScript lang)
</span><a href="../Cardano.Api.Script.html#AsPlutusScript"><span class="hs-identifier hs-var">C.AsPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">AsType PlutusScriptV1
</span><a href="../Cardano.Api.Script.html#AsPlutusScriptV1"><span class="hs-identifier hs-var">C.AsPlutusScriptV1</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Script
</span><a href="#local-6989586621679639675"><span class="hs-identifier hs-var">script</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-326"></span><span>              </span><span class="annot"><span class="annottext">Language
</span><a href="../Cardano.Ledger.Alonzo.Language.html#PlutusV2"><span class="hs-identifier hs-var">Pl.PlutusV2</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-327"></span><span>                </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; GenerateTxError)
-&gt; (PlutusScript PlutusScriptV2
    -&gt; ScriptDatum WitCtxMint
    -&gt; ScriptData
    -&gt; ExecutionUnits
    -&gt; ScriptWitness WitCtxMint BabbageEra)
-&gt; Either ToCardanoError (PlutusScript PlutusScriptV2)
-&gt; Either
     GenerateTxError
     (ScriptDatum WitCtxMint
      -&gt; ScriptData
      -&gt; ExecutionUnits
      -&gt; ScriptWitness WitCtxMint BabbageEra)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../Data.Bifunctor.html#bimap"><span class="hs-identifier hs-var">bimap</span></a></span><span>
</span><span id="line-328"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; ToCardanoError -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#ToCardanoError"><span class="hs-identifier hs-var">ToCardanoError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelMintsToTxMintValue, translating to Cardano API PlutusV2 script&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-329"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ScriptLanguageInEra PlutusScriptV2 BabbageEra
-&gt; PlutusScriptVersion PlutusScriptV2
-&gt; PlutusScriptOrReferenceInput PlutusScriptV2
-&gt; ScriptDatum WitCtxMint
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxMint BabbageEra
forall lang era witctx.
ScriptLanguageInEra lang era
-&gt; PlutusScriptVersion lang
-&gt; PlutusScriptOrReferenceInput lang
-&gt; ScriptDatum witctx
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness witctx era
</span><a href="../Cardano.Api.Script.html#PlutusScriptWitness"><span class="hs-identifier hs-var">C.PlutusScriptWitness</span></a></span><span> </span><span class="annot"><span class="annottext">ScriptLanguageInEra PlutusScriptV2 BabbageEra
</span><a href="../Cardano.Api.Script.html#PlutusScriptV2InBabbage"><span class="hs-identifier hs-var">C.PlutusScriptV2InBabbage</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScriptVersion PlutusScriptV2
</span><a href="../Cardano.Api.Script.html#PlutusScriptV2"><span class="hs-identifier hs-var">C.PlutusScriptV2</span></a></span><span> </span><span class="annot"><span class="annottext">(PlutusScriptOrReferenceInput PlutusScriptV2
 -&gt; ScriptDatum WitCtxMint
 -&gt; ScriptData
 -&gt; ExecutionUnits
 -&gt; ScriptWitness WitCtxMint BabbageEra)
-&gt; (PlutusScript PlutusScriptV2
    -&gt; PlutusScriptOrReferenceInput PlutusScriptV2)
-&gt; PlutusScript PlutusScriptV2
-&gt; ScriptDatum WitCtxMint
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxMint BabbageEra
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">PlutusScript PlutusScriptV2
-&gt; PlutusScriptOrReferenceInput PlutusScriptV2
forall lang. PlutusScript lang -&gt; PlutusScriptOrReferenceInput lang
</span><a href="../Cardano.Api.Script.html#PScript"><span class="hs-identifier hs-var">C.PScript</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-330"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AsType (PlutusScript PlutusScriptV2)
-&gt; Script -&gt; Either ToCardanoError (PlutusScript PlutusScriptV2)
forall plutusScript.
SerialiseAsRawBytes plutusScript =&gt;
AsType plutusScript -&gt; Script -&gt; Either ToCardanoError plutusScript
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoPlutusScript"><span class="hs-identifier hs-var">Pl.toCardanoPlutusScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AsType PlutusScriptV2 -&gt; AsType (PlutusScript PlutusScriptV2)
forall lang. AsType lang -&gt; AsType (PlutusScript lang)
</span><a href="../Cardano.Api.Script.html#AsPlutusScript"><span class="hs-identifier hs-var">C.AsPlutusScript</span></a></span><span> </span><span class="annot"><span class="annottext">AsType PlutusScriptV2
</span><a href="../Cardano.Api.Script.html#AsPlutusScriptV2"><span class="hs-identifier hs-var">C.AsPlutusScriptV2</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Script
</span><a href="#local-6989586621679639675"><span class="hs-identifier hs-var">script</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-331"></span><span>          </span><span class="annot"><span class="annottext">ScriptWitness WitCtxMint BabbageEra
-&gt; Either GenerateTxError (ScriptWitness WitCtxMint BabbageEra)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(ScriptWitness WitCtxMint BabbageEra
 -&gt; Either GenerateTxError (ScriptWitness WitCtxMint BabbageEra))
-&gt; ScriptWitness WitCtxMint BabbageEra
-&gt; Either GenerateTxError (ScriptWitness WitCtxMint BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-332"></span><span>            </span><span class="annot"><span class="annottext">ScriptDatum WitCtxMint
-&gt; ScriptData
-&gt; ExecutionUnits
-&gt; ScriptWitness WitCtxMint BabbageEra
</span><a href="#local-6989586621679639672"><span class="hs-identifier hs-var">scriptWitnessBuilder</span></a></span><span>
</span><span id="line-333"></span><span>              </span><span class="annot"><span class="annottext">ScriptDatum WitCtxMint
</span><a href="../Cardano.Api.Script.html#NoScriptDatumForMint"><span class="hs-identifier hs-var">C.NoScriptDatumForMint</span></a></span><span> </span><span class="hs-comment">-- This seems to be the only well-typed option (?)</span><span>
</span><span id="line-334"></span><span>              </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="#local-6989586621679639673"><span class="hs-identifier hs-var">redeemer</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-335"></span><span>                  </span><span class="annot"><span class="annottext">MintsRedeemer
</span><a href="Cooked.Skeleton.html#NoMintsRedeemer"><span class="hs-identifier hs-var">NoMintsRedeemer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; ScriptData
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoScriptData"><span class="hs-identifier hs-var">Pl.toCardanoScriptData</span></a></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; ScriptData) -&gt; BuiltinData -&gt; ScriptData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">() -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><a href="../PlutusTx.IsData.Class.html#toBuiltinData"><span class="hs-identifier hs-var">Pl.toBuiltinData</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-comment">-- This is also how plutus-apps is doing it: Using no redeemer means using '()' on-chain</span><span>
</span><span id="line-336"></span><span>                  </span><span class="annot"><a href="Cooked.Skeleton.html#SomeMintsRedeemer"><span class="hs-identifier hs-type">SomeMintsRedeemer</span></a></span><span> </span><span id="local-6989586621679639668"><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679639668"><span class="hs-identifier hs-var">red</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; ScriptData
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoScriptData"><span class="hs-identifier hs-var">Pl.toCardanoScriptData</span></a></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; ScriptData) -&gt; BuiltinData -&gt; ScriptData
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">redeemer -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><a href="../PlutusTx.IsData.Class.html#toBuiltinData"><span class="hs-identifier hs-var">Pl.toBuiltinData</span></a></span><span> </span><span class="annot"><span class="annottext">redeemer
</span><a href="#local-6989586621679639668"><span class="hs-identifier hs-var">red</span></a></span><span>
</span><span id="line-337"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>              </span><span class="annot"><span class="annottext">ExecutionUnits
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#zeroExecutionUnits"><span class="hs-identifier hs-var">Pl.zeroExecutionUnits</span></a></span><span> </span><span class="hs-comment">-- This is what plutus-apps does as well, we can't know this yet, no?</span><span>
</span><span id="line-339"></span><span>
</span><span id="line-340"></span><span class="hs-comment">-- Convert a 'TxSkelOut' to the corresponding 'C.TxOut'.</span><span>
</span><span id="line-341"></span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#txSkelOutToCardanoTxOut"><span class="hs-identifier hs-type">txSkelOutToCardanoTxOut</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../Cardano.Node.Emulator.Params.html#Params"><span class="hs-identifier hs-type">Pl.Params</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOut"><span class="hs-identifier hs-type">TxSkelOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span> </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenerateTxError"><span class="hs-identifier hs-type">GenerateTxError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Cardano.Api.TxBody.html#TxOut"><span class="hs-identifier hs-type">C.TxOut</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.TxBody.html#CtxTx"><span class="hs-identifier hs-type">C.CtxTx</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Eras.html#BabbageEra"><span class="hs-identifier hs-type">C.BabbageEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span id="txSkelOutToCardanoTxOut"><span class="annot"><span class="annottext">txSkelOutToCardanoTxOut :: Params
-&gt; TxSkelOut -&gt; Either GenerateTxError (TxOut CtxTx BabbageEra)
</span><a href="Cooked.MockChain.GenerateTx.html#txSkelOutToCardanoTxOut"><span class="hs-identifier hs-var hs-var">txSkelOutToCardanoTxOut</span></a></span></span><span> </span><span id="local-6989586621679639667"><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621679639667"><span class="hs-identifier hs-var">theParams</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Cooked.Skeleton.html#Pays"><span class="hs-identifier hs-type">Pays</span></a></span><span> </span><span id="local-6989586621679639665"><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679639665"><span class="hs-identifier hs-var">output</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-343"></span><span>  </span><span class="annot"><span class="annottext">(ToCardanoError -&gt; GenerateTxError)
-&gt; Either ToCardanoError (TxOut CtxTx BabbageEra)
-&gt; Either GenerateTxError (TxOut CtxTx BabbageEra)
forall (a :: * -&gt; * -&gt; *) b c d.
ArrowChoice a =&gt;
a b c -&gt; a (Either b d) (Either c d)
</span><a href="../Control.Arrow.html#left"><span class="hs-identifier hs-var">left</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; ToCardanoError -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#ToCardanoError"><span class="hs-identifier hs-var">ToCardanoError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;txSkelOutToTxOut&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Either ToCardanoError (TxOut CtxTx BabbageEra)
 -&gt; Either GenerateTxError (TxOut CtxTx BabbageEra))
-&gt; Either ToCardanoError (TxOut CtxTx BabbageEra)
-&gt; Either GenerateTxError (TxOut CtxTx BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span>
</span><span id="line-344"></span><span>    </span><span class="annot"><span class="annottext">AddressInEra BabbageEra
-&gt; TxOutValue BabbageEra
-&gt; TxOutDatum CtxTx BabbageEra
-&gt; ReferenceScript BabbageEra
-&gt; TxOut CtxTx BabbageEra
forall ctx era.
AddressInEra era
-&gt; TxOutValue era
-&gt; TxOutDatum ctx era
-&gt; ReferenceScript era
-&gt; TxOut ctx era
</span><a href="../Cardano.Api.TxBody.html#TxOut"><span class="hs-identifier hs-var">C.TxOut</span></a></span><span>
</span><span id="line-345"></span><span>      </span><span class="annot"><span class="annottext">(AddressInEra BabbageEra
 -&gt; TxOutValue BabbageEra
 -&gt; TxOutDatum CtxTx BabbageEra
 -&gt; ReferenceScript BabbageEra
 -&gt; TxOut CtxTx BabbageEra)
-&gt; Either ToCardanoError (AddressInEra BabbageEra)
-&gt; Either
     ToCardanoError
     (TxOutValue BabbageEra
      -&gt; TxOutDatum CtxTx BabbageEra
      -&gt; ReferenceScript BabbageEra
      -&gt; TxOut CtxTx BabbageEra)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">NetworkId
-&gt; Address -&gt; Either ToCardanoError (AddressInEra BabbageEra)
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoAddressInEra"><span class="hs-identifier hs-var">Pl.toCardanoAddressInEra</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Params -&gt; NetworkId
</span><a href="../Cardano.Node.Emulator.Params.html#pNetworkId"><span class="hs-identifier hs-var hs-var">Pl.pNetworkId</span></a></span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621679639667"><span class="hs-identifier hs-var">theParams</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o -&gt; Address
forall o.
(IsAbstractOutput o, ToCredential (OwnerType o)) =&gt;
o -&gt; Address
</span><a href="Cooked.Output.html#outputAddress"><span class="hs-identifier hs-var">outputAddress</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679639665"><span class="hs-identifier hs-var">output</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-346"></span><span>      </span><span class="annot"><span class="annottext">Either
  ToCardanoError
  (TxOutValue BabbageEra
   -&gt; TxOutDatum CtxTx BabbageEra
   -&gt; ReferenceScript BabbageEra
   -&gt; TxOut CtxTx BabbageEra)
-&gt; Either ToCardanoError (TxOutValue BabbageEra)
-&gt; Either
     ToCardanoError
     (TxOutDatum CtxTx BabbageEra
      -&gt; ReferenceScript BabbageEra -&gt; TxOut CtxTx BabbageEra)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; TxOutValue BabbageEra
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoTxOutValue"><span class="hs-identifier hs-var">Pl.toCardanoTxOutValue</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; TxOutValue BabbageEra)
-&gt; Either ToCardanoError Value
-&gt; Either ToCardanoError (TxOutValue BabbageEra)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Value -&gt; Either ToCardanoError Value
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoValue"><span class="hs-identifier hs-var">Pl.toCardanoValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">o -&gt; Value
forall o. (IsAbstractOutput o, ToValue (ValueType o)) =&gt; o -&gt; Value
</span><a href="Cooked.Output.html#outputValue"><span class="hs-identifier hs-var">outputValue</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679639665"><span class="hs-identifier hs-var">output</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-347"></span><span>      </span><span class="annot"><span class="annottext">Either
  ToCardanoError
  (TxOutDatum CtxTx BabbageEra
   -&gt; ReferenceScript BabbageEra -&gt; TxOut CtxTx BabbageEra)
-&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra)
-&gt; Either
     ToCardanoError
     (ReferenceScript BabbageEra -&gt; TxOut CtxTx BabbageEra)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679639665"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o -&gt; Optic' A_Lens NoIx o TxSkelOutDatum -&gt; TxSkelOutDatum
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><a href="../Optics.Operators.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o TxSkelOutDatum
forall o. IsAbstractOutput o =&gt; Lens' o (DatumType o)
</span><a href="Cooked.Output.html#outputDatumL"><span class="hs-identifier hs-var">outputDatumL</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-348"></span><span>              </span><span class="annot"><span class="annottext">TxSkelOutDatum
</span><a href="Cooked.Skeleton.html#TxSkelOutNoDatum"><span class="hs-identifier hs-var">TxSkelOutNoDatum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx BabbageEra
-&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra)
forall a b. b -&gt; Either a b
</span><a href="../Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx BabbageEra
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoTxOutNoDatum"><span class="hs-identifier hs-var">Pl.toCardanoTxOutNoDatum</span></a></span><span>
</span><span id="line-349"></span><span>              </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatumHash"><span class="hs-identifier hs-type">TxSkelOutDatumHash</span></a></span><span> </span><span id="local-6989586621679639655"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679639655"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DatumHash -&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra)
forall ctx.
DatumHash -&gt; Either ToCardanoError (TxOutDatum ctx BabbageEra)
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoTxOutDatumHash"><span class="hs-identifier hs-var">Pl.toCardanoTxOutDatumHash</span></a></span><span> </span><span class="annot"><span class="annottext">(DatumHash -&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra))
-&gt; (a -&gt; DatumHash)
-&gt; a
-&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Datum -&gt; DatumHash
</span><a href="../Plutus.Script.Utils.Scripts.html#datumHash"><span class="hs-identifier hs-var">Pl.datumHash</span></a></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; DatumHash) -&gt; (a -&gt; Datum) -&gt; a -&gt; DatumHash
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><a href="../Plutus.V1.Ledger.Scripts.html#Datum"><span class="hs-identifier hs-var">Pl.Datum</span></a></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; (a -&gt; BuiltinData) -&gt; a -&gt; Datum
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><a href="../PlutusTx.IsData.Class.html#toBuiltinData"><span class="hs-identifier hs-var">Pl.toBuiltinData</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra))
-&gt; a -&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679639655"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-350"></span><span>              </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutDatum"><span class="hs-identifier hs-type">TxSkelOutDatum</span></a></span><span> </span><span id="local-6989586621679639650"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679639650"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx BabbageEra
-&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra)
forall a b. b -&gt; Either a b
</span><a href="../Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOutDatum CtxTx BabbageEra
 -&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra))
-&gt; (a -&gt; TxOutDatum CtxTx BabbageEra)
-&gt; a
-&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Datum -&gt; TxOutDatum CtxTx BabbageEra
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoTxOutDatumInTx"><span class="hs-identifier hs-var">Pl.toCardanoTxOutDatumInTx</span></a></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; TxOutDatum CtxTx BabbageEra)
-&gt; (a -&gt; Datum) -&gt; a -&gt; TxOutDatum CtxTx BabbageEra
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><a href="../Plutus.V1.Ledger.Scripts.html#Datum"><span class="hs-identifier hs-var">Pl.Datum</span></a></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; (a -&gt; BuiltinData) -&gt; a -&gt; Datum
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><a href="../PlutusTx.IsData.Class.html#toBuiltinData"><span class="hs-identifier hs-var">Pl.toBuiltinData</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra))
-&gt; a -&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679639650"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-351"></span><span>              </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkelOutInlineDatum"><span class="hs-identifier hs-type">TxSkelOutInlineDatum</span></a></span><span> </span><span id="local-6989586621679639647"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679639647"><span class="hs-identifier hs-var">datum</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxOutDatum CtxTx BabbageEra
-&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra)
forall a b. b -&gt; Either a b
</span><a href="../Data.Either.html#Right"><span class="hs-identifier hs-var">Right</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOutDatum CtxTx BabbageEra
 -&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra))
-&gt; (a -&gt; TxOutDatum CtxTx BabbageEra)
-&gt; a
-&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">Datum -&gt; TxOutDatum CtxTx BabbageEra
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoTxOutDatumInline"><span class="hs-identifier hs-var">Pl.toCardanoTxOutDatumInline</span></a></span><span> </span><span class="annot"><span class="annottext">(Datum -&gt; TxOutDatum CtxTx BabbageEra)
-&gt; (a -&gt; Datum) -&gt; a -&gt; TxOutDatum CtxTx BabbageEra
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">BuiltinData -&gt; Datum
</span><a href="../Plutus.V1.Ledger.Scripts.html#Datum"><span class="hs-identifier hs-var">Pl.Datum</span></a></span><span> </span><span class="annot"><span class="annottext">(BuiltinData -&gt; Datum) -&gt; (a -&gt; BuiltinData) -&gt; a -&gt; Datum
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; BuiltinData
forall a. ToData a =&gt; a -&gt; BuiltinData
</span><a href="../PlutusTx.IsData.Class.html#toBuiltinData"><span class="hs-identifier hs-var">Pl.toBuiltinData</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra))
-&gt; a -&gt; Either ToCardanoError (TxOutDatum CtxTx BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621679639647"><span class="hs-identifier hs-var">datum</span></a></span><span>
</span><span id="line-352"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>      </span><span class="annot"><span class="annottext">Either
  ToCardanoError
  (ReferenceScript BabbageEra -&gt; TxOut CtxTx BabbageEra)
-&gt; Either ToCardanoError (ReferenceScript BabbageEra)
-&gt; Either ToCardanoError (TxOut CtxTx BabbageEra)
forall (f :: * -&gt; *) a b. Applicative f =&gt; f (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../GHC.Base.html#%3C%2A%3E"><span class="hs-operator hs-var">&lt;*&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (Versioned Script)
-&gt; Either ToCardanoError (ReferenceScript BabbageEra)
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#toCardanoReferenceScript"><span class="hs-identifier hs-var">Pl.toCardanoReferenceScript</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ReferenceScriptType o -&gt; Versioned Script
forall a. ToScript a =&gt; a -&gt; Versioned Script
</span><a href="Cooked.Output.html#toScript"><span class="hs-identifier hs-var">toScript</span></a></span><span> </span><span class="annot"><span class="annottext">(ReferenceScriptType o -&gt; Versioned Script)
-&gt; Maybe (ReferenceScriptType o) -&gt; Maybe (Versioned Script)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><a href="../Data.Functor.html#%3C%24%3E"><span class="hs-operator hs-var">&lt;$&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">o
</span><a href="#local-6989586621679639665"><span class="hs-identifier hs-var">output</span></a></span><span> </span><span class="annot"><span class="annottext">o
-&gt; Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
-&gt; Maybe (ReferenceScriptType o)
forall k s (is :: IxList) a.
Is k A_Getter =&gt;
s -&gt; Optic' k is s a -&gt; a
</span><a href="../Optics.Operators.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Optic' A_Lens NoIx o (Maybe (ReferenceScriptType o))
forall o.
IsAbstractOutput o =&gt;
Lens' o (Maybe (ReferenceScriptType o))
</span><a href="Cooked.Output.html#outputReferenceScriptL"><span class="hs-identifier hs-var">outputReferenceScriptL</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-354"></span><span>
</span><span id="line-355"></span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#generateTx"><span class="hs-identifier hs-type">generateTx</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-356"></span><span>  </span><span class="hs-comment">-- | Parameters controlling transaction generation.</span><span>
</span><span id="line-357"></span><span>  </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenTxParams"><span class="hs-identifier hs-type">GenTxParams</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-358"></span><span>  </span><span class="hs-comment">-- | Some parameters, coming from the 'MockChain'.</span><span>
</span><span id="line-359"></span><span>  </span><span class="annot"><a href="../Cardano.Node.Emulator.Params.html#Params"><span class="hs-identifier hs-type">Pl.Params</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-360"></span><span>  </span><span class="hs-comment">-- | All of the currently known data on transaction inputs, also coming from the 'MockChain'.</span><span>
</span><span id="line-361"></span><span>  </span><span class="annot"><a href="../Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../Plutus.V1.Ledger.Scripts.html#DatumHash"><span class="hs-identifier hs-type">Pl.DatumHash</span></a></span><span> </span><span class="annot"><a href="../Plutus.V1.Ledger.Scripts.html#Datum"><span class="hs-identifier hs-type">Pl.Datum</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-362"></span><span>  </span><span class="hs-comment">-- | All of the currently known UTxOs which will be used as transaction inputs or referenced, also coming from the 'MockChain'.</span><span>
</span><span id="line-363"></span><span>  </span><span class="annot"><a href="../Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../Plutus.V1.Ledger.Tx.html#TxOutRef"><span class="hs-identifier hs-type">Pl.TxOutRef</span></a></span><span> </span><span class="annot"><a href="../Plutus.V2.Ledger.Tx.html#TxOut"><span class="hs-identifier hs-type">Pl.TxOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-364"></span><span>  </span><span class="hs-comment">-- | All of the currently known validators which protect transaction inputs, also coming from the 'MockChain'.</span><span>
</span><span id="line-365"></span><span>  </span><span class="annot"><a href="../Data.Map.Internal.html#Map"><span class="hs-identifier hs-type">Map</span></a></span><span> </span><span class="annot"><a href="../Plutus.V1.Ledger.Scripts.html#ValidatorHash"><span class="hs-identifier hs-type">Pl.ValidatorHash</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="../Plutus.Script.Utils.Scripts.html#Versioned"><span class="hs-identifier hs-type">Pl.Versioned</span></a></span><span> </span><span class="annot"><a href="../Plutus.V1.Ledger.Scripts.html#Validator"><span class="hs-identifier hs-type">Pl.Validator</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-366"></span><span>  </span><span class="hs-comment">-- | The transaction skeleton to translate.</span><span>
</span><span id="line-367"></span><span>  </span><span class="annot"><a href="Cooked.Skeleton.html#TxSkel"><span class="hs-identifier hs-type">TxSkel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-368"></span><span>  </span><span class="annot"><a href="../Data.Either.html#Either"><span class="hs-identifier hs-type">Either</span></a></span><span>
</span><span id="line-369"></span><span>    </span><span class="annot"><a href="Cooked.MockChain.GenerateTx.html#GenerateTxError"><span class="hs-identifier hs-type">GenerateTxError</span></a></span><span>
</span><span id="line-370"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="../Cardano.Api.Tx.html#Tx"><span class="hs-identifier hs-type">C.Tx</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Eras.html#BabbageEra"><span class="hs-identifier hs-type">C.BabbageEra</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-371"></span><span id="generateTx"><span class="annot"><span class="annottext">generateTx :: GenTxParams
-&gt; Params
-&gt; Map DatumHash Datum
-&gt; Map TxOutRef TxOut
-&gt; Map ValidatorHash (Versioned Validator)
-&gt; TxSkel
-&gt; Either GenerateTxError (Tx BabbageEra)
</span><a href="Cooked.MockChain.GenerateTx.html#generateTx"><span class="hs-identifier hs-var hs-var">generateTx</span></a></span></span><span> </span><span id="local-6989586621679639643"><span class="annot"><span class="annottext">GenTxParams
</span><a href="#local-6989586621679639643"><span class="hs-identifier hs-var">genTxParams</span></a></span></span><span> </span><span id="local-6989586621679639642"><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621679639642"><span class="hs-identifier hs-var">params</span></a></span></span><span> </span><span id="local-6989586621679639641"><span class="annot"><span class="annottext">Map DatumHash Datum
</span><a href="#local-6989586621679639641"><span class="hs-identifier hs-var">datums</span></a></span></span><span> </span><span id="local-6989586621679639640"><span class="annot"><span class="annottext">Map TxOutRef TxOut
</span><a href="#local-6989586621679639640"><span class="hs-identifier hs-var">txOuts</span></a></span></span><span> </span><span id="local-6989586621679639639"><span class="annot"><span class="annottext">Map ValidatorHash (Versioned Validator)
</span><a href="#local-6989586621679639639"><span class="hs-identifier hs-var">validators</span></a></span></span><span> </span><span id="local-6989586621679639638"><span class="annot"><span class="annottext">TxSkel
</span><a href="#local-6989586621679639638"><span class="hs-identifier hs-var">skel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-372"></span><span>  </span><span id="local-6989586621679639637"><span class="annot"><span class="annottext">TxBodyContent BuildTx BabbageEra
</span><a href="#local-6989586621679639637"><span class="hs-identifier hs-var">txBodyContent</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">GenTxParams
-&gt; Params
-&gt; Map DatumHash Datum
-&gt; Map TxOutRef TxOut
-&gt; Map ValidatorHash (Versioned Validator)
-&gt; TxSkel
-&gt; Either GenerateTxError (TxBodyContent BuildTx BabbageEra)
</span><a href="Cooked.MockChain.GenerateTx.html#generateTxBodyContent"><span class="hs-identifier hs-var">generateTxBodyContent</span></a></span><span> </span><span class="annot"><span class="annottext">GenTxParams
</span><a href="#local-6989586621679639643"><span class="hs-identifier hs-var">genTxParams</span></a></span><span> </span><span class="annot"><span class="annottext">Params
</span><a href="#local-6989586621679639642"><span class="hs-identifier hs-var">params</span></a></span><span> </span><span class="annot"><span class="annottext">Map DatumHash Datum
</span><a href="#local-6989586621679639641"><span class="hs-identifier hs-var">datums</span></a></span><span> </span><span class="annot"><span class="annottext">Map TxOutRef TxOut
</span><a href="#local-6989586621679639640"><span class="hs-identifier hs-var">txOuts</span></a></span><span> </span><span class="annot"><span class="annottext">Map ValidatorHash (Versioned Validator)
</span><a href="#local-6989586621679639639"><span class="hs-identifier hs-var">validators</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel
</span><a href="#local-6989586621679639638"><span class="hs-identifier hs-var">skel</span></a></span><span>
</span><span id="line-373"></span><span>  </span><span id="local-6989586621679639636"><span class="annot"><span class="annottext">Tx BabbageEra
</span><a href="#local-6989586621679639636"><span class="hs-identifier hs-var">cardanoTxUnsigned</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-374"></span><span>    </span><span class="annot"><span class="annottext">(TxBodyError -&gt; GenerateTxError)
-&gt; (TxBody BabbageEra -&gt; Tx BabbageEra)
-&gt; Either TxBodyError (TxBody BabbageEra)
-&gt; Either GenerateTxError (Tx BabbageEra)
forall (p :: * -&gt; * -&gt; *) a b c d.
Bifunctor p =&gt;
(a -&gt; b) -&gt; (c -&gt; d) -&gt; p a c -&gt; p b d
</span><a href="../Data.Bifunctor.html#bimap"><span class="hs-identifier hs-var">bimap</span></a></span><span>
</span><span id="line-375"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; TxBodyError -&gt; GenerateTxError
</span><a href="Cooked.MockChain.GenerateTx.html#TxBodyError"><span class="hs-identifier hs-var">TxBodyError</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;generateTx: &quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-376"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(TxBody BabbageEra -&gt; [KeyWitness BabbageEra] -&gt; Tx BabbageEra)
-&gt; [KeyWitness BabbageEra] -&gt; TxBody BabbageEra -&gt; Tx BabbageEra
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><a href="../GHC.Base.html#flip"><span class="hs-identifier hs-var">flip</span></a></span><span> </span><span class="annot"><span class="annottext">TxBody BabbageEra -&gt; [KeyWitness BabbageEra] -&gt; Tx BabbageEra
forall era. TxBody era -&gt; [KeyWitness era] -&gt; Tx era
</span><a href="../Cardano.Api.Tx.html#Tx"><span class="hs-identifier hs-var">C.Tx</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>      </span><span class="hs-comment">-- WARN 'makeTransactionBody' will be deprecated in newer versions of</span><span>
</span><span id="line-378"></span><span>      </span><span class="hs-comment">-- cardano-api</span><span>
</span><span id="line-379"></span><span>      </span><span class="hs-comment">-- The new name (which is more fitting as well) is</span><span>
</span><span id="line-380"></span><span>      </span><span class="hs-comment">-- 'createAndValidateTransactionBody'.</span><span>
</span><span id="line-381"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxBodyContent BuildTx BabbageEra
-&gt; Either TxBodyError (TxBody BabbageEra)
forall era.
IsCardanoEra era =&gt;
TxBodyContent BuildTx era -&gt; Either TxBodyError (TxBody era)
</span><a href="../Cardano.Api.TxBody.html#makeTransactionBody"><span class="hs-identifier hs-var">C.makeTransactionBody</span></a></span><span> </span><span class="annot"><span class="annottext">TxBodyContent BuildTx BabbageEra
</span><a href="#local-6989586621679639637"><span class="hs-identifier hs-var">txBodyContent</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-382"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679639632"><span class="annot"><span class="annottext">cardanoTxSigned :: Tx BabbageEra
</span><a href="#local-6989586621679639632"><span class="hs-identifier hs-var hs-var">cardanoTxSigned</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Tx BabbageEra -&gt; Wallet -&gt; Tx BabbageEra)
-&gt; Tx BabbageEra -&gt; [Wallet] -&gt; Tx BabbageEra
forall (t :: * -&gt; *) b a.
Foldable t =&gt;
(b -&gt; a -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><a href="../Data.Foldable.html#foldl%27"><span class="hs-identifier hs-var">foldl'</span></a></span><span> </span><span class="annot"><span class="annottext">Tx BabbageEra -&gt; Wallet -&gt; Tx BabbageEra
</span><a href="#local-6989586621679639630"><span class="hs-identifier hs-var">txAddSignature</span></a></span><span> </span><span class="annot"><span class="annottext">Tx BabbageEra
</span><a href="#local-6989586621679639636"><span class="hs-identifier hs-var">cardanoTxUnsigned</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxSkel -&gt; [Wallet]
</span><a href="Cooked.Skeleton.html#txSkelSigners"><span class="hs-identifier hs-var hs-var">txSkelSigners</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel
</span><a href="#local-6989586621679639638"><span class="hs-identifier hs-var">skel</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>  </span><span class="annot"><span class="annottext">Tx BabbageEra -&gt; Either GenerateTxError (Tx BabbageEra)
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><a href="../GHC.Base.html#return"><span class="hs-identifier hs-var">return</span></a></span><span> </span><span class="annot"><span class="annottext">(Tx BabbageEra -&gt; Either GenerateTxError (Tx BabbageEra))
-&gt; Tx BabbageEra -&gt; Either GenerateTxError (Tx BabbageEra)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">[RawModTx] -&gt; Tx BabbageEra -&gt; Tx BabbageEra
</span><a href="Cooked.Skeleton.html#applyRawModOnBalancedTx"><span class="hs-identifier hs-var">applyRawModOnBalancedTx</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TxOpts -&gt; [RawModTx]
</span><a href="Cooked.Skeleton.html#txOptUnsafeModTx"><span class="hs-identifier hs-var hs-var">txOptUnsafeModTx</span></a></span><span> </span><span class="annot"><span class="annottext">(TxOpts -&gt; [RawModTx])
-&gt; (TxSkel -&gt; TxOpts) -&gt; TxSkel -&gt; [RawModTx]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><a href="../GHC.Base.html#."><span class="hs-operator hs-var">.</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel -&gt; TxOpts
</span><a href="Cooked.Skeleton.html#txSkelOpts"><span class="hs-identifier hs-var hs-var">txSkelOpts</span></a></span><span> </span><span class="annot"><span class="annottext">(TxSkel -&gt; [RawModTx]) -&gt; TxSkel -&gt; [RawModTx]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><a href="../GHC.Base.html#%24"><span class="hs-operator hs-var">$</span></a></span><span> </span><span class="annot"><span class="annottext">TxSkel
</span><a href="#local-6989586621679639638"><span class="hs-identifier hs-var">skel</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Tx BabbageEra
</span><a href="#local-6989586621679639632"><span class="hs-identifier hs-var">cardanoTxSigned</span></a></span><span>
</span><span id="line-384"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-385"></span><span>    </span><span class="annot"><a href="#local-6989586621679639630"><span class="hs-identifier hs-type">txAddSignature</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="../Cardano.Api.Tx.html#Tx"><span class="hs-identifier hs-type">C.Tx</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Eras.html#BabbageEra"><span class="hs-identifier hs-type">C.BabbageEra</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Cooked.Wallet.html#Wallet"><span class="hs-identifier hs-type">Wallet</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="../Cardano.Api.Tx.html#Tx"><span class="hs-identifier hs-type">C.Tx</span></a></span><span> </span><span class="annot"><a href="../Cardano.Api.Eras.html#BabbageEra"><span class="hs-identifier hs-type">C.BabbageEra</span></a></span><span>
</span><span id="line-386"></span><span>    </span><span id="local-6989586621679639630"><span class="annot"><span class="annottext">txAddSignature :: Tx BabbageEra -&gt; Wallet -&gt; Tx BabbageEra
</span><a href="#local-6989586621679639630"><span class="hs-identifier hs-var hs-var">txAddSignature</span></a></span></span><span> </span><span id="local-6989586621679639626"><span class="annot"><span class="annottext">Tx BabbageEra
</span><a href="#local-6989586621679639626"><span class="hs-identifier hs-var">tx</span></a></span></span><span> </span><span id="local-6989586621679639625"><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621679639625"><span class="hs-identifier hs-var">wal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">PrivateKey -&gt; CardanoTx -&gt; CardanoTx
</span><a href="../Ledger.Tx.html#addCardanoTxSignature"><span class="hs-identifier hs-var">Ledger.addCardanoTxSignature</span></a></span><span>
</span><span id="line-387"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Wallet -&gt; PrivateKey
</span><a href="Cooked.Wallet.html#walletSK"><span class="hs-identifier hs-var">walletSK</span></a></span><span> </span><span class="annot"><span class="annottext">Wallet
</span><a href="#local-6989586621679639625"><span class="hs-identifier hs-var">wal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-388"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Tx BabbageEra -&gt; EraInMode BabbageEra CardanoMode -&gt; CardanoTx
forall era.
IsCardanoEra era =&gt;
Tx era -&gt; EraInMode era CardanoMode -&gt; CardanoTx
</span><a href="../Ledger.Tx.CardanoAPI.Internal.html#CardanoTx"><span class="hs-identifier hs-var">Ledger.CardanoTx</span></a></span><span> </span><span class="annot"><span class="annottext">Tx BabbageEra
</span><a href="#local-6989586621679639626"><span class="hs-identifier hs-var">tx</span></a></span><span> </span><span class="annot"><span class="annottext">EraInMode BabbageEra CardanoMode
</span><a href="../Cardano.Api.Modes.html#BabbageEraInCardanoMode"><span class="hs-identifier hs-var">C.BabbageEraInCardanoMode</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-389"></span><span>      </span><span class="annot"><a href="../Ledger.Tx.CardanoAPI.Internal.html#CardanoTx"><span class="hs-identifier hs-type">Ledger.CardanoTx</span></a></span><span> </span><span id="local-6989586621679639620"><span class="annot"><span class="annottext">Tx era
</span><a href="#local-6989586621679639620"><span class="hs-identifier hs-var">tx'</span></a></span></span><span> </span><span class="annot"><span class="annottext">EraInMode era CardanoMode
</span><a href="../Cardano.Api.Modes.html#BabbageEraInCardanoMode"><span class="hs-identifier hs-var">C.BabbageEraInCardanoMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Tx era
Tx BabbageEra
</span><a href="#local-6989586621679639620"><span class="hs-identifier hs-var">tx'</span></a></span><span>
</span><span id="line-390"></span><span>      </span><span class="hs-comment">-- Looking at the implementation of Ledger.addCardanoTxSignature:</span><span>
</span><span id="line-391"></span><span>      </span><span class="hs-comment">-- It never changes the constructor used, so the above branch</span><span>
</span><span id="line-392"></span><span>      </span><span class="hs-comment">-- will never happen</span><span>
</span><span id="line-393"></span><span>      </span><span class="annot"><span class="annottext">CardanoTx
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Tx BabbageEra
forall a. HasCallStack =&gt; String -&gt; a
</span><a href="../GHC.Err.html#error"><span class="hs-identifier hs-var">error</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;generateTx: expected CardanoTx&quot;</span></span><span>
</span><span id="line-394"></span></pre></body></html>