<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Cooked.MockChain.Balancing</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">cooked-validators</span><ul class="links" id="page-menu"><li><a href="src/Cooked.MockChain.Balancing.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Cooked.MockChain.Balancing</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module handles auto-balancing of transaction skeleton. This includes
 computation of fees and collaterals because their computation cannot be
 separated from the balancing.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><a href="#v:balanceTxSkel">balanceTxSkel</a> :: <a href="Cooked-MockChain-BlockChain.html#t:MonadBlockChainBalancing" title="Cooked.MockChain.BlockChain">MonadBlockChainBalancing</a> m =&gt; <a href="Cooked-Skeleton.html#t:TxSkel" title="Cooked.Skeleton">TxSkel</a> -&gt; m (<a href="Cooked-Skeleton.html#t:TxSkel" title="Cooked.Skeleton">TxSkel</a>, <a href="Cooked-MockChain-BlockChain.html#t:Fee" title="Cooked.MockChain.BlockChain">Fee</a>, <a href="Cooked-MockChain-BlockChain.html#t:Collaterals" title="Cooked.MockChain.BlockChain">Collaterals</a>)</li><li class="src short"><a href="#v:getMinAndMaxFee">getMinAndMaxFee</a> :: <a href="Cooked-MockChain-BlockChain.html#t:MonadBlockChainBalancing" title="Cooked.MockChain.BlockChain">MonadBlockChainBalancing</a> m =&gt; <a href="Cooked-MockChain-BlockChain.html#t:Fee" title="Cooked.MockChain.BlockChain">Fee</a> -&gt; m (<a href="Cooked-MockChain-BlockChain.html#t:Fee" title="Cooked.MockChain.BlockChain">Fee</a>, <a href="Cooked-MockChain-BlockChain.html#t:Fee" title="Cooked.MockChain.BlockChain">Fee</a>)</li><li class="src short"><a href="#v:estimateTxSkelFee">estimateTxSkelFee</a> :: <a href="Cooked-MockChain-BlockChain.html#t:MonadBlockChainBalancing" title="Cooked.MockChain.BlockChain">MonadBlockChainBalancing</a> m =&gt; <a href="Cooked-Skeleton.html#t:TxSkel" title="Cooked.Skeleton">TxSkel</a> -&gt; <a href="Cooked-MockChain-BlockChain.html#t:Fee" title="Cooked.MockChain.BlockChain">Fee</a> -&gt; <a href="Cooked-MockChain-BlockChain.html#t:Collaterals" title="Cooked.MockChain.BlockChain">Collaterals</a> -&gt; m <a href="Cooked-MockChain-BlockChain.html#t:Fee" title="Cooked.MockChain.BlockChain">Fee</a></li></ul></details></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:balanceTxSkel" class="def">balanceTxSkel</a> :: <a href="Cooked-MockChain-BlockChain.html#t:MonadBlockChainBalancing" title="Cooked.MockChain.BlockChain">MonadBlockChainBalancing</a> m =&gt; <a href="Cooked-Skeleton.html#t:TxSkel" title="Cooked.Skeleton">TxSkel</a> -&gt; m (<a href="Cooked-Skeleton.html#t:TxSkel" title="Cooked.Skeleton">TxSkel</a>, <a href="Cooked-MockChain-BlockChain.html#t:Fee" title="Cooked.MockChain.BlockChain">Fee</a>, <a href="Cooked-MockChain-BlockChain.html#t:Collaterals" title="Cooked.MockChain.BlockChain">Collaterals</a>) <a href="src/Cooked.MockChain.Balancing.html#balanceTxSkel" class="link">Source</a> <a href="#v:balanceTxSkel" class="selflink">#</a></p><div class="doc"><p>This is the main entry point of our balancing mechanism. This function
 takes a skeleton and returns a (possibly) balanced skeleton alongside the
 associated fee, collateral inputs and return collateral user, which might
 be empty when no script is involved in the transaction. The options from the
 skeleton control whether it should be balanced, and how to compute its
 associated elements.</p></div></div><div class="top"><p class="src"><a id="v:getMinAndMaxFee" class="def">getMinAndMaxFee</a> :: <a href="Cooked-MockChain-BlockChain.html#t:MonadBlockChainBalancing" title="Cooked.MockChain.BlockChain">MonadBlockChainBalancing</a> m =&gt; <a href="Cooked-MockChain-BlockChain.html#t:Fee" title="Cooked.MockChain.BlockChain">Fee</a> -&gt; m (<a href="Cooked-MockChain-BlockChain.html#t:Fee" title="Cooked.MockChain.BlockChain">Fee</a>, <a href="Cooked-MockChain-BlockChain.html#t:Fee" title="Cooked.MockChain.BlockChain">Fee</a>) <a href="src/Cooked.MockChain.Balancing.html#getMinAndMaxFee" class="link">Source</a> <a href="#v:getMinAndMaxFee" class="selflink">#</a></p><div class="doc"><p>This computes the minimum and maximum possible fee a transaction can cost
 based on the current protocol parameters and its number of scripts.</p></div></div><div class="top"><p class="src"><a id="v:estimateTxSkelFee" class="def">estimateTxSkelFee</a> :: <a href="Cooked-MockChain-BlockChain.html#t:MonadBlockChainBalancing" title="Cooked.MockChain.BlockChain">MonadBlockChainBalancing</a> m =&gt; <a href="Cooked-Skeleton.html#t:TxSkel" title="Cooked.Skeleton">TxSkel</a> -&gt; <a href="Cooked-MockChain-BlockChain.html#t:Fee" title="Cooked.MockChain.BlockChain">Fee</a> -&gt; <a href="Cooked-MockChain-BlockChain.html#t:Collaterals" title="Cooked.MockChain.BlockChain">Collaterals</a> -&gt; m <a href="Cooked-MockChain-BlockChain.html#t:Fee" title="Cooked.MockChain.BlockChain">Fee</a> <a href="src/Cooked.MockChain.Balancing.html#estimateTxSkelFee" class="link">Source</a> <a href="#v:estimateTxSkelFee" class="selflink">#</a></p><div class="doc"><p>This function was originally inspired by
 <a href="https://github.com/input-output-hk/plutus-apps/blob/d4255f05477fd8477ee9673e850ebb9ebb8c9657/plutus-ledger/src/Ledger/Fee.hs#L19">https://github.com/input-output-hk/plutus-apps/blob/d4255f05477fd8477ee9673e850ebb9ebb8c9657/plutus-ledger/src/Ledger/Fee.hs#L19</a></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>